import { createRequire } from "module"; import url from "url"; const require = createRequire(import.meta.url); const __filename = url.fileURLToPath(import.meta.url); const __dirname = url.fileURLToPath(new URL(".", import.meta.url));
var dse=Object.create;var Ym=Object.defineProperty;var hse=Object.getOwnPropertyDescriptor;var pse=Object.getOwnPropertyNames;var mse=Object.getPrototypeOf,gse=Object.prototype.hasOwnProperty;var A=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var yse=(t,e)=>()=>(t&&(e=t(t=0)),e);var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_se=(t,e)=>{for(var r in e)Ym(t,r,{get:e[r],enumerable:!0})},$x=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pse(e))!gse.call(t,i)&&i!==r&&Ym(t,i,{get:()=>e[i],enumerable:!(n=hse(e,i))||n.enumerable});return t};var Qf=(t,e,r)=>(r=t!=null?dse(mse(t)):{},$x(e||!t||!t.__esModule?Ym(r,"default",{value:t,enumerable:!0}):r,t)),Bw=t=>$x(Ym({},"__esModule",{value:!0}),t);var Zm={};_se(Zm,{__addDisposableResource:()=>Kx,__assign:()=>Jm,__asyncDelegator:()=>Fx,__asyncGenerator:()=>Dx,__asyncValues:()=>Ux,__await:()=>Eu,__awaiter:()=>kx,__classPrivateFieldGet:()=>zx,__classPrivateFieldIn:()=>Gx,__classPrivateFieldSet:()=>Wx,__createBinding:()=>Xm,__decorate:()=>Ax,__disposeResources:()=>Yx,__esDecorate:()=>bse,__exportStar:()=>xx,__extends:()=>Ox,__generator:()=>qx,__importDefault:()=>Hx,__importStar:()=>Vx,__makeTemplateObject:()=>Bx,__metadata:()=>Cx,__param:()=>Nx,__propKey:()=>wse,__read:()=>Hw,__rest:()=>Ix,__runInitializers:()=>vse,__setFunctionName:()=>Ese,__spread:()=>jx,__spreadArray:()=>Lx,__spreadArrays:()=>Mx,__values:()=>Qm,default:()=>Tse});function Ox(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Ix(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ax(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Nx(t,e){return function(r,n){e(r,n,t)}}function bse(t,e,r,n,i,s){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,d=r.length-1;d>=0;d--){var p={};for(var m in n)p[m]=m==="access"?{}:n[m];for(var m in n.access)p.access[m]=n.access[m];p.addInitializer=function(_){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(_||null))};var y=(0,r[d])(a==="accessor"?{get:c.get,set:c.set}:c[l],p);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=o(y.get))&&(c.get=f),(f=o(y.set))&&(c.set=f),(f=o(y.init))&&i.unshift(f)}else(f=o(y))&&(a==="field"?i.unshift(f):c[l]=f)}u&&Object.defineProperty(u,n.name,c),h=!0}function vse(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function wse(t){return typeof t=="symbol"?t:"".concat(t)}function Ese(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Cx(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function kx(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})}function qx(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function xx(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xm(e,t,r)}function Qm(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hw(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function jx(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hw(arguments[e]));return t}function Mx(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Lx(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Eu(t){return this instanceof Eu?(this.v=t,this):new Eu(t)}function Dx(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(d){return new Promise(function(p,m){s.push([h,d,p,m])>1||a(h,d)})})}function a(h,d){try{l(n[h](d))}catch(p){f(s[0][3],p)}}function l(h){h.value instanceof Eu?Promise.resolve(h.value.v).then(u,c):f(s[0][2],h)}function u(h){a("next",h)}function c(h){a("throw",h)}function f(h,d){h(d),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Fx(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Eu(t[i](o)),done:!1}:s?s(o):o}:s}}function Ux(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Qm=="function"?Qm(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}function Bx(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Vx(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Xm(e,t,r);return Sse(e,t),e}function Hx(t){return t&&t.__esModule?t:{default:t}}function zx(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Wx(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function Gx(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Kx(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function Yx(t){function e(n){t.error=t.hasError?new Rse(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(s){return e(s),r()})}catch(s){e(s)}}if(t.hasError)throw t.error}return r()}var Vw,Jm,Xm,Sse,Rse,Tse,eg=yse(()=>{"use strict";Vw=function(t,e){return Vw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Vw(t,e)};Jm=function(){return Jm=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Jm.apply(this,arguments)};Xm=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};Sse=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};Rse=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};Tse={__extends:Ox,__assign:Jm,__rest:Ix,__decorate:Ax,__param:Nx,__metadata:Cx,__awaiter:kx,__generator:qx,__createBinding:Xm,__exportStar:xx,__values:Qm,__read:Hw,__spread:jx,__spreadArrays:Mx,__spreadArray:Lx,__await:Eu,__asyncGenerator:Dx,__asyncDelegator:Fx,__asyncValues:Ux,__makeTemplateObject:Bx,__importStar:Vx,__importDefault:Hx,__classPrivateFieldGet:zx,__classPrivateFieldSet:Wx,__classPrivateFieldIn:Gx,__addDisposableResource:Kx,__disposeResources:Yx}});var Xf=g(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.EnvMissingError=Su.EnvError=void 0;var Jx=(eg(),Bw(Zm)),Pse=function(t){Jx.__extends(e,t);function e(r){var n=this.constructor,i=t.call(this,r)||this;return Object.setPrototypeOf(i,n.prototype),Error.captureStackTrace(i,e),i.name=i.constructor.name,i}return e}(TypeError);Su.EnvError=Pse;var $se=function(t){Jx.__extends(e,t);function e(r){var n=this.constructor,i=t.call(this,r)||this;return Object.setPrototypeOf(i,n.prototype),Error.captureStackTrace(i,e),i.name=i.constructor.name,i}return e}(ReferenceError);Su.EnvMissingError=$se});var Gw=g(Ma=>{"use strict";var zw;Object.defineProperty(Ma,"__esModule",{value:!0});Ma.defaultReporter=Ma.envalidErrorFormatter=void 0;var Ose=Xf(),Xx=console.error.bind(console),Zx=!!(typeof process=="object"&&(!((zw=process==null?void 0:process.versions)===null||zw===void 0)&&zw.node)),Ww=function(t){return function(e){return Zx?"\x1B[".concat(t,"m").concat(e,"\x1B[0m"):e}},Ru={blue:Ww("34"),white:Ww("37"),yellow:Ww("33")},Qx=Ru.white("================================"),Ise=function(t,e){e===void 0&&(e=Xx);for(var r=[],n=[],i=0,s=Object.entries(t);i<s.length;i++){var o=s[i],a=o[0],l=o[1];l instanceof Ose.EnvMissingError?r.push("    ".concat(Ru.blue(a),": ").concat(l.message||"(required)")):n.push("    ".concat(Ru.blue(a),": ").concat(l?.message||"(invalid format)"))}n.length&&n.unshift(" ".concat(Ru.yellow("Invalid")," environment variables:")),r.length&&r.unshift(" ".concat(Ru.yellow("Missing")," environment variables:"));var u=[Qx,n.sort().join(`
`),r.sort().join(`
`),Qx].filter(function(c){return!!c}).join(`
`);e(u)};Ma.envalidErrorFormatter=Ise;var Ase=function(t,e){var r=t.errors,n=r===void 0?{}:r,i=e===void 0?{logger:Xx}:e,s=i.onError,o=i.logger;if(Object.keys(n).length)if((0,Ma.envalidErrorFormatter)(n,o),s)s(n);else if(Zx)o(Ru.yellow(`
 Exiting with error code 1`)),process.exit(1);else throw new TypeError("Environment validation failed")};Ma.defaultReporter=Ase});var rj=g(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.getSanitizedEnv=La.testOnlySymbol=void 0;var Zf=Xf(),Nse=Gw();La.testOnlySymbol=Symbol("envalid - test only");function Cse(t){var e=t.spec,r=t.name,n=t.rawValue;if(typeof e._parse!="function")throw new Zf.EnvError('Invalid spec for "'.concat(r,'"'));var i=e._parse(n);if(e.choices)if(Array.isArray(e.choices)){if(!e.choices.includes(i))throw new Zf.EnvError('Value "'.concat(i,'" not in choices [').concat(e.choices,"]"))}else throw new TypeError('"choices" must be an array (in spec for "'.concat(r,'")'));if(i==null)throw new Zf.EnvError('Invalid value for env var "'.concat(r,'"'));return i}function ej(t){var e=t.example?' (eg. "'.concat(t.example,'")'):"",r=t.docs?". See ".concat(t.docs):"";return"".concat(t.desc).concat(e).concat(r)}var tj=function(t,e){return t[e]},kse=function(t){return t===La.testOnlySymbol};function qse(t,e,r){r===void 0&&(r={});for(var n={},i=e,s={},o=Object.keys(i),a=tj(t,"NODE_ENV"),l=0,u=o;l<u.length;l++){var c=u[l],f=i[c],h=tj(t,c);if(h===void 0){var d=a&&a!=="production"&&f.hasOwnProperty("devDefault");if(d){if(n[c]=f.devDefault,kse(f.devDefault)&&a!="test")throw new Zf.EnvMissingError(ej(f));continue}if("default"in f){n[c]=f.default;continue}}try{if(h===void 0)throw n[c]=void 0,new Zf.EnvMissingError(ej(f));n[c]=Cse({name:c,spec:f,rawValue:h})}catch(m){if(r?.reporter===null)throw m;m instanceof Error&&(s[c]=m)}}var p=r?.reporter||Nse.defaultReporter;return p({errors:s,env:n}),n}La.getSanitizedEnv=qse});var Kw=g(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.applyDefaultMiddleware=Di.accessorMiddleware=Di.strictProxyMiddleware=void 0;var xse=function(t,e,r){r===void 0&&(r={});var n=r.extraInspectables,i=n===void 0?[]:n,s=["length","inspect","hasOwnProperty","toJSON",Symbol.toStringTag,Symbol.iterator,"asymmetricMatch","nodeType","$$typeof","then","__esModule"],o=["Symbol(util.inspect.custom)","Symbol(nodejs.util.inspect.custom)"];return new Proxy(t,{get:function(a,l){var u;if(s.includes(l)||o.includes(l.toString())||i.includes(l))return a[l];var c=a.hasOwnProperty(l);if(!c)throw typeof e=="object"&&(!((u=e?.hasOwnProperty)===null||u===void 0)&&u.call(e,l))?new ReferenceError("[envalid] Env var ".concat(l," was accessed but not validated. This var is set in the environment; please add an envalid validator for it.")):new ReferenceError("[envalid] Env var not found: ".concat(l));return a[l]},set:function(a,l){throw new TypeError("[envalid] Attempt to mutate environment value: ".concat(l))}})};Di.strictProxyMiddleware=xse;var jse=function(t,e){var r=t.NODE_ENV||e.NODE_ENV,n=!r||r==="production";return Object.defineProperties(t,{isDevelopment:{value:r==="development"},isDev:{value:r==="development"},isProduction:{value:n},isProd:{value:n},isTest:{value:r==="test"}}),t};Di.accessorMiddleware=jse;var Mse=function(t,e){return(0,Di.strictProxyMiddleware)((0,Di.accessorMiddleware)(t,e),e)};Di.applyDefaultMiddleware=Mse});var nj=g(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.testOnly=bo.customCleanEnv=bo.cleanEnv=void 0;var Yw=rj(),Lse=Kw();function Dse(t,e,r){r===void 0&&(r={});var n=(0,Yw.getSanitizedEnv)(t,e,r);return Object.freeze((0,Lse.applyDefaultMiddleware)(n,t))}bo.cleanEnv=Dse;function Fse(t,e,r,n){n===void 0&&(n={});var i=(0,Yw.getSanitizedEnv)(t,e,n);return Object.freeze(r(i,t))}bo.customCleanEnv=Fse;var Use=function(t){return process.env.NODE_ENV==="test"?t:Yw.testOnlySymbol};bo.testOnly=Use});var sj=g(ij=>{"use strict";Object.defineProperty(ij,"__esModule",{value:!0})});var Qw=g(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.makeStructuredValidator=vo.makeExactValidator=vo.makeValidator=void 0;var oj=(eg(),Bw(Zm)),Jw=function(t){return function(e){return oj.__assign(oj.__assign({},e),{_parse:t})}},Bse=function(t){return Jw(t)};vo.makeValidator=Bse;var Vse=function(t){return Jw(t)};vo.makeExactValidator=Vse;var Hse=function(t){return Jw(t)};vo.makeStructuredValidator=Hse});var aj=g(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.json=Kt.url=Kt.port=Kt.host=Kt.email=Kt.str=Kt.num=Kt.bool=void 0;var wo=Xf(),Eo=Qw(),zse=function(t){if(!t.length)return!1;for(var e=t.split("."),r=void 0,n=0;n<e.length;n++)if(r=e[n],!/^[a-z\u00a1-\uffff0-9-]+$/i.test(r)||/[\uff01-\uff5e]/.test(r)||r[0]==="-"||r[r.length-1]==="-")return!1;return!0},Wse=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,Gse=/([a-f0-9]+:+)+[a-f0-9]+/,Kse=function(t){return t.length?Wse.test(t)||Gse.test(t):!1},Yse=/^[^@\s]+@[^@\s]+\.[^@\s]+$/;Kt.bool=(0,Eo.makeExactValidator)(function(t){switch(t){case!0:case"true":case"t":case"1":return!0;case!1:case"false":case"f":case"0":return!1;default:throw new wo.EnvError('Invalid bool input: "'.concat(t,'"'))}});Kt.num=(0,Eo.makeValidator)(function(t){var e=parseFloat(t);if(Number.isNaN(e))throw new wo.EnvError('Invalid number input: "'.concat(t,'"'));return e});Kt.str=(0,Eo.makeValidator)(function(t){if(typeof t=="string")return t;throw new wo.EnvError('Not a string: "'.concat(t,'"'))});Kt.email=(0,Eo.makeValidator)(function(t){if(Yse.test(t))return t;throw new wo.EnvError('Invalid email address: "'.concat(t,'"'))});Kt.host=(0,Eo.makeValidator)(function(t){if(!zse(t)&&!Kse(t))throw new wo.EnvError('Invalid host (domain or ip): "'.concat(t,'"'));return t});Kt.port=(0,Eo.makeValidator)(function(t){var e=+t;if(Number.isNaN(e)||"".concat(e)!=="".concat(t)||e%1!==0||e<1||e>65535)throw new wo.EnvError('Invalid port input: "'.concat(t,'"'));return e});Kt.url=(0,Eo.makeValidator)(function(t){try{return new URL(t),t}catch{throw new wo.EnvError('Invalid url: "'.concat(t,'"'))}});Kt.json=(0,Eo.makeStructuredValidator)(function(t){try{return JSON.parse(t)}catch{throw new wo.EnvError('Invalid json: "'.concat(t,'"'))}})});var uj=g(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.makeValidator=Pn.makeExactValidator=void 0;var Tu=(eg(),Bw(Zm));Tu.__exportStar(nj(),Pn);Tu.__exportStar(Xf(),Pn);Tu.__exportStar(Kw(),Pn);Tu.__exportStar(sj(),Pn);Tu.__exportStar(aj(),Pn);Tu.__exportStar(Gw(),Pn);var lj=Qw();Object.defineProperty(Pn,"makeExactValidator",{enumerable:!0,get:function(){return lj.makeExactValidator}});Object.defineProperty(Pn,"makeValidator",{enumerable:!0,get:function(){return lj.makeValidator}})});var Qr=g((lYe,cj)=>{"use strict";var Xw=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};cj.exports=t=>{if(t.length>2)throw new Xw(t);function e(n={}){this.options=n}e.prototype.transform=t;function r(n){return new e(n)}return r.Format=e,r}});var pj=g((uYe,hj)=>{"use strict";var dj={};hj.exports=dj;var fj={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(fj).forEach(function(t){var e=fj[t],r=dj[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var gj=g((cYe,mj)=>{"use strict";mj.exports=function(t,e){e=e||process.argv||[];var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var _j=g((fYe,yj)=>{"use strict";var Qse=A("os"),ui=gj(),xr=process.env,Pu=void 0;ui("no-color")||ui("no-colors")||ui("color=false")?Pu=!1:(ui("color")||ui("colors")||ui("color=true")||ui("color=always"))&&(Pu=!0);"FORCE_COLOR"in xr&&(Pu=xr.FORCE_COLOR.length===0||parseInt(xr.FORCE_COLOR,10)!==0);function Xse(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Zse(t){if(Pu===!1)return 0;if(ui("color=16m")||ui("color=full")||ui("color=truecolor"))return 3;if(ui("color=256"))return 2;if(t&&!t.isTTY&&Pu!==!0)return 0;var e=Pu?1:0;if(process.platform==="win32"){var r=Qse.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in xr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in xr})||xr.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in xr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(xr.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in xr){var n=parseInt((xr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(xr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(xr.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(xr.TERM)||"COLORTERM"in xr?1:(xr.TERM==="dumb",e)}function Zw(t){var e=Zse(t);return Xse(e)}yj.exports={supportsColor:Zw,stdout:Zw(process.stdout),stderr:Zw(process.stderr)}});var vj=g((dYe,bj)=>{"use strict";bj.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var Ej=g((hYe,wj)=>{"use strict";wj.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(l){var u=Math.floor(Math.random()*l);return u}function o(l){var u=!1;return i.filter(function(c){u=c===l}),u}function a(l,u){var c="",f,h;u=u||{},u.up=typeof u.up<"u"?u.up:!0,u.mid=typeof u.mid<"u"?u.mid:!0,u.down=typeof u.down<"u"?u.down:!0,u.size=typeof u.size<"u"?u.size:"maxi",l=l.split("");for(h in l)if(!o(h)){switch(c=c+l[h],f={up:0,down:0,mid:0},u.size){case"mini":f.up=s(8),f.mid=s(2),f.down=s(8);break;case"maxi":f.up=s(16)+3,f.mid=s(4)+1,f.down=s(64)+3;break;default:f.up=s(8)+1,f.mid=s(6)/2,f.down=s(8)+1;break}var d=["up","mid","down"];for(var p in d)for(var m=d[p],y=0;y<=f[m];y++)u[m]&&(c=c+n[m][s(n[m].length)])}return c}return a(e,r)}});var Rj=g((pYe,Sj)=>{"use strict";Sj.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var Pj=g((mYe,Tj)=>{"use strict";Tj.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var Oj=g((gYe,$j)=>{"use strict";$j.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var Aj=g((yYe,Ij)=>{"use strict";Ij.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var jj=g((bYe,xj)=>{"use strict";var Pe={};xj.exports=Pe;Pe.themes={};var eoe=A("util"),Da=Pe.styles=pj(),Cj=Object.defineProperties,toe=new RegExp(/[\r\n]+/g);Pe.supportsColor=_j().supportsColor;typeof Pe.enabled>"u"&&(Pe.enabled=Pe.supportsColor()!==!1);Pe.enable=function(){Pe.enabled=!0};Pe.disable=function(){Pe.enabled=!1};Pe.stripColors=Pe.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var _Ye=Pe.stylize=function(e,r){if(!Pe.enabled)return e+"";var n=Da[r];return!n&&r in Pe?Pe[r](e):n.open+e+n.close},roe=/[|\\{}()[\]^$+*?.]/g,noe=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(roe,"\\$&")};function kj(t){var e=function r(){return soe.apply(r,arguments)};return e._styles=t,e.__proto__=ioe,e}var qj=function(){var t={};return Da.grey=Da.gray,Object.keys(Da).forEach(function(e){Da[e].closeRe=new RegExp(noe(Da[e].close),"g"),t[e]={get:function(){return kj(this._styles.concat(e))}}}),t}(),ioe=Cj(function(){},qj);function soe(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:eoe.inspect(o)}).join(" ");if(!Pe.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=Da[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(toe,function(o){return s.close+o+s.open}))}return e}Pe.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){Pe[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=Pe[t[r][s]](i);return i}return Pe[t[r]](n)}})(e)};function ooe(){var t={};return Object.keys(qj).forEach(function(e){t[e]={get:function(){return kj([e])}}}),t}var aoe=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};Pe.trap=vj();Pe.zalgo=Ej();Pe.maps={};Pe.maps.america=Rj()(Pe);Pe.maps.zebra=Pj()(Pe);Pe.maps.rainbow=Oj()(Pe);Pe.maps.random=Aj()(Pe);for(Nj in Pe.maps)(function(t){Pe[t]=function(e){return aoe(Pe.maps[t],e)}})(Nj);var Nj;Cj(Pe,ooe())});var eE=g((vYe,Mj)=>{"use strict";var loe=jj();Mj.exports=loe});var Lj=g(tE=>{"use strict";tE.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};tE.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var Dj=g(rE=>{"use strict";rE.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};rE.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var Fj=g(nE=>{"use strict";nE.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};nE.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var Uj=g(tg=>{"use strict";Object.defineProperty(tg,"cli",{value:Lj()});Object.defineProperty(tg,"npm",{value:Dj()});Object.defineProperty(tg,"syslog",{value:Fj()})});var Dt=g(ed=>{"use strict";Object.defineProperty(ed,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(ed,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(ed,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(ed,"configs",{value:Uj()})});var ig=g((PYe,ng)=>{"use strict";var oE=eE(),{LEVEL:iE,MESSAGE:sE}=Dt();oE.enabled=!0;var Bj=/\s+/,rg=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((n,i)=>(n[i]=Bj.test(e[i])?e[i].split(Bj):e[i],n),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(t.allColors[e]))return oE[t.allColors[e]](n);for(let i=0,s=t.allColors[e].length;i<s;i++)n=oE[t.allColors[e][i]](n);return n}transform(e,r){return r.all&&typeof e[sE]=="string"&&(e[sE]=this.colorize(e[iE],e.level,e[sE])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[iE],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[iE],e.level,e.message)),e}};ng.exports=t=>new rg(t);ng.exports.Colorizer=ng.exports.Format=rg});var Hj=g(($Ye,Vj)=>{"use strict";var{Colorizer:uoe}=ig();Vj.exports=t=>(uoe.addColors(t.colors||t),t)});var Wj=g((OYe,zj)=>{"use strict";var coe=Qr();zj.exports=coe(t=>(t.message=`	${t.message}`,t))});var Yj=g((IYe,Kj)=>{"use strict";var foe=Qr(),{LEVEL:Gj,MESSAGE:aE}=Dt();Kj.exports=foe((t,{stack:e,cause:r})=>{if(t instanceof Error){let i=Object.assign({},t,{level:t.level,[Gj]:t[Gj]||t.level,message:t.message,[aE]:t[aE]||t.message});return e&&(i.stack=t.stack),r&&(i.cause=t.cause),i}if(!(t.message instanceof Error))return t;let n=t.message;return Object.assign(t,n),t.message=n.message,t[aE]=n.message,e&&(t.stack=n.stack),r&&(t.cause=n.cause),t})});var uE=g((AYe,og)=>{"use strict";var{configs:doe,LEVEL:Jj,MESSAGE:lE}=Dt(),sg=class t{constructor(e={levels:doe.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(n=>n.length);return Math.max(...r)}static paddingForLevel(e,r,n){let i=n+1-e.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(e,r=" "){let n=t.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=t.paddingForLevel(s,r,n),i),{})}transform(e,r){return e.message=`${this.paddings[e[Jj]]}${e.message}`,e[lE]&&(e[lE]=`${this.paddings[e[Jj]]}${e[lE]}`),e}};og.exports=t=>new sg(t);og.exports.Padder=og.exports.Format=sg});var Qj=g((NYe,cE)=>{"use strict";var{Colorizer:hoe}=ig(),{Padder:poe}=uE(),{configs:moe,MESSAGE:goe}=Dt(),ag=class{constructor(e={}){e.levels||(e.levels=moe.cli.levels),this.colorizer=new hoe(e),this.padder=new poe(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[goe]=`${e.level}:${e.message}`,e}};cE.exports=t=>new ag(t);cE.exports.Format=ag});var Zj=g((CYe,fE)=>{"use strict";var yoe=Qr();function Xj(t){if(t.every(_oe))return e=>{let r=e;for(let n=0;n<t.length;n++)if(r=t[n].transform(r,t[n].options),!r)return!1;return r}}function _oe(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}fE.exports=(...t)=>{let e=yoe(Xj(t)),r=e();return r.Format=e.Format,r};fE.exports.cascade=Xj});var $u=g((mE,rM)=>{"use strict";var{hasOwnProperty:td}=Object.prototype,Ua=pE();Ua.configure=pE;Ua.stringify=Ua;Ua.default=Ua;mE.stringify=Ua;mE.configure=pE;rM.exports=Ua;var boe=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function So(t){return t.length<5e3&&!boe.test(t)?`"${t}"`:JSON.stringify(t)}function dE(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],i=r;for(;i!==0&&t[i-1]>n;)t[i]=t[i-1],i--;t[i]=n}return t}var voe=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function hE(t){return voe.call(t)!==void 0&&t.length!==0}function eM(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",i=`"0":${n}${t[0]}`;for(let s=1;s<r;s++)i+=`${e}"${s}":${n}${t[s]}`;return i}function woe(t){if(td.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function Eoe(t){let e;if(td.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function Soe(t,e){let r;if(td.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function tM(t,e){let r;if(td.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function Fa(t){return t===1?"1 item":`${t} items`}function Roe(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function Toe(t){if(td.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function pE(t){t={...t};let e=Toe(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=woe(t),n=Soe(t,"bigint"),i=Eoe(t),s=typeof i=="function"?i:void 0,o=tM(t,"maximumDepth"),a=tM(t,"maximumBreadth");function l(d,p,m,y,_,w){let v=p[d];switch(typeof v=="object"&&v!==null&&typeof v.toJSON=="function"&&(v=v.toJSON(d)),v=y.call(p,d,v),typeof v){case"string":return So(v);case"object":{if(v===null)return"null";if(m.indexOf(v)!==-1)return r;let b="",E=",",R=w;if(Array.isArray(v)){if(v.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(v),_!==""&&(w+=_,b+=`
${w}`,E=`,
${w}`);let N=Math.min(v.length,a),C=0;for(;C<N-1;C++){let ge=l(String(C),v,m,y,_,w);b+=ge!==void 0?ge:"null",b+=E}let z=l(String(C),v,m,y,_,w);if(b+=z!==void 0?z:"null",v.length-1>a){let ge=v.length-a-1;b+=`${E}"... ${Fa(ge)} not stringified"`}return _!==""&&(b+=`
${R}`),m.pop(),`[${b}]`}let S=Object.keys(v),P=S.length;if(P===0)return"{}";if(o<m.length+1)return'"[Object]"';let T="",O="";_!==""&&(w+=_,E=`,
${w}`,T=" ");let j=Math.min(P,a);i&&!hE(v)&&(S=dE(S,s)),m.push(v);for(let N=0;N<j;N++){let C=S[N],z=l(C,v,m,y,_,w);z!==void 0&&(b+=`${O}${So(C)}:${T}${z}`,O=E)}if(P>a){let N=P-a;b+=`${O}"...":${T}"${Fa(N)} not stringified"`,O=E}return _!==""&&O.length>1&&(b=`
${w}${b}
${R}`),m.pop(),`{${b}}`}case"number":return isFinite(v)?String(v):e?e(v):"null";case"boolean":return v===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(v);default:return e?e(v):void 0}}function u(d,p,m,y,_,w){switch(typeof p=="object"&&p!==null&&typeof p.toJSON=="function"&&(p=p.toJSON(d)),typeof p){case"string":return So(p);case"object":{if(p===null)return"null";if(m.indexOf(p)!==-1)return r;let v=w,b="",E=",";if(Array.isArray(p)){if(p.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(p),_!==""&&(w+=_,b+=`
${w}`,E=`,
${w}`);let P=Math.min(p.length,a),T=0;for(;T<P-1;T++){let j=u(String(T),p[T],m,y,_,w);b+=j!==void 0?j:"null",b+=E}let O=u(String(T),p[T],m,y,_,w);if(b+=O!==void 0?O:"null",p.length-1>a){let j=p.length-a-1;b+=`${E}"... ${Fa(j)} not stringified"`}return _!==""&&(b+=`
${v}`),m.pop(),`[${b}]`}m.push(p);let R="";_!==""&&(w+=_,E=`,
${w}`,R=" ");let S="";for(let P of y){let T=u(P,p[P],m,y,_,w);T!==void 0&&(b+=`${S}${So(P)}:${R}${T}`,S=E)}return _!==""&&S.length>1&&(b=`
${w}${b}
${v}`),m.pop(),`{${b}}`}case"number":return isFinite(p)?String(p):e?e(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return e?e(p):void 0}}function c(d,p,m,y,_){switch(typeof p){case"string":return So(p);case"object":{if(p===null)return"null";if(typeof p.toJSON=="function"){if(p=p.toJSON(d),typeof p!="object")return c(d,p,m,y,_);if(p===null)return"null"}if(m.indexOf(p)!==-1)return r;let w=_;if(Array.isArray(p)){if(p.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(p),_+=y;let T=`
${_}`,O=`,
${_}`,j=Math.min(p.length,a),N=0;for(;N<j-1;N++){let z=c(String(N),p[N],m,y,_);T+=z!==void 0?z:"null",T+=O}let C=c(String(N),p[N],m,y,_);if(T+=C!==void 0?C:"null",p.length-1>a){let z=p.length-a-1;T+=`${O}"... ${Fa(z)} not stringified"`}return T+=`
${w}`,m.pop(),`[${T}]`}let v=Object.keys(p),b=v.length;if(b===0)return"{}";if(o<m.length+1)return'"[Object]"';_+=y;let E=`,
${_}`,R="",S="",P=Math.min(b,a);hE(p)&&(R+=eM(p,E,a),v=v.slice(p.length),P-=p.length,S=E),i&&(v=dE(v,s)),m.push(p);for(let T=0;T<P;T++){let O=v[T],j=c(O,p[O],m,y,_);j!==void 0&&(R+=`${S}${So(O)}: ${j}`,S=E)}if(b>a){let T=b-a;R+=`${S}"...": "${Fa(T)} not stringified"`,S=E}return S!==""&&(R=`
${_}${R}
${w}`),m.pop(),`{${R}}`}case"number":return isFinite(p)?String(p):e?e(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return e?e(p):void 0}}function f(d,p,m){switch(typeof p){case"string":return So(p);case"object":{if(p===null)return"null";if(typeof p.toJSON=="function"){if(p=p.toJSON(d),typeof p!="object")return f(d,p,m);if(p===null)return"null"}if(m.indexOf(p)!==-1)return r;let y="",_=p.length!==void 0;if(_&&Array.isArray(p)){if(p.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(p);let R=Math.min(p.length,a),S=0;for(;S<R-1;S++){let T=f(String(S),p[S],m);y+=T!==void 0?T:"null",y+=","}let P=f(String(S),p[S],m);if(y+=P!==void 0?P:"null",p.length-1>a){let T=p.length-a-1;y+=`,"... ${Fa(T)} not stringified"`}return m.pop(),`[${y}]`}let w=Object.keys(p),v=w.length;if(v===0)return"{}";if(o<m.length+1)return'"[Object]"';let b="",E=Math.min(v,a);_&&hE(p)&&(y+=eM(p,",",a),w=w.slice(p.length),E-=p.length,b=","),i&&(w=dE(w,s)),m.push(p);for(let R=0;R<E;R++){let S=w[R],P=f(S,p[S],m);P!==void 0&&(y+=`${b}${So(S)}:${P}`,b=",")}if(v>a){let R=v-a;y+=`${b}"...":"${Fa(R)} not stringified"`}return m.pop(),`{${y}}`}case"number":return isFinite(p)?String(p):e?e(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return e?e(p):void 0}}function h(d,p,m){if(arguments.length>1){let y="";if(typeof m=="number"?y=" ".repeat(Math.min(m,10)):typeof m=="string"&&(y=m.slice(0,10)),p!=null){if(typeof p=="function")return l("",{"":d},[],p,y,"");if(Array.isArray(p))return u("",d,[],Roe(p),y,"")}if(y.length!==0)return c("",d,[],y,"")}return f("",d,[])}return h}});var gE=g((kYe,nM)=>{"use strict";var Poe=Qr(),{MESSAGE:$oe}=Dt(),Ooe=$u();function Ioe(t,e){return typeof e=="bigint"?e.toString():e}nM.exports=Poe((t,e)=>{let r=Ooe.configure(e);return t[$oe]=r(t,e.replacer||Ioe,e.space),t})});var sM=g((qYe,iM)=>{"use strict";var Aoe=Qr();iM.exports=Aoe((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var aM=g((xYe,oM)=>{"use strict";var Noe=Qr(),{MESSAGE:Coe}=Dt(),koe=$u();oM.exports=Noe(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[Coe]=koe(e),t})});var uM=g((jYe,lM)=>{"use strict";var qoe=Qr();function xoe(t,e,r){let n=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),i=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,n,{[r]:i}),t}function joe(t,e,r){return t[r]=e.reduce((n,i)=>(n[i]=t[i],delete t[i],n),{}),t}lM.exports=qoe((t,e={})=>{let r="metadata";e.key&&(r=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?xoe(t,n,r):e.fillWith?joe(t,e.fillWith,r):t})});var yE=g((MYe,cM)=>{"use strict";var Ou=1e3,Iu=Ou*60,Au=Iu*60,Ba=Au*24,Moe=Ba*7,Loe=Ba*365.25;cM.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Doe(t);if(r==="number"&&isFinite(t))return e.long?Uoe(t):Foe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Doe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Loe;case"weeks":case"week":case"w":return r*Moe;case"days":case"day":case"d":return r*Ba;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Au;case"minutes":case"minute":case"mins":case"min":case"m":return r*Iu;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ou;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Foe(t){var e=Math.abs(t);return e>=Ba?Math.round(t/Ba)+"d":e>=Au?Math.round(t/Au)+"h":e>=Iu?Math.round(t/Iu)+"m":e>=Ou?Math.round(t/Ou)+"s":t+"ms"}function Uoe(t){var e=Math.abs(t);return e>=Ba?lg(t,e,Ba,"day"):e>=Au?lg(t,e,Au,"hour"):e>=Iu?lg(t,e,Iu,"minute"):e>=Ou?lg(t,e,Ou,"second"):t+" ms"}function lg(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var dM=g((rd,fM)=>{"use strict";var Boe=Qr(),Voe=yE();fM.exports=Boe(t=>{let e=+new Date;return rd.diff=e-(rd.prevTime||e),rd.prevTime=e,t.ms=`+${Voe(rd.diff)}`,t})});var mM=g((LYe,pM)=>{"use strict";var Hoe=A("util").inspect,zoe=Qr(),{LEVEL:Woe,MESSAGE:hM,SPLAT:Goe}=Dt();pM.exports=zoe((t,e={})=>{let r=Object.assign({},t);return delete r[Woe],delete r[hM],delete r[Goe],t[hM]=Hoe(r,!1,e.depth||null,e.colorize),t})});var gM=g((DYe,cg)=>{"use strict";var{MESSAGE:Koe}=Dt(),ug=class{constructor(e){this.template=e}transform(e){return e[Koe]=this.template(e),e}};cg.exports=t=>new ug(t);cg.exports.Printf=cg.exports.Format=ug});var bM=g((FYe,_M)=>{"use strict";var Yoe=Qr(),{MESSAGE:yM}=Dt(),Joe=$u();_M.exports=Yoe(t=>{let e=Joe(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[yM]=`${t.level}:${r} ${t.message} ${e}`:t[yM]=`${t.level}:${r} ${t.message}`,t})});var EM=g((UYe,wM)=>{"use strict";var Qoe=A("util"),{SPLAT:vM}=Dt(),Xoe=/%[scdjifoO%]/g,Zoe=/%%/g,_E=class{constructor(e){this.options=e}_splat(e,r){let n=e.message,i=e[vM]||e.splat||[],s=n.match(Zoe),o=s&&s.length||0,l=r.length-o-i.length,u=l<0?i.splice(l,-1*l):[],c=u.length;if(c)for(let f=0;f<c;f++)Object.assign(e,u[f]);return e.message=Qoe.format(n,...i),e}transform(e){let r=e.message,n=e[vM]||e.splat;if(!n||!n.length)return e;let i=r&&r.match&&r.match(Xoe);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return i?this._splat(e,i):e}};wM.exports=t=>new _E(t)});var RM=g((fg,SM)=>{"use strict";(function(t,e){typeof fg=="object"&&typeof SM<"u"?e(fg):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})(fg,function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function l($,k){for(var ae=[],U=0,W=$.length;U<W;U++)ae.push($[U].substr(0,k));return ae}var u=function($){return function(k,ae){var U=ae[$].map(function(Vt){return Vt.toLowerCase()}),W=U.indexOf(k.toLowerCase());return W>-1?W:null}};function c($){for(var k=[],ae=1;ae<arguments.length;ae++)k[ae-1]=arguments[ae];for(var U=0,W=k;U<W.length;U++){var Vt=W[U];for(var Ae in Vt)$[Ae]=Vt[Ae]}return $}var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],d=l(h,3),p=l(f,3),m={dayNamesShort:p,dayNames:f,monthNamesShort:d,monthNames:h,amPm:["am","pm"],DoFn:function($){return $+["th","st","nd","rd"][$%10>3?0:($-$%10!==10?1:0)*$%10]}},y=c({},m),_=function($){return y=c(y,$)},w=function($){return $.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},v=function($,k){for(k===void 0&&(k=2),$=String($);$.length<k;)$="0"+$;return $},b={D:function($){return String($.getDate())},DD:function($){return v($.getDate())},Do:function($,k){return k.DoFn($.getDate())},d:function($){return String($.getDay())},dd:function($){return v($.getDay())},ddd:function($,k){return k.dayNamesShort[$.getDay()]},dddd:function($,k){return k.dayNames[$.getDay()]},M:function($){return String($.getMonth()+1)},MM:function($){return v($.getMonth()+1)},MMM:function($,k){return k.monthNamesShort[$.getMonth()]},MMMM:function($,k){return k.monthNames[$.getMonth()]},YY:function($){return v(String($.getFullYear()),4).substr(2)},YYYY:function($){return v($.getFullYear(),4)},h:function($){return String($.getHours()%12||12)},hh:function($){return v($.getHours()%12||12)},H:function($){return String($.getHours())},HH:function($){return v($.getHours())},m:function($){return String($.getMinutes())},mm:function($){return v($.getMinutes())},s:function($){return String($.getSeconds())},ss:function($){return v($.getSeconds())},S:function($){return String(Math.round($.getMilliseconds()/100))},SS:function($){return v(Math.round($.getMilliseconds()/10),2)},SSS:function($){return v($.getMilliseconds(),3)},a:function($,k){return $.getHours()<12?k.amPm[0]:k.amPm[1]},A:function($,k){return $.getHours()<12?k.amPm[0].toUpperCase():k.amPm[1].toUpperCase()},ZZ:function($){var k=$.getTimezoneOffset();return(k>0?"-":"+")+v(Math.floor(Math.abs(k)/60)*100+Math.abs(k)%60,4)},Z:function($){var k=$.getTimezoneOffset();return(k>0?"-":"+")+v(Math.floor(Math.abs(k)/60),2)+":"+v(Math.abs(k)%60,2)}},E=function($){return+$-1},R=[null,r],S=[null,o],P=["isPm",o,function($,k){var ae=$.toLowerCase();return ae===k.amPm[0]?0:ae===k.amPm[1]?1:null}],T=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function($){var k=($+"").match(/([+-]|\d\d)/gi);if(k){var ae=+k[1]*60+parseInt(k[2],10);return k[0]==="+"?ae:-ae}return 0}],O={D:["day",r],DD:["day",n],Do:["day",r+o,function($){return parseInt($,10)}],M:["month",r,E],MM:["month",n,E],YY:["year",n,function($){var k=new Date,ae=+(""+k.getFullYear()).substr(0,2);return+(""+(+$>68?ae-1:ae)+$)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function($){return+$*100}],SS:["millisecond",n,function($){return+$*10}],SSS:["millisecond",i],d:R,dd:R,ddd:S,dddd:S,MMM:["month",o,u("monthNamesShort")],MMMM:["month",o,u("monthNames")],a:P,A:P,ZZ:T,Z:T},j={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},N=function($){return c(j,$)},C=function($,k,ae){if(k===void 0&&(k=j.default),ae===void 0&&(ae={}),typeof $=="number"&&($=new Date($)),Object.prototype.toString.call($)!=="[object Date]"||isNaN($.getTime()))throw new Error("Invalid Date pass to format");k=j[k]||k;var U=[];k=k.replace(a,function(Vt,Ae){return U.push(Ae),"@@@"});var W=c(c({},y),ae);return k=k.replace(e,function(Vt){return b[Vt]($,W)}),k.replace(/@@@/g,function(){return U.shift()})};function z($,k,ae){if(ae===void 0&&(ae={}),typeof k!="string")throw new Error("Invalid format in fecha parse");if(k=j[k]||k,$.length>1e3)return null;var U=new Date,W={year:U.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Vt=[],Ae=[],Ne=k.replace(a,function(le,B){return Ae.push(w(B)),"@@@"}),si={},Rt={};Ne=w(Ne).replace(e,function(le){var B=O[le],Xe=B[0],oi=B[1],Et=B[3];if(si[Xe])throw new Error("Invalid format. "+Xe+" specified twice in format");return si[Xe]=!0,Et&&(Rt[Et]=!0),Vt.push(B),"("+oi+")"}),Object.keys(Rt).forEach(function(le){if(!si[le])throw new Error("Invalid format. "+le+" is required in specified format")}),Ne=Ne.replace(/@@@/g,function(){return Ae.shift()});var xe=$.match(new RegExp(Ne,"i"));if(!xe)return null;for(var wt=c(c({},y),ae),Z=1;Z<xe.length;Z++){var tr=Vt[Z-1],xa=tr[0],mn=tr[2],I=mn?mn(xe[Z],wt):+xe[Z];if(I==null)return null;W[xa]=I}W.isPm===1&&W.hour!=null&&+W.hour!=12?W.hour=+W.hour+12:W.isPm===0&&+W.hour==12&&(W.hour=0);var x;if(W.timezoneOffset==null){x=new Date(W.year,W.month,W.day,W.hour,W.minute,W.second,W.millisecond);for(var D=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Z=0,G=D.length;Z<G;Z++)if(si[D[Z][0]]&&W[D[Z][0]]!==x[D[Z][1]]())return null}else if(x=new Date(Date.UTC(W.year,W.month,W.day,W.hour,W.minute-W.timezoneOffset,W.second,W.millisecond)),W.month>11||W.month<0||W.day>31||W.day<1||W.hour>23||W.hour<0||W.minute>59||W.minute<0||W.second>59||W.second<0)return null;return x}var ge={format:C,parse:z,defaultI18n:m,setGlobalDateI18n:_,setGlobalDateMasks:N};t.assign=c,t.default=ge,t.format=C,t.parse=z,t.defaultI18n=m,t.setGlobalDateI18n=_,t.setGlobalDateMasks=N,Object.defineProperty(t,"__esModule",{value:!0})})});var PM=g((BYe,TM)=>{"use strict";var eae=RM(),tae=Qr();TM.exports=tae((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():eae.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var OM=g((VYe,$M)=>{"use strict";var bE=eE(),rae=Qr(),{MESSAGE:vE}=Dt();$M.exports=rae((t,e)=>(e.level!==!1&&(t.level=bE.strip(t.level)),e.message!==!1&&(t.message=bE.strip(String(t.message))),e.raw!==!1&&t[vE]&&(t[vE]=bE.strip(String(t[vE]))),t))});var EE=g(wE=>{"use strict";var nae=wE.format=Qr();wE.levels=Hj();function ir(t,e){Object.defineProperty(nae,t,{get(){return e()},configurable:!0})}ir("align",function(){return Wj()});ir("errors",function(){return Yj()});ir("cli",function(){return Qj()});ir("combine",function(){return Zj()});ir("colorize",function(){return ig()});ir("json",function(){return gE()});ir("label",function(){return sM()});ir("logstash",function(){return aM()});ir("metadata",function(){return uM()});ir("ms",function(){return dM()});ir("padLevels",function(){return uE()});ir("prettyPrint",function(){return mM()});ir("printf",function(){return gM()});ir("simple",function(){return bM()});ir("splat",function(){return EM()});ir("timestamp",function(){return PM()});ir("uncolorize",function(){return OM()})});var SE=g(dg=>{"use strict";var{format:IM}=A("util");dg.warn={deprecated(t){return()=>{throw new Error(IM("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([IM("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(n=>{t[n]=dg.warn[e](n)})},forProperties(t,e,r){r.forEach(n=>{let i=dg.warn[e](n);Object.defineProperty(t,n,{get:i,set:i})})}}});var AM=g((WYe,iae)=>{iae.exports={name:"winston",description:"A logger for just about everything.",version:"3.17.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.7.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.9.0"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.24.0","@babel/preset-env":"^7.24.0","@dabh/eslint-config-populist":"^4.4.0","@types/node":"^20.11.24","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.57.0",hock:"^1.4.1",mocha:"^10.3.0",nyc:"^17.1.0",rimraf:"5.0.1",split2:"^4.1.0","std-mocks":"^2.0.0",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"rimraf test/fixtures/logs/* && mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var RE=g((GYe,NM)=>{"use strict";NM.exports=A("util").deprecate});var TE=g((KYe,CM)=>{"use strict";CM.exports=A("stream")});var $E=g((YYe,qM)=>{"use strict";function sae(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(PE,this,t)):process.nextTick(PE,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(hg,r):(r._writableState.errorEmitted=!0,process.nextTick(kM,r,s)):process.nextTick(kM,r,s):e?(process.nextTick(hg,r),e(s)):process.nextTick(hg,r)}),this)}function kM(t,e){PE(t,e),hg(t)}function hg(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function oae(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function PE(t,e){t.emit("error",e)}function aae(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}qM.exports={destroy:sae,undestroy:oae,errorOrDestroy:aae}});var Nu=g((JYe,MM)=>{"use strict";var jM={};function $n(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,l){super(n(o,a,l))}}i.prototype.name=r.name,i.prototype.code=t,jM[t]=i}function xM(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function lae(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function uae(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function cae(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}$n("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);$n("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&lae(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(uae(t," argument"))i=`The ${t} ${n} ${xM(e,"type")}`;else{let s=cae(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${xM(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);$n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");$n("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});$n("ERR_STREAM_PREMATURE_CLOSE","Premature close");$n("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});$n("ERR_MULTIPLE_CALLBACK","Callback called multiple times");$n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");$n("ERR_STREAM_WRITE_AFTER_END","write after end");$n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);$n("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);$n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");MM.exports.codes=jM});var OE=g((QYe,LM)=>{"use strict";var fae=Nu().codes.ERR_INVALID_OPT_VALUE;function dae(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function hae(t,e,r,n){var i=dae(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new fae(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}LM.exports={getHighWaterMark:hae}});var DM=g((XYe,IE)=>{"use strict";typeof Object.create=="function"?IE.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:IE.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Fi=g((ZYe,NE)=>{"use strict";try{if(AE=A("util"),typeof AE.inherits!="function")throw"";NE.exports=AE.inherits}catch{NE.exports=DM()}var AE});var zM=g((eJe,HM)=>{"use strict";function FM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function UM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FM(Object(r),!0).forEach(function(n){pae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pae(t,e,r){return e=VM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VM(n.key),n)}}function gae(t,e,r){return e&&BM(t.prototype,e),r&&BM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function VM(t){var e=yae(t,"string");return typeof e=="symbol"?e:String(e)}function yae(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _ae=A("buffer"),pg=_ae.Buffer,bae=A("util"),CE=bae.inspect,vae=CE&&CE.custom||"inspect";function wae(t,e,r){pg.prototype.copy.call(t,e,r)}HM.exports=function(){function t(){mae(this,t),this.head=null,this.tail=null,this.length=0}return gae(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return pg.alloc(0);for(var n=pg.allocUnsafe(r>>>0),i=this.head,s=0;i;)wae(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=pg.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:vae,value:function(r,n){return CE(this,UM(UM({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var KM=g((kE,GM)=>{"use strict";var mg=A("buffer"),Ui=mg.Buffer;function WM(t,e){for(var r in t)e[r]=t[r]}Ui.from&&Ui.alloc&&Ui.allocUnsafe&&Ui.allocUnsafeSlow?GM.exports=mg:(WM(mg,kE),kE.Buffer=Va);function Va(t,e,r){return Ui(t,e,r)}Va.prototype=Object.create(Ui.prototype);WM(Ui,Va);Va.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ui(t,e,r)};Va.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ui(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Va.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ui(t)};Va.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return mg.SlowBuffer(t)}});var id=g(JM=>{"use strict";var xE=KM().Buffer,YM=xE.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Eae(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Sae(t){var e=Eae(t);if(typeof e!="string"&&(xE.isEncoding===YM||!YM(t)))throw new Error("Unknown encoding: "+t);return e||t}JM.StringDecoder=nd;function nd(t){this.encoding=Sae(t);var e;switch(this.encoding){case"utf16le":this.text=Iae,this.end=Aae,e=4;break;case"utf8":this.fillLast=Pae,e=4;break;case"base64":this.text=Nae,this.end=Cae,e=3;break;default:this.write=kae,this.end=qae;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=xE.allocUnsafe(e)}nd.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};nd.prototype.end=Oae;nd.prototype.text=$ae;nd.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function qE(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Rae(t,e,r){var n=e.length-1;if(n<r)return 0;var i=qE(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=qE(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=qE(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Tae(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Pae(t){var e=this.lastTotal-this.lastNeed,r=Tae(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function $ae(t,e){var r=Rae(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Oae(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Iae(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Aae(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Nae(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Cae(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function kae(t){return t.toString(this.encoding)}function qae(t){return t&&t.length?this.write(t):""}});var eL=g((rJe,ZM)=>{"use strict";var QM=Nu().codes.ERR_STREAM_PREMATURE_CLOSE;function xae(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function jae(){}function Mae(t){return t.setHeader&&typeof t.abort=="function"}function XM(t,e,r){if(typeof e=="function")return XM(t,null,e);e||(e={}),r=xae(r||jae);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,u=function(){n=!1,l=!0,i||r.call(t)},c=function(p){r.call(t,p)},f=function(){var p;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(p=new QM),r.call(t,p);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(p=new QM),r.call(t,p)},h=function(){t.req.on("finish",a)};return Mae(t)?(t.on("complete",a),t.on("abort",f),t.req?h():t.on("request",h)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",c),t.on("close",f),function(){t.removeListener("complete",a),t.removeListener("abort",f),t.removeListener("request",h),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",f)}}ZM.exports=XM});var rL=g((nJe,tL)=>{"use strict";var gg;function Ro(t,e,r){return e=Lae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lae(t){var e=Dae(t,"string");return typeof e=="symbol"?e:String(e)}function Dae(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fae=eL(),To=Symbol("lastResolve"),Ha=Symbol("lastReject"),sd=Symbol("error"),yg=Symbol("ended"),za=Symbol("lastPromise"),jE=Symbol("handlePromise"),Wa=Symbol("stream");function Po(t,e){return{value:t,done:e}}function Uae(t){var e=t[To];if(e!==null){var r=t[Wa].read();r!==null&&(t[za]=null,t[To]=null,t[Ha]=null,e(Po(r,!1)))}}function Bae(t){process.nextTick(Uae,t)}function Vae(t,e){return function(r,n){t.then(function(){if(e[yg]){r(Po(void 0,!0));return}e[jE](r,n)},n)}}var Hae=Object.getPrototypeOf(function(){}),zae=Object.setPrototypeOf((gg={get stream(){return this[Wa]},next:function(){var e=this,r=this[sd];if(r!==null)return Promise.reject(r);if(this[yg])return Promise.resolve(Po(void 0,!0));if(this[Wa].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[sd]?a(e[sd]):o(Po(void 0,!0))})});var n=this[za],i;if(n)i=new Promise(Vae(n,this));else{var s=this[Wa].read();if(s!==null)return Promise.resolve(Po(s,!1));i=new Promise(this[jE])}return this[za]=i,i}},Ro(gg,Symbol.asyncIterator,function(){return this}),Ro(gg,"return",function(){var e=this;return new Promise(function(r,n){e[Wa].destroy(null,function(i){if(i){n(i);return}r(Po(void 0,!0))})})}),gg),Hae),Wae=function(e){var r,n=Object.create(zae,(r={},Ro(r,Wa,{value:e,writable:!0}),Ro(r,To,{value:null,writable:!0}),Ro(r,Ha,{value:null,writable:!0}),Ro(r,sd,{value:null,writable:!0}),Ro(r,yg,{value:e._readableState.endEmitted,writable:!0}),Ro(r,jE,{value:function(s,o){var a=n[Wa].read();a?(n[za]=null,n[To]=null,n[Ha]=null,s(Po(a,!1))):(n[To]=s,n[Ha]=o)},writable:!0}),r));return n[za]=null,Fae(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Ha];s!==null&&(n[za]=null,n[To]=null,n[Ha]=null,s(i)),n[sd]=i;return}var o=n[To];o!==null&&(n[za]=null,n[To]=null,n[Ha]=null,o(Po(void 0,!0))),n[yg]=!0}),e.on("readable",Bae.bind(null,n)),n};tL.exports=Wae});var oL=g((iJe,sL)=>{"use strict";function nL(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(u){r(u);return}a.done?e(l):Promise.resolve(l).then(n,i)}function Gae(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(l){nL(s,n,i,o,a,"next",l)}function a(l){nL(s,n,i,o,a,"throw",l)}o(void 0)})}}function iL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iL(Object(r),!0).forEach(function(n){Yae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yae(t,e,r){return e=Jae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jae(t){var e=Qae(t,"string");return typeof e=="symbol"?e:String(e)}function Qae(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xae=Nu().codes.ERR_INVALID_ARG_TYPE;function Zae(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new Xae("iterable",["Iterable"],e);var i=new t(Kae({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=Gae(function*(){try{var l=yield n.next(),u=l.value,c=l.done;c?i.push(null):i.push(yield u)?o():s=!1}catch(f){i.destroy(f)}}),a.apply(this,arguments)}return i}sL.exports=Zae});var yL=g((oJe,gL)=>{"use strict";gL.exports=Be;var Cu;Be.ReadableState=cL;var sJe=A("events").EventEmitter,uL=function(e,r){return e.listeners(r).length},ad=TE(),_g=A("buffer").Buffer,ele=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function tle(t){return _g.from(t)}function rle(t){return _g.isBuffer(t)||t instanceof ele}var ME=A("util"),ve;ME&&ME.debuglog?ve=ME.debuglog("stream"):ve=function(){};var nle=zM(),HE=$E(),ile=OE(),sle=ile.getHighWaterMark,bg=Nu().codes,ole=bg.ERR_INVALID_ARG_TYPE,ale=bg.ERR_STREAM_PUSH_AFTER_EOF,lle=bg.ERR_METHOD_NOT_IMPLEMENTED,ule=bg.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ku,LE,DE;Fi()(Be,ad);var od=HE.errorOrDestroy,FE=["error","close","destroy","pause","resume"];function cle(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function cL(t,e,r){Cu=Cu||ld(),t=t||{},typeof r!="boolean"&&(r=e instanceof Cu),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=sle(this,t,"readableHighWaterMark",r),this.buffer=new nle,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ku||(ku=id().StringDecoder),this.decoder=new ku(t.encoding),this.encoding=t.encoding)}function Be(t){if(Cu=Cu||ld(),!(this instanceof Be))return new Be(t);var e=this instanceof Cu;this._readableState=new cL(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ad.call(this)}Object.defineProperty(Be.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Be.prototype.destroy=HE.destroy;Be.prototype._undestroy=HE.undestroy;Be.prototype._destroy=function(t,e){e(t)};Be.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=_g.from(t,e),e=""),n=!0),fL(this,t,e,!1,n)};Be.prototype.unshift=function(t){return fL(this,t,null,!0,!1)};function fL(t,e,r,n,i){ve("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,hle(t,s);else{var o;if(i||(o=fle(s,e)),o)od(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==_g.prototype&&(e=tle(e)),n)s.endEmitted?od(t,new ule):UE(t,s,e,!0);else if(s.ended)od(t,new ale);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?UE(t,s,e,!1):VE(t,s)):UE(t,s,e,!1)}else n||(s.reading=!1,VE(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function UE(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&vg(t)),VE(t,e)}function fle(t,e){var r;return!rle(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new ole("chunk",["string","Buffer","Uint8Array"],e)),r}Be.prototype.isPaused=function(){return this._readableState.flowing===!1};Be.prototype.setEncoding=function(t){ku||(ku=id().StringDecoder);var e=new ku(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var aL=1073741824;function dle(t){return t>=aL?t=aL:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function lL(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=dle(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Be.prototype.read=function(t){ve("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ve("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?BE(this):vg(this),null;if(t=lL(t,e),t===0&&e.ended)return e.length===0&&BE(this),null;var n=e.needReadable;ve("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ve("length less than watermark",n)),e.ended||e.reading?(n=!1,ve("reading or ended",n)):n&&(ve("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=lL(r,e)));var i;return t>0?i=pL(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&BE(this)),i!==null&&this.emit("data",i),i};function hle(t,e){if(ve("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?vg(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,dL(t)))}}function vg(t){var e=t._readableState;ve("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ve("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(dL,t))}function dL(t){var e=t._readableState;ve("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,zE(t)}function VE(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(ple,t,e))}function ple(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(ve("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Be.prototype._read=function(t){od(this,new lle("_read()"))};Be.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,ve("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:m;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(y,_){ve("onunpipe"),y===r&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,c())}function a(){ve("onend"),t.end()}var l=mle(r);t.on("drain",l);var u=!1;function c(){ve("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",f),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",f);function f(y){ve("ondata");var _=t.write(y);ve("dest.write",_),_===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&mL(n.pipes,t)!==-1)&&!u&&(ve("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(y){ve("onerror",y),m(),t.removeListener("error",h),uL(t,"error")===0&&od(t,y)}cle(t,"error",h);function d(){t.removeListener("finish",p),m()}t.once("close",d);function p(){ve("onfinish"),t.removeListener("close",d),m()}t.once("finish",p);function m(){ve("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(ve("pipe resume"),r.resume()),t};function mle(t){return function(){var r=t._readableState;ve("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&uL(t,"data")&&(r.flowing=!0,zE(t))}}Be.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=mL(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Be.prototype.on=function(t,e){var r=ad.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ve("on readable",n.length,n.reading),n.length?vg(this):n.reading||process.nextTick(gle,this)),r};Be.prototype.addListener=Be.prototype.on;Be.prototype.removeListener=function(t,e){var r=ad.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(hL,this),r};Be.prototype.removeAllListeners=function(t){var e=ad.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(hL,this),e};function hL(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function gle(t){ve("readable nexttick read 0"),t.read(0)}Be.prototype.resume=function(){var t=this._readableState;return t.flowing||(ve("resume"),t.flowing=!t.readableListening,yle(this,t)),t.paused=!1,this};function yle(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(_le,t,e))}function _le(t,e){ve("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),zE(t),e.flowing&&!e.reading&&t.read(0)}Be.prototype.pause=function(){return ve("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ve("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function zE(t){var e=t._readableState;for(ve("flow",e.flowing);e.flowing&&t.read()!==null;);}Be.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(ve("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(ve("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<FE.length;s++)t.on(FE[s],this.emit.bind(this,FE[s]));return this._read=function(o){ve("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Be.prototype[Symbol.asyncIterator]=function(){return LE===void 0&&(LE=rL()),LE(this)});Object.defineProperty(Be.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Be.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Be.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Be._fromList=pL;Object.defineProperty(Be.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function pL(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function BE(t){var e=t._readableState;ve("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(ble,e,t))}function ble(t,e){if(ve("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Be.from=function(t,e){return DE===void 0&&(DE=oL()),DE(Be,t,e)});function mL(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var ld=g((aJe,bL)=>{"use strict";var vle=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};bL.exports=Bi;var _L=yL(),GE=KE();Fi()(Bi,_L);for(WE=vle(GE.prototype),wg=0;wg<WE.length;wg++)Eg=WE[wg],Bi.prototype[Eg]||(Bi.prototype[Eg]=GE.prototype[Eg]);var WE,Eg,wg;function Bi(t){if(!(this instanceof Bi))return new Bi(t);_L.call(this,t),GE.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",wle)))}Object.defineProperty(Bi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Bi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Bi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function wle(){this._writableState.ended||process.nextTick(Ele,this)}function Ele(t){t.end()}Object.defineProperty(Bi.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var KE=g((lJe,TL)=>{"use strict";TL.exports=It;function wL(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Yle(e,t)}}var qu;It.WritableState=cd;var Sle={deprecate:RE()},EL=TE(),Rg=A("buffer").Buffer,Rle=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Tle(t){return Rg.from(t)}function Ple(t){return Rg.isBuffer(t)||t instanceof Rle}var JE=$E(),$le=OE(),Ole=$le.getHighWaterMark,$o=Nu().codes,Ile=$o.ERR_INVALID_ARG_TYPE,Ale=$o.ERR_METHOD_NOT_IMPLEMENTED,Nle=$o.ERR_MULTIPLE_CALLBACK,Cle=$o.ERR_STREAM_CANNOT_PIPE,kle=$o.ERR_STREAM_DESTROYED,qle=$o.ERR_STREAM_NULL_VALUES,xle=$o.ERR_STREAM_WRITE_AFTER_END,jle=$o.ERR_UNKNOWN_ENCODING,xu=JE.errorOrDestroy;Fi()(It,EL);function Mle(){}function cd(t,e,r){qu=qu||ld(),t=t||{},typeof r!="boolean"&&(r=e instanceof qu),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Ole(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Hle(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new wL(this)}cd.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(cd.prototype,"buffer",{get:Sle.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Sg;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Sg=Function.prototype[Symbol.hasInstance],Object.defineProperty(It,Symbol.hasInstance,{value:function(e){return Sg.call(this,e)?!0:this!==It?!1:e&&e._writableState instanceof cd}})):Sg=function(e){return e instanceof this};function It(t){qu=qu||ld();var e=this instanceof qu;if(!e&&!Sg.call(It,this))return new It(t);this._writableState=new cd(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),EL.call(this)}It.prototype.pipe=function(){xu(this,new Cle)};function Lle(t,e){var r=new xle;xu(t,r),process.nextTick(e,r)}function Dle(t,e,r,n){var i;return r===null?i=new qle:typeof r!="string"&&!e.objectMode&&(i=new Ile("chunk",["string","Buffer"],r)),i?(xu(t,i),process.nextTick(n,i),!1):!0}It.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&Ple(t);return s&&!Rg.isBuffer(t)&&(t=Tle(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Mle),n.ending?Lle(this,r):(s||Dle(this,n,t,r))&&(n.pendingcb++,i=Ule(this,n,s,t,e,r)),i};It.prototype.cork=function(){this._writableState.corked++};It.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&SL(this,t))};It.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new jle(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(It.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Fle(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Rg.from(e,r)),e}Object.defineProperty(It.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ule(t,e,r,n,i,s){if(!r){var o=Fle(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else YE(t,e,!1,a,n,i,s);return l}function YE(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new kle("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Ble(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(ud,t,e),t._writableState.errorEmitted=!0,xu(t,n)):(i(n),t._writableState.errorEmitted=!0,xu(t,n),ud(t,e))}function Vle(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Hle(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Nle;if(Vle(r),e)Ble(t,r,n,e,i);else{var s=RL(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&SL(t,r),n?process.nextTick(vL,t,r,s,i):vL(t,r,s,i)}}function vL(t,e,r,n){r||zle(t,e),e.pendingcb--,n(),ud(t,e)}function zle(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function SL(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,YE(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new wL(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,c=r.callback,f=e.objectMode?1:l.length;if(YE(t,e,!1,f,l,u,c),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}It.prototype._write=function(t,e,r){r(new Ale("_write()"))};It.prototype._writev=null;It.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Kle(this,n,r),this};Object.defineProperty(It.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function RL(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Wle(t,e){t._final(function(r){e.pendingcb--,r&&xu(t,r),e.prefinished=!0,t.emit("prefinish"),ud(t,e)})}function Gle(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Wle,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function ud(t,e){var r=RL(e);if(r&&(Gle(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Kle(t,e,r){e.ending=!0,ud(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Yle(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(It.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});It.prototype.destroy=JE.destroy;It.prototype._undestroy=JE.undestroy;It.prototype._destroy=function(t,e){e(t)}});var QE=g((uJe,OL)=>{"use strict";var Jle=A("util"),PL=KE(),{LEVEL:$L}=Dt(),fd=OL.exports=function(e={}){PL.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};Jle.inherits(fd,PL);fd.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[$L]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};fd.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw r(null),i}else this.log(s,e[n].callback)}return r(null)};fd.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[$L]])&&(this.handleExceptions||r.exception!==!0))};fd.prototype._nop=function(){}});var ZE=g((cJe,AL)=>{"use strict";var Qle=A("util"),{LEVEL:XE}=Dt(),IL=QE(),dd=AL.exports=function(e={}){if(IL.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};Qle.inherits(dd,IL);dd.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[XE]])&&this.transport.log(e[XE],e.message,e,this._nop),n(null)};dd.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[XE],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};dd.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};dd.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var ju=g((fJe,eS)=>{"use strict";eS.exports=QE();eS.exports.LegacyTransportStream=ZE()});var kL=g((hJe,CL)=>{"use strict";var Xle=A("os"),{LEVEL:NL,MESSAGE:Mu}=Dt(),Zle=ju();CL.exports=class extends Zle{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:Xle.EOL,this.forceConsole=e.forceConsole||!1,this._consoleLog=console.log.bind(console),this._consoleWarn=console.warn.bind(console),this._consoleError=console.error.bind(console),this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[NL]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[Mu]}${this.eol}`):this._consoleError(e[Mu]),r&&r();return}else if(this.consoleWarnLevels[e[NL]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[Mu]}${this.eol}`):this._consoleWarn(e[Mu]),r&&r();return}console._stdout&&!this.forceConsole?console._stdout.write(`${e[Mu]}${this.eol}`):this._consoleLog(e[Mu]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var Pg=g((Tg,qL)=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.default=eue;function eue(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}qL.exports=Tg.default});var jL=g(($g,xL)=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});$g.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};xL.exports=$g.default});var DL=g(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.fallback=ML;Oo.wrap=LL;var tue=Oo.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,rue=Oo.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,nue=Oo.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function ML(t){setTimeout(t,0)}function LL(t){return(e,...r)=>t(()=>e(...r))}var hd;tue?hd=queueMicrotask:rue?hd=setImmediate:nue?hd=process.nextTick:hd=ML;Oo.default=LL(hd)});var HL=g((Og,VL)=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});Og.default=uue;var iue=jL(),sue=BL(iue),oue=DL(),aue=BL(oue),lue=Ga();function BL(t){return t&&t.__esModule?t:{default:t}}function uue(t){return(0,lue.isAsync)(t)?function(...e){let r=e.pop(),n=t.apply(this,e);return FL(n,r)}:(0,sue.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(i){return r(i)}if(n&&typeof n.then=="function")return FL(n,r);r(null,n)})}function FL(t,e){return t.then(r=>{UL(e,null,r)},r=>{UL(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function UL(t,e,r){try{t(e,r)}catch(n){(0,aue.default)(i=>{throw i},n)}}VL.exports=Og.default});var Ga=g(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.isAsyncIterable=Ns.isAsyncGenerator=Ns.isAsync=void 0;var cue=HL(),fue=due(cue);function due(t){return t&&t.__esModule?t:{default:t}}function zL(t){return t[Symbol.toStringTag]==="AsyncFunction"}function hue(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function pue(t){return typeof t[Symbol.asyncIterator]=="function"}function mue(t){if(typeof t!="function")throw new Error("expected a function");return zL(t)?(0,fue.default)(t):t}Ns.default=mue;Ns.isAsync=zL;Ns.isAsyncGenerator=hue;Ns.isAsyncIterable=pue});var Lu=g((Ig,WL)=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.default=gue;function gue(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...n){return typeof n[e-1]=="function"?t.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},t.apply(this,n)})}return r}WL.exports=Ig.default});var KL=g((Ag,GL)=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});var yue=Pg(),_ue=tS(yue),bue=Ga(),vue=tS(bue),wue=Lu(),Eue=tS(wue);function tS(t){return t&&t.__esModule?t:{default:t}}Ag.default=(0,Eue.default)((t,e,r)=>{var n=(0,_ue.default)(e)?[]:{};t(e,(i,s,o)=>{(0,vue.default)(i)((a,...l)=>{l.length<2&&([l]=l),n[s]=l,o(a)})},i=>r(i,n))},3);GL.exports=Ag.default});var rS=g((Ng,YL)=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.default=Sue;function Sue(t){function e(...r){if(t!==null){var n=t;t=null,n.apply(this,r)}}return Object.assign(e,t),e}YL.exports=Ng.default});var QL=g((Cg,JL)=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};JL.exports=Cg.default});var eD=g((kg,ZL)=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});kg.default=Nue;var Rue=Pg(),Tue=XL(Rue),Pue=QL(),$ue=XL(Pue);function XL(t){return t&&t.__esModule?t:{default:t}}function Oue(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function Iue(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function Aue(t){var e=t?Object.keys(t):[],r=-1,n=e.length;return function i(){var s=e[++r];return s==="__proto__"?i():r<n?{value:t[s],key:s}:null}}function Nue(t){if((0,Tue.default)(t))return Oue(t);var e=(0,$ue.default)(t);return e?Iue(e):Aue(t)}ZL.exports=kg.default});var nS=g((qg,tD)=>{"use strict";Object.defineProperty(qg,"__esModule",{value:!0});qg.default=Cue;function Cue(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}tD.exports=qg.default});var jg=g((xg,rD)=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});var kue={};xg.default=kue;rD.exports=xg.default});var iD=g((Mg,nD)=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.default=Mue;var que=jg(),xue=jue(que);function jue(t){return t&&t.__esModule?t:{default:t}}function Mue(t,e,r,n){let i=!1,s=!1,o=!1,a=0,l=0;function u(){a>=e||o||i||(o=!0,t.next().then(({value:h,done:d})=>{if(!(s||i)){if(o=!1,d){i=!0,a<=0&&n(null);return}a++,r(h,l,c),l++,u()}}).catch(f))}function c(h,d){if(a-=1,!s){if(h)return f(h);if(h===!1){i=!0,s=!0;return}if(d===xue.default||i&&a<=0)return i=!0,n(null);u()}}function f(h){s||(o=!1,i=!0,n(h))}u()}nD.exports=Mg.default});var lD=g((Lg,aD)=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});var Lue=rS(),Due=pd(Lue),Fue=eD(),Uue=pd(Fue),Bue=nS(),Vue=pd(Bue),sD=Ga(),Hue=iD(),oD=pd(Hue),zue=jg(),Wue=pd(zue);function pd(t){return t&&t.__esModule?t:{default:t}}Lg.default=t=>(e,r,n)=>{if(n=(0,Due.default)(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,sD.isAsyncGenerator)(e))return(0,oD.default)(e,t,r,n);if((0,sD.isAsyncIterable)(e))return(0,oD.default)(e[Symbol.asyncIterator](),t,r,n);var i=(0,Uue.default)(e),s=!1,o=!1,a=0,l=!1;function u(f,h){if(!o)if(a-=1,f)s=!0,n(f);else if(f===!1)s=!0,o=!0;else{if(h===Wue.default||s&&a<=0)return s=!0,n(null);l||c()}}function c(){for(l=!0;a<t&&!s;){var f=i();if(f===null){s=!0,a<=0&&n(null);return}a+=1,r(f.value,f.key,(0,Vue.default)(u))}l=!1}c()};aD.exports=Lg.default});var sS=g((Dg,uD)=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});var Gue=lD(),Kue=iS(Gue),Yue=Ga(),Jue=iS(Yue),Que=Lu(),Xue=iS(Que);function iS(t){return t&&t.__esModule?t:{default:t}}function Zue(t,e,r,n){return(0,Kue.default)(e)(t,(0,Jue.default)(r),n)}Dg.default=(0,Xue.default)(Zue,4);uD.exports=Dg.default});var dD=g((Fg,fD)=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});var ece=sS(),tce=cD(ece),rce=Lu(),nce=cD(rce);function cD(t){return t&&t.__esModule?t:{default:t}}function ice(t,e,r){return(0,tce.default)(t,1,e,r)}Fg.default=(0,nce.default)(ice,3);fD.exports=Fg.default});var mD=g((Ug,pD)=>{"use strict";Object.defineProperty(Ug,"__esModule",{value:!0});Ug.default=uce;var sce=KL(),oce=hD(sce),ace=dD(),lce=hD(ace);function hD(t){return t&&t.__esModule?t:{default:t}}function uce(t,e){return(0,oce.default)(lce.default,t,e)}pD.exports=Ug.default});var oS=g((gJe,gD)=>{"use strict";gD.exports=A("stream")});var ED=g((yJe,wD)=>{"use strict";function yD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _D(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(r),!0).forEach(function(n){cce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cce(t,e,r){return e=vD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vD(n.key),n)}}function dce(t,e,r){return e&&bD(t.prototype,e),r&&bD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vD(t){var e=hce(t,"string");return typeof e=="symbol"?e:String(e)}function hce(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pce=A("buffer"),Bg=pce.Buffer,mce=A("util"),aS=mce.inspect,gce=aS&&aS.custom||"inspect";function yce(t,e,r){Bg.prototype.copy.call(t,e,r)}wD.exports=function(){function t(){fce(this,t),this.head=null,this.tail=null,this.length=0}return dce(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Bg.alloc(0);for(var n=Bg.allocUnsafe(r>>>0),i=this.head,s=0;i;)yce(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=Bg.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:gce,value:function(r,n){return aS(this,_D(_D({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var uS=g((_Je,RD)=>{"use strict";function _ce(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(lS,this,t)):process.nextTick(lS,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Vg,r):(r._writableState.errorEmitted=!0,process.nextTick(SD,r,s)):process.nextTick(SD,r,s):e?(process.nextTick(Vg,r),e(s)):process.nextTick(Vg,r)}),this)}function SD(t,e){lS(t,e),Vg(t)}function Vg(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function bce(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function lS(t,e){t.emit("error",e)}function vce(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}RD.exports={destroy:_ce,undestroy:bce,errorOrDestroy:vce}});var Io=g((bJe,$D)=>{"use strict";var PD={};function On(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,l){super(n(o,a,l))}}i.prototype.name=r.name,i.prototype.code=t,PD[t]=i}function TD(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function wce(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Ece(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Sce(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}On("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);On("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&wce(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(Ece(t," argument"))i=`The ${t} ${n} ${TD(e,"type")}`;else{let s=Sce(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${TD(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);On("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");On("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});On("ERR_STREAM_PREMATURE_CLOSE","Premature close");On("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});On("ERR_MULTIPLE_CALLBACK","Callback called multiple times");On("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");On("ERR_STREAM_WRITE_AFTER_END","write after end");On("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);On("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);On("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");$D.exports.codes=PD});var cS=g((vJe,OD)=>{"use strict";var Rce=Io().codes.ERR_INVALID_OPT_VALUE;function Tce(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Pce(t,e,r,n){var i=Tce(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new Rce(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}OD.exports={getHighWaterMark:Pce}});var hS=g((wJe,qD)=>{"use strict";qD.exports=At;function AD(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Zce(e,t)}}var Du;At.WritableState=gd;var $ce={deprecate:RE()},ND=oS(),zg=A("buffer").Buffer,Oce=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Ice(t){return zg.from(t)}function Ace(t){return zg.isBuffer(t)||t instanceof Oce}var dS=uS(),Nce=cS(),Cce=Nce.getHighWaterMark,Ao=Io().codes,kce=Ao.ERR_INVALID_ARG_TYPE,qce=Ao.ERR_METHOD_NOT_IMPLEMENTED,xce=Ao.ERR_MULTIPLE_CALLBACK,jce=Ao.ERR_STREAM_CANNOT_PIPE,Mce=Ao.ERR_STREAM_DESTROYED,Lce=Ao.ERR_STREAM_NULL_VALUES,Dce=Ao.ERR_STREAM_WRITE_AFTER_END,Fce=Ao.ERR_UNKNOWN_ENCODING,Fu=dS.errorOrDestroy;Fi()(At,ND);function Uce(){}function gd(t,e,r){Du=Du||Ka(),t=t||{},typeof r!="boolean"&&(r=e instanceof Du),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Cce(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Kce(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new AD(this)}gd.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(gd.prototype,"buffer",{get:$ce.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Hg;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Hg=Function.prototype[Symbol.hasInstance],Object.defineProperty(At,Symbol.hasInstance,{value:function(e){return Hg.call(this,e)?!0:this!==At?!1:e&&e._writableState instanceof gd}})):Hg=function(e){return e instanceof this};function At(t){Du=Du||Ka();var e=this instanceof Du;if(!e&&!Hg.call(At,this))return new At(t);this._writableState=new gd(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),ND.call(this)}At.prototype.pipe=function(){Fu(this,new jce)};function Bce(t,e){var r=new Dce;Fu(t,r),process.nextTick(e,r)}function Vce(t,e,r,n){var i;return r===null?i=new Lce:typeof r!="string"&&!e.objectMode&&(i=new kce("chunk",["string","Buffer"],r)),i?(Fu(t,i),process.nextTick(n,i),!1):!0}At.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&Ace(t);return s&&!zg.isBuffer(t)&&(t=Ice(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Uce),n.ending?Bce(this,r):(s||Vce(this,n,t,r))&&(n.pendingcb++,i=zce(this,n,s,t,e,r)),i};At.prototype.cork=function(){this._writableState.corked++};At.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&CD(this,t))};At.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Fce(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(At.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Hce(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=zg.from(e,r)),e}Object.defineProperty(At.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function zce(t,e,r,n,i,s){if(!r){var o=Hce(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else fS(t,e,!1,a,n,i,s);return l}function fS(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Mce("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Wce(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(md,t,e),t._writableState.errorEmitted=!0,Fu(t,n)):(i(n),t._writableState.errorEmitted=!0,Fu(t,n),md(t,e))}function Gce(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Kce(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new xce;if(Gce(r),e)Wce(t,r,n,e,i);else{var s=kD(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&CD(t,r),n?process.nextTick(ID,t,r,s,i):ID(t,r,s,i)}}function ID(t,e,r,n){r||Yce(t,e),e.pendingcb--,n(),md(t,e)}function Yce(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function CD(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,fS(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new AD(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,c=r.callback,f=e.objectMode?1:l.length;if(fS(t,e,!1,f,l,u,c),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}At.prototype._write=function(t,e,r){r(new qce("_write()"))};At.prototype._writev=null;At.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Xce(this,n,r),this};Object.defineProperty(At.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function kD(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Jce(t,e){t._final(function(r){e.pendingcb--,r&&Fu(t,r),e.prefinished=!0,t.emit("prefinish"),md(t,e)})}function Qce(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Jce,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function md(t,e){var r=kD(e);if(r&&(Qce(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Xce(t,e,r){e.ending=!0,md(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Zce(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(At.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});At.prototype.destroy=dS.destroy;At.prototype._undestroy=dS.undestroy;At.prototype._destroy=function(t,e){e(t)}});var Ka=g((EJe,jD)=>{"use strict";var efe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};jD.exports=Vi;var xD=gS(),mS=hS();Fi()(Vi,xD);for(pS=efe(mS.prototype),Wg=0;Wg<pS.length;Wg++)Gg=pS[Wg],Vi.prototype[Gg]||(Vi.prototype[Gg]=mS.prototype[Gg]);var pS,Gg,Wg;function Vi(t){if(!(this instanceof Vi))return new Vi(t);xD.call(this,t),mS.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",tfe)))}Object.defineProperty(Vi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Vi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Vi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function tfe(){this._writableState.ended||process.nextTick(rfe,this)}function rfe(t){t.end()}Object.defineProperty(Vi.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Kg=g((SJe,DD)=>{"use strict";var MD=Io().codes.ERR_STREAM_PREMATURE_CLOSE;function nfe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function ife(){}function sfe(t){return t.setHeader&&typeof t.abort=="function"}function LD(t,e,r){if(typeof e=="function")return LD(t,null,e);e||(e={}),r=nfe(r||ife);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,u=function(){n=!1,l=!0,i||r.call(t)},c=function(p){r.call(t,p)},f=function(){var p;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(p=new MD),r.call(t,p);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(p=new MD),r.call(t,p)},h=function(){t.req.on("finish",a)};return sfe(t)?(t.on("complete",a),t.on("abort",f),t.req?h():t.on("request",h)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",c),t.on("close",f),function(){t.removeListener("complete",a),t.removeListener("abort",f),t.removeListener("request",h),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",f)}}DD.exports=LD});var UD=g((RJe,FD)=>{"use strict";var Yg;function No(t,e,r){return e=ofe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ofe(t){var e=afe(t,"string");return typeof e=="symbol"?e:String(e)}function afe(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lfe=Kg(),Co=Symbol("lastResolve"),Ya=Symbol("lastReject"),yd=Symbol("error"),Jg=Symbol("ended"),Ja=Symbol("lastPromise"),yS=Symbol("handlePromise"),Qa=Symbol("stream");function ko(t,e){return{value:t,done:e}}function ufe(t){var e=t[Co];if(e!==null){var r=t[Qa].read();r!==null&&(t[Ja]=null,t[Co]=null,t[Ya]=null,e(ko(r,!1)))}}function cfe(t){process.nextTick(ufe,t)}function ffe(t,e){return function(r,n){t.then(function(){if(e[Jg]){r(ko(void 0,!0));return}e[yS](r,n)},n)}}var dfe=Object.getPrototypeOf(function(){}),hfe=Object.setPrototypeOf((Yg={get stream(){return this[Qa]},next:function(){var e=this,r=this[yd];if(r!==null)return Promise.reject(r);if(this[Jg])return Promise.resolve(ko(void 0,!0));if(this[Qa].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[yd]?a(e[yd]):o(ko(void 0,!0))})});var n=this[Ja],i;if(n)i=new Promise(ffe(n,this));else{var s=this[Qa].read();if(s!==null)return Promise.resolve(ko(s,!1));i=new Promise(this[yS])}return this[Ja]=i,i}},No(Yg,Symbol.asyncIterator,function(){return this}),No(Yg,"return",function(){var e=this;return new Promise(function(r,n){e[Qa].destroy(null,function(i){if(i){n(i);return}r(ko(void 0,!0))})})}),Yg),dfe),pfe=function(e){var r,n=Object.create(hfe,(r={},No(r,Qa,{value:e,writable:!0}),No(r,Co,{value:null,writable:!0}),No(r,Ya,{value:null,writable:!0}),No(r,yd,{value:null,writable:!0}),No(r,Jg,{value:e._readableState.endEmitted,writable:!0}),No(r,yS,{value:function(s,o){var a=n[Qa].read();a?(n[Ja]=null,n[Co]=null,n[Ya]=null,s(ko(a,!1))):(n[Co]=s,n[Ya]=o)},writable:!0}),r));return n[Ja]=null,lfe(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Ya];s!==null&&(n[Ja]=null,n[Co]=null,n[Ya]=null,s(i)),n[yd]=i;return}var o=n[Co];o!==null&&(n[Ja]=null,n[Co]=null,n[Ya]=null,o(ko(void 0,!0))),n[Jg]=!0}),e.on("readable",cfe.bind(null,n)),n};FD.exports=pfe});var zD=g((TJe,HD)=>{"use strict";function BD(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(u){r(u);return}a.done?e(l):Promise.resolve(l).then(n,i)}function mfe(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(l){BD(s,n,i,o,a,"next",l)}function a(l){BD(s,n,i,o,a,"throw",l)}o(void 0)})}}function VD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gfe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(r),!0).forEach(function(n){yfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yfe(t,e,r){return e=_fe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _fe(t){var e=bfe(t,"string");return typeof e=="symbol"?e:String(e)}function bfe(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vfe=Io().codes.ERR_INVALID_ARG_TYPE;function wfe(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new vfe("iterable",["Iterable"],e);var i=new t(gfe({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=mfe(function*(){try{var l=yield n.next(),u=l.value,c=l.done;c?i.push(null):i.push(yield u)?o():s=!1}catch(f){i.destroy(f)}}),a.apply(this,arguments)}return i}HD.exports=wfe});var gS=g(($Je,t2)=>{"use strict";t2.exports=Ve;var Uu;Ve.ReadableState=YD;var PJe=A("events").EventEmitter,KD=function(e,r){return e.listeners(r).length},bd=oS(),Qg=A("buffer").Buffer,Efe=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Sfe(t){return Qg.from(t)}function Rfe(t){return Qg.isBuffer(t)||t instanceof Efe}var _S=A("util"),we;_S&&_S.debuglog?we=_S.debuglog("stream"):we=function(){};var Tfe=ED(),TS=uS(),Pfe=cS(),$fe=Pfe.getHighWaterMark,Xg=Io().codes,Ofe=Xg.ERR_INVALID_ARG_TYPE,Ife=Xg.ERR_STREAM_PUSH_AFTER_EOF,Afe=Xg.ERR_METHOD_NOT_IMPLEMENTED,Nfe=Xg.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Bu,bS,vS;Fi()(Ve,bd);var _d=TS.errorOrDestroy,wS=["error","close","destroy","pause","resume"];function Cfe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function YD(t,e,r){Uu=Uu||Ka(),t=t||{},typeof r!="boolean"&&(r=e instanceof Uu),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=$fe(this,t,"readableHighWaterMark",r),this.buffer=new Tfe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Bu||(Bu=id().StringDecoder),this.decoder=new Bu(t.encoding),this.encoding=t.encoding)}function Ve(t){if(Uu=Uu||Ka(),!(this instanceof Ve))return new Ve(t);var e=this instanceof Uu;this._readableState=new YD(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),bd.call(this)}Object.defineProperty(Ve.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Ve.prototype.destroy=TS.destroy;Ve.prototype._undestroy=TS.undestroy;Ve.prototype._destroy=function(t,e){e(t)};Ve.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Qg.from(t,e),e=""),n=!0),JD(this,t,e,!1,n)};Ve.prototype.unshift=function(t){return JD(this,t,null,!0,!1)};function JD(t,e,r,n,i){we("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,xfe(t,s);else{var o;if(i||(o=kfe(s,e)),o)_d(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Qg.prototype&&(e=Sfe(e)),n)s.endEmitted?_d(t,new Nfe):ES(t,s,e,!0);else if(s.ended)_d(t,new Ife);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?ES(t,s,e,!1):RS(t,s)):ES(t,s,e,!1)}else n||(s.reading=!1,RS(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function ES(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Zg(t)),RS(t,e)}function kfe(t,e){var r;return!Rfe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Ofe("chunk",["string","Buffer","Uint8Array"],e)),r}Ve.prototype.isPaused=function(){return this._readableState.flowing===!1};Ve.prototype.setEncoding=function(t){Bu||(Bu=id().StringDecoder);var e=new Bu(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var WD=1073741824;function qfe(t){return t>=WD?t=WD:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function GD(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=qfe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Ve.prototype.read=function(t){we("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return we("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?SS(this):Zg(this),null;if(t=GD(t,e),t===0&&e.ended)return e.length===0&&SS(this),null;var n=e.needReadable;we("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,we("length less than watermark",n)),e.ended||e.reading?(n=!1,we("reading or ended",n)):n&&(we("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=GD(r,e)));var i;return t>0?i=ZD(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&SS(this)),i!==null&&this.emit("data",i),i};function xfe(t,e){if(we("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Zg(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,QD(t)))}}function Zg(t){var e=t._readableState;we("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(we("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(QD,t))}function QD(t){var e=t._readableState;we("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,PS(t)}function RS(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(jfe,t,e))}function jfe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(we("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Ve.prototype._read=function(t){_d(this,new Afe("_read()"))};Ve.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,we("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:m;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(y,_){we("onunpipe"),y===r&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,c())}function a(){we("onend"),t.end()}var l=Mfe(r);t.on("drain",l);var u=!1;function c(){we("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",f),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",f);function f(y){we("ondata");var _=t.write(y);we("dest.write",_),_===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&e2(n.pipes,t)!==-1)&&!u&&(we("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(y){we("onerror",y),m(),t.removeListener("error",h),KD(t,"error")===0&&_d(t,y)}Cfe(t,"error",h);function d(){t.removeListener("finish",p),m()}t.once("close",d);function p(){we("onfinish"),t.removeListener("close",d),m()}t.once("finish",p);function m(){we("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(we("pipe resume"),r.resume()),t};function Mfe(t){return function(){var r=t._readableState;we("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&KD(t,"data")&&(r.flowing=!0,PS(t))}}Ve.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=e2(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Ve.prototype.on=function(t,e){var r=bd.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,we("on readable",n.length,n.reading),n.length?Zg(this):n.reading||process.nextTick(Lfe,this)),r};Ve.prototype.addListener=Ve.prototype.on;Ve.prototype.removeListener=function(t,e){var r=bd.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(XD,this),r};Ve.prototype.removeAllListeners=function(t){var e=bd.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(XD,this),e};function XD(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Lfe(t){we("readable nexttick read 0"),t.read(0)}Ve.prototype.resume=function(){var t=this._readableState;return t.flowing||(we("resume"),t.flowing=!t.readableListening,Dfe(this,t)),t.paused=!1,this};function Dfe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(Ffe,t,e))}function Ffe(t,e){we("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),PS(t),e.flowing&&!e.reading&&t.read(0)}Ve.prototype.pause=function(){return we("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(we("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function PS(t){var e=t._readableState;for(we("flow",e.flowing);e.flowing&&t.read()!==null;);}Ve.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(we("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(we("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<wS.length;s++)t.on(wS[s],this.emit.bind(this,wS[s]));return this._read=function(o){we("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Ve.prototype[Symbol.asyncIterator]=function(){return bS===void 0&&(bS=UD()),bS(this)});Object.defineProperty(Ve.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Ve.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Ve.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Ve._fromList=ZD;Object.defineProperty(Ve.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ZD(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function SS(t){var e=t._readableState;we("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(Ufe,e,t))}function Ufe(t,e){if(we("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Ve.from=function(t,e){return vS===void 0&&(vS=zD()),vS(Ve,t,e)});function e2(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var $S=g((OJe,n2)=>{"use strict";n2.exports=Cs;var ey=Io().codes,Bfe=ey.ERR_METHOD_NOT_IMPLEMENTED,Vfe=ey.ERR_MULTIPLE_CALLBACK,Hfe=ey.ERR_TRANSFORM_ALREADY_TRANSFORMING,zfe=ey.ERR_TRANSFORM_WITH_LENGTH_0,ty=Ka();Fi()(Cs,ty);function Wfe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Vfe);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Cs(t){if(!(this instanceof Cs))return new Cs(t);ty.call(this,t),this._transformState={afterTransform:Wfe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Gfe)}function Gfe(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){r2(t,e,r)}):r2(this,null,null)}Cs.prototype.push=function(t,e){return this._transformState.needTransform=!1,ty.prototype.push.call(this,t,e)};Cs.prototype._transform=function(t,e,r){r(new Bfe("_transform()"))};Cs.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Cs.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Cs.prototype._destroy=function(t,e){ty.prototype._destroy.call(this,t,function(r){e(r)})};function r2(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new zfe;if(t._transformState.transforming)throw new Hfe;return t.push(null)}});var o2=g((IJe,s2)=>{"use strict";s2.exports=vd;var i2=$S();Fi()(vd,i2);function vd(t){if(!(this instanceof vd))return new vd(t);i2.call(this,t)}vd.prototype._transform=function(t,e,r){r(null,t)}});var f2=g((AJe,c2)=>{"use strict";var OS;function Kfe(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var u2=Io().codes,Yfe=u2.ERR_MISSING_ARGS,Jfe=u2.ERR_STREAM_DESTROYED;function a2(t){if(t)throw t}function Qfe(t){return t.setHeader&&typeof t.abort=="function"}function Xfe(t,e,r,n){n=Kfe(n);var i=!1;t.on("close",function(){i=!0}),OS===void 0&&(OS=Kg()),OS(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,Qfe(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Jfe("pipe"))}}}function l2(t){t()}function Zfe(t,e){return t.pipe(e)}function ede(t){return!t.length||typeof t[t.length-1]!="function"?a2:t.pop()}function tde(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=ede(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Yfe("streams");var i,s=e.map(function(o,a){var l=a<e.length-1,u=a>0;return Xfe(o,l,u,function(c){i||(i=c),c&&s.forEach(l2),!l&&(s.forEach(l2),n(i))})});return e.reduce(Zfe)}c2.exports=tde});var Xa=g((In,Ed)=>{"use strict";var wd=A("stream");process.env.READABLE_STREAM==="disable"&&wd?(Ed.exports=wd.Readable,Object.assign(Ed.exports,wd),Ed.exports.Stream=wd):(In=Ed.exports=gS(),In.Stream=wd||In,In.Readable=In,In.Writable=hS(),In.Duplex=Ka(),In.Transform=$S(),In.PassThrough=o2(),In.finished=Kg(),In.pipeline=f2())});var xS=g((NJe,h2)=>{"use strict";var Vu=[],Sd=[],IS=function(){};function NS(t){return~Vu.indexOf(t)?!1:(Vu.push(t),!0)}function CS(t){IS=t}function rde(t){for(var e=[],r=0;r<Vu.length;r++){if(Vu[r].async){e.push(Vu[r]);continue}if(Vu[r](t))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(t)})).then(function(o){i(o.some(Boolean))})}):!1}function kS(t){return~Sd.indexOf(t)?!1:(Sd.push(t),!0)}function AS(){IS.apply(IS,arguments)}function d2(t){for(var e=0;e<Sd.length;e++)t=Sd[e].apply(Sd[e],arguments);return t}function qS(t,e){var r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}function nde(t){return t.enabled=!1,t.modify=kS,t.set=CS,t.use=NS,qS(function(){return!1},t)}function ide(t){function e(){var r=Array.prototype.slice.call(arguments,0);return AS.call(AS,t,d2(r,t)),!0}return t.enabled=!0,t.modify=kS,t.set=CS,t.use=NS,qS(e,t)}h2.exports=function(e){return e.introduce=qS,e.enabled=rde,e.process=d2,e.modify=kS,e.write=AS,e.nope=nde,e.yep=ide,e.set=CS,e.use=NS,e}});var m2=g((CJe,p2)=>{"use strict";var sde=xS(),ode=sde(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});p2.exports=ode});var y2=g((kJe,g2)=>{"use strict";g2.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var b2=g((qJe,_2)=>{"use strict";_2.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var E2=g((xJe,w2)=>{"use strict";var ade=b2(),lde=Array.prototype.concat,ude=Array.prototype.slice,v2=w2.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var s=e[n];ade(s)?r=lde.call(r,ude.call(s)):r.push(s)}return r};v2.wrap=function(t){return function(){return t(v2(arguments))}}});var P2=g((jJe,T2)=>{"use strict";var Rd=y2(),Td=E2(),S2=Object.hasOwnProperty,R2=Object.create(null);for(ry in Rd)S2.call(Rd,ry)&&(R2[Rd[ry]]=ry);var ry,gn=T2.exports={to:{},get:{}};gn.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=gn.get.hsl(t),n="hsl";break;case"hwb":r=gn.get.hwb(t),n="hwb";break;default:r=gn.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};gn.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,l,u;if(a=t.match(r)){for(u=a[2],a=a[1],l=0;l<3;l++){var c=l*2;o[l]=parseInt(a.slice(c,c+2),16)}u&&(o[3]=parseInt(u,16)/255)}else if(a=t.match(e)){for(a=a[1],u=a[3],l=0;l<3;l++)o[l]=parseInt(a[l]+a[l],16);u&&(o[3]=parseInt(u+u,16)/255)}else if(a=t.match(n)){for(l=0;l<3;l++)o[l]=parseInt(a[l+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=t.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(a[l+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:S2.call(Rd,a[1])?(o=Rd[a[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=qo(o[l],0,255);return o[3]=qo(o[3],0,1),o};gn.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=qo(parseFloat(r[2]),0,100),o=qo(parseFloat(r[3]),0,100),a=qo(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};gn.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=qo(parseFloat(r[2]),0,100),o=qo(parseFloat(r[3]),0,100),a=qo(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};gn.to.hex=function(){var t=Td(arguments);return"#"+ny(t[0])+ny(t[1])+ny(t[2])+(t[3]<1?ny(Math.round(t[3]*255)):"")};gn.to.rgb=function(){var t=Td(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};gn.to.rgb.percent=function(){var t=Td(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};gn.to.hsl=function(){var t=Td(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};gn.to.hwb=function(){var t=Td(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};gn.to.keyword=function(t){return R2[t.slice(0,3)]};function qo(t,e,r){return Math.min(Math.max(e,t),r)}function ny(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var O2=g((MJe,$2)=>{"use strict";$2.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var jS=g((LJe,C2)=>{"use strict";var Za=O2(),N2={};for(iy in Za)Za.hasOwnProperty(iy)&&(N2[Za[iy]]=iy);var iy,K=C2.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(jr in K)if(K.hasOwnProperty(jr)){if(!("channels"in K[jr]))throw new Error("missing channels property: "+jr);if(!("labels"in K[jr]))throw new Error("missing channel labels property: "+jr);if(K[jr].labels.length!==K[jr].channels)throw new Error("channel and label counts mismatch: "+jr);I2=K[jr].channels,A2=K[jr].labels,delete K[jr].channels,delete K[jr].labels,Object.defineProperty(K[jr],"channels",{value:I2}),Object.defineProperty(K[jr],"labels",{value:A2})}var I2,A2,jr;K.rgb.hsl=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,a,l,u;return s===i?a=0:e===s?a=(r-n)/o:r===s?a=2+(n-e)/o:n===s&&(a=4+(e-r)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(i+s)/2,s===i?l=0:u<=.5?l=o/(s+i):l=o/(2-s-i),[a,l*100,u*100]};K.rgb.hsv=function(t){var e,r,n,i,s,o=t[0]/255,a=t[1]/255,l=t[2]/255,u=Math.max(o,a,l),c=u-Math.min(o,a,l),f=function(h){return(u-h)/6/c+1/2};return c===0?i=s=0:(s=c/u,e=f(o),r=f(a),n=f(l),o===u?i=n-r:a===u?i=1/3+e-n:l===u&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,u*100]};K.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2],i=K.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};K.rgb.cmyk=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i,s,o,a;return a=Math.min(1-e,1-r,1-n),i=(1-e-a)/(1-a)||0,s=(1-r-a)/(1-a)||0,o=(1-n-a)/(1-a)||0,[i*100,s*100,o*100,a*100]};function cde(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}K.rgb.keyword=function(t){var e=N2[t];if(e)return e;var r=1/0,n;for(var i in Za)if(Za.hasOwnProperty(i)){var s=Za[i],o=cde(t,s);o<r&&(r=o,n=i)}return n};K.keyword.rgb=function(t){return Za[t]};K.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+r*.3576+n*.1805,s=e*.2126+r*.7152+n*.0722,o=e*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};K.rgb.lab=function(t){var e=K.rgb.xyz(t),r=e[0],n=e[1],i=e[2],s,o,a;return r/=95.047,n/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=116*n-16,o=500*(r-n),a=200*(n-i),[s,o,a]};K.hsl.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s,o,a,l;if(r===0)return l=n*255,[l,l,l];n<.5?s=n*(1+r):s=n+r-n*r,i=2*n-s,a=[0,0,0];for(var u=0;u<3;u++)o=e+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=i+(s-i)*6*o:2*o<1?l=s:3*o<2?l=i+(s-i)*(2/3-o)*6:l=i,a[u]=l*255;return a};K.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01),o,a;return n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s,a=(n+r)/2,o=n===0?2*i/(s+i):2*r/(n+r),[e,o*100,a*100]};K.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-r),a=255*n*(1-r*s),l=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}};K.hsv.hsl=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,o,a;return a=(2-r)*n,s=(2-r)*i,o=r*i,o/=s<=1?s:2-s,o=o||0,a/=2,[e,o*100,a*100]};K.hwb.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s,o,a,l;i>1&&(r/=i,n/=i),s=Math.floor(6*e),o=1-n,a=6*e-s,s&1&&(a=1-a),l=r+a*(o-r);var u,c,f;switch(s){default:case 6:case 0:u=o,c=l,f=r;break;case 1:u=l,c=o,f=r;break;case 2:u=r,c=o,f=l;break;case 3:u=r,c=l,f=o;break;case 4:u=l,c=r,f=o;break;case 5:u=o,c=r,f=l;break}return[u*255,c*255,f*255]};K.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s,o,a;return s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i),[s*255,o*255,a*255]};K.xyz.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,o;return i=e*3.2406+r*-1.5372+n*-.4986,s=e*-.9689+r*1.8758+n*.0415,o=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};K.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return e/=95.047,r/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*r-16,s=500*(e-r),o=200*(r-n),[i,s,o]};K.lab.xyz=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;s=(e+16)/116,i=r/500+s,o=s-n/200;var a=Math.pow(s,3),l=Math.pow(i,3),u=Math.pow(o,3);return s=a>.008856?a:(s-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};K.lab.lch=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return i=Math.atan2(n,r),s=i*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(r*r+n*n),[e,o,s]};K.lch.lab=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return o=n/360*2*Math.PI,i=r*Math.cos(o),s=r*Math.sin(o),[e,i,s]};K.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],i=1 in arguments?arguments[1]:K.rgb.hsv(t)[2];if(i=Math.round(i/50),i===0)return 30;var s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return i===2&&(s+=60),s};K.hsv.ansi16=function(t){return K.rgb.ansi16(K.hsv.rgb(t),t[2])};K.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];if(e===r&&r===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};K.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};K.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var r,n=Math.floor(t/36)/5*255,i=Math.floor((r=t%36)/6)/5*255,s=r%6/5*255;return[n,i,s]};K.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),r=e.toString(16).toUpperCase();return"000000".substring(r.length)+r};K.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];e[0].length===3&&(r=r.split("").map(function(a){return a+a}).join(""));var n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};K.rgb.hcg=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),o=i-s,a,l;return o<1?a=s/(1-o):a=0,o<=0?l=0:i===e?l=(r-n)/o%6:i===r?l=2+(n-e)/o:l=4+(e-r)/o+4,l/=6,l%=1,[l*360,o*100,a*100]};K.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,i=0;return r<.5?n=2*e*r:n=2*e*(1-r),n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};K.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};K.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];var i=[0,0,0],s=e%1*6,o=s%1,a=1-o,l=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};K.hcg.hsv=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};K.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100,n=r*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};K.hcg.hwb=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};K.hwb.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1-r,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};K.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};K.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};K.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};K.gray.hsl=K.gray.hsv=function(t){return[0,0,t[0]]};K.gray.hwb=function(t){return[0,100,t[0]]};K.gray.cmyk=function(t){return[0,0,0,t[0]]};K.gray.lab=function(t){return[t[0],0,0]};K.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,r=(e<<16)+(e<<8)+e,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};K.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}});var q2=g((DJe,k2)=>{"use strict";var sy=jS();function fde(){for(var t={},e=Object.keys(sy),r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function dde(t){var e=fde(),r=[t];for(e[t].distance=0;r.length;)for(var n=r.pop(),i=Object.keys(sy[n]),s=i.length,o=0;o<s;o++){var a=i[o],l=e[a];l.distance===-1&&(l.distance=e[n].distance+1,l.parent=n,r.unshift(a))}return e}function hde(t,e){return function(r){return e(t(r))}}function pde(t,e){for(var r=[e[t].parent,t],n=sy[e[t].parent][t],i=e[t].parent;e[i].parent;)r.unshift(e[i].parent),n=hde(sy[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}k2.exports=function(t){for(var e=dde(t),r={},n=Object.keys(e),i=n.length,s=0;s<i;s++){var o=n[s],a=e[o];a.parent!==null&&(r[o]=pde(o,e))}return r}});var j2=g((FJe,x2)=>{"use strict";var MS=jS(),mde=q2(),Hu={},gde=Object.keys(MS);function yde(t){var e=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function _de(t){var e=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=t(r);if(typeof n=="object")for(var i=n.length,s=0;s<i;s++)n[s]=Math.round(n[s]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}gde.forEach(function(t){Hu[t]={},Object.defineProperty(Hu[t],"channels",{value:MS[t].channels}),Object.defineProperty(Hu[t],"labels",{value:MS[t].labels});var e=mde(t),r=Object.keys(e);r.forEach(function(n){var i=e[n];Hu[t][n]=_de(i),Hu[t][n].raw=yde(i)})});x2.exports=Hu});var D2=g((UJe,L2)=>{"use strict";var Pd=P2(),yn=j2(),FS=[].slice,M2=["keyword","gray","hex"],LS={};Object.keys(yn).forEach(function(t){LS[FS.call(yn[t].labels).sort().join("")]=t});var oy={};function sr(t,e){if(!(this instanceof sr))return new sr(t,e);if(e&&e in M2&&(e=null),e&&!(e in yn))throw new Error("Unknown model: "+e);var r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof sr)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var i=Pd.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=yn[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length){this.model=e||"rgb",n=yn[this.model].channels;var s=FS.call(t,0,n);this.color=DS(s,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(t);"alpha"in t&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var a=o.sort().join("");if(!(a in LS))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=LS[a];var l=yn[this.model].labels,u=[];for(r=0;r<l.length;r++)u.push(t[l[r]]);this.color=DS(u)}if(oy[this.model])for(n=yn[this.model].channels,r=0;r<n;r++){var c=oy[this.model][r];c&&(this.color[r]=c(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}sr.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in Pd.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var r=e.valpha===1?e.color:e.color.concat(this.valpha);return Pd.to[e.model](r)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return Pd.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=yn[this.model].channels,r=yn[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new sr(this.color.map(vde(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new sr(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:Nt("rgb",0,Ht(255)),green:Nt("rgb",1,Ht(255)),blue:Nt("rgb",2,Ht(255)),hue:Nt(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:Nt("hsl",1,Ht(100)),lightness:Nt("hsl",2,Ht(100)),saturationv:Nt("hsv",1,Ht(100)),value:Nt("hsv",2,Ht(100)),chroma:Nt("hcg",1,Ht(100)),gray:Nt("hcg",2,Ht(100)),white:Nt("hwb",1,Ht(100)),wblack:Nt("hwb",2,Ht(100)),cyan:Nt("cmyk",0,Ht(100)),magenta:Nt("cmyk",1,Ht(100)),yellow:Nt("cmyk",2,Ht(100)),black:Nt("cmyk",3,Ht(100)),x:Nt("xyz",0,Ht(100)),y:Nt("xyz",1,Ht(100)),z:Nt("xyz",2,Ht(100)),l:Nt("lab",0,Ht(100)),a:Nt("lab",1),b:Nt("lab",2),keyword:function(t){return arguments.length?new sr(t):yn[this.model].keyword(this.color)},hex:function(t){return arguments.length?new sr(t):Pd.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return sr.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,s=2*i-1,o=r.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,l=1-a;return sr.rgb(a*r.red()+l*n.red(),a*r.green()+l*n.green(),a*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(yn).forEach(function(t){if(M2.indexOf(t)===-1){var e=yn[t].channels;sr.prototype[t]=function(){if(this.model===t)return new sr(this);if(arguments.length)return new sr(arguments,t);var r=typeof arguments[e]=="number"?e:this.valpha;return new sr(wde(yn[this.model][t].raw(this.color)).concat(r),t)},sr[t]=function(r){return typeof r=="number"&&(r=DS(FS.call(arguments),e)),new sr(r,t)}}});function bde(t,e){return Number(t.toFixed(e))}function vde(t){return function(e){return bde(e,t)}}function Nt(t,e,r){return t=Array.isArray(t)?t:[t],t.forEach(function(n){(oy[n]||(oy[n]=[]))[e]=r}),t=t[0],function(n){var i;return arguments.length?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Ht(t){return function(e){return Math.max(0,Math.min(t,e))}}function wde(t){return Array.isArray(t)?t:[t]}function DS(t,e){for(var r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}L2.exports=sr});var U2=g((BJe,F2)=>{"use strict";F2.exports=function(e){for(var r=0,n=0;r<e.length;n=e.charCodeAt(r++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i}});var z2=g((VJe,H2)=>{"use strict";var B2=D2(),V2=U2();H2.exports=function(e,r){var n=e.split(r||":"),i=V2(n[0]);if(!n.length)return i;for(var s=0,o=n.length-1;s<o;s++)i=B2(i).mix(B2(V2(n[s+1]))).saturate(1).hex();return i}});var G2=g((HJe,W2)=>{"use strict";function ci(t,e){if(e)return new ci(t).style(e);if(!(this instanceof ci))return new ci(t);this.text=t}ci.prototype.prefix="\x1B[";ci.prototype.suffix="m";ci.prototype.hex=function(e){e=e[0]==="#"?e.substring(1):e,e.length===3&&(e=e.split(""),e[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var r=e.substring(0,2),n=e.substring(2,4),i=e.substring(4,6);return[parseInt(r,16),parseInt(n,16),parseInt(i,16)]};ci.prototype.rgb=function(e,r,n){var i=e/255*5,s=r/255*5,o=n/255*5;return this.ansi(i,s,o)};ci.prototype.ansi=function(e,r,n){var i=Math.round(e),s=Math.round(r),o=Math.round(n);return 16+i*36+s*6+o};ci.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};ci.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};W2.exports=ci});var Y2=g((zJe,K2)=>{"use strict";var Ede=z2(),Sde=G2();K2.exports=function(e,r){var n=r.namespace,i=r.colors!==!1?Sde(n+":",Ede(n)):n+":";return e[0]=i+" "+e[0],e}});var Q2=g((WJe,J2)=>{"use strict";J2.exports=function(e,r){if(!r)return!1;for(var n=r.split(/[\s,]+/),i=0;i<n.length;i++){if(r=n[i].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(e))return!1;continue}if(new RegExp("^"+r+"$").test(e))return!0}return!1}});var Z2=g((GJe,X2)=>{"use strict";var Rde=Q2();X2.exports=function(e){return function(n){try{return Rde(n,e())}catch{}return!1}}});var tF=g((KJe,eF)=>{"use strict";var Tde=Z2();eF.exports=Tde(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var nF=g((YJe,rF)=>{"use strict";rF.exports=function(t,e){try{Function.prototype.apply.call(console.log,console,e)}catch{}}});var sF=g((JJe,iF)=>{"use strict";var Pde=xS(),$de=A("tty").isatty(1),ay=Pde(function t(e,r){return r=r||{},r.colors="colors"in r?r.colors:$de,r.namespace=e,r.prod=!1,r.dev=!0,!t.enabled(e)&&!(r.force||t.force)?t.nope(r):t.yep(r)});ay.modify(Y2());ay.use(tF());ay.set(nF());iF.exports=ay});var $d=g((QJe,US)=>{"use strict";process.env.NODE_ENV==="production"?US.exports=m2():US.exports=sF()});var aF=g((XJe,oF)=>{"use strict";var BS=A("fs"),{StringDecoder:Ode}=A("string_decoder"),{Stream:Ide}=Xa();function Ade(){}oF.exports=(t,e)=>{let r=Buffer.alloc(65536),n=new Ode("utf8"),i=new Ide,s="",o=0,a=0;return t.start===-1&&delete t.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},BS.open(t.file,"a+","0644",(l,u)=>{if(l){e?e(l):i.emit("error",l),i.destroy();return}(function c(){if(i.destroyed){BS.close(u,Ade);return}return BS.read(u,r,0,r.length,o,(f,h)=>{if(f){e?e(f):i.emit("error",f),i.destroy();return}if(!h)return s&&((t.start==null||a>t.start)&&(e?e(null,s):i.emit("line",s)),a++,s=""),setTimeout(c,1e3);let d=n.write(r.slice(0,h));e||i.emit("data",d),d=(s+d).split(/\n+/);let p=d.length-1,m=0;for(;m<p;m++)(t.start==null||a>t.start)&&(e?e(null,d[m]):i.emit("line",d[m])),a++;return s=d[p],o+=h,c()})})()}),e?i.destroy:i}});var fF=g((eQe,cF)=>{"use strict";var Xr=A("fs"),Yt=A("path"),lF=mD(),Nde=A("zlib"),{MESSAGE:Cde}=Dt(),{Stream:kde,PassThrough:uF}=Xa(),qde=ju(),fi=$d()("winston:file"),xde=A("os"),jde=aF();cF.exports=class extends qde{constructor(e={}){super(e),this.name=e.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new uF,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?Yt.basename(e.filename):"winston.log",this.dirname=e.dirname||Yt.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=Yt.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:xde.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let n=`${e[Cde]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,fi("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),fi("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=f(e);let n=Yt.join(this.dirname,this.filename),i="",s=[],o=0,a=Xr.createReadStream(n,{encoding:"utf8"});a.on("error",h=>{if(a.readable&&a.destroy(),!!r)return h.code!=="ENOENT"?r(h):r(null,s)}),a.on("data",h=>{h=(i+h).split(/\n+/);let d=h.length-1,p=0;for(;p<d;p++)(!e.start||o>=e.start)&&l(h[p]),o++;i=h[d]}),a.on("close",()=>{i&&l(i,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function l(h,d){try{let p=JSON.parse(h);c(p)&&u(p)}catch(p){d||a.emit("error",p)}}function u(h){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(h=e.fields.reduce((d,p)=>(d[p]=h[p],d),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(h)}function c(h){if(!h||typeof h!="object")return;let d=new Date(h.timestamp);if(!(e.from&&d<e.from||e.until&&d>e.until||e.level&&e.level!==h.level))return!0}function f(h){return h=h||{},h.rows=h.rows||h.limit||10,h.start=h.start||0,h.until=h.until||new Date,typeof h.until!="object"&&(h.until=new Date(h.until)),h.from=h.from||h.until-24*60*60*1e3,typeof h.from!="object"&&(h.from=new Date(h.from)),h.order=h.order||"desc",h}}stream(e={}){let r=Yt.join(this.dirname,this.filename),n=new kde,i={file:r,start:e.start};return n.destroy=jde(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);fi("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.emit("rotate")||(this._rotate=!1)})})))}stat(e){let r=this._getFile(),n=Yt.join(this.dirname,r);Xr.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return fi("ENOENT\xA0ok",n),this.filename=r,e(null,0);if(i)return fi(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=Yt.join(this.dirname,this.filename);fi("create stream start",r,this.options);let n=Xr.createWriteStream(r,this.options).on("error",i=>fi(i)).on("close",()=>fi("close",n.path,n.bytesWritten)).on("open",()=>{fi("file open ok",r),this.emit("open",r),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new uF,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});return fi("create stream ok",r),n}_incFile(e){fi("_incFile",this.filename);let r=Yt.extname(this._basename),n=Yt.basename(this._basename,r),i=[];this.zippedArchive&&i.push(function(s){let o=this._created>0&&!this.tailable?this._created:"";this._compressFile(Yt.join(this.dirname,`${n}${o}${r}`),Yt.join(this.dirname,`${n}${o}${r}.gz`),s)}.bind(this)),i.push(function(s){this.tailable?this._checkMaxFilesTailable(r,n,s):(this._created+=1,this._checkMaxFilesIncrementing(r,n,s))}.bind(this)),lF(i,e)}_getFile(){let e=Yt.extname(this._basename),r=Yt.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(e,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${e}${o}`,l=Yt.join(this.dirname,a);Xr.unlink(l,n)}_checkMaxFilesTailable(e,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,l){let u=`${r}${a-1}${e}${s}`,c=Yt.join(this.dirname,u);Xr.exists(c,f=>{if(!f)return l(null);u=`${r}${a}${e}${s}`,Xr.rename(c,Yt.join(this.dirname,u),l)})}.bind(this,o));lF(i,()=>{Xr.rename(Yt.join(this.dirname,`${r}${e}${s}`),Yt.join(this.dirname,`${r}1${e}${s}`),n)})}_compressFile(e,r,n){Xr.access(e,Xr.F_OK,i=>{if(i)return n();var s=Nde.createGzip(),o=Xr.createReadStream(e),a=Xr.createWriteStream(r);a.on("finish",()=>{Xr.unlink(e,n)}),o.pipe(s).pipe(a)})}_createLogDirIfNotExist(e){Xr.existsSync(e)||Xr.mkdirSync(e,{recursive:!0})}}});var hF=g((rQe,dF)=>{"use strict";var Mde=A("http"),Lde=A("https"),{Stream:Dde}=Xa(),Fde=ju(),{configure:Ude}=$u();dF.exports=class extends Fde{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(l){return r(l)}r(null,a)})}stream(e={}){let r=new Dde;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let l=a.length-1,u=0;for(;u<l;u++)try{r.emit("log",JSON.parse(a[u]))}catch(c){r.emit("error",c)}s=a[l]}),o.on("error",a=>r.emit("error",a)),r}_request(e,r,n,i){e=e||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,r,n):this._doRequest(e,i,r,n)}_doBatch(e,r,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,r,n)}_doRequest(e,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?Lde:Mde).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",l=>l.on("end",()=>r(null,l)).resume());let a=Ude({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});o.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}});var VS=g((nQe,pF)=>{"use strict";var Hi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Hi.writable=t=>Hi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Hi.readable=t=>Hi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Hi.duplex=t=>Hi.writable(t)&&Hi.readable(t);Hi.transform=t=>Hi.duplex(t)&&typeof t._transform=="function";pF.exports=Hi});var gF=g((sQe,mF)=>{"use strict";var Bde=VS(),{MESSAGE:Vde}=Dt(),Hde=A("os"),zde=ju();mF.exports=class extends zde{constructor(e={}){if(super(e),!e.stream||!Bde(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:Hde.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[Vde]}${this.eol}`),r&&r()}}});var yF=g(Od=>{"use strict";Object.defineProperty(Od,"Console",{configurable:!0,enumerable:!0,get(){return kL()}});Object.defineProperty(Od,"File",{configurable:!0,enumerable:!0,get(){return fF()}});Object.defineProperty(Od,"Http",{configurable:!0,enumerable:!0,get(){return hF()}});Object.defineProperty(Od,"Stream",{configurable:!0,enumerable:!0,get(){return gF()}})});var uy=g(Id=>{"use strict";var ly=EE(),{configs:HS}=Dt();Id.cli=ly.levels(HS.cli);Id.npm=ly.levels(HS.npm);Id.syslog=ly.levels(HS.syslog);Id.addColors=ly.levels});var bF=g((cy,_F)=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});var Wde=Pg(),Gde=el(Wde),Kde=jg(),Yde=el(Kde),Jde=sS(),Qde=el(Jde),Xde=rS(),Zde=el(Xde),ehe=nS(),the=el(ehe),rhe=Ga(),nhe=el(rhe),ihe=Lu(),she=el(ihe);function el(t){return t&&t.__esModule?t:{default:t}}function ohe(t,e,r){r=(0,Zde.default)(r);var n=0,i=0,{length:s}=t,o=!1;s===0&&r(null);function a(l,u){l===!1&&(o=!0),o!==!0&&(l?r(l):(++i===s||u===Yde.default)&&r(null))}for(;n<s;n++)e(t[n],n,(0,the.default)(a))}function ahe(t,e,r){return(0,Qde.default)(t,1/0,e,r)}function lhe(t,e,r){var n=(0,Gde.default)(t)?ohe:ahe;return n(t,(0,nhe.default)(e),r)}cy.default=(0,she.default)(lhe,3);_F.exports=cy.default});var wF=g((fy,vF)=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0});fy.default=uhe;function uhe(t){return(e,r,n)=>t(e,n)}vF.exports=fy.default});var py=g((hy,EF)=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});var che=bF(),fhe=dy(che),dhe=wF(),hhe=dy(dhe),phe=Ga(),mhe=dy(phe),ghe=Lu(),yhe=dy(ghe);function dy(t){return t&&t.__esModule?t:{default:t}}function _he(t,e,r){return(0,fhe.default)(t,(0,hhe.default)((0,mhe.default)(e)),r)}hy.default=(0,yhe.default)(_he,3);EF.exports=hy.default});var RF=g((lQe,SF)=>{"use strict";var bhe=Object.prototype.toString;SF.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),n=bhe.call(e).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var zS=g((uQe,TF)=>{"use strict";var vhe=RF();TF.exports=function(e){var r=0,n;function i(){return r||(r=1,n=e.apply(this,arguments),e=null),n}return i.displayName=vhe(e),i}});var WS=g(Nd=>{"use strict";Nd.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||Nd.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};Nd.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,l=null,u=null,c=i[5]==="native";if(i[1]){a=i[1];var f=a.lastIndexOf(".");if(a[f-1]=="."&&f--,f>0){s=a.substr(0,f),o=a.substr(f+1);var h=s.indexOf(".Module");h>0&&(a=a.substr(h+1),s=s.substr(0,h))}l=null}o&&(l=s,u=o),o==="<anonymous>"&&(u=null,a=null);var d={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:l,methodName:u,columnNumber:parseInt(i[4],10)||null,native:c};return e._createParsedCallSite(d)}}).filter(function(n){return!!n})};function Ad(t){for(var e in t)this[e]=t[e]}var whe=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],Ehe=["topLevel","eval","native","constructor"];whe.forEach(function(t){Ad.prototype[t]=null,Ad.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});Ehe.forEach(function(t){Ad.prototype[t]=!1,Ad.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});Nd._createParsedCallSite=function(t){return new Ad(t)}});var $F=g((dQe,PF)=>{"use strict";var{Writable:She}=Xa();PF.exports=class extends She{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var KS=g((pQe,AF)=>{"use strict";var OF=A("os"),Rhe=py(),GS=$d()("winston:exception"),The=zS(),IF=WS(),Phe=$F();AF.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:OF.loadavg(),uptime:OF.uptime()}}getTrace(e){return(e?IF.parse(e):IF.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new Phe(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){GS("doExit",i),GS("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);Rhe(n,(a,l)=>{let u=The(l),c=a.transport||a;function f(h){return()=>{GS(h),u()}}c._ending=!0,c.once("finish",f("finished")),c.once("error",f("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var CF=g((gQe,NF)=>{"use strict";var{Writable:$he}=Xa();NF.exports=class extends $he{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,r,n){return e.rejection?this.transport.log(e,n):(n(),!0)}}});var JS=g((_Qe,xF)=>{"use strict";var kF=A("os"),Ohe=py(),YS=$d()("winston:rejection"),Ihe=zS(),qF=WS(),Ahe=CF();xF.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,rejection:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:kF.loadavg(),uptime:kF.uptime()}}getTrace(e){return(e?qF.parse(e):qF.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new Ahe(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){YS("doExit",i),YS("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);Ohe(n,(a,l)=>{let u=Ihe(l),c=a.transport||a;function f(h){return()=>{YS(h),u()}}c._ending=!0,c.once("finish",f("finished")),c.once("error",f("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var MF=g((bQe,jF)=>{"use strict";var QS=class{constructor(e){let r=my();if(typeof e!="object"||Array.isArray(e)||!(e instanceof r))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};jF.exports=QS});var my=g((vQe,UF)=>{"use strict";var{Stream:Nhe,Transform:Che}=Xa(),LF=py(),{LEVEL:zi,SPLAT:DF}=Dt(),FF=VS(),khe=KS(),qhe=JS(),xhe=ZE(),jhe=MF(),{warn:Mhe}=SE(),Lhe=uy(),Dhe=/%[scdjifoO%]/g,gy=class extends Che{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:e,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:l,emitErrs:u,formatters:c,padLevels:f,rewriters:h,stripColors:d,exceptionHandlers:p,rejectionHandlers:m}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||gE()(),this.defaultMeta=n||null,this.levels=i||this.levels||Lhe.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new khe(this),this.rejections=new qhe(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(y=>this.add(y))),l||u||c||f||h||d)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));p&&this.exceptions.handle(p),m&&this.rejections.handle(m)}isLevelEnabled(e){let r=XS(this.levels,e);if(r===null)return!1;let n=XS(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=XS(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(e,r,...n){if(arguments.length===1)return e[zi]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[zi]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[zi]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(Dhe))){let o=Object.assign({},this.defaultMeta,i,{[zi]:e,[DF]:n,level:e,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),i.cause&&(o.cause=i.cause),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[zi]:e,[DF]:n,level:e,message:r})),this}_transform(e,r,n){if(this.silent)return n();e[zi]||(e[zi]=e.level),!this.levels[e[zi]]&&this.levels[e[zi]]!==0&&console.error("[winston] Unknown logger level: %s",e[zi]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let r=this.transports.slice();LF(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let r=!FF(e)||e.log.length>2?new xhe({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!FF(e)||e.log.length>2)&&(r=this.transports.filter(n=>n.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){Mhe.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(a,l){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(i)),a.query(e,(u,c)=>{if(u)return l(u);typeof a.formatResults=="function"&&(c=a.formatResults(c,e.format)),l(null,c)})}function o(a,l){s(a,(u,c)=>{l&&(c=u||c,c&&(n[a.name]=c),l()),l=null})}LF(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(e={}){let r=new Nhe,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new jhe(this)}profile(e,...r){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function n(i){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,i,r)}r["__winston"+e]||(r["__winston"+e]=n.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function XS(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(gy.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});UF.exports=gy});var ZS=g((wQe,BF)=>{"use strict";var{LEVEL:Fhe}=Dt(),Uhe=uy(),Bhe=my(),Vhe=$d()("winston:create-logger");function Hhe(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}BF.exports=function(t={}){t.levels=t.levels||Uhe.npm.levels;class e extends Bhe{constructor(i){super(i)}}let r=new e(t);return Object.keys(t.levels).forEach(function(n){if(Vhe('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[Fhe]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[Hhe(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var HF=g((SQe,VF)=>{"use strict";var zhe=ZS();VF.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=zhe(r);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var WF=g(rt=>{"use strict";var zF=EE(),{warn:Cd}=SE();rt.version=AM().version;rt.transports=yF();rt.config=uy();rt.addColors=zF.levels;rt.format=zF.format;rt.createLogger=ZS();rt.Logger=my();rt.ExceptionHandler=KS();rt.RejectionHandler=JS();rt.Container=HF();rt.Transport=ju();rt.loggers=new rt.Container;var Wi=rt.createLogger();Object.keys(rt.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>rt[t]=(...e)=>Wi[t](...e));Object.defineProperty(rt,"level",{get(){return Wi.level},set(t){Wi.level=t}});Object.defineProperty(rt,"exceptions",{get(){return Wi.exceptions}});Object.defineProperty(rt,"rejections",{get(){return Wi.rejections}});["exitOnError"].forEach(t=>{Object.defineProperty(rt,t,{get(){return Wi[t]},set(e){Wi[t]=e}})});Object.defineProperty(rt,"default",{get(){return{exceptionHandlers:Wi.exceptionHandlers,rejectionHandlers:Wi.rejectionHandlers,transports:Wi.transports}}});Cd.deprecated(rt,"setLevels");Cd.forFunctions(rt,"useFormat",["cli"]);Cd.forProperties(rt,"useFormat",["padLevels","stripColors"]);Cd.forFunctions(rt,"deprecated",["addRewriter","addFilter","clone","extend"]);Cd.forProperties(rt,"deprecated",["emitErrs","levelLength"])});var QF=g(s1=>{"use strict";Object.defineProperty(s1,"__esModule",{value:!0});var i1=class{constructor(e){this.aliasToTopic={},this.max=e}put(e,r){return r===0||r>this.max?!1:(this.aliasToTopic[r]=e,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(e){return this.aliasToTopic[e]}clear(){this.aliasToTopic={}}};s1.default=i1});var Tt=g((MQe,XF)=>{"use strict";XF.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var l5=g((xd,qd)=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});var i5=new WeakMap,o1=new WeakMap;function ft(t){let e=i5.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function ZF(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function zu(t,e){i5.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let n=0;n<r.length;++n){let i=r[n];i in this||Object.defineProperty(this,i,s5(i))}}zu.prototype={get type(){return ft(this).event.type},get target(){return ft(this).eventTarget},get currentTarget(){return ft(this).currentTarget},composedPath(){let t=ft(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return ft(this).eventPhase},stopPropagation(){let t=ft(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=ft(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!ft(this).event.bubbles},get cancelable(){return!!ft(this).event.cancelable},preventDefault(){ZF(ft(this))},get defaultPrevented(){return ft(this).canceled},get composed(){return!!ft(this).event.composed},get timeStamp(){return ft(this).timeStamp},get srcElement(){return ft(this).eventTarget},get cancelBubble(){return ft(this).stopped},set cancelBubble(t){if(!t)return;let e=ft(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!ft(this).canceled},set returnValue(t){t||ZF(ft(this))},initEvent(){}};Object.defineProperty(zu.prototype,"constructor",{value:zu,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(zu.prototype,window.Event.prototype),o1.set(window.Event.prototype,zu));function s5(t){return{get(){return ft(this).event[t]},set(e){ft(this).event[t]=e},configurable:!0,enumerable:!0}}function Ghe(t){return{value(){let e=ft(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function Khe(t,e){let r=Object.keys(e);if(r.length===0)return t;function n(i,s){t.call(this,i,s)}n.prototype=Object.create(t.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let s=r[i];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(n.prototype,s,a?Ghe(s):s5(s))}}return n}function o5(t){if(t==null||t===Object.prototype)return zu;let e=o1.get(t);return e==null&&(e=Khe(o5(Object.getPrototypeOf(t)),t),o1.set(t,e)),e}function Yhe(t,e){let r=o5(Object.getPrototypeOf(e));return new r(t,e)}function Jhe(t){return ft(t).immediateStopped}function Qhe(t,e){ft(t).eventPhase=e}function Xhe(t,e){ft(t).currentTarget=e}function e5(t,e){ft(t).passiveListener=e}var a5=new WeakMap,t5=1,r5=2,yy=3;function _y(t){return t!==null&&typeof t=="object"}function kd(t){let e=a5.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function Zhe(t){return{get(){let r=kd(this).get(t);for(;r!=null;){if(r.listenerType===yy)return r.listener;r=r.next}return null},set(e){typeof e!="function"&&!_y(e)&&(e=null);let r=kd(this),n=null,i=r.get(t);for(;i!=null;)i.listenerType===yy?n!==null?n.next=i.next:i.next!==null?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(e!==null){let s={listener:e,listenerType:yy,passive:!1,once:!1,next:null};n===null?r.set(t,s):n.next=s}},configurable:!0,enumerable:!0}}function a1(t,e){Object.defineProperty(t,`on${e}`,Zhe(e))}function n5(t){function e(){di.call(this)}e.prototype=Object.create(di.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)a1(e.prototype,t[r]);return e}function di(){if(this instanceof di){a5.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return n5(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return n5(t)}throw new TypeError("Cannot call a class as a function")}di.prototype={addEventListener(t,e,r){if(e==null)return;if(typeof e!="function"&&!_y(e))throw new TypeError("'listener' should be a function or an object.");let n=kd(this),i=_y(r),o=(i?!!r.capture:!!r)?t5:r5,a={listener:e,listenerType:o,passive:i&&!!r.passive,once:i&&!!r.once,next:null},l=n.get(t);if(l===void 0){n.set(t,a);return}let u=null;for(;l!=null;){if(l.listener===e&&l.listenerType===o)return;u=l,l=l.next}u.next=a},removeEventListener(t,e,r){if(e==null)return;let n=kd(this),s=(_y(r)?!!r.capture:!!r)?t5:r5,o=null,a=n.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?n.set(t,a.next):n.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=kd(this),r=t.type,n=e.get(r);if(n==null)return!0;let i=Yhe(this,t),s=null;for(;n!=null;){if(n.once?s!==null?s.next=n.next:n.next!==null?e.set(r,n.next):e.delete(r):s=n,e5(i,n.passive?n.listener:null),typeof n.listener=="function")try{n.listener.call(this,i)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else n.listenerType!==yy&&typeof n.listener.handleEvent=="function"&&n.listener.handleEvent(i);if(Jhe(i))break;n=n.next}return e5(i,null),Qhe(i,0),Xhe(i,null),!i.defaultPrevented}};Object.defineProperty(di.prototype,"constructor",{value:di,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(di.prototype,window.EventTarget.prototype);xd.defineEventAttribute=a1;xd.EventTarget=di;xd.default=di;qd.exports=di;qd.exports.EventTarget=qd.exports.default=di;qd.exports.defineEventAttribute=a1});var Wu=g((Md,jd)=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var l1=l5(),xo=class extends l1.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=by.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};l1.defineEventAttribute(xo.prototype,"abort");function epe(){let t=Object.create(xo.prototype);return l1.EventTarget.call(t),by.set(t,!1),t}function tpe(t){by.get(t)===!1&&(by.set(t,!0),t.dispatchEvent({type:"abort"}))}var by=new WeakMap;Object.defineProperties(xo.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(xo.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var jo=class{constructor(){c5.set(this,epe())}get signal(){return u5(this)}abort(){tpe(u5(this))}},c5=new WeakMap;function u5(t){let e=c5.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(jo.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(jo.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});Md.AbortController=jo;Md.AbortSignal=xo;Md.default=jo;jd.exports=jo;jd.exports.AbortController=jd.exports.default=jo;jd.exports.AbortSignal=xo});var _r=g((LQe,c1)=>{"use strict";var rpe=A("buffer"),{kResistStopPropagation:npe,SymbolDispose:ipe}=Tt(),spe=globalThis.AbortSignal||Wu().AbortSignal,ope=globalThis.AbortController||Wu().AbortController,ape=Object.getPrototypeOf(async function(){}).constructor,f5=globalThis.Blob||rpe.Blob,lpe=typeof f5<"u"?function(e){return e instanceof f5}:function(e){return!1},d5=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},upe=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},u1=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};c1.exports={AggregateError:u1,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof ape},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:lpe,deprecate(t,e){return t},addAbortListener:A("events").addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);d5(e,"signal"),upe(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[npe]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[ipe](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:spe.any||function(e){if(e.length===1)return e[0];let r=new ope,n=()=>r.abort();return e.forEach(i=>{d5(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};c1.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Mr=g((DQe,m5)=>{"use strict";var{format:cpe,inspect:vy,AggregateError:fpe}=_r(),dpe=globalThis.AggregateError||fpe,hpe=Symbol("kIsNodeError"),ppe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],mpe=/^([A-Z][a-z0-9]*)+$/,gpe="__node_internal_",wy={};function tl(t,e){if(!t)throw new wy.ERR_INTERNAL_ASSERTION(e)}function h5(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function ype(t,e,r){if(typeof e=="function")return tl(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return tl(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:cpe(e,...r)}function ar(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(ype(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[hpe]=!0,wy[t]=n}function p5(t){let e=gpe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function _pe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new dpe([e,t],e.message);return r.code=e.code,r}return t||e}var f1=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new wy.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ar("ERR_ASSERTION","%s",Error);ar("ERR_INVALID_ARG_TYPE",(t,e,r)=>{tl(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)tl(typeof l=="string","All expected entries have to be of type string"),ppe.includes(l)?i.push(l.toLowerCase()):mpe.test(l)?s.push(l):(tl(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=vy(r,{depth:-1});n+=`. Received ${l}`}}else{let l=vy(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);ar("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=vy(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ar("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ar("ERR_MISSING_ARGS",(...t)=>{tl(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ar("ERR_OUT_OF_RANGE",(t,e,r)=>{tl(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=h5(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=h5(n)),n+="n"):n=vy(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ar("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ar("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ar("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ar("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ar("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ar("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ar("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ar("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ar("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ar("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ar("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);m5.exports={AbortError:f1,aggregateTwoErrors:p5(_pe),hideStackFrames:p5,codes:wy}});var Ku=g((FQe,T5)=>{"use strict";var{ArrayIsArray:h1,ArrayPrototypeIncludes:b5,ArrayPrototypeJoin:v5,ArrayPrototypeMap:bpe,NumberIsInteger:p1,NumberIsNaN:vpe,NumberMAX_SAFE_INTEGER:wpe,NumberMIN_SAFE_INTEGER:Epe,NumberParseInt:Spe,ObjectPrototypeHasOwnProperty:Rpe,RegExpPrototypeExec:w5,String:Tpe,StringPrototypeToUpperCase:Ppe,StringPrototypeTrim:$pe}=Tt(),{hideStackFrames:An,codes:{ERR_SOCKET_BAD_PORT:Ope,ERR_INVALID_ARG_TYPE:br,ERR_INVALID_ARG_VALUE:Gu,ERR_OUT_OF_RANGE:rl,ERR_UNKNOWN_SIGNAL:g5}}=Mr(),{normalizeEncoding:Ipe}=_r(),{isAsyncFunction:Ape,isArrayBufferView:Npe}=_r().types,y5={};function Cpe(t){return t===(t|0)}function kpe(t){return t===t>>>0}var qpe=/^[0-7]+$/,xpe="must be a 32-bit unsigned integer or an octal string";function jpe(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(w5(qpe,t)===null)throw new Gu(e,t,xpe);t=Spe(t,8)}return E5(t,e),t}var Mpe=An((t,e,r=Epe,n=wpe)=>{if(typeof t!="number")throw new br(e,"number",t);if(!p1(t))throw new rl(e,"an integer",t);if(t<r||t>n)throw new rl(e,`>= ${r} && <= ${n}`,t)}),Lpe=An((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new br(e,"number",t);if(!p1(t))throw new rl(e,"an integer",t);if(t<r||t>n)throw new rl(e,`>= ${r} && <= ${n}`,t)}),E5=An((t,e,r=!1)=>{if(typeof t!="number")throw new br(e,"number",t);if(!p1(t))throw new rl(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new rl(e,`>= ${n} && <= ${i}`,t)});function m1(t,e){if(typeof t!="string")throw new br(e,"string",t)}function Dpe(t,e,r=void 0,n){if(typeof t!="number")throw new br(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&vpe(t))throw new rl(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Fpe=An((t,e,r)=>{if(!b5(r,t)){let i="must be one of: "+v5(bpe(r,s=>typeof s=="string"?`'${s}'`:Tpe(s)),", ");throw new Gu(e,t,i)}});function S5(t,e){if(typeof t!="boolean")throw new br(e,"boolean",t)}function d1(t,e,r){return t==null||!Rpe(t,e)?r:t[e]}var Upe=An((t,e,r=null)=>{let n=d1(r,"allowArray",!1),i=d1(r,"allowFunction",!1);if(!d1(r,"nullable",!1)&&t===null||!n&&h1(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new br(e,"Object",t)}),Bpe=An((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new br(e,"a dictionary",t)}),Ey=An((t,e,r=0)=>{if(!h1(t))throw new br(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Gu(e,t,n)}});function Vpe(t,e){Ey(t,e);for(let r=0;r<t.length;r++)m1(t[r],`${e}[${r}]`)}function Hpe(t,e){Ey(t,e);for(let r=0;r<t.length;r++)S5(t[r],`${e}[${r}]`)}function zpe(t,e){Ey(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new br(i,"AbortSignal",n);R5(n,i)}}function Wpe(t,e="signal"){if(m1(t,e),y5[t]===void 0)throw y5[Ppe(t)]!==void 0?new g5(t+" (signals must use all capital letters)"):new g5(t)}var Gpe=An((t,e="buffer")=>{if(!Npe(t))throw new br(e,["Buffer","TypedArray","DataView"],t)});function Kpe(t,e){let r=Ipe(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Gu("encoding",e,`is invalid for data of length ${n}`)}function Ype(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&$pe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Ope(e,t,r);return t|0}var R5=An((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new br(e,"AbortSignal",t)}),Jpe=An((t,e)=>{if(typeof t!="function")throw new br(e,"Function",t)}),Qpe=An((t,e)=>{if(typeof t!="function"||Ape(t))throw new br(e,"Function",t)}),Xpe=An((t,e)=>{if(t!==void 0)throw new br(e,"undefined",t)});function Zpe(t,e,r){if(!b5(r,t))throw new br(e,`('${v5(r,"|")}')`,t)}var eme=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function _5(t,e){if(typeof t>"u"||!w5(eme,t))throw new Gu(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function tme(t){if(typeof t=="string")return _5(t,"hints"),t;if(h1(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];_5(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Gu("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}T5.exports={isInt32:Cpe,isUint32:kpe,parseFileMode:jpe,validateArray:Ey,validateStringArray:Vpe,validateBooleanArray:Hpe,validateAbortSignalArray:zpe,validateBoolean:S5,validateBuffer:Gpe,validateDictionary:Bpe,validateEncoding:Kpe,validateFunction:Jpe,validateInt32:Lpe,validateInteger:Mpe,validateNumber:Dpe,validateObject:Upe,validateOneOf:Fpe,validatePlainFunction:Qpe,validatePort:Ype,validateSignalName:Wpe,validateString:m1,validateUint32:E5,validateUndefined:Xpe,validateUnion:Zpe,validateAbortSignal:R5,validateLinkHeaderValue:tme}});var Mo=g((UQe,P5)=>{"use strict";P5.exports=global.process});var Qi=g((BQe,U5)=>{"use strict";var{SymbolAsyncIterator:$5,SymbolIterator:O5,SymbolFor:nl}=Tt(),I5=nl("nodejs.stream.destroyed"),A5=nl("nodejs.stream.errored"),g1=nl("nodejs.stream.readable"),y1=nl("nodejs.stream.writable"),N5=nl("nodejs.stream.disturbed"),rme=nl("nodejs.webstream.isClosedPromise"),nme=nl("nodejs.webstream.controllerErrorFunction");function Sy(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Ry(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function ime(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ji(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function C5(t){return!!(t&&!Ji(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function k5(t){return!!(t&&!Ji(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function q5(t){return!!(t&&!Ji(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function sme(t){return C5(t)||k5(t)||q5(t)}function ome(t,e){return t==null?!1:e===!0?typeof t[$5]=="function":e===!1?typeof t[O5]=="function":typeof t[$5]=="function"||typeof t[O5]=="function"}function Ty(t){if(!Ji(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[I5]||n!=null&&n.destroyed)}function x5(t){if(!Ry(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function ame(t,e){if(!Ry(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function lme(t){if(!Sy(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function j5(t,e){if(!Sy(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function M5(t){return t&&t[g1]!=null?t[g1]:typeof t?.readable!="boolean"?null:Ty(t)?!1:Sy(t)&&t.readable&&!j5(t)}function L5(t){return t&&t[y1]!=null?t[y1]:typeof t?.writable!="boolean"?null:Ty(t)?!1:Ry(t)&&t.writable&&!x5(t)}function ume(t,e){return Ji(t)?Ty(t)?!0:!(e?.readable!==!1&&M5(t)||e?.writable!==!1&&L5(t)):null}function cme(t){var e,r;return Ji(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function fme(t){var e,r;return Ji(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function dme(t){if(!Ji(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&D5(t)?t._closed:null}function D5(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function F5(t){return typeof t._sent100=="boolean"&&D5(t)}function hme(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function pme(t){if(!Ji(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&F5(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function mme(t){var e;return!!(t&&((e=t[N5])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function gme(t){var e,r,n,i,s,o,a,l,u,c;return!!(t&&((e=(r=(n=(i=(s=(o=t[A5])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(u=t._readableState)===null||u===void 0?void 0:u.errored)!==null&&e!==void 0?e:!((c=t._writableState)===null||c===void 0)&&c.errored))}U5.exports={isDestroyed:Ty,kIsDestroyed:I5,isDisturbed:mme,kIsDisturbed:N5,isErrored:gme,kIsErrored:A5,isReadable:M5,kIsReadable:g1,kIsClosedPromise:rme,kControllerErrorFunction:nme,kIsWritable:y1,isClosed:dme,isDuplexNodeStream:ime,isFinished:ume,isIterable:ome,isReadableNodeStream:Sy,isReadableStream:C5,isReadableEnded:lme,isReadableFinished:j5,isReadableErrored:fme,isNodeStream:Ji,isWebStream:sme,isWritable:L5,isWritableNodeStream:Ry,isWritableStream:k5,isWritableEnded:x5,isWritableFinished:ame,isWritableErrored:cme,isServerRequest:hme,isServerResponse:F5,willEmitClose:pme,isTransformStream:q5}});var ks=g((VQe,E1)=>{"use strict";var Lo=Mo(),{AbortError:J5,codes:yme}=Mr(),{ERR_INVALID_ARG_TYPE:_me,ERR_STREAM_PREMATURE_CLOSE:B5}=yme,{kEmptyObject:b1,once:v1}=_r(),{validateAbortSignal:bme,validateFunction:vme,validateObject:wme,validateBoolean:Eme}=Ku(),{Promise:Sme,PromisePrototypeThen:Rme,SymbolDispose:Q5}=Tt(),{isClosed:Tme,isReadable:V5,isReadableNodeStream:_1,isReadableStream:Pme,isReadableFinished:H5,isReadableErrored:z5,isWritable:W5,isWritableNodeStream:G5,isWritableStream:$me,isWritableFinished:K5,isWritableErrored:Y5,isNodeStream:Ome,willEmitClose:Ime,kIsClosedPromise:Ame}=Qi(),Yu;function Nme(t){return t.setHeader&&typeof t.abort=="function"}var w1=()=>{};function X5(t,e,r){var n,i;if(arguments.length===2?(r=e,e=b1):e==null?e=b1:wme(e,"options"),vme(r,"callback"),bme(e.signal,"options.signal"),r=v1(r),Pme(t)||$me(t))return Cme(t,e,r);if(!Ome(t))throw new _me("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:_1(t),o=(i=e.writable)!==null&&i!==void 0?i:G5(t),a=t._writableState,l=t._readableState,u=()=>{t.writable||h()},c=Ime(t)&&_1(t)===s&&G5(t)===o,f=K5(t,!1),h=()=>{f=!0,t.destroyed&&(c=!1),!(c&&(!t.readable||s))&&(!s||d)&&r.call(t)},d=H5(t,!1),p=()=>{d=!0,t.destroyed&&(c=!1),!(c&&(!t.writable||o))&&(!o||f)&&r.call(t)},m=E=>{r.call(t,E)},y=Tme(t),_=()=>{y=!0;let E=Y5(t)||z5(t);if(E&&typeof E!="boolean")return r.call(t,E);if(s&&!d&&_1(t,!0)&&!H5(t,!1))return r.call(t,new B5);if(o&&!f&&!K5(t,!1))return r.call(t,new B5);r.call(t)},w=()=>{y=!0;let E=Y5(t)||z5(t);if(E&&typeof E!="boolean")return r.call(t,E);r.call(t)},v=()=>{t.req.on("finish",h)};Nme(t)?(t.on("complete",h),c||t.on("abort",_),t.req?v():t.on("request",v)):o&&!a&&(t.on("end",u),t.on("close",u)),!c&&typeof t.aborted=="boolean"&&t.on("aborted",_),t.on("end",p),t.on("finish",h),e.error!==!1&&t.on("error",m),t.on("close",_),y?Lo.nextTick(_):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?c||Lo.nextTick(w):(!s&&(!c||V5(t))&&(f||W5(t)===!1)||!o&&(!c||W5(t))&&(d||V5(t)===!1)||l&&t.req&&t.aborted)&&Lo.nextTick(w);let b=()=>{r=w1,t.removeListener("aborted",_),t.removeListener("complete",h),t.removeListener("abort",_),t.removeListener("request",v),t.req&&t.req.removeListener("finish",h),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",m),t.removeListener("close",_)};if(e.signal&&!y){let E=()=>{let R=r;b(),R.call(t,new J5(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Lo.nextTick(E);else{Yu=Yu||_r().addAbortListener;let R=Yu(e.signal,E),S=r;r=v1((...P)=>{R[Q5](),S.apply(t,P)})}}return b}function Cme(t,e,r){let n=!1,i=w1;if(e.signal)if(i=()=>{n=!0,r.call(t,new J5(void 0,{cause:e.signal.reason}))},e.signal.aborted)Lo.nextTick(i);else{Yu=Yu||_r().addAbortListener;let o=Yu(e.signal,i),a=r;r=v1((...l)=>{o[Q5](),a.apply(t,l)})}let s=(...o)=>{n||Lo.nextTick(()=>r.apply(t,o))};return Rme(t[Ame].promise,s,s),w1}function kme(t,e){var r;let n=!1;return e===null&&(e=b1),(r=e)!==null&&r!==void 0&&r.cleanup&&(Eme(e.cleanup,"cleanup"),n=e.cleanup),new Sme((i,s)=>{let o=X5(t,e,a=>{n&&o(),a?s(a):i()})})}E1.exports=X5;E1.exports.finished=kme});var il=g((HQe,oU)=>{"use strict";var Xi=Mo(),{aggregateTwoErrors:qme,codes:{ERR_MULTIPLE_CALLBACK:xme},AbortError:jme}=Mr(),{Symbol:tU}=Tt(),{kIsDestroyed:Mme,isDestroyed:Lme,isFinished:Dme,isServerRequest:Fme}=Qi(),rU=tU("kDestroy"),S1=tU("kConstruct");function nU(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Ume(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(nU(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Z5(this,t,e):this.once(rU,function(s){Z5(this,qme(s,t),e)}),this)}function Z5(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;nU(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?Xi.nextTick(Bme,t,s):Xi.nextTick(iU,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function Bme(t,e){R1(t,e),iU(t)}function iU(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function R1(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Vme(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function T1(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Xi.nextTick(R1,t,e):R1(t,e))}function Hme(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(S1,e),!(t.listenerCount(S1)>1)&&Xi.nextTick(zme,t)}function zme(t){let e=!1;function r(n){if(e){T1(t,n??new xme);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(rU,n):n?T1(t,n,!0):Xi.nextTick(Wme,t)}try{t._construct(n=>{Xi.nextTick(r,n)})}catch(n){Xi.nextTick(r,n)}}function Wme(t){t.emit(S1)}function eU(t){return t?.setHeader&&typeof t.abort=="function"}function sU(t){t.emit("close")}function Gme(t,e){t.emit("error",e),Xi.nextTick(sU,t)}function Kme(t,e){!t||Lme(t)||(!e&&!Dme(t)&&(e=new jme),Fme(t)?(t.socket=null,t.destroy(e)):eU(t)?t.abort():eU(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Xi.nextTick(Gme,t,e):Xi.nextTick(sU,t),t.destroyed||(t[Mme]=!0))}oU.exports={construct:Hme,destroyer:Kme,destroy:Ume,undestroy:Vme,errorOrDestroy:T1}});var Oy=g((zQe,lU)=>{"use strict";var{ArrayIsArray:Yme,ObjectSetPrototypeOf:aU}=Tt(),{EventEmitter:Py}=A("events");function $y(t){Py.call(this,t)}aU($y.prototype,Py.prototype);aU($y,Py);$y.prototype.pipe=function(t,e){let r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(c){u(),Py.listenerCount(this,"error")===0&&this.emit("error",c)}P1(r,"error",l),P1(t,"error",l);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};function P1(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Yme(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}lU.exports={Stream:$y,prependListener:P1}});var Ld=g((WQe,Iy)=>{"use strict";var{SymbolDispose:Jme}=Tt(),{AbortError:uU,codes:Qme}=Mr(),{isNodeStream:cU,isWebStream:Xme,kControllerErrorFunction:Zme}=Qi(),ege=ks(),{ERR_INVALID_ARG_TYPE:fU}=Qme,$1,tge=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new fU(e,"AbortSignal",t)};Iy.exports.addAbortSignal=function(e,r){if(tge(e,"signal"),!cU(r)&&!Xme(r))throw new fU("stream",["ReadableStream","WritableStream","Stream"],r);return Iy.exports.addAbortSignalNoValidate(e,r)};Iy.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=cU(e)?()=>{e.destroy(new uU(void 0,{cause:t.reason}))}:()=>{e[Zme](new uU(void 0,{cause:t.reason}))};if(t.aborted)r();else{$1=$1||_r().addAbortListener;let n=$1(t,r);ege(e,n[Jme])}return e}});var pU=g((KQe,hU)=>{"use strict";var{StringPrototypeSlice:dU,SymbolIterator:rge,TypedArrayPrototypeSet:Ay,Uint8Array:nge}=Tt(),{Buffer:O1}=A("buffer"),{inspect:ige}=_r();hU.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return O1.alloc(0);let r=O1.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Ay(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[rge](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=dU(s,0,e),this.head=n,n.data=dU(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=O1.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Ay(r,o,n-e),e-=o.length;else{e===o.length?(Ay(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Ay(r,new nge(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return ige(this,{...r,depth:0,customInspect:!1})}}});var Dd=g((YQe,_U)=>{"use strict";var{MathFloor:sge,NumberIsInteger:oge}=Tt(),{validateInteger:age}=Ku(),{ERR_INVALID_ARG_VALUE:lge}=Mr().codes,mU=16*1024,gU=16;function uge(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function yU(t){return t?gU:mU}function cge(t,e){age(e,"value",0),t?gU=e:mU=e}function fge(t,e,r,n){let i=uge(e,n,r);if(i!=null){if(!oge(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new lge(s,i)}return sge(i)}return yU(t.objectMode)}_U.exports={getHighWaterMark:fge,getDefaultHighWaterMark:yU,setDefaultHighWaterMark:cge}});var I1=g((JQe,EU)=>{"use strict";var bU=Mo(),{PromisePrototypeThen:dge,SymbolAsyncIterator:vU,SymbolIterator:wU}=Tt(),{Buffer:hge}=A("buffer"),{ERR_INVALID_ARG_TYPE:pge,ERR_STREAM_NULL_VALUES:mge}=Mr().codes;function gge(t,e,r){let n;if(typeof e=="string"||e instanceof hge)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[vU])i=!0,n=e[vU]();else if(e&&e[wU])i=!1,n=e[wU]();else throw new pge("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(u,c){dge(a(u),()=>bU.nextTick(c,u),f=>bU.nextTick(c,f||u))};async function a(u){let c=u!=null,f=typeof n.throw=="function";if(c&&f){let{value:h,done:d}=await n.throw(u);if(await h,d)return}if(typeof n.return=="function"){let{value:h}=await n.return();await h}}async function l(){for(;;){try{let{value:u,done:c}=i?await n.next():n.next();if(c)s.push(null);else{let f=u&&typeof u.then=="function"?await u:u;if(f===null)throw o=!1,new mge;if(s.push(f))continue;o=!1}}catch(u){s.destroy(u)}break}}return s}EU.exports=gge});var Ud=g((QQe,FU)=>{"use strict";var hi=Mo(),{ArrayPrototypeIndexOf:yge,NumberIsInteger:_ge,NumberIsNaN:bge,NumberParseInt:vge,ObjectDefineProperties:M1,ObjectKeys:wge,ObjectSetPrototypeOf:TU,Promise:PU,SafeSet:Ege,SymbolAsyncDispose:Sge,SymbolAsyncIterator:Rge,Symbol:Tge}=Tt();FU.exports=he;he.ReadableState=qy;var{EventEmitter:Pge}=A("events"),{Stream:Do,prependListener:$ge}=Oy(),{Buffer:A1}=A("buffer"),{addAbortSignal:Oge}=Ld(),$U=ks(),Ce=_r().debuglog("stream",t=>{Ce=t}),Ige=pU(),Xu=il(),{getHighWaterMark:Age,getDefaultHighWaterMark:Nge}=Dd(),{aggregateTwoErrors:SU,codes:{ERR_INVALID_ARG_TYPE:Cge,ERR_METHOD_NOT_IMPLEMENTED:kge,ERR_OUT_OF_RANGE:qge,ERR_STREAM_PUSH_AFTER_EOF:xge,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:jge},AbortError:Mge}=Mr(),{validateObject:Lge}=Ku(),sl=Tge("kPaused"),{StringDecoder:OU}=A("string_decoder"),Dge=I1();TU(he.prototype,Do.prototype);TU(he,Do);var N1=()=>{},{errorOrDestroy:Ju}=Xu,Qu=1,Fge=2,IU=4,Fd=8,AU=16,Ny=32,Cy=64,NU=128,Uge=256,Bge=512,Vge=1024,x1=2048,j1=4096,Hge=8192,zge=16384,Wge=32768,CU=65536,Gge=1<<17,Kge=1<<18;function zt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}M1(qy.prototype,{objectMode:zt(Qu),ended:zt(Fge),endEmitted:zt(IU),reading:zt(Fd),constructed:zt(AU),sync:zt(Ny),needReadable:zt(Cy),emittedReadable:zt(NU),readableListening:zt(Uge),resumeScheduled:zt(Bge),errorEmitted:zt(Vge),emitClose:zt(x1),autoDestroy:zt(j1),destroyed:zt(Hge),closed:zt(zge),closeEmitted:zt(Wge),multiAwaitDrain:zt(CU),readingMore:zt(Gge),dataEmitted:zt(Kge)});function qy(t,e,r){typeof r!="boolean"&&(r=e instanceof Zi()),this.state=x1|j1|AU|Ny,t&&t.objectMode&&(this.state|=Qu),r&&t&&t.readableObjectMode&&(this.state|=Qu),this.highWaterMark=t?Age(this,t,"readableHighWaterMark",r):Nge(!1),this.buffer=new Ige,this.length=0,this.pipes=[],this.flowing=null,this[sl]=null,t&&t.emitClose===!1&&(this.state&=~x1),t&&t.autoDestroy===!1&&(this.state&=~j1),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new OU(t.encoding),this.encoding=t.encoding)}function he(t){if(!(this instanceof he))return new he(t);let e=this instanceof Zi();this._readableState=new qy(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Oge(t.signal,this)),Do.call(this,t),Xu.construct(this,()=>{this._readableState.needReadable&&ky(this,this._readableState)})}he.prototype.destroy=Xu.destroy;he.prototype._undestroy=Xu.undestroy;he.prototype._destroy=function(t,e){e(t)};he.prototype[Pge.captureRejectionSymbol]=function(t){this.destroy(t)};he.prototype[Sge]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Mge,this.destroy(t)),new PU((e,r)=>$U(this,n=>n&&n!==t?r(n):e(null)))};he.prototype.push=function(t,e){return kU(this,t,e,!1)};he.prototype.unshift=function(t,e){return kU(this,t,e,!0)};function kU(t,e,r,n){Ce("readableAddChunk",e);let i=t._readableState,s;if(i.state&Qu||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=A1.from(e,r).toString(i.encoding):(e=A1.from(e,r),r=""))):e instanceof A1?r="":Do._isUint8Array(e)?(e=Do._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new Cge("chunk",["string","Buffer","Uint8Array"],e))),s)Ju(t,s);else if(e===null)i.state&=~Fd,Qge(t,i);else if(i.state&Qu||e&&e.length>0)if(n)if(i.state&IU)Ju(t,new jge);else{if(i.destroyed||i.errored)return!1;C1(t,i,e,!0)}else if(i.ended)Ju(t,new xge);else{if(i.destroyed||i.errored)return!1;i.state&=~Fd,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?C1(t,i,e,!1):ky(t,i)):C1(t,i,e,!1)}else n||(i.state&=~Fd,ky(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function C1(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.state&CU?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.state&Cy&&xy(t)),ky(t,e)}he.prototype.isPaused=function(){let t=this._readableState;return t[sl]===!0||t.flowing===!1};he.prototype.setEncoding=function(t){let e=new OU(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Yge=1073741824;function Jge(t){if(t>Yge)throw new qge("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function RU(t,e){return t<=0||e.length===0&&e.ended?0:e.state&Qu?1:bge(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}he.prototype.read=function(t){Ce("read",t),t===void 0?t=NaN:_ge(t)||(t=vge(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=Jge(t)),t!==0&&(e.state&=~NU),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ce("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?k1(this):xy(this),null;if(t=RU(t,e),t===0&&e.ended)return e.length===0&&k1(this),null;let n=(e.state&Cy)!==0;if(Ce("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ce("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Ce("reading, ended or constructing",n);else if(n){Ce("do read"),e.state|=Fd|Ny,e.length===0&&(e.state|=Cy);try{this._read(e.highWaterMark)}catch(s){Ju(this,s)}e.state&=~Ny,e.reading||(t=RU(r,e))}let i;return t>0?i=LU(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&k1(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Qge(t,e){if(Ce("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?xy(t):(e.needReadable=!1,e.emittedReadable=!0,qU(t))}}function xy(t){let e=t._readableState;Ce("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ce("emitReadable",e.flowing),e.emittedReadable=!0,hi.nextTick(qU,t))}function qU(t){let e=t._readableState;Ce("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,jU(t)}function ky(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,hi.nextTick(Xge,t,e))}function Xge(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Ce("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}he.prototype._read=function(t){throw new kge("_read()")};he.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Ege(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Ce("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==hi.stdout&&t!==hi.stderr?a:y;n.endEmitted?hi.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,w){Ce("onunpipe"),_===r&&w&&w.hasUnpiped===!1&&(w.hasUnpiped=!0,c())}function a(){Ce("onend"),t.end()}let l,u=!1;function c(){Ce("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),l&&t.removeListener("drain",l),t.removeListener("error",d),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",h),u=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function f(){u||(n.pipes.length===1&&n.pipes[0]===t?(Ce("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Ce("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=Zge(r,t),t.on("drain",l))}r.on("data",h);function h(_){Ce("ondata");let w=t.write(_);Ce("dest.write",w),w===!1&&f()}function d(_){if(Ce("onerror",_),y(),t.removeListener("error",d),t.listenerCount("error")===0){let w=t._writableState||t._readableState;w&&!w.errorEmitted?Ju(t,_):t.emit("error",_)}}$ge(t,"error",d);function p(){t.removeListener("finish",m),y()}t.once("close",p);function m(){Ce("onfinish"),t.removeListener("close",p),y()}t.once("finish",m);function y(){Ce("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?f():n.flowing||(Ce("pipe resume"),r.resume()),t};function Zge(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Ce("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Ce("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}he.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=yge(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};he.prototype.on=function(t,e){let r=Do.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ce("on readable",n.length,n.reading),n.length?xy(this):n.reading||hi.nextTick(eye,this)),r};he.prototype.addListener=he.prototype.on;he.prototype.removeListener=function(t,e){let r=Do.prototype.removeListener.call(this,t,e);return t==="readable"&&hi.nextTick(xU,this),r};he.prototype.off=he.prototype.removeListener;he.prototype.removeAllListeners=function(t){let e=Do.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&hi.nextTick(xU,this),e};function xU(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[sl]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function eye(t){Ce("readable nexttick read 0"),t.read(0)}he.prototype.resume=function(){let t=this._readableState;return t.flowing||(Ce("resume"),t.flowing=!t.readableListening,tye(this,t)),t[sl]=!1,this};function tye(t,e){e.resumeScheduled||(e.resumeScheduled=!0,hi.nextTick(rye,t,e))}function rye(t,e){Ce("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),jU(t),e.flowing&&!e.reading&&t.read(0)}he.prototype.pause=function(){return Ce("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ce("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[sl]=!0,this};function jU(t){let e=t._readableState;for(Ce("flow",e.flowing);e.flowing&&t.read()!==null;);}he.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Ju(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=wge(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};he.prototype[Rge]=function(){return MU(this)};he.prototype.iterator=function(t){return t!==void 0&&Lge(t,"options"),MU(this,t)};function MU(t,e){typeof t.read!="function"&&(t=he.wrap(t,{objectMode:!0}));let r=nye(t,e);return r.stream=t,r}async function*nye(t,e){let r=N1;function n(o){this===t?(r(),r=N1):r=o}t.on("readable",n);let i,s=$U(t,{writable:!1},o=>{i=o?SU(i,o):null,r(),r=N1});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new PU(n)}}}catch(o){throw i=SU(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Xu.destroyer(t,null):(t.off("readable",n),s())}}M1(he.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});M1(qy.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[sl]!==!1},set(t){this[sl]=!!t}}});he._fromList=LU;function LU(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function k1(t){let e=t._readableState;Ce("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,hi.nextTick(iye,e,t))}function iye(t,e){if(Ce("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)hi.nextTick(sye,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function sye(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}he.from=function(t,e){return Dge(he,t,e)};var q1;function DU(){return q1===void 0&&(q1={}),q1}he.fromWeb=function(t,e){return DU().newStreamReadableFromReadableStream(t,e)};he.toWeb=function(t,e){return DU().newReadableStreamFromStreamReadable(t,e)};he.wrap=function(t,e){var r,n;return new he({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){Xu.destroyer(t,i),s(i)}}).wrap(t)}});var Fy=g((XQe,XU)=>{"use strict";var ol=Mo(),{ArrayPrototypeSlice:VU,Error:oye,FunctionPrototypeSymbolHasInstance:HU,ObjectDefineProperty:zU,ObjectDefineProperties:aye,ObjectSetPrototypeOf:WU,StringPrototypeToLowerCase:lye,Symbol:uye,SymbolHasInstance:cye}=Tt();XU.exports=Pt;Pt.WritableState=Hd;var{EventEmitter:fye}=A("events"),Bd=Oy().Stream,{Buffer:jy}=A("buffer"),Dy=il(),{addAbortSignal:dye}=Ld(),{getHighWaterMark:hye,getDefaultHighWaterMark:pye}=Dd(),{ERR_INVALID_ARG_TYPE:mye,ERR_METHOD_NOT_IMPLEMENTED:gye,ERR_MULTIPLE_CALLBACK:GU,ERR_STREAM_CANNOT_PIPE:yye,ERR_STREAM_DESTROYED:Vd,ERR_STREAM_ALREADY_FINISHED:_ye,ERR_STREAM_NULL_VALUES:bye,ERR_STREAM_WRITE_AFTER_END:vye,ERR_UNKNOWN_ENCODING:KU}=Mr().codes,{errorOrDestroy:Zu}=Dy;WU(Pt.prototype,Bd.prototype);WU(Pt,Bd);function F1(){}var ec=uye("kOnFinished");function Hd(t,e,r){typeof r!="boolean"&&(r=e instanceof Zi()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?hye(this,t,"writableHighWaterMark",r):pye(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Eye.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ly(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ec]=[]}function Ly(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Hd.prototype.getBuffer=function(){return VU(this.buffered,this.bufferedIndex)};zU(Hd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Pt(t){let e=this instanceof Zi();if(!e&&!HU(Pt,this))return new Pt(t);this._writableState=new Hd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&dye(t.signal,this)),Bd.call(this,t),Dy.construct(this,()=>{let r=this._writableState;r.writing||B1(this,r),V1(this,r)})}zU(Pt,cye,{__proto__:null,value:function(t){return HU(this,t)?!0:this!==Pt?!1:t&&t._writableState instanceof Hd}});Pt.prototype.pipe=function(){Zu(this,new yye)};function YU(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!jy.isEncoding(r))throw new KU(r);typeof n!="function"&&(n=F1)}if(e===null)throw new bye;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=jy.from(e,r),r="buffer");else if(e instanceof jy)r="buffer";else if(Bd._isUint8Array(e))e=Bd._uint8ArrayToBuffer(e),r="buffer";else throw new mye("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new vye:i.destroyed&&(s=new Vd("write")),s?(ol.nextTick(n,s),Zu(t,s,!0),s):(i.pendingcb++,wye(t,i,e,r,n))}Pt.prototype.write=function(t,e,r){return YU(this,t,e,r)===!0};Pt.prototype.cork=function(){this._writableState.corked++};Pt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||B1(this,t))};Pt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=lye(e)),!jy.isEncoding(e))throw new KU(e);return this._writableState.defaultEncoding=e,this};function wye(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==F1&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function UU(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Vd("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function BU(t,e,r,n){--e.pendingcb,n(r),U1(e),Zu(t,r)}function Eye(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Zu(t,new GU);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?ol.nextTick(BU,t,r,e,i):BU(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&B1(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},ol.nextTick(Sye,r.afterWriteTickInfo)):JU(t,r,1,i))}function Sye({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,JU(t,e,r,n)}function JU(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&U1(e),V1(t,e)}function U1(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Vd("write"))}let r=t[ec].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new Vd("end"))}Ly(t)}function B1(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?F1:u=>{for(let c=o;c<r.length;++c)r[c].callback(u)},l=e.allNoop&&o===0?r:VU(r,o);l.allBuffers=e.allBuffers,UU(t,e,!0,e.length,l,"",a),Ly(e)}else{do{let{chunk:a,encoding:l,callback:u}=r[o];r[o++]=null;let c=i?1:a.length;UU(t,e,!1,c,a,l,u)}while(o<r.length&&!e.writing);o===r.length?Ly(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Pt.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new gye("_write()")};Pt.prototype._writev=null;Pt.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=YU(this,t,e);s instanceof oye&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,V1(this,n,!0),n.ended=!0):n.finished?i=new _ye("end"):n.destroyed&&(i=new Vd("end"))),typeof r=="function"&&(i||n.finished?ol.nextTick(r,i):n[ec].push(r)),this};function My(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Rye(t,e){let r=!1;function n(i){if(r){Zu(t,i??GU());return}if(r=!0,e.pendingcb--,i){let s=e[ec].splice(0);for(let o=0;o<s.length;o++)s[o](i);Zu(t,i,e.sync)}else My(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,ol.nextTick(D1,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function Tye(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Rye(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function V1(t,e,r){My(e)&&(Tye(t,e),e.pendingcb===0&&(r?(e.pendingcb++,ol.nextTick((n,i)=>{My(i)?D1(n,i):i.pendingcb--},t,e)):My(e)&&(e.pendingcb++,D1(t,e))))}function D1(t,e){e.pendingcb--,e.finished=!0;let r=e[ec].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}aye(Pt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Pye=Dy.destroy;Pt.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[ec].length)&&ol.nextTick(U1,r),Pye.call(this,t,e),this};Pt.prototype._undestroy=Dy.undestroy;Pt.prototype._destroy=function(t,e){e(t)};Pt.prototype[fye.captureRejectionSymbol]=function(t){this.destroy(t)};var L1;function QU(){return L1===void 0&&(L1={}),L1}Pt.fromWeb=function(t,e){return QU().newStreamWritableFromWritableStream(t,e)};Pt.toWeb=function(t){return QU().newWritableStreamFromStreamWritable(t)}});var hB=g((ZQe,dB)=>{"use strict";var H1=Mo(),$ye=A("buffer"),{isReadable:Oye,isWritable:Iye,isIterable:ZU,isNodeStream:Aye,isReadableNodeStream:eB,isWritableNodeStream:tB,isDuplexNodeStream:Nye,isReadableStream:rB,isWritableStream:nB}=Qi(),iB=ks(),{AbortError:cB,codes:{ERR_INVALID_ARG_TYPE:Cye,ERR_INVALID_RETURN_VALUE:sB}}=Mr(),{destroyer:rc}=il(),kye=Zi(),fB=Ud(),qye=Fy(),{createDeferredPromise:oB}=_r(),aB=I1(),lB=globalThis.Blob||$ye.Blob,xye=typeof lB<"u"?function(e){return e instanceof lB}:function(e){return!1},jye=globalThis.AbortController||Wu().AbortController,{FunctionPrototypeCall:uB}=Tt(),Fo=class extends kye{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};dB.exports=function t(e,r){if(Nye(e))return e;if(eB(e))return tc({readable:e});if(tB(e))return tc({writable:e});if(Aye(e))return tc({writable:!1,readable:!1});if(rB(e))return tc({readable:fB.fromWeb(e)});if(nB(e))return tc({writable:qye.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=Mye(e);if(ZU(i))return aB(Fo,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let u,c=uB(l,i,f=>{if(f!=null)throw new sB("nully","body",f)},f=>{rc(u,f)});return u=new Fo({objectMode:!0,readable:!1,write:s,final(f){o(async()=>{try{await c,H1.nextTick(f,null)}catch(h){H1.nextTick(f,h)}})},destroy:a})}throw new sB("Iterable, AsyncIterable or AsyncFunction",r,i)}if(xye(e))return t(e.arrayBuffer());if(ZU(e))return aB(Fo,e,{objectMode:!0,writable:!1});if(rB(e?.readable)&&nB(e?.writable))return Fo.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?eB(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?tB(e?.writable)?e?.writable:t(e.writable):void 0;return tc({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return uB(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{rc(i,s)}),i=new Fo({objectMode:!0,writable:!1,read(){}})}throw new Cye(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Mye(t){let{promise:e,resolve:r}=oB(),n=new jye,i=n.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:u}=await o;if(H1.nextTick(u),l)return;if(i.aborted)throw new cB(void 0,{cause:i.reason});({promise:e,resolve:r}=oB()),yield a}}(),{signal:i}),write(o,a,l){let u=r;r=null,u({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function tc(t){let e=t.readable&&typeof t.readable.read!="function"?fB.wrap(t.readable):t.readable,r=t.writable,n=!!Oye(e),i=!!Iye(r),s,o,a,l,u;function c(f){let h=l;l=null,h?h(f):f&&u.destroy(f)}return u=new Fo({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(iB(r,f=>{i=!1,f&&rc(e,f),c(f)}),u._write=function(f,h,d){r.write(f,h)?d():s=d},u._final=function(f){r.end(),o=f},r.on("drain",function(){if(s){let f=s;s=null,f()}}),r.on("finish",function(){if(o){let f=o;o=null,f()}})),n&&(iB(e,f=>{n=!1,f&&rc(e,f),c(f)}),e.on("readable",function(){if(a){let f=a;a=null,f()}}),e.on("end",function(){u.push(null)}),u._read=function(){for(;;){let f=e.read();if(f===null){a=u._read;return}if(!u.push(f))return}}),u._destroy=function(f,h){!f&&l!==null&&(f=new cB),a=null,s=null,o=null,l===null?h(f):(l=h,rc(r,f),rc(e,f))},u}});var Zi=g((eXe,gB)=>{"use strict";var{ObjectDefineProperties:Lye,ObjectGetOwnPropertyDescriptor:qs,ObjectKeys:Dye,ObjectSetPrototypeOf:pB}=Tt();gB.exports=pi;var G1=Ud(),Nn=Fy();pB(pi.prototype,G1.prototype);pB(pi,G1);{let t=Dye(Nn.prototype);for(let e=0;e<t.length;e++){let r=t[e];pi.prototype[r]||(pi.prototype[r]=Nn.prototype[r])}}function pi(t){if(!(this instanceof pi))return new pi(t);G1.call(this,t),Nn.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Lye(pi.prototype,{writable:{__proto__:null,...qs(Nn.prototype,"writable")},writableHighWaterMark:{__proto__:null,...qs(Nn.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...qs(Nn.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...qs(Nn.prototype,"writableBuffer")},writableLength:{__proto__:null,...qs(Nn.prototype,"writableLength")},writableFinished:{__proto__:null,...qs(Nn.prototype,"writableFinished")},writableCorked:{__proto__:null,...qs(Nn.prototype,"writableCorked")},writableEnded:{__proto__:null,...qs(Nn.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...qs(Nn.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var z1;function mB(){return z1===void 0&&(z1={}),z1}pi.fromWeb=function(t,e){return mB().newStreamDuplexFromReadableWritablePair(t,e)};pi.toWeb=function(t){return mB().newReadableWritablePairFromDuplex(t)};var W1;pi.from=function(t){return W1||(W1=hB()),W1(t,"body")}});var J1=g((tXe,_B)=>{"use strict";var{ObjectSetPrototypeOf:yB,Symbol:Fye}=Tt();_B.exports=xs;var{ERR_METHOD_NOT_IMPLEMENTED:Uye}=Mr().codes,Y1=Zi(),{getHighWaterMark:Bye}=Dd();yB(xs.prototype,Y1.prototype);yB(xs,Y1);var zd=Fye("kCallback");function xs(t){if(!(this instanceof xs))return new xs(t);let e=t?Bye(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Y1.call(this,t),this._readableState.sync=!1,this[zd]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Vye)}function K1(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Vye(){this._final!==K1&&K1.call(this)}xs.prototype._final=K1;xs.prototype._transform=function(t,e,r){throw new Uye("_transform()")};xs.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[zd]=r})};xs.prototype._read=function(){if(this[zd]){let t=this[zd];this[zd]=null,t()}}});var X1=g((rXe,vB)=>{"use strict";var{ObjectSetPrototypeOf:bB}=Tt();vB.exports=nc;var Q1=J1();bB(nc.prototype,Q1.prototype);bB(nc,Q1);function nc(t){if(!(this instanceof nc))return new nc(t);Q1.call(this,t)}nc.prototype._transform=function(t,e,r){r(null,t)}});var Hy=g((nXe,TB)=>{"use strict";var Wd=Mo(),{ArrayIsArray:Hye,Promise:zye,SymbolAsyncIterator:Wye,SymbolDispose:Gye}=Tt(),Vy=ks(),{once:Kye}=_r(),Yye=il(),wB=Zi(),{aggregateTwoErrors:Jye,codes:{ERR_INVALID_ARG_TYPE:aR,ERR_INVALID_RETURN_VALUE:Z1,ERR_MISSING_ARGS:Qye,ERR_STREAM_DESTROYED:Xye,ERR_STREAM_PREMATURE_CLOSE:Zye},AbortError:e_e}=Mr(),{validateFunction:t_e,validateAbortSignal:r_e}=Ku(),{isIterable:al,isReadable:eR,isReadableNodeStream:By,isNodeStream:EB,isTransformStream:ic,isWebStream:n_e,isReadableStream:tR,isReadableFinished:i_e}=Qi(),s_e=globalThis.AbortController||Wu().AbortController,rR,nR,iR;function SB(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Vy(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,Yye.destroyer(t,s||new Xye("pipe")))},cleanup:i}}function o_e(t){return t_e(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function sR(t){if(al(t))return t;if(By(t))return a_e(t);throw new aR("val",["Readable","Iterable","AsyncIterable"],t)}async function*a_e(t){nR||(nR=Ud()),yield*nR.prototype[Wye].call(t)}async function Uy(t,e,r,{end:n}){let i,s=null,o=u=>{if(u&&(i=u),s){let c=s;s=null,c()}},a=()=>new zye((u,c)=>{i?c(i):s=()=>{i?c(i):u()}});e.on("drain",o);let l=Vy(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let u of t)e.write(u)||await a();n&&(e.end(),await a()),r()}catch(u){r(i!==u?Jye(i,u):u)}finally{l(),e.off("drain",o)}}async function oR(t,e,r,{end:n}){ic(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function l_e(...t){return RB(t,Kye(o_e(t)))}function RB(t,e,r){if(t.length===1&&Hye(t[0])&&(t=t[0]),t.length<2)throw new Qye("streams");let n=new s_e,i=n.signal,s=r?.signal,o=[];r_e(s,"options.signal");function a(){p(new e_e)}iR=iR||_r().addAbortListener;let l;s&&(l=iR(s,a));let u,c,f=[],h=0;function d(v){p(v,--h===0)}function p(v,b){var E;if(v&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=v),!(!u&&!b)){for(;f.length;)f.shift()(u);(E=l)===null||E===void 0||E[Gye](),n.abort(),b&&(u||o.forEach(R=>R()),Wd.nextTick(e,u,c))}}let m;for(let v=0;v<t.length;v++){let b=t[v],E=v<t.length-1,R=v>0,S=E||r?.end!==!1,P=v===t.length-1;if(EB(b)){let T=function(O){O&&O.name!=="AbortError"&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"&&d(O)};var w=T;if(S){let{destroy:O,cleanup:j}=SB(b,E,R);f.push(O),eR(b)&&P&&o.push(j)}b.on("error",T),eR(b)&&P&&o.push(()=>{b.removeListener("error",T)})}if(v===0)if(typeof b=="function"){if(m=b({signal:i}),!al(m))throw new Z1("Iterable, AsyncIterable or Stream","source",m)}else al(b)||By(b)||ic(b)?m=b:m=wB.from(b);else if(typeof b=="function"){if(ic(m)){var y;m=sR((y=m)===null||y===void 0?void 0:y.readable)}else m=sR(m);if(m=b(m,{signal:i}),E){if(!al(m,!0))throw new Z1("AsyncIterable",`transform[${v-1}]`,m)}else{var _;rR||(rR=X1());let T=new rR({objectMode:!0}),O=(_=m)===null||_===void 0?void 0:_.then;if(typeof O=="function")h++,O.call(m,C=>{c=C,C!=null&&T.write(C),S&&T.end(),Wd.nextTick(d)},C=>{T.destroy(C),Wd.nextTick(d,C)});else if(al(m,!0))h++,Uy(m,T,d,{end:S});else if(tR(m)||ic(m)){let C=m.readable||m;h++,Uy(C,T,d,{end:S})}else throw new Z1("AsyncIterable or Promise","destination",m);m=T;let{destroy:j,cleanup:N}=SB(m,!1,!0);f.push(j),P&&o.push(N)}}else if(EB(b)){if(By(m)){h+=2;let T=u_e(m,b,d,{end:S});eR(b)&&P&&o.push(T)}else if(ic(m)||tR(m)){let T=m.readable||m;h++,Uy(T,b,d,{end:S})}else if(al(m))h++,Uy(m,b,d,{end:S});else throw new aR("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=b}else if(n_e(b)){if(By(m))h++,oR(sR(m),b,d,{end:S});else if(tR(m)||al(m))h++,oR(m,b,d,{end:S});else if(ic(m))h++,oR(m.readable,b,d,{end:S});else throw new aR("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=b}else m=wB.from(b)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Wd.nextTick(a),m}function u_e(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Zye)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;i_e(t)?Wd.nextTick(o):t.once("end",o)}else r();return Vy(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Vy(e,{readable:!1,writable:!0},r)}TB.exports={pipelineImpl:RB,pipeline:l_e}});var uR=g((iXe,NB)=>{"use strict";var{pipeline:c_e}=Hy(),zy=Zi(),{destroyer:f_e}=il(),{isNodeStream:Wy,isReadable:PB,isWritable:$B,isWebStream:lR,isTransformStream:ll,isWritableStream:OB,isReadableStream:IB}=Qi(),{AbortError:d_e,codes:{ERR_INVALID_ARG_VALUE:AB,ERR_MISSING_ARGS:h_e}}=Mr(),p_e=ks();NB.exports=function(...e){if(e.length===0)throw new h_e("streams");if(e.length===1)return zy.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=zy.from(e[0])),typeof e[e.length-1]=="function"){let d=e.length-1;e[d]=zy.from(e[d])}for(let d=0;d<e.length;++d)if(!(!Wy(e[d])&&!lR(e[d]))){if(d<e.length-1&&!(PB(e[d])||IB(e[d])||ll(e[d])))throw new AB(`streams[${d}]`,r[d],"must be readable");if(d>0&&!($B(e[d])||OB(e[d])||ll(e[d])))throw new AB(`streams[${d}]`,r[d],"must be writable")}let n,i,s,o,a;function l(d){let p=o;o=null,p?p(d):d?a.destroy(d):!h&&!f&&a.destroy()}let u=e[0],c=c_e(e,l),f=!!($B(u)||OB(u)||ll(u)),h=!!(PB(c)||IB(c)||ll(c));if(a=new zy({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(c!=null&&c.readableObjectMode),writable:f,readable:h}),f){if(Wy(u))a._write=function(p,m,y){u.write(p,m)?y():n=y},a._final=function(p){u.end(),i=p},u.on("drain",function(){if(n){let p=n;n=null,p()}});else if(lR(u)){let m=(ll(u)?u.writable:u).getWriter();a._write=async function(y,_,w){try{await m.ready,m.write(y).catch(()=>{}),w()}catch(v){w(v)}},a._final=async function(y){try{await m.ready,m.close().catch(()=>{}),i=y}catch(_){y(_)}}}let d=ll(c)?c.readable:c;p_e(d,()=>{if(i){let p=i;i=null,p()}})}if(h){if(Wy(c))c.on("readable",function(){if(s){let d=s;s=null,d()}}),c.on("end",function(){a.push(null)}),a._read=function(){for(;;){let d=c.read();if(d===null){s=a._read;return}if(!a.push(d))return}};else if(lR(c)){let p=(ll(c)?c.readable:c).getReader();a._read=async function(){for(;;)try{let{value:m,done:y}=await p.read();if(!a.push(m))return;if(y){a.push(null);return}}catch{return}}}}return a._destroy=function(d,p){!d&&o!==null&&(d=new d_e),s=null,n=null,i=null,o===null?p(d):(o=p,Wy(c)&&f_e(c,d))},a}});var UB=g((sXe,dR)=>{"use strict";var m_e=globalThis.AbortController||Wu().AbortController,{codes:{ERR_INVALID_ARG_VALUE:g_e,ERR_INVALID_ARG_TYPE:Gd,ERR_MISSING_ARGS:y_e,ERR_OUT_OF_RANGE:__e},AbortError:es}=Mr(),{validateAbortSignal:ul,validateInteger:CB,validateObject:cl}=Ku(),b_e=Tt().Symbol("kWeak"),v_e=Tt().Symbol("kResistStopPropagation"),{finished:w_e}=ks(),E_e=uR(),{addAbortSignalNoValidate:S_e}=Ld(),{isWritable:R_e,isNodeStream:T_e}=Qi(),{deprecate:P_e}=_r(),{ArrayPrototypePush:$_e,Boolean:O_e,MathFloor:kB,Number:I_e,NumberIsNaN:A_e,Promise:qB,PromiseReject:xB,PromiseResolve:N_e,PromisePrototypeThen:jB,Symbol:LB}=Tt(),Gy=LB("kEmpty"),MB=LB("kEof");function C_e(t,e){if(e!=null&&cl(e,"options"),e?.signal!=null&&ul(e.signal,"options.signal"),T_e(t)&&!R_e(t))throw new g_e("stream",t,"must be writable");let r=E_e(this,t);return e!=null&&e.signal&&S_e(e.signal,r),r}function Ky(t,e){if(typeof t!="function")throw new Gd("fn",["Function","AsyncFunction"],t);e!=null&&cl(e,"options"),e?.signal!=null&&ul(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=kB(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=kB(e.highWaterMark)),CB(r,"options.concurrency",1),CB(n,"options.highWaterMark",0),n+=r,async function*(){let s=_r().AbortSignalAny([e?.signal].filter(O_e)),o=this,a=[],l={signal:s},u,c,f=!1,h=0;function d(){f=!0,p()}function p(){h-=1,m()}function m(){c&&!f&&h<r&&a.length<n&&(c(),c=null)}async function y(){try{for await(let _ of o){if(f)return;if(s.aborted)throw new es;try{if(_=t(_,l),_===Gy)continue;_=N_e(_)}catch(w){_=xB(w)}h+=1,jB(_,p,d),a.push(_),u&&(u(),u=null),!f&&(a.length>=n||h>=r)&&await new qB(w=>{c=w})}a.push(MB)}catch(_){let w=xB(_);jB(w,p,d),a.push(w)}finally{f=!0,u&&(u(),u=null)}}y();try{for(;;){for(;a.length>0;){let _=await a[0];if(_===MB)return;if(s.aborted)throw new es;_!==Gy&&(yield _),a.shift(),m()}await new qB(_=>{u=_})}}finally{f=!0,c&&(c(),c=null)}}.call(this)}function k_e(t=void 0){return t!=null&&cl(t,"options"),t?.signal!=null&&ul(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new es({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function DB(t,e=void 0){for await(let r of fR.call(this,t,e))return!0;return!1}async function q_e(t,e=void 0){if(typeof t!="function")throw new Gd("fn",["Function","AsyncFunction"],t);return!await DB.call(this,async(...r)=>!await t(...r),e)}async function x_e(t,e){for await(let r of fR.call(this,t,e))return r}async function j_e(t,e){if(typeof t!="function")throw new Gd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),Gy}for await(let n of Ky.call(this,r,e));}function fR(t,e){if(typeof t!="function")throw new Gd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:Gy}return Ky.call(this,r,e)}var cR=class extends y_e{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function M_e(t,e,r){var n;if(typeof t!="function")throw new Gd("reducer",["Function","AsyncFunction"],t);r!=null&&cl(r,"options"),r?.signal!=null&&ul(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let u=new es(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await w_e(this.destroy(u)),u}let s=new m_e,o=s.signal;if(r!=null&&r.signal){let u={once:!0,[b_e]:this,[v_e]:!0};r.signal.addEventListener("abort",()=>s.abort(),u)}let a=!1;try{for await(let u of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new es;i?e=await t(e,u,{signal:o}):(e=u,i=!0)}if(!a&&!i)throw new cR}finally{s.abort()}return e}async function L_e(t){t!=null&&cl(t,"options"),t?.signal!=null&&ul(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new es(void 0,{cause:t.signal.reason});$_e(e,n)}return e}function D_e(t,e){let r=Ky.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function FB(t){if(t=I_e(t),A_e(t))return 0;if(t<0)throw new __e("number",">= 0",t);return t}function F_e(t,e=void 0){return e!=null&&cl(e,"options"),e?.signal!=null&&ul(e.signal,"options.signal"),t=FB(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new es;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new es;t--<=0&&(yield s)}}.call(this)}function U_e(t,e=void 0){return e!=null&&cl(e,"options"),e?.signal!=null&&ul(e.signal,"options.signal"),t=FB(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new es;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new es;if(t-- >0&&(yield s),t<=0)return}}.call(this)}dR.exports.streamReturningOperators={asIndexedPairs:P_e(k_e,"readable.asIndexedPairs will be removed in a future version."),drop:F_e,filter:fR,flatMap:D_e,map:Ky,take:U_e,compose:C_e};dR.exports.promiseReturningOperators={every:q_e,forEach:j_e,reduce:M_e,toArray:L_e,some:DB,find:x_e}});var hR=g((oXe,BB)=>{"use strict";var{ArrayPrototypePop:B_e,Promise:V_e}=Tt(),{isIterable:H_e,isNodeStream:z_e,isWebStream:W_e}=Qi(),{pipelineImpl:G_e}=Hy(),{finished:K_e}=ks();pR();function Y_e(...t){return new V_e((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!z_e(s)&&!H_e(s)&&!W_e(s)){let o=B_e(t);n=o.signal,i=o.end}G_e(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}BB.exports={finished:K_e,pipeline:Y_e}});var pR=g((aXe,QB)=>{"use strict";var{Buffer:J_e}=A("buffer"),{ObjectDefineProperty:js,ObjectKeys:zB,ReflectApply:WB}=Tt(),{promisify:{custom:GB}}=_r(),{streamReturningOperators:VB,promiseReturningOperators:HB}=UB(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:KB}}=Mr(),Q_e=uR(),{setDefaultHighWaterMark:X_e,getDefaultHighWaterMark:Z_e}=Dd(),{pipeline:YB}=Hy(),{destroyer:e0e}=il(),JB=ks(),mR=hR(),Kd=Qi(),dt=QB.exports=Oy().Stream;dt.isDestroyed=Kd.isDestroyed;dt.isDisturbed=Kd.isDisturbed;dt.isErrored=Kd.isErrored;dt.isReadable=Kd.isReadable;dt.isWritable=Kd.isWritable;dt.Readable=Ud();for(let t of zB(VB)){let r=function(...n){if(new.target)throw KB();return dt.Readable.from(WB(e,this,n))};gR=r;let e=VB[t];js(r,"name",{__proto__:null,value:e.name}),js(r,"length",{__proto__:null,value:e.length}),js(dt.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var gR;for(let t of zB(HB)){let r=function(...i){if(new.target)throw KB();return WB(e,this,i)};gR=r;let e=HB[t];js(r,"name",{__proto__:null,value:e.name}),js(r,"length",{__proto__:null,value:e.length}),js(dt.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var gR;dt.Writable=Fy();dt.Duplex=Zi();dt.Transform=J1();dt.PassThrough=X1();dt.pipeline=YB;var{addAbortSignal:t0e}=Ld();dt.addAbortSignal=t0e;dt.finished=JB;dt.destroy=e0e;dt.compose=Q_e;dt.setDefaultHighWaterMark=X_e;dt.getDefaultHighWaterMark=Z_e;js(dt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return mR}});js(YB,GB,{__proto__:null,enumerable:!0,get(){return mR.pipeline}});js(JB,GB,{__proto__:null,enumerable:!0,get(){return mR.finished}});dt.Stream=dt;dt._isUint8Array=function(e){return e instanceof Uint8Array};dt._uint8ArrayToBuffer=function(e){return J_e.from(e.buffer,e.byteOffset,e.byteLength)}});var Uo=g((lXe,$e)=>{"use strict";var Wt=A("stream");if(Wt&&process.env.READABLE_STREAM==="disable"){let t=Wt.promises;$e.exports._uint8ArrayToBuffer=Wt._uint8ArrayToBuffer,$e.exports._isUint8Array=Wt._isUint8Array,$e.exports.isDisturbed=Wt.isDisturbed,$e.exports.isErrored=Wt.isErrored,$e.exports.isReadable=Wt.isReadable,$e.exports.Readable=Wt.Readable,$e.exports.Writable=Wt.Writable,$e.exports.Duplex=Wt.Duplex,$e.exports.Transform=Wt.Transform,$e.exports.PassThrough=Wt.PassThrough,$e.exports.addAbortSignal=Wt.addAbortSignal,$e.exports.finished=Wt.finished,$e.exports.destroy=Wt.destroy,$e.exports.pipeline=Wt.pipeline,$e.exports.compose=Wt.compose,Object.defineProperty(Wt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),$e.exports.Stream=Wt.Stream}else{let t=pR(),e=hR(),r=t.Readable.destroy;$e.exports=t.Readable,$e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,$e.exports._isUint8Array=t._isUint8Array,$e.exports.isDisturbed=t.isDisturbed,$e.exports.isErrored=t.isErrored,$e.exports.isReadable=t.isReadable,$e.exports.Readable=t.Readable,$e.exports.Writable=t.Writable,$e.exports.Duplex=t.Duplex,$e.exports.Transform=t.Transform,$e.exports.PassThrough=t.PassThrough,$e.exports.addAbortSignal=t.addAbortSignal,$e.exports.finished=t.finished,$e.exports.destroy=t.destroy,$e.exports.destroy=r,$e.exports.pipeline=t.pipeline,$e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),$e.exports.Stream=t.Stream}$e.exports.default=$e.exports});var eV=g((uXe,ZB)=>{"use strict";var{Buffer:mi}=A("buffer"),XB=Symbol.for("BufferList");function at(t){if(!(this instanceof at))return new at(t);at._init.call(this,t)}at._init=function(e){Object.defineProperty(this,XB,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};at.prototype._new=function(e){return new at(e)};at.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};at.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};at.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};at.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};at.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||mi.alloc(0);let s=!!e,o=this._offset(n),a=i-n,l=a,u=s&&r||0,c=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:mi.concat(this._bufs,this.length);for(let f=0;f<this._bufs.length;f++)this._bufs[f].copy(e,u),u+=this._bufs[f].length;return e}if(l<=this._bufs[o[0]].length-c)return s?this._bufs[o[0]].copy(e,r,c,c+l):this._bufs[o[0]].slice(c,c+l);s||(e=mi.allocUnsafe(a));for(let f=o[0];f<this._bufs.length;f++){let h=this._bufs[f].length-c;if(l>h)this._bufs[f].copy(e,u,c),u+=h;else{this._bufs[f].copy(e,u,c,c+l),u+=h;break}l-=h,c&&(c=0)}return e.length>u?e.slice(0,u):e};at.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};at.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};at.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};at.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};at.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(mi.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(mi.from(e));return this};at.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};at.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=mi.from([t]):typeof t=="string"?t=mi.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=mi.from(t.buffer,t.byteOffset,t.byteLength):mi.isBuffer(t)||(t=mi.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let l=o.indexOf(t,s);if(l!==-1)return this._reverseOffset([i,l]);s=o.length-t.length+1}else{let l=this._reverseOffset([i,s]);if(this._match(l,t))return l;s++}s=0}return-1};at.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?at.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:at.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();at.prototype._isBufferList=function(e){return e instanceof at||at.isBufferList(e)};at.isBufferList=function(e){return e!=null&&e[XB]};ZB.exports=at});var tV=g((cXe,Yy)=>{"use strict";var yR=Uo().Duplex,r0e=Fi(),Yd=eV();function vr(t){if(!(this instanceof vr))return new vr(t);if(typeof t=="function"){this._callback=t;let e=function(n){this._callback&&(this._callback(n),this._callback=null)}.bind(this);this.on("pipe",function(n){n.on("error",e)}),this.on("unpipe",function(n){n.removeListener("error",e)}),t=null}Yd._init.call(this,t),yR.call(this)}r0e(vr,yR);Object.assign(vr.prototype,Yd.prototype);vr.prototype._new=function(e){return new vr(e)};vr.prototype._write=function(e,r,n){this._appendBuffer(e),typeof n=="function"&&n()};vr.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)};vr.prototype.end=function(e){yR.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)};vr.prototype._destroy=function(e,r){this._bufs.length=0,this.length=0,r(e)};vr.prototype._isBufferList=function(e){return e instanceof vr||e instanceof Yd||vr.isBufferList(e)};vr.isBufferList=Yd.isBufferList;Yy.exports=vr;Yy.exports.BufferListStream=vr;Yy.exports.BufferList=Yd});var nV=g((fXe,rV)=>{"use strict";var _R=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};rV.exports=_R});var bR=g((dXe,iV)=>{"use strict";var F=iV.exports,{Buffer:Zr}=A("buffer");F.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"};F.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0};F.requiredHeaderFlagsErrors={};for(let t in F.requiredHeaderFlags){let e=F.requiredHeaderFlags[t];F.requiredHeaderFlagsErrors[t]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+F.types[t]+" packet"}F.codes={};for(let t in F.types){let e=F.types[t];F.codes[e]=t}F.CMD_SHIFT=4;F.CMD_MASK=240;F.DUP_MASK=8;F.QOS_MASK=3;F.QOS_SHIFT=1;F.RETAIN_MASK=1;F.VARBYTEINT_MASK=127;F.VARBYTEINT_FIN_MASK=128;F.VARBYTEINT_MAX=268435455;F.SESSIONPRESENT_MASK=1;F.SESSIONPRESENT_HEADER=Zr.from([F.SESSIONPRESENT_MASK]);F.CONNACK_HEADER=Zr.from([F.codes.connack<<F.CMD_SHIFT]);F.USERNAME_MASK=128;F.PASSWORD_MASK=64;F.WILL_RETAIN_MASK=32;F.WILL_QOS_MASK=24;F.WILL_QOS_SHIFT=3;F.WILL_FLAG_MASK=4;F.CLEAN_SESSION_MASK=2;F.CONNECT_HEADER=Zr.from([F.codes.connect<<F.CMD_SHIFT]);F.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11};F.propertiesCodes={};for(let t in F.properties){let e=F.properties[t];F.propertiesCodes[e]=t}F.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function Bo(t){return[0,1,2].map(e=>[0,1].map(r=>[0,1].map(n=>{let i=Zr.alloc(1);return i.writeUInt8(F.codes[t]<<F.CMD_SHIFT|(r?F.DUP_MASK:0)|e<<F.QOS_SHIFT|n,0,!0),i})))}F.PUBLISH_HEADER=Bo("publish");F.SUBSCRIBE_HEADER=Bo("subscribe");F.SUBSCRIBE_OPTIONS_QOS_MASK=3;F.SUBSCRIBE_OPTIONS_NL_MASK=1;F.SUBSCRIBE_OPTIONS_NL_SHIFT=2;F.SUBSCRIBE_OPTIONS_RAP_MASK=1;F.SUBSCRIBE_OPTIONS_RAP_SHIFT=3;F.SUBSCRIBE_OPTIONS_RH_MASK=3;F.SUBSCRIBE_OPTIONS_RH_SHIFT=4;F.SUBSCRIBE_OPTIONS_RH=[0,16,32];F.SUBSCRIBE_OPTIONS_NL=4;F.SUBSCRIBE_OPTIONS_RAP=8;F.SUBSCRIBE_OPTIONS_QOS=[0,1,2];F.UNSUBSCRIBE_HEADER=Bo("unsubscribe");F.ACKS={unsuback:Bo("unsuback"),puback:Bo("puback"),pubcomp:Bo("pubcomp"),pubrel:Bo("pubrel"),pubrec:Bo("pubrec")};F.SUBACK_HEADER=Zr.from([F.codes.suback<<F.CMD_SHIFT]);F.VERSION3=Zr.from([3]);F.VERSION4=Zr.from([4]);F.VERSION5=Zr.from([5]);F.VERSION131=Zr.from([131]);F.VERSION132=Zr.from([132]);F.QOS=[0,1,2].map(t=>Zr.from([t]));F.EMPTY={pingreq:Zr.from([F.codes.pingreq<<4,0]),pingresp:Zr.from([F.codes.pingresp<<4,0]),disconnect:Zr.from([F.codes.disconnect<<4,0])};F.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"};F.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"};F.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};F.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"};F.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};F.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}});var vR=g((hXe,sV)=>{"use strict";function n0e(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=yE(),r.destroy=u,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let f=0;for(let h=0;h<c.length;h++)f=(f<<5)-f+c.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(c){let f,h=null,d,p;function m(...y){if(!m.enabled)return;let _=m,w=Number(new Date),v=w-(f||w);_.diff=v,_.prev=f,_.curr=w,f=w,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let b=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(R,S)=>{if(R==="%%")return"%";b++;let P=r.formatters[S];if(typeof P=="function"){let T=y[b];R=P.call(_,T),y.splice(b,1),b--}return R}),r.formatArgs.call(_,y),(_.log||r.log).apply(_,y)}return m.namespace=c,m.useColors=r.useColors(),m.color=r.selectColor(c),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(c)),p),set:y=>{h=y}}),typeof r.init=="function"&&r.init(m),m}function n(c,f){let h=r(this.namespace+(typeof f>"u"?":":f)+c);return h.log=this.log,h}function i(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f=(typeof c=="string"?c:"").trim().replace(" ",",").split(",").filter(Boolean);for(let h of f)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function s(c,f){let h=0,d=0,p=-1,m=0;for(;h<c.length;)if(d<f.length&&(f[d]===c[h]||f[d]==="*"))f[d]==="*"?(p=d,m=h,d++):(h++,d++);else if(p!==-1)d=p+1,m++,h=m;else return!1;for(;d<f.length&&f[d]==="*";)d++;return d===f.length}function o(){let c=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),c}function a(c){for(let f of r.skips)if(s(c,f))return!1;for(let f of r.names)if(s(c,f))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}sV.exports=n0e});var oV=g((_n,Jy)=>{"use strict";_n.formatArgs=s0e;_n.save=o0e;_n.load=a0e;_n.useColors=i0e;_n.storage=l0e();_n.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();_n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i0e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s0e(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Jy.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}_n.log=console.debug||console.log||(()=>{});function o0e(t){try{t?_n.storage.setItem("debug",t):_n.storage.removeItem("debug")}catch{}}function a0e(){let t;try{t=_n.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function l0e(){try{return localStorage}catch{}}Jy.exports=vR()(_n);var{formatters:u0e}=Jy.exports;u0e.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var lV=g((pXe,aV)=>{"use strict";aV.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var fV=g((mXe,cV)=>{"use strict";var c0e=A("os"),uV=A("tty"),Cn=lV(),{env:Jt}=process,Vo;Cn("no-color")||Cn("no-colors")||Cn("color=false")||Cn("color=never")?Vo=0:(Cn("color")||Cn("colors")||Cn("color=true")||Cn("color=always"))&&(Vo=1);"FORCE_COLOR"in Jt&&(Jt.FORCE_COLOR==="true"?Vo=1:Jt.FORCE_COLOR==="false"?Vo=0:Vo=Jt.FORCE_COLOR.length===0?1:Math.min(parseInt(Jt.FORCE_COLOR,10),3));function wR(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function ER(t,e){if(Vo===0)return 0;if(Cn("color=16m")||Cn("color=full")||Cn("color=truecolor"))return 3;if(Cn("color=256"))return 2;if(t&&!e&&Vo===void 0)return 0;let r=Vo||0;if(Jt.TERM==="dumb")return r;if(process.platform==="win32"){let n=c0e.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Jt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Jt)||Jt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Jt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Jt.TEAMCITY_VERSION)?1:0;if(Jt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Jt){let n=parseInt((Jt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Jt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Jt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Jt.TERM)||"COLORTERM"in Jt?1:r}function f0e(t){let e=ER(t,t&&t.isTTY);return wR(e)}cV.exports={supportsColor:f0e,stdout:wR(ER(!0,uV.isatty(1))),stderr:wR(ER(!0,uV.isatty(2)))}});var hV=g((Qt,Xy)=>{"use strict";var d0e=A("tty"),Qy=A("util");Qt.init=b0e;Qt.log=g0e;Qt.formatArgs=p0e;Qt.save=y0e;Qt.load=_0e;Qt.useColors=h0e;Qt.destroy=Qy.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Qt.colors=[6,2,3,4,5,1];try{let t=fV();t&&(t.stderr||t).level>=2&&(Qt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Qt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function h0e(){return"colors"in Qt.inspectOpts?!!Qt.inspectOpts.colors:d0e.isatty(process.stderr.fd)}function p0e(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Xy.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=m0e()+e+" "+t[0]}function m0e(){return Qt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function g0e(...t){return process.stderr.write(Qy.formatWithOptions(Qt.inspectOpts,...t)+`
`)}function y0e(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function _0e(){return process.env.DEBUG}function b0e(t){t.inspectOpts={};let e=Object.keys(Qt.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Qt.inspectOpts[e[r]]}Xy.exports=vR()(Qt);var{formatters:dV}=Xy.exports;dV.o=function(t){return this.inspectOpts.colors=this.useColors,Qy.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};dV.O=function(t){return this.inspectOpts.colors=this.useColors,Qy.inspect(t,this.inspectOpts)}});var ts=g((gXe,SR)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?SR.exports=oV():SR.exports=hV()});var gV=g((yXe,mV)=>{"use strict";var v0e=tV(),{EventEmitter:w0e}=A("events"),pV=nV(),ke=bR(),re=ts()("mqtt-packet:parser"),RR=class t extends w0e{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof t?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new t().parser(e)}_resetState(){re("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new pV,this.error=null,this._list=v0e(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),re("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,re("parse: state complete. _stateCounter is now: %d",this._stateCounter),re("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return re("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let e=this._list.readUInt8(0),r=e>>ke.CMD_SHIFT;this.packet.cmd=ke.types[r];let n=e&15,i=ke.requiredHeaderFlags[r];return i!=null&&n!==i?this._emitError(new Error(ke.requiredHeaderFlagsErrors[r])):(this.packet.retain=(e&ke.RETAIN_MASK)!==0,this.packet.qos=e>>ke.QOS_SHIFT&ke.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(e&ke.DUP_MASK)!==0,re("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),re("_parseLength %d",e.value),!!e}_parsePayload(){re("_parsePayload: payload %O",this._list);let e=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return re("_parsePayload complete result: %s",e),e}_parseConnect(){re("_parseConnect");let e,r,n,i,s={},o=this.packet,a=this._parseString();if(a===null)return this._emitError(new Error("Cannot parse protocolId"));if(a!=="MQTT"&&a!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(o.protocolId=a,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(o.protocolVersion=this._list.readUInt8(this._pos),o.protocolVersion>=128&&(o.bridgeMode=!0,o.protocolVersion=o.protocolVersion-128),o.protocolVersion!==3&&o.protocolVersion!==4&&o.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));s.username=this._list.readUInt8(this._pos)&ke.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&ke.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&ke.WILL_FLAG_MASK;let l=!!(this._list.readUInt8(this._pos)&ke.WILL_RETAIN_MASK),u=(this._list.readUInt8(this._pos)&ke.WILL_QOS_MASK)>>ke.WILL_QOS_SHIFT;if(s.will)o.will={},o.will.retain=l,o.will.qos=u;else{if(l)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(u)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(o.clean=(this._list.readUInt8(this._pos)&ke.CLEAN_SESSION_MASK)!==0,this._pos++,o.keepalive=this._parseNum(),o.keepalive===-1)return this._emitError(new Error("Packet too short"));if(o.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(o.properties=f)}let c=this._parseString();if(c===null)return this._emitError(new Error("Packet too short"));if(o.clientId=c,re("_parseConnect: packet.clientId: %s",o.clientId),s.will){if(o.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(o.will.properties=f)}if(e=this._parseString(),e===null)return this._emitError(new Error("Cannot parse will topic"));if(o.will.topic=e,re("_parseConnect: packet.will.topic: %s",o.will.topic),r=this._parseBuffer(),r===null)return this._emitError(new Error("Cannot parse will payload"));o.will.payload=r,re("_parseConnect: packet.will.paylaod: %s",o.will.payload)}if(s.username){if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse username"));o.username=i,re("_parseConnect: packet.username: %s",o.username)}if(s.password){if(n=this._parseBuffer(),n===null)return this._emitError(new Error("Cannot parse password"));o.password=n}return this.settings=o,re("_parseConnect: complete"),o}_parseConnack(){re("_parseConnack");let e=this.packet;if(this._list.length<1)return null;let r=this._list.readUInt8(this._pos++);if(r>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(r&ke.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(e.returnCode===-1||e.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}re("_parseConnack: complete")}_parsePublish(){re("_parsePublish");let e=this.packet;if(e.topic=this._parseString(),e.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}e.payload=this._list.slice(this._pos,e.length),re("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){re("_parseSubscribe");let e=this.packet,r,n,i,s,o,a,l;if(e.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(e.properties=u)}if(e.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<e.length;){if(r=this._parseString(),r===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(n=this._parseByte(),this.settings.protocolVersion===5){if(n&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(n&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(i=n&ke.SUBSCRIBE_OPTIONS_QOS_MASK,i>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(a=(n>>ke.SUBSCRIBE_OPTIONS_NL_SHIFT&ke.SUBSCRIBE_OPTIONS_NL_MASK)!==0,o=(n>>ke.SUBSCRIBE_OPTIONS_RAP_SHIFT&ke.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,s=n>>ke.SUBSCRIBE_OPTIONS_RH_SHIFT&ke.SUBSCRIBE_OPTIONS_RH_MASK,s>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));l={topic:r,qos:i},this.settings.protocolVersion===5?(l.nl=a,l.rap=o,l.rh=s):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),re("_parseSubscribe: push subscription `%s` to subscription",l),e.subscriptions.push(l)}}}_parseSuback(){re("_parseSuback");let e=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}if(e.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let r=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!ke.MQTT5_SUBACK_CODES[r])return this._emitError(new Error("Invalid suback code"))}else if(r>2&&r!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(r)}}}_parseUnsubscribe(){re("_parseUnsubscribe");let e=this.packet;if(e.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}if(e.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){let r=this._parseString();if(r===null)return this._emitError(new Error("Cannot parse topic"));re("_parseUnsubscribe: push topic `%s` to unsubscriptions",r),e.unsubscriptions.push(r)}}}_parseUnsuback(){re("_parseUnsuback");let e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&e.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let r=this._parseProperties();for(Object.getOwnPropertyNames(r).length&&(e.properties=r),e.granted=[];this._pos<this.packet.length;){let n=this._list.readUInt8(this._pos++);if(!ke.MQTT5_UNSUBACK_CODES[n])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(n)}}}_parseConfirmation(){re("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let e=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!ke.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!ke.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}re("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}}return!0}_parseDisconnect(){let e=this.packet;if(re("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(e.reasonCode=this._parseByte(),ke.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):e.reasonCode=0;let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}return re("_parseDisconnect result: true"),!0}_parseAuth(){re("_parseAuth");let e=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!ke.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let r=this._parseProperties();return Object.getOwnPropertyNames(r).length&&(e.properties=r),re("_parseAuth: result: true"),!0}_parseMessageId(){let e=this.packet;return e.messageId=this._parseNum(),e.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(re("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){let r=this._parseNum(),n=r+this._pos;if(r===-1||n>this._list.length||n>this.packet.length)return null;let i=this._list.toString("utf8",this._pos,n);return this._pos+=r,re("_parseString: result: %s",i),i}_parseStringPair(){return re("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let e=this._parseNum(),r=e+this._pos;if(e===-1||r>this._list.length||r>this.packet.length)return null;let n=this._list.slice(this._pos,r);return this._pos+=e,re("_parseBuffer: result: %o",n),n}_parseNum(){if(this._list.length-this._pos<2)return-1;let e=this._list.readUInt16BE(this._pos);return this._pos+=2,re("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let e=this._list.readUInt32BE(this._pos);return this._pos+=4,re("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){re("_parseVarByteNum");let r=4,n=0,i=1,s=0,o=!1,a,l=this._pos?this._pos:0;for(;n<r&&l+n<this._list.length;){if(a=this._list.readUInt8(l+n++),s+=i*(a&ke.VARBYTEINT_MASK),i*=128,!(a&ke.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=n)break}return!o&&n===r&&this._list.length>=n&&this._emitError(new Error("Invalid variable byte integer")),l&&(this._pos+=n),o?e?o={bytes:n,value:s}:o=s:o=!1,re("_parseVarByteNum: result: %o",o),o}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),re("_parseByte: result: %o",e),e}_parseByType(e){switch(re("_parseByType: type: %s",e),e){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){re("_parseProperties");let e=this._parseVarByteNum(),n=this._pos+e,i={};for(;this._pos<n;){let s=this._parseByte();if(!s)return this._emitError(new Error("Cannot parse property code type")),!1;let o=ke.propertiesCodes[s];if(!o)return this._emitError(new Error("Unknown property")),!1;if(o==="userProperties"){i[o]||(i[o]=Object.create(null));let a=this._parseByType(ke.propertiesTypes[o]);if(i[o][a.name])if(Array.isArray(i[o][a.name]))i[o][a.name].push(a.value);else{let l=i[o][a.name];i[o][a.name]=[l],i[o][a.name].push(a.value)}else i[o][a.name]=a.value;continue}i[o]?Array.isArray(i[o])?i[o].push(this._parseByType(ke.propertiesTypes[o])):(i[o]=[i[o]],i[o].push(this._parseByType(ke.propertiesTypes[o]))):i[o]=this._parseByType(ke.propertiesTypes[o])}return i}_newPacket(){return re("_newPacket"),this.packet&&(this._list.consume(this.packet.length),re("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),re("_newPacket: new packet"),this.packet=new pV,this._pos=0,!0}_emitError(e){re("_emitError",e),this.error=e,this.emit("error",e)}};mV.exports=RR});var vV=g((_Xe,bV)=>{"use strict";var{Buffer:Jd}=A("buffer"),E0e=65536,yV={},S0e=Jd.isBuffer(Jd.from([1,2]).subarray(0,1));function _V(t){let e=Jd.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(t&255,1),e}function R0e(){for(let t=0;t<E0e;t++)yV[t]=_V(t)}function T0e(t){let r=0,n=0,i=Jd.allocUnsafe(4);do r=t%128|0,t=t/128|0,t>0&&(r=r|128),i.writeUInt8(r,n++);while(t>0&&n<4);return t>0&&(n=0),S0e?i.subarray(0,n):i.slice(0,n)}function P0e(t){let e=Jd.allocUnsafe(4);return e.writeUInt32BE(t,0),e}bV.exports={cache:yV,generateCache:R0e,generateNumber:_V,genBufVariableByteInt:T0e,generate4ByteBuffer:P0e}});var wV=g((bXe,TR)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?TR.exports={nextTick:$0e}:TR.exports=process;function $0e(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,o;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(s=new Array(i-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var OR=g((vXe,IV)=>{"use strict";var oe=bR(),{Buffer:te}=A("buffer"),O0e=te.allocUnsafe(0),I0e=te.from([0]),Qd=vV(),A0e=wV().nextTick,kn=ts()("mqtt-packet:writeToStream"),Zy=Qd.cache,N0e=Qd.generateNumber,C0e=Qd.generateCache,PR=Qd.genBufVariableByteInt,k0e=Qd.generate4ByteBuffer,Lr=$R,e_=!0;function $V(t,e,r){switch(kn("generate called"),e.cork&&(e.cork(),A0e(q0e,e)),e_&&(e_=!1,C0e()),kn("generate: packet.cmd: %s",t.cmd),t.cmd){case"connect":return x0e(t,e,r);case"connack":return j0e(t,e,r);case"publish":return M0e(t,e,r);case"puback":case"pubrec":case"pubrel":case"pubcomp":return L0e(t,e,r);case"subscribe":return D0e(t,e,r);case"suback":return F0e(t,e,r);case"unsubscribe":return U0e(t,e,r);case"unsuback":return B0e(t,e,r);case"pingreq":case"pingresp":return V0e(t,e,r);case"disconnect":return H0e(t,e,r);case"auth":return z0e(t,e,r);default:return e.destroy(new Error("Unknown command")),!1}}Object.defineProperty($V,"cacheNumbers",{get(){return Lr===$R},set(t){t?((!Zy||Object.keys(Zy).length===0)&&(e_=!0),Lr=$R):(e_=!1,Lr=W0e)}});function q0e(t){t.uncork()}function x0e(t,e,r){let n=t||{},i=n.protocolId||"MQTT",s=n.protocolVersion||4,o=n.will,a=n.clean,l=n.keepalive||0,u=n.clientId||"",c=n.username,f=n.password,h=n.properties;a===void 0&&(a=!0);let d=0;if(!i||typeof i!="string"&&!te.isBuffer(i))return e.destroy(new Error("Invalid protocolId")),!1;if(d+=i.length+2,s!==3&&s!==4&&s!==5)return e.destroy(new Error("Invalid protocol version")),!1;if(d+=1,(typeof u=="string"||te.isBuffer(u))&&(u||s>=4)&&(u||a))d+=te.byteLength(u)+2;else{if(s<4)return e.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(a*1===0)return e.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof l!="number"||l<0||l>65535||l%1!==0)return e.destroy(new Error("Invalid keepalive")),!1;d+=2,d+=1;let p,m;if(s===5){if(p=Ho(e,h),!p)return!1;d+=p.length}if(o){if(typeof o!="object")return e.destroy(new Error("Invalid will")),!1;if(!o.topic||typeof o.topic!="string")return e.destroy(new Error("Invalid will topic")),!1;if(d+=te.byteLength(o.topic)+2,d+=2,o.payload)if(o.payload.length>=0)typeof o.payload=="string"?d+=te.byteLength(o.payload):d+=o.payload.length;else return e.destroy(new Error("Invalid will payload")),!1;if(m={},s===5){if(m=Ho(e,o.properties),!m)return!1;d+=m.length}}let y=!1;if(c!=null)if(PV(c))y=!0,d+=te.byteLength(c)+2;else return e.destroy(new Error("Invalid username")),!1;if(f!=null){if(!y)return e.destroy(new Error("Username is required to use password")),!1;if(PV(f))d+=OV(f)+2;else return e.destroy(new Error("Invalid password")),!1}e.write(oe.CONNECT_HEADER),qn(e,d),sc(e,i),n.bridgeMode&&(s+=128),e.write(s===131?oe.VERSION131:s===132?oe.VERSION132:s===4?oe.VERSION4:s===5?oe.VERSION5:oe.VERSION3);let _=0;return _|=c!=null?oe.USERNAME_MASK:0,_|=f!=null?oe.PASSWORD_MASK:0,_|=o&&o.retain?oe.WILL_RETAIN_MASK:0,_|=o&&o.qos?o.qos<<oe.WILL_QOS_SHIFT:0,_|=o?oe.WILL_FLAG_MASK:0,_|=a?oe.CLEAN_SESSION_MASK:0,e.write(te.from([_])),Lr(e,l),s===5&&p.write(),sc(e,u),o&&(s===5&&m.write(),fl(e,o.topic),sc(e,o.payload)),c!=null&&sc(e,c),f!=null&&sc(e,f),!0}function j0e(t,e,r){let n=r?r.protocolVersion:4,i=t||{},s=n===5?i.reasonCode:i.returnCode,o=i.properties,a=2;if(typeof s!="number")return e.destroy(new Error("Invalid return code")),!1;let l=null;if(n===5){if(l=Ho(e,o),!l)return!1;a+=l.length}return e.write(oe.CONNACK_HEADER),qn(e,a),e.write(i.sessionPresent?oe.SESSIONPRESENT_HEADER:I0e),e.write(te.from([s])),l?.write(),!0}function M0e(t,e,r){kn("publish: packet: %o",t);let n=r?r.protocolVersion:4,i=t||{},s=i.qos||0,o=i.retain?oe.RETAIN_MASK:0,a=i.topic,l=i.payload||O0e,u=i.messageId,c=i.properties,f=0;if(typeof a=="string")f+=te.byteLength(a)+2;else if(te.isBuffer(a))f+=a.length+2;else return e.destroy(new Error("Invalid topic")),!1;if(te.isBuffer(l)?f+=l.length:f+=te.byteLength(l),s&&typeof u!="number")return e.destroy(new Error("Invalid messageId")),!1;s&&(f+=2);let h=null;if(n===5){if(h=Ho(e,c),!h)return!1;f+=h.length}return e.write(oe.PUBLISH_HEADER[s][i.dup?1:0][o?1:0]),qn(e,f),Lr(e,OV(a)),e.write(a),s>0&&Lr(e,u),h?.write(),kn("publish: payload: %o",l),e.write(l)}function L0e(t,e,r){let n=r?r.protocolVersion:4,i=t||{},s=i.cmd||"puback",o=i.messageId,a=i.dup&&s==="pubrel"?oe.DUP_MASK:0,l=0,u=i.reasonCode,c=i.properties,f=n===5?3:2;if(s==="pubrel"&&(l=1),typeof o!="number")return e.destroy(new Error("Invalid messageId")),!1;let h=null;if(n===5&&typeof c=="object"){if(h=Xd(e,c,r,f),!h)return!1;f+=h.length}return e.write(oe.ACKS[s][l][a][0]),f===3&&(f+=u!==0?1:-1),qn(e,f),Lr(e,o),n===5&&f!==2&&e.write(te.from([u])),h!==null?h.write():f===4&&e.write(te.from([0])),!0}function D0e(t,e,r){kn("subscribe: packet: ");let n=r?r.protocolVersion:4,i=t||{},s=i.dup?oe.DUP_MASK:0,o=i.messageId,a=i.subscriptions,l=i.properties,u=0;if(typeof o!="number")return e.destroy(new Error("Invalid messageId")),!1;u+=2;let c=null;if(n===5){if(c=Ho(e,l),!c)return!1;u+=c.length}if(typeof a=="object"&&a.length)for(let h=0;h<a.length;h+=1){let d=a[h].topic,p=a[h].qos;if(typeof d!="string")return e.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof p!="number")return e.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(n===5){if(typeof(a[h].nl||!1)!="boolean")return e.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(a[h].rap||!1)!="boolean")return e.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let _=a[h].rh||0;if(typeof _!="number"||_>2)return e.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}u+=te.byteLength(d)+2+1}else return e.destroy(new Error("Invalid subscriptions")),!1;kn("subscribe: writing to stream: %o",oe.SUBSCRIBE_HEADER),e.write(oe.SUBSCRIBE_HEADER[1][s?1:0][0]),qn(e,u),Lr(e,o),c!==null&&c.write();let f=!0;for(let h of a){let d=h.topic,p=h.qos,m=+h.nl,y=+h.rap,_=h.rh,w;fl(e,d),w=oe.SUBSCRIBE_OPTIONS_QOS[p],n===5&&(w|=m?oe.SUBSCRIBE_OPTIONS_NL:0,w|=y?oe.SUBSCRIBE_OPTIONS_RAP:0,w|=_?oe.SUBSCRIBE_OPTIONS_RH[_]:0),f=e.write(te.from([w]))}return f}function F0e(t,e,r){let n=r?r.protocolVersion:4,i=t||{},s=i.messageId,o=i.granted,a=i.properties,l=0;if(typeof s!="number")return e.destroy(new Error("Invalid messageId")),!1;if(l+=2,typeof o=="object"&&o.length)for(let c=0;c<o.length;c+=1){if(typeof o[c]!="number")return e.destroy(new Error("Invalid qos vector")),!1;l+=1}else return e.destroy(new Error("Invalid qos vector")),!1;let u=null;if(n===5){if(u=Xd(e,a,r,l),!u)return!1;l+=u.length}return e.write(oe.SUBACK_HEADER),qn(e,l),Lr(e,s),u!==null&&u.write(),e.write(te.from(o))}function U0e(t,e,r){let n=r?r.protocolVersion:4,i=t||{},s=i.messageId,o=i.dup?oe.DUP_MASK:0,a=i.unsubscriptions,l=i.properties,u=0;if(typeof s!="number")return e.destroy(new Error("Invalid messageId")),!1;if(u+=2,typeof a=="object"&&a.length)for(let h=0;h<a.length;h+=1){if(typeof a[h]!="string")return e.destroy(new Error("Invalid unsubscriptions")),!1;u+=te.byteLength(a[h])+2}else return e.destroy(new Error("Invalid unsubscriptions")),!1;let c=null;if(n===5){if(c=Ho(e,l),!c)return!1;u+=c.length}e.write(oe.UNSUBSCRIBE_HEADER[1][o?1:0][0]),qn(e,u),Lr(e,s),c!==null&&c.write();let f=!0;for(let h=0;h<a.length;h++)f=fl(e,a[h]);return f}function B0e(t,e,r){let n=r?r.protocolVersion:4,i=t||{},s=i.messageId,o=i.dup?oe.DUP_MASK:0,a=i.granted,l=i.properties,u=i.cmd,c=0,f=2;if(typeof s!="number")return e.destroy(new Error("Invalid messageId")),!1;if(n===5)if(typeof a=="object"&&a.length)for(let d=0;d<a.length;d+=1){if(typeof a[d]!="number")return e.destroy(new Error("Invalid qos vector")),!1;f+=1}else return e.destroy(new Error("Invalid qos vector")),!1;let h=null;if(n===5){if(h=Xd(e,l,r,f),!h)return!1;f+=h.length}return e.write(oe.ACKS[u][c][o][0]),qn(e,f),Lr(e,s),h!==null&&h.write(),n===5&&e.write(te.from(a)),!0}function V0e(t,e,r){return e.write(oe.EMPTY[t.cmd])}function H0e(t,e,r){let n=r?r.protocolVersion:4,i=t||{},s=i.reasonCode,o=i.properties,a=n===5?1:0,l=null;if(n===5){if(l=Xd(e,o,r,a),!l)return!1;a+=l.length}return e.write(te.from([oe.codes.disconnect<<4])),qn(e,a),n===5&&e.write(te.from([s])),l!==null&&l.write(),!0}function z0e(t,e,r){let n=r?r.protocolVersion:4,i=t||{},s=i.reasonCode,o=i.properties,a=n===5?1:0;n!==5&&e.destroy(new Error("Invalid mqtt version for auth packet"));let l=Xd(e,o,r,a);return l?(a+=l.length,e.write(te.from([oe.codes.auth<<4])),qn(e,a),e.write(te.from([s])),l!==null&&l.write(),!0):!1}var EV={};function qn(t,e){if(e>oe.VARBYTEINT_MAX)return t.destroy(new Error(`Invalid variable byte integer: ${e}`)),!1;let r=EV[e];return r||(r=PR(e),e<16384&&(EV[e]=r)),kn("writeVarByteInt: writing to stream: %o",r),t.write(r)}function fl(t,e){let r=te.byteLength(e);return Lr(t,r),kn("writeString: %s",e),t.write(e,"utf8")}function SV(t,e,r){fl(t,e),fl(t,r)}function $R(t,e){return kn("writeNumberCached: number: %d",e),kn("writeNumberCached: %o",Zy[e]),t.write(Zy[e])}function W0e(t,e){let r=N0e(e);return kn("writeNumberGenerated: %o",r),t.write(r)}function G0e(t,e){let r=k0e(e);return kn("write4ByteNumber: %o",r),t.write(r)}function sc(t,e){typeof e=="string"?fl(t,e):e?(Lr(t,e.length),t.write(e)):Lr(t,0)}function Ho(t,e){if(typeof e!="object"||e.length!=null)return{length:1,write(){TV(t,{},0)}};let r=0;function n(s,o){let a=oe.propertiesTypes[s],l=0;switch(a){case"byte":{if(typeof o!="boolean")return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=2;break}case"int8":{if(typeof o!="number"||o<0||o>255)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=2;break}case"binary":{if(o&&o===null)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=1+te.byteLength(o)+2;break}case"int16":{if(typeof o!="number"||o<0||o>65535)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=3;break}case"int32":{if(typeof o!="number"||o<0||o>4294967295)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=5;break}case"var":{if(typeof o!="number"||o<0||o>268435455)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=1+te.byteLength(PR(o));break}case"string":{if(typeof o!="string")return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=3+te.byteLength(o.toString());break}case"pair":{if(typeof o!="object")return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=Object.getOwnPropertyNames(o).reduce((u,c)=>{let f=o[c];return Array.isArray(f)?u+=f.reduce((h,d)=>(h+=3+te.byteLength(c.toString())+2+te.byteLength(d.toString()),h),0):u+=3+te.byteLength(c.toString())+2+te.byteLength(o[c].toString()),u},0);break}default:return t.destroy(new Error(`Invalid property ${s}: ${o}`)),!1}return l}if(e)for(let s in e){let o=0,a=0,l=e[s];if(Array.isArray(l))for(let u=0;u<l.length;u++){if(a=n(s,l[u]),!a)return!1;o+=a}else{if(a=n(s,l),!a)return!1;o=a}if(!o)return!1;r+=o}return{length:te.byteLength(PR(r))+r,write(){TV(t,e,r)}}}function Xd(t,e,r,n){let i=["reasonString","userProperties"],s=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0,o=Ho(t,e);if(s)for(;n+o.length>s;){let a=i.shift();if(a&&e[a])delete e[a],o=Ho(t,e);else return!1}return o}function RV(t,e,r){switch(oe.propertiesTypes[e]){case"byte":{t.write(te.from([oe.properties[e]])),t.write(te.from([+r]));break}case"int8":{t.write(te.from([oe.properties[e]])),t.write(te.from([r]));break}case"binary":{t.write(te.from([oe.properties[e]])),sc(t,r);break}case"int16":{t.write(te.from([oe.properties[e]])),Lr(t,r);break}case"int32":{t.write(te.from([oe.properties[e]])),G0e(t,r);break}case"var":{t.write(te.from([oe.properties[e]])),qn(t,r);break}case"string":{t.write(te.from([oe.properties[e]])),fl(t,r);break}case"pair":{Object.getOwnPropertyNames(r).forEach(i=>{let s=r[i];Array.isArray(s)?s.forEach(o=>{t.write(te.from([oe.properties[e]])),SV(t,i.toString(),o.toString())}):(t.write(te.from([oe.properties[e]])),SV(t,i.toString(),s.toString()))});break}default:return t.destroy(new Error(`Invalid property ${e} value: ${r}`)),!1}}function TV(t,e,r){qn(t,r);for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n]!==null){let i=e[n];if(Array.isArray(i))for(let s=0;s<i.length;s++)RV(t,n,i[s]);else RV(t,n,i)}}function OV(t){return t?t instanceof te?t.length:te.byteLength(t):0}function PV(t){return typeof t=="string"||t instanceof te}IV.exports=$V});var CV=g((wXe,NV)=>{"use strict";var K0e=OR(),{EventEmitter:Y0e}=A("events"),{Buffer:AV}=A("buffer");function J0e(t,e){let r=new IR;return K0e(t,r,e),r.concat()}var IR=class extends Y0e{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0,r=new Array(this._array.length),n=this._array,i=0,s;for(s=0;s<n.length&&n[s]!==void 0;s++)typeof n[s]!="string"?r[s]=n[s].length:r[s]=AV.byteLength(n[s]),e+=r[s];let o=AV.allocUnsafe(e);for(s=0;s<n.length&&n[s]!==void 0;s++)typeof n[s]!="string"?(n[s].copy(o,i),i+=r[s]):(o.write(n[s],i),i+=r[s]);return o}destroy(e){e&&this.emit("error",e)}};NV.exports=J0e});var kV=g(t_=>{"use strict";t_.parser=gV().parser;t_.generate=CV();t_.writeToStream=OR()});var CR=g(NR=>{"use strict";Object.defineProperty(NR,"__esModule",{value:!0});var AR=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let e=this.nextId++;return this.nextId===65536&&(this.nextId=1),e}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(e){return!0}deallocate(e){}clear(){}};NR.default=AR});var Zd=g((RXe,qV)=>{"use strict";qV.exports=Q0e;function oc(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function Q0e(t){if(t=t||{},t.circles)return X0e(t);let e=new Map;if(e.set(Date,o=>new Date(o)),e.set(Map,(o,a)=>new Map(n(Array.from(o),a))),e.set(Set,(o,a)=>new Set(n(Array.from(o),a))),t.constructorHandlers)for(let o of t.constructorHandlers)e.set(o[0],o[1]);let r=null;return t.proto?s:i;function n(o,a){let l=Object.keys(o),u=new Array(l.length);for(let c=0;c<l.length;c++){let f=l[c],h=o[f];typeof h!="object"||h===null?u[f]=h:h.constructor!==Object&&(r=e.get(h.constructor))?u[f]=r(h,a):ArrayBuffer.isView(h)?u[f]=oc(h):u[f]=a(h)}return u}function i(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,i);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,i);let a={};for(let l in o){if(Object.hasOwnProperty.call(o,l)===!1)continue;let u=o[l];typeof u!="object"||u===null?a[l]=u:u.constructor!==Object&&(r=e.get(u.constructor))?a[l]=r(u,i):ArrayBuffer.isView(u)?a[l]=oc(u):a[l]=i(u)}return a}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,s);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,s);let a={};for(let l in o){let u=o[l];typeof u!="object"||u===null?a[l]=u:u.constructor!==Object&&(r=e.get(u.constructor))?a[l]=r(u,s):ArrayBuffer.isView(u)?a[l]=oc(u):a[l]=s(u)}return a}}function X0e(t){let e=[],r=[],n=new Map;if(n.set(Date,l=>new Date(l)),n.set(Map,(l,u)=>new Map(s(Array.from(l),u))),n.set(Set,(l,u)=>new Set(s(Array.from(l),u))),t.constructorHandlers)for(let l of t.constructorHandlers)n.set(l[0],l[1]);let i=null;return t.proto?a:o;function s(l,u){let c=Object.keys(l),f=new Array(c.length);for(let h=0;h<c.length;h++){let d=c[h],p=l[d];if(typeof p!="object"||p===null)f[d]=p;else if(p.constructor!==Object&&(i=n.get(p.constructor)))f[d]=i(p,u);else if(ArrayBuffer.isView(p))f[d]=oc(p);else{let m=e.indexOf(p);m!==-1?f[d]=r[m]:f[d]=u(p)}}return f}function o(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return s(l,o);if(l.constructor!==Object&&(i=n.get(l.constructor)))return i(l,o);let u={};e.push(l),r.push(u);for(let c in l){if(Object.hasOwnProperty.call(l,c)===!1)continue;let f=l[c];if(typeof f!="object"||f===null)u[c]=f;else if(f.constructor!==Object&&(i=n.get(f.constructor)))u[c]=i(f,o);else if(ArrayBuffer.isView(f))u[c]=oc(f);else{let h=e.indexOf(f);h!==-1?u[c]=r[h]:u[c]=o(f)}}return e.pop(),r.pop(),u}function a(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return s(l,a);if(l.constructor!==Object&&(i=n.get(l.constructor)))return i(l,a);let u={};e.push(l),r.push(u);for(let c in l){let f=l[c];if(typeof f!="object"||f===null)u[c]=f;else if(f.constructor!==Object&&(i=n.get(f.constructor)))u[c]=i(f,a);else if(ArrayBuffer.isView(f))u[c]=oc(f);else{let h=e.indexOf(f);h!==-1?u[c]=r[h]:u[c]=a(f)}}return e.pop(),r.pop(),u}}});var jV=g((TXe,xV)=>{"use strict";xV.exports=Zd()()});var LV=g(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.validateTopics=ac.validateTopic=void 0;function MV(t){let e=t.split("/");for(let r=0;r<e.length;r++)if(e[r]!=="+"){if(e[r]==="#")return r===e.length-1;if(e[r].indexOf("+")!==-1||e[r].indexOf("#")!==-1)return!1}return!0}ac.validateTopic=MV;function Z0e(t){if(t.length===0)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!MV(t[e]))return t[e];return null}ac.validateTopics=Z0e});var xR=g(qR=>{"use strict";Object.defineProperty(qR,"__esModule",{value:!0});var ebe=Uo(),tbe={objectMode:!0},rbe={clean:!0},kR=class{constructor(e){this.options=e||{},this.options=Object.assign(Object.assign({},rbe),e),this._inflights=new Map}put(e,r){return this._inflights.set(e.messageId,e),r&&r(),this}createStream(){let e=new ebe.Readable(tbe),r=[],n=!1,i=0;return this._inflights.forEach((s,o)=>{r.push(s)}),e._read=()=>{!n&&i<r.length?e.push(r[i++]):e.push(null)},e.destroy=s=>{if(!n)return n=!0,setTimeout(()=>{e.emit("close")},0),e},e}del(e,r){let n=this._inflights.get(e.messageId);return n?(this._inflights.delete(e.messageId),r(null,n)):r&&r(new Error("missing packet")),this}get(e,r){let n=this._inflights.get(e.messageId);return n?r(null,n):r&&r(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}};qR.default=kR});var FV=g(jR=>{"use strict";Object.defineProperty(jR,"__esModule",{value:!0});var DV=[0,16,128,131,135,144,145,151,153],nbe=(t,e,r)=>{t.log("handlePublish: packet %o",e),r=typeof r<"u"?r:t.noop;let n=e.topic.toString(),i=e.payload,{qos:s}=e,{messageId:o}=e,{options:a}=t;if(t.options.protocolVersion===5){let l;if(e.properties&&(l=e.properties.topicAlias),typeof l<"u")if(n.length===0)if(l>0&&l<=65535){let u=t.topicAliasRecv.getTopicByAlias(l);if(u)n=u,t.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",n,l);else{t.log("handlePublish :: unregistered topic alias. alias: %d",l),t.emit("error",new Error("Received unregistered Topic Alias"));return}}else{t.log("handlePublish :: topic alias out of range. alias: %d",l),t.emit("error",new Error("Received Topic Alias is out of range"));return}else if(t.topicAliasRecv.put(n,l))t.log("handlePublish :: registered topic: %s - alias: %d",n,l);else{t.log("handlePublish :: topic alias out of range. alias: %d",l),t.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(t.log("handlePublish: qos %d",s),s){case 2:{a.customHandleAcks(n,i,e,(l,u)=>{if(typeof l=="number"&&(u=l,l=null),l)return t.emit("error",l);if(DV.indexOf(u)===-1)return t.emit("error",new Error("Wrong reason code for pubrec"));u?t._sendPacket({cmd:"pubrec",messageId:o,reasonCode:u},r):t.incomingStore.put(e,()=>{t._sendPacket({cmd:"pubrec",messageId:o},r)})});break}case 1:{a.customHandleAcks(n,i,e,(l,u)=>{if(typeof l=="number"&&(u=l,l=null),l)return t.emit("error",l);if(DV.indexOf(u)===-1)return t.emit("error",new Error("Wrong reason code for puback"));u||t.emit("message",n,i,e),t.handleMessage(e,c=>{if(c)return r&&r(c);t._sendPacket({cmd:"puback",messageId:o,reasonCode:u},r)})});break}case 0:t.emit("message",n,i,e),t.handleMessage(e,r);break;default:t.log("handlePublish: unknown QoS. Doing nothing.");break}};jR.default=nbe});var UV=g((IXe,ibe)=>{ibe.exports={name:"mqtt",description:"A library for the MQTT protocol",version:"5.10.3",contributors:["Adam Rudd <adamvrr@gmail.com>","Matteo Collina <matteo.collina@gmail.com> (https://github.com/mcollina)","Siarhei Buntsevich <scarry0506@gmail.com> (https://github.com/scarry1992)","Yoseph Maguire <yomaguir@microsoft.com> (https://github.com/YoDaMa)","Daniel Lando <daniel.sorridi@gmail.com> (https://github.com/robertsLando)"],keywords:["mqtt","publish/subscribe","publish","subscribe"],license:"MIT",repository:{type:"git",url:"git://github.com/mqttjs/MQTT.js.git"},main:"./build/index.js",module:"./dist/mqtt.esm.js",bin:{mqtt_pub:"./build/bin/pub.js",mqtt_sub:"./build/bin/sub.js",mqtt:"./build/bin/mqtt.js"},files:["dist/","CONTRIBUTING.md","LICENSE.md","help/","build/","src/"],exports:{".":{browser:{import:"./dist/mqtt.esm.js",default:"./dist/mqtt.min.js"},default:"./build/index.js"},"./package.json":"./package.json","./*.map":"./build/*.js.map","./dist/*":"./dist/*.js","./*":"./build/*.js"},types:"build/index.d.ts",typesVersions:{"*":{"*":["./build/index.d.ts"]}},scripts:{lint:"eslint --ext .ts .","lint-fix":"eslint --fix --ext .ts .","build:ts":"rimraf build/ && tsc -p tsconfig.build.json","build:browser":"node esbuild.js",build:"npm run build:ts && npm run build:browser",prepare:"npm run build","unit-test:node":"node -r esbuild-register --test-concurrency 4 --test-reporter=junit --test-reporter-destination=junit.xml --test-reporter=spec --test-reporter-destination=stdout --test test/node/*.ts ","unit-test:browser":"wtr","test:node":"node_modules/.bin/nyc npm run unit-test:node","test:browser":"npm run build && npm run unit-test:browser",test:"npm run test:node",changelog:"conventional-changelog -p angular -i CHANGELOG.md -s && git add CHANGELOG.md","changelog-init":"conventional-changelog -p angular -i CHANGELOG.md -s -r 0",release:"read -p 'GITHUB_TOKEN: ' GITHUB_TOKEN && export GITHUB_TOKEN=$GITHUB_TOKEN && release-it"},"release-it":{github:{release:!0},git:{tagName:"v${version}",commitMessage:"chore(release): ${version}"},hooks:{"before:init":["npm run test"]},npm:{publish:!0},plugins:{"@release-it/conventional-changelog":{preset:"angular",infile:"CHANGELOG.md"}}},publishConfig:{provenance:!0},"pre-commit":["lint"],engines:{node:">=16.0.0"},browser:{"./mqtt.js":"./dist/mqtt.js",fs:!1,tls:!1,net:!1},dependencies:{"@types/readable-stream":"^4.0.5","@types/ws":"^8.5.9",commist:"^3.2.0","concat-stream":"^2.0.0",debug:"^4.3.4","help-me":"^5.0.0","lru-cache":"^10.0.1",minimist:"^1.2.8","mqtt-packet":"^9.0.1","number-allocator":"^1.0.14","readable-stream":"^4.4.2",reinterval:"^1.1.0",rfdc:"^1.3.0",split2:"^4.2.0","worker-timers":"^7.1.4",ws:"^8.17.1"},devDependencies:{"@esm-bundle/chai":"^4.3.4-fix.0","@release-it/conventional-changelog":"^7.0.2","@types/chai":"^4.3.10","@types/node":"^20.9.0","@types/sinon":"^17.0.1","@types/tape":"^5.6.4","@typescript-eslint/eslint-plugin":"^6.10.0","@typescript-eslint/parser":"^6.10.0","@web/test-runner":"^0.18.0","@web/test-runner-playwright":"^0.11.0","aedes-cli":"^0.8.0",chai:"^4.3.10",chokidar:"^3.5.3","conventional-changelog-cli":"^4.1.0","end-of-stream":"^1.4.4",esbuild:"^0.19.5","esbuild-plugin-polyfill-node":"^0.3.0","esbuild-register":"^3.5.0",eslint:"^8.53.0","eslint-config-airbnb-base":"^15.0.0","eslint-config-airbnb-typescript":"^17.1.0","eslint-config-prettier":"^9.0.0","eslint-plugin-import":"^2.29.0","eslint-plugin-prettier":"^5.0.1",global:"^4.4.0","leaked-handles":"^5.2.0",mkdirp:"^3.0.1","mqtt-connection":"^4.1.0","mqtt-level-store":"^3.1.0",nyc:"^15.1.0","pre-commit":"^1.2.2",prettier:"^3.0.3","release-it":"^16.2.1",rimraf:"^5.0.5",should:"^13.2.3",sinon:"^17.0.1",snazzy:"^9.0.0",tape:"^5.7.2","ts-node":"^10.9.1",typescript:"^5.2.2"}}});var dl=g(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.MQTTJS_VERSION=rs.nextTick=rs.applyMixin=rs.ErrorWithReasonCode=void 0;var MR=class t extends Error{constructor(e,r){super(e),this.code=r,Object.setPrototypeOf(this,t.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};rs.ErrorWithReasonCode=MR;function sbe(t,e,r=!1){var n;let i=[e];for(;;){let s=i[0],o=Object.getPrototypeOf(s);if(o?.prototype)i.unshift(o);else break}for(let s of i)for(let o of Object.getOwnPropertyNames(s.prototype))(r||o!=="constructor")&&Object.defineProperty(t.prototype,o,(n=Object.getOwnPropertyDescriptor(s.prototype,o))!==null&&n!==void 0?n:Object.create(null))}rs.applyMixin=sbe;rs.nextTick=typeof(process==null?void 0:process.nextTick)=="function"?process.nextTick:t=>{setTimeout(t,0)};rs.MQTTJS_VERSION=UV().version});var eh=g(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.ReasonCodes=void 0;var BV=dl();zo.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var obe=(t,e)=>{let{messageId:r}=e,n=e.cmd,i=null,s=t.outgoing[r]?t.outgoing[r].cb:null,o=null;if(!s){t.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(t.log("_handleAck :: packet type",n),n){case"pubcomp":case"puback":{let a=e.reasonCode;a&&a>0&&a!==16?(o=new BV.ErrorWithReasonCode(`Publish error: ${zo.ReasonCodes[a]}`,a),t._removeOutgoingAndStoreMessage(r,()=>{s(o,e)})):t._removeOutgoingAndStoreMessage(r,s);break}case"pubrec":{i={cmd:"pubrel",qos:2,messageId:r};let a=e.reasonCode;a&&a>0&&a!==16?(o=new BV.ErrorWithReasonCode(`Publish error: ${zo.ReasonCodes[a]}`,a),t._removeOutgoingAndStoreMessage(r,()=>{s(o,e)})):t._sendPacket(i);break}case"suback":{delete t.outgoing[r],t.messageIdProvider.deallocate(r);let a=e.granted;for(let l=0;l<a.length;l++){let u=a[l];if(u&128){o=new Error(`Subscribe error: ${zo.ReasonCodes[u]}`),o.code=u;let c=t.messageIdToTopic[r];c&&c.forEach(f=>{delete t._resubscribeTopics[f]})}}delete t.messageIdToTopic[r],t._invokeStoreProcessingQueue(),s(o,e);break}case"unsuback":{delete t.outgoing[r],t.messageIdProvider.deallocate(r),t._invokeStoreProcessingQueue(),s(null,e);break}default:t.emit("error",new Error("unrecognized packet type"))}t.disconnecting&&Object.keys(t.outgoing).length===0&&t.emit("outgoingEmpty")};zo.default=obe});var HV=g(LR=>{"use strict";Object.defineProperty(LR,"__esModule",{value:!0});var VV=dl(),abe=eh(),lbe=(t,e)=>{let{options:r}=t,n=r.protocolVersion,i=n===5?e.reasonCode:e.returnCode;if(n!==5){let s=new VV.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${n}`,i);t.emit("error",s);return}t.handleAuth(e,(s,o)=>{if(s){t.emit("error",s);return}if(i===24)t.reconnecting=!1,t._sendPacket(o);else{let a=new VV.ErrorWithReasonCode(`Connection refused: ${abe.ReasonCodes[i]}`,i);t.emit("error",a)}})};LR.default=lbe});var YV=g(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});n_.LRUCache=void 0;var lc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,WV=new Set,DR=typeof process=="object"&&process?process:{},GV=(t,e,r,n)=>{typeof DR.emitWarning=="function"?DR.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},r_=globalThis.AbortController,zV=globalThis.AbortSignal;if(typeof r_>"u"){zV=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},r_=class{constructor(){e()}signal=new zV;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=DR.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,GV("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var ube=t=>!WV.has(t),xXe=Symbol("type"),Wo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),KV=t=>Wo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?uc:null:null,uc=class extends Array{constructor(e){super(e),this.fill(0)}},FR=class t{heap;length;static#n=!1;static create(e){let r=KV(e);if(!r)return[];t.#n=!0;let n=new t(e,r);return t.#n=!1,n}constructor(e,r){if(!t.#n)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},UR=class t{#n;#o;#d;#h;#T;#P;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#p;#s;#t;#e;#u;#m;#c;#a;#_;#l;#b;#v;#g;#w;#O;#f;static unsafeExposeInternals(e){return{starts:e.#v,ttls:e.#g,sizes:e.#b,keyMap:e.#s,keyList:e.#t,valList:e.#e,next:e.#u,prev:e.#m,get head(){return e.#c},get tail(){return e.#a},free:e.#_,isBackgroundFetch:r=>e.#r(r),backgroundFetch:(r,n,i,s)=>e.#q(r,n,i,s),moveToTail:r=>e.#N(r),indexes:r=>e.#E(r),rindexes:r=>e.#S(r),isStale:r=>e.#y(r)}}get max(){return this.#n}get maxSize(){return this.#o}get calculatedSize(){return this.#p}get size(){return this.#i}get fetchMethod(){return this.#T}get memoMethod(){return this.#P}get dispose(){return this.#d}get disposeAfter(){return this.#h}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:u,disposeAfter:c,noDisposeOnSet:f,noUpdateTTL:h,maxSize:d=0,maxEntrySize:p=0,sizeCalculation:m,fetchMethod:y,memoMethod:_,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:E,ignoreFetchAbort:R}=e;if(r!==0&&!Wo(r))throw new TypeError("max option must be a nonnegative integer");let S=r?KV(r):Array;if(!S)throw new Error("invalid max value: "+r);if(this.#n=r,this.#o=d,this.maxEntrySize=p||this.#o,this.sizeCalculation=m,this.sizeCalculation){if(!this.#o&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(_!==void 0&&typeof _!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#P=_,y!==void 0&&typeof y!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#T=y,this.#O=!!y,this.#s=new Map,this.#t=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#u=new S(r),this.#m=new S(r),this.#c=0,this.#a=0,this.#_=FR.create(r),this.#i=0,this.#p=0,typeof u=="function"&&(this.#d=u),typeof c=="function"?(this.#h=c,this.#l=[]):(this.#h=void 0,this.#l=void 0),this.#w=!!this.#d,this.#f=!!this.#h,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!w,this.allowStaleOnFetchRejection=!!b,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!R,this.maxEntrySize!==0){if(this.#o!==0&&!Wo(this.#o))throw new TypeError("maxSize must be a positive integer if specified");if(!Wo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#U()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Wo(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!Wo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#x()}if(this.#n===0&&this.ttl===0&&this.#o===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#n&&!this.#o){let P="LRU_CACHE_UNBOUNDED";ube(P)&&(WV.add(P),GV("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",P,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#x(){let e=new uc(this.#n),r=new uc(this.#n);this.#g=e,this.#v=r,this.#j=(s,o,a=lc.now())=>{if(r[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#y(s)&&this.#R(this.#t[s],"expire")},o+1);l.unref&&l.unref()}},this.#I=s=>{r[s]=e[s]!==0?lc.now():0},this.#$=(s,o)=>{if(e[o]){let a=e[o],l=r[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=n||i();let u=s.now-l;s.remainingTTL=a-u}};let n=0,i=()=>{let s=lc.now();if(this.ttlResolution>0){n=s;let o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#s.get(s);if(o===void 0)return 0;let a=e[o],l=r[o];if(!a||!l)return 1/0;let u=(n||i())-l;return a-u},this.#y=s=>{let o=r[s],a=e[s];return!!a&&!!o&&(n||i())-o>a}}#I=()=>{};#$=()=>{};#j=()=>{};#y=()=>!1;#U(){let e=new uc(this.#n);this.#p=0,this.#b=e,this.#A=r=>{this.#p-=e[r],e[r]=0},this.#M=(r,n,i,s)=>{if(this.#r(n))return 0;if(!Wo(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!Wo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#o){let s=this.#o-e[r];for(;this.#p>s;)this.#k(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#A=e=>{};#C=(e,r,n)=>{};#M=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:e=this.allowStale}={}){if(this.#i)for(let r=this.#a;!(!this.#L(r)||((e||!this.#y(r))&&(yield r),r===this.#c));)r=this.#m[r]}*#S({allowStale:e=this.allowStale}={}){if(this.#i)for(let r=this.#c;!(!this.#L(r)||((e||!this.#y(r))&&(yield r),r===this.#a));)r=this.#u[r]}#L(e){return e!==void 0&&this.#s.get(this.#t[e])===e}*entries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#t[e]!==void 0&&!this.#r(this.#e[e])&&(yield[this.#t[e],this.#e[e]])}*rentries(){for(let e of this.#S())this.#e[e]!==void 0&&this.#t[e]!==void 0&&!this.#r(this.#e[e])&&(yield[this.#t[e],this.#e[e]])}*keys(){for(let e of this.#E()){let r=this.#t[e];r!==void 0&&!this.#r(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#S()){let r=this.#t[e];r!==void 0&&!this.#r(this.#e[e])&&(yield r)}}*values(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#r(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#S())this.#e[e]!==void 0&&!this.#r(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#E()){let i=this.#e[n],s=this.#r(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#t[n],this))return this.get(this.#t[n],r)}}forEach(e,r=this){for(let n of this.#E()){let i=this.#e[n],s=this.#r(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,this.#t[n],this)}}rforEach(e,r=this){for(let n of this.#S()){let i=this.#e[n],s=this.#r(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,this.#t[n],this)}}purgeStale(){let e=!1;for(let r of this.#S({allowStale:!0}))this.#y(r)&&(this.#R(this.#t[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#e[r],i=this.#r(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#g&&this.#v){let o=this.#g[r],a=this.#v[r];if(o&&a){let l=o-(lc.now()-a);s.ttl=l,s.start=Date.now()}}return this.#b&&(s.size=this.#b[r]),s}dump(){let e=[];for(let r of this.#E({allowStale:!0})){let n=this.#t[r],i=this.#e[r],s=this.#r(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let o={value:s};if(this.#g&&this.#v){o.ttl=this.#g[r];let a=lc.now()-this.#v[r];o.start=Math.floor(Date.now()-a)}this.#b&&(o.size=this.#b[r]),e.unshift([n,o])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=lc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,c=this.#M(e,r,n.size||0,a);if(this.maxEntrySize&&c>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#R(e,"set"),this;let f=this.#i===0?void 0:this.#s.get(e);if(f===void 0)f=this.#i===0?this.#a:this.#_.length!==0?this.#_.pop():this.#i===this.#n?this.#k(!1):this.#i,this.#t[f]=e,this.#e[f]=r,this.#s.set(e,f),this.#u[this.#a]=f,this.#m[f]=this.#a,this.#a=f,this.#i++,this.#C(f,c,l),l&&(l.set="add"),u=!1;else{this.#N(f);let h=this.#e[f];if(r!==h){if(this.#O&&this.#r(h)){h.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:d}=h;d!==void 0&&!o&&(this.#w&&this.#d?.(d,e,"set"),this.#f&&this.#l?.push([d,e,"set"]))}else o||(this.#w&&this.#d?.(h,e,"set"),this.#f&&this.#l?.push([h,e,"set"]));if(this.#A(f),this.#C(f,c,l),this.#e[f]=r,l){l.set="replace";let d=h&&this.#r(h)?h.__staleWhileFetching:h;d!==void 0&&(l.oldValue=d)}}else l&&(l.set="update")}if(i!==0&&!this.#g&&this.#x(),this.#g&&(u||this.#j(f,i,s),l&&this.#$(l,f)),!o&&this.#f&&this.#l){let h=this.#l,d;for(;d=h?.shift();)this.#h?.(...d)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#c];if(this.#k(!0),this.#r(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#f&&this.#l){let e=this.#l,r;for(;r=e?.shift();)this.#h?.(...r)}}}#k(e){let r=this.#c,n=this.#t[r],i=this.#e[r];return this.#O&&this.#r(i)?i.__abortController.abort(new Error("evicted")):(this.#w||this.#f)&&(this.#w&&this.#d?.(i,n,"evict"),this.#f&&this.#l?.push([i,n,"evict"])),this.#A(r),e&&(this.#t[r]=void 0,this.#e[r]=void 0,this.#_.push(r)),this.#i===1?(this.#c=this.#a=0,this.#_.length=0):this.#c=this.#u[r],this.#s.delete(n),this.#i--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=this.#s.get(e);if(s!==void 0){let o=this.#e[s];if(this.#r(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#y(s))i&&(i.has="stale",this.#$(i,s));else return n&&this.#I(s),i&&(i.has="hit",this.#$(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#y(i))return;let s=this.#e[i];return this.#r(s)?s.__staleWhileFetching:s}#q(e,r,n,i){let s=r===void 0?void 0:this.#e[r];if(this.#r(s))return s;let o=new r_,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:n,context:i},u=(m,y=!1)=>{let{aborted:_}=o.signal,w=n.ignoreFetchAbort&&m!==void 0;if(n.status&&(_&&!y?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,w&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),_&&!w&&!y)return f(o.signal.reason);let v=d;return this.#e[r]===d&&(m===void 0?v.__staleWhileFetching?this.#e[r]=v.__staleWhileFetching:this.#R(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,m,l.options))),m},c=m=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=m),f(m)),f=m=>{let{aborted:y}=o.signal,_=y&&n.allowStaleOnFetchAbort,w=_||n.allowStaleOnFetchRejection,v=w||n.noDeleteOnFetchRejection,b=d;if(this.#e[r]===d&&(!v||b.__staleWhileFetching===void 0?this.#R(e,"fetch"):_||(this.#e[r]=b.__staleWhileFetching)),w)return n.status&&b.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),b.__staleWhileFetching;if(b.__returned===b)throw m},h=(m,y)=>{let _=this.#T?.(e,s,l);_&&_ instanceof Promise&&_.then(w=>m(w===void 0?void 0:w),y),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(m(void 0),n.allowStaleOnFetchAbort&&(m=w=>u(w,!0)))})};n.status&&(n.status.fetchDispatched=!0);let d=new Promise(h).then(u,c),p=Object.assign(d,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,p,{...l.options,status:void 0}),r=this.#s.get(e)):this.#e[r]=p,p}#r(e){if(!this.#O)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof r_}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:m,forceRefresh:y=!1,status:_,signal:w}=r;if(!this.#O)return _&&(_.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:_});let v={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:u,noUpdateTTL:c,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:p,ignoreFetchAbort:d,status:_,signal:w},b=this.#s.get(e);if(b===void 0){_&&(_.fetch="miss");let E=this.#q(e,b,v,m);return E.__returned=E}else{let E=this.#e[b];if(this.#r(E)){let O=n&&E.__staleWhileFetching!==void 0;return _&&(_.fetch="inflight",O&&(_.returnedStale=!0)),O?E.__staleWhileFetching:E.__returned=E}let R=this.#y(b);if(!y&&!R)return _&&(_.fetch="hit"),this.#N(b),i&&this.#I(b),_&&this.#$(_,b),E;let S=this.#q(e,b,v,m),T=S.__staleWhileFetching!==void 0&&n;return _&&(_.fetch=R?"stale":"refresh",T&&R&&(_.returnedStale=!0)),T?S.__staleWhileFetching:S.__returned=S}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#P;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=r,a=this.get(e,o);if(!s&&a!==void 0)return a;let l=n(e,a,{options:o,context:i});return this.set(e,l,o),l}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=this.#s.get(e);if(a!==void 0){let l=this.#e[a],u=this.#r(l);return o&&this.#$(o,a),this.#y(a)?(o&&(o.get="stale"),u?(o&&n&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?l.__staleWhileFetching:void 0):(s||this.#R(e,"expire"),o&&n&&(o.returnedStale=!0),n?l:void 0)):(o&&(o.get="hit"),u?l.__staleWhileFetching:(this.#N(a),i&&this.#I(a),l))}else o&&(o.get="miss")}#D(e,r){this.#m[r]=e,this.#u[e]=r}#N(e){e!==this.#a&&(e===this.#c?this.#c=this.#u[e]:this.#D(this.#m[e],this.#u[e]),this.#D(this.#a,e),this.#a=e)}delete(e){return this.#R(e,"delete")}#R(e,r){let n=!1;if(this.#i!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#i===1)this.#F(r);else{this.#A(i);let s=this.#e[i];if(this.#r(s)?s.__abortController.abort(new Error("deleted")):(this.#w||this.#f)&&(this.#w&&this.#d?.(s,e,r),this.#f&&this.#l?.push([s,e,r])),this.#s.delete(e),this.#t[i]=void 0,this.#e[i]=void 0,i===this.#a)this.#a=this.#m[i];else if(i===this.#c)this.#c=this.#u[i];else{let o=this.#m[i];this.#u[o]=this.#u[i];let a=this.#u[i];this.#m[a]=this.#m[i]}this.#i--,this.#_.push(i)}}if(this.#f&&this.#l?.length){let i=this.#l,s;for(;s=i?.shift();)this.#h?.(...s)}return n}clear(){return this.#F("delete")}#F(e){for(let r of this.#S({allowStale:!0})){let n=this.#e[r];if(this.#r(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#t[r];this.#w&&this.#d?.(n,i,e),this.#f&&this.#l?.push([n,i,e])}}if(this.#s.clear(),this.#e.fill(void 0),this.#t.fill(void 0),this.#g&&this.#v&&(this.#g.fill(0),this.#v.fill(0)),this.#b&&this.#b.fill(0),this.#c=0,this.#a=0,this.#_.length=0,this.#p=0,this.#i=0,this.#f&&this.#l){let r=this.#l,n;for(;n=r?.shift();)this.#h?.(...n)}}};n_.LRUCache=UR});var ns=g(Go=>{"use strict";Object.defineProperty(Go,"t",{value:!0});Go.ContainerIterator=Go.Container=Go.Base=void 0;var BR=class{constructor(e=0){this.iteratorType=e}equals(e){return this.o===e.o}};Go.ContainerIterator=BR;var i_=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};Go.Base=i_;var VR=class extends i_{};Go.Container=VR});var JV=g(s_=>{"use strict";Object.defineProperty(s_,"t",{value:!0});s_.default=void 0;var cbe=ns(),HR=class extends cbe.Base{constructor(e=[]){super(),this.S=[];let r=this;e.forEach(function(n){r.push(n)})}clear(){this.i=0,this.S=[]}push(e){return this.S.push(e),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},fbe=HR;s_.default=fbe});var QV=g(o_=>{"use strict";Object.defineProperty(o_,"t",{value:!0});o_.default=void 0;var dbe=ns(),zR=class extends dbe.Base{constructor(e=[]){super(),this.j=0,this.q=[];let r=this;e.forEach(function(n){r.push(n)})}clear(){this.q=[],this.i=this.j=0}push(e){let r=this.q.length;if(this.j/r>.5&&this.j+this.i>=r&&r>4096){let n=this.i;for(let i=0;i<n;++i)this.q[i]=this.q[this.j+i];this.j=0,this.q[this.i]=e}else this.q[this.j+this.i]=e;return++this.i}pop(){if(this.i===0)return;let e=this.q[this.j++];return this.i-=1,e}front(){if(this.i!==0)return this.q[this.j]}},hbe=zR;o_.default=hbe});var XV=g(a_=>{"use strict";Object.defineProperty(a_,"t",{value:!0});a_.default=void 0;var pbe=ns(),WR=class extends pbe.Base{constructor(e=[],r=function(i,s){return i>s?-1:i<s?1:0},n=!0){if(super(),this.v=r,Array.isArray(e))this.C=n?[...e]:e;else{this.C=[];let s=this;e.forEach(function(o){s.C.push(o)})}this.i=this.C.length;let i=this.i>>1;for(let s=this.i-1>>1;s>=0;--s)this.k(s,i)}m(e){let r=this.C[e];for(;e>0;){let n=e-1>>1,i=this.C[n];if(this.v(i,r)<=0)break;this.C[e]=i,e=n}this.C[e]=r}k(e,r){let n=this.C[e];for(;e<r;){let i=e<<1|1,s=i+1,o=this.C[i];if(s<this.i&&this.v(o,this.C[s])>0&&(i=s,o=this.C[s]),this.v(o,n)>=0)break;this.C[e]=o,e=i}this.C[e]=n}clear(){this.i=0,this.C.length=0}push(e){this.C.push(e),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let e=this.C[0],r=this.C.pop();return this.i-=1,this.i&&(this.C[0]=r,this.k(0,this.i>>1)),e}top(){return this.C[0]}find(e){return this.C.indexOf(e)>=0}remove(e){let r=this.C.indexOf(e);return r<0?!1:(r===0?this.pop():r===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(r,1,this.C.pop()),this.i-=1,this.m(r),this.k(r,this.i>>1)),!0)}updateItem(e){let r=this.C.indexOf(e);return r<0?!1:(this.m(r),this.k(r,this.i>>1),!0)}toArray(){return[...this.C]}},mbe=WR;a_.default=mbe});var u_=g(l_=>{"use strict";Object.defineProperty(l_,"t",{value:!0});l_.default=void 0;var gbe=ns(),GR=class extends gbe.Container{},ybe=GR;l_.default=ybe});var is=g(KR=>{"use strict";Object.defineProperty(KR,"t",{value:!0});KR.throwIteratorAccessError=_be;function _be(){throw new RangeError("Iterator access denied!")}});var JR=g(f_=>{"use strict";Object.defineProperty(f_,"t",{value:!0});f_.RandomIterator=void 0;var bbe=ns(),c_=is(),YR=class extends bbe.ContainerIterator{constructor(e,r){super(r),this.o=e,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,c_.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,c_.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,c_.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,c_.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(e){this.container.setElementByPos(this.o,e)}};f_.RandomIterator=YR});var ZV=g(d_=>{"use strict";Object.defineProperty(d_,"t",{value:!0});d_.default=void 0;var vbe=Ebe(u_()),wbe=JR();function Ebe(t){return t&&t.t?t:{default:t}}var hl=class t extends wbe.RandomIterator{constructor(e,r,n){super(e,n),this.container=r}copy(){return new t(this.o,this.container,this.iteratorType)}},QR=class extends vbe.default{constructor(e=[],r=!0){if(super(),Array.isArray(e))this.J=r?[...e]:e,this.i=e.length;else{this.J=[];let n=this;e.forEach(function(i){n.pushBack(i)})}}clear(){this.i=0,this.J.length=0}begin(){return new hl(0,this)}end(){return new hl(this.i,this)}rBegin(){return new hl(this.i-1,this,1)}rEnd(){return new hl(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J[e]}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J.splice(e,1),this.i-=1,this.i}eraseElementByValue(e){let r=0;for(let n=0;n<this.i;++n)this.J[n]!==e&&(this.J[r++]=this.J[n]);return this.i=this.J.length=r,this.i}eraseElementByIterator(e){let r=e.o;return e=e.next(),this.eraseElementByPos(r),e}pushBack(e){return this.J.push(e),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(e,r){if(e<0||e>this.i-1)throw new RangeError;this.J[e]=r}insert(e,r,n=1){if(e<0||e>this.i)throw new RangeError;return this.J.splice(e,0,...new Array(n).fill(r)),this.i+=n,this.i}find(e){for(let r=0;r<this.i;++r)if(this.J[r]===e)return new hl(r,this);return this.end()}reverse(){this.J.reverse()}unique(){let e=1;for(let r=1;r<this.i;++r)this.J[r]!==this.J[r-1]&&(this.J[e++]=this.J[r]);return this.i=this.J.length=e,this.i}sort(e){this.J.sort(e)}forEach(e){for(let r=0;r<this.i;++r)e(this.J[r],r,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}},Sbe=QR;d_.default=Sbe});var e4=g(h_=>{"use strict";Object.defineProperty(h_,"t",{value:!0});h_.default=void 0;var Rbe=Pbe(u_()),Tbe=ns(),pl=is();function Pbe(t){return t&&t.t?t:{default:t}}var ml=class t extends Tbe.ContainerIterator{constructor(e,r,n,i){super(i),this.o=e,this.h=r,this.container=n,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,pl.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,pl.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,pl.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,pl.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,pl.throwIteratorAccessError)(),this.o.l}set pointer(e){this.o===this.h&&(0,pl.throwIteratorAccessError)(),this.o.l=e}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},XR=class extends Rbe.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let r=this;e.forEach(function(n){r.pushBack(n)})}V(e){let{L:r,B:n}=e;r.B=n,n.L=r,e===this.p&&(this.p=n),e===this._&&(this._=r),this.i-=1}G(e,r){let n=r.B,i={l:e,L:r,B:n};r.B=i,n.L=i,r===this.h&&(this.p=i),n===this.h&&(this._=i),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new ml(this.p,this.h,this)}end(){return new ml(this.h,this.h,this)}rBegin(){return new ml(this._,this.h,this,1)}rEnd(){return new ml(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return r.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return this.V(r),this.i}eraseElementByValue(e){let r=this.p;for(;r!==this.h;)r.l===e&&this.V(r),r=r.B;return this.i}eraseElementByIterator(e){let r=e.o;return r===this.h&&(0,pl.throwIteratorAccessError)(),e=e.next(),this.V(r),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(this.i===0)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(this.i===0)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,r){if(e<0||e>this.i-1)throw new RangeError;let n=this.p;for(;e--;)n=n.B;n.l=r}insert(e,r,n=1){if(e<0||e>this.i)throw new RangeError;if(n<=0)return this.i;if(e===0)for(;n--;)this.pushFront(r);else if(e===this.i)for(;n--;)this.pushBack(r);else{let i=this.p;for(let o=1;o<e;++o)i=i.B;let s=i.B;for(this.i+=n;n--;)i.B={l:r,L:i},i.B.L=i,i=i.B;i.B=s,s.L=i}return this.i}find(e){let r=this.p;for(;r!==this.h;){if(r.l===e)return new ml(r,this.h,this);r=r.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,r=this._,n=0;for(;n<<1<this.i;){let i=e.l;e.l=r.l,r.l=i,e=e.B,r=r.L,n+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let r=e;for(;r.B!==this.h&&r.l===r.B.l;)r=r.B,this.i-=1;e.B=r.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let r=[];this.forEach(function(i){r.push(i)}),r.sort(e);let n=this.p;r.forEach(function(i){n.l=i,n=n.B})}merge(e){let r=this;if(this.i===0)e.forEach(function(n){r.pushBack(n)});else{let n=this.p;e.forEach(function(i){for(;n!==r.h&&n.l<=i;)n=n.B;r.G(i,n.L)})}return this.i}forEach(e){let r=this.p,n=0;for(;r!==this.h;)e(r.l,n++,this),r=r.B}[Symbol.iterator](){return function*(){if(this.i===0)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}.bind(this)()}},$be=XR;h_.default=$be});var t4=g(p_=>{"use strict";Object.defineProperty(p_,"t",{value:!0});p_.default=void 0;var Obe=Abe(u_()),Ibe=JR();function Abe(t){return t&&t.t?t:{default:t}}var gl=class t extends Ibe.RandomIterator{constructor(e,r,n){super(e,n),this.container=r}copy(){return new t(this.o,this.container,this.iteratorType)}},ZR=class extends Obe.default{constructor(e=[],r=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let n=(()=>{if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size;if(typeof e.size=="function")return e.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=r,this.P=Math.max(Math.ceil(n/this.F),1);for(let o=0;o<this.P;++o)this.A.push(new Array(this.F));let i=Math.ceil(n/this.F);this.j=this.R=(this.P>>1)-(i>>1),this.D=this.N=this.F-n%this.F>>1;let s=this;e.forEach(function(o){s.pushBack(o)})}T(){let e=[],r=Math.max(this.P>>1,1);for(let n=0;n<r;++n)e[n]=new Array(this.F);for(let n=this.j;n<this.P;++n)e[e.length]=this.A[n];for(let n=0;n<this.R;++n)e[e.length]=this.A[n];e[e.length]=[...this.A[this.R]],this.j=r,this.R=e.length-1;for(let n=0;n<r;++n)e[e.length]=new Array(this.F);this.A=e,this.P=e.length}O(e){let r=this.D+e+1,n=r%this.F,i=n-1,s=this.j+(r-n)/this.F;return n===0&&(s-=1),s%=this.P,i<0&&(i+=this.F),{curNodeBucketIndex:s,curNodePointerIndex:i}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new gl(0,this)}end(){return new gl(this.i,this)}rBegin(){return new gl(this.i-1,this,1)}rEnd(){return new gl(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(e){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=e,this.i}popBack(){if(this.i===0)return;let e=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,e}pushFront(e){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=e,this.i}popFront(){if(this.i===0)return;let e=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,e}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:r,curNodePointerIndex:n}=this.O(e);return this.A[r][n]}setElementByPos(e,r){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:n,curNodePointerIndex:i}=this.O(e);this.A[n][i]=r}insert(e,r,n=1){if(e<0||e>this.i)throw new RangeError;if(e===0)for(;n--;)this.pushFront(r);else if(e===this.i)for(;n--;)this.pushBack(r);else{let i=[];for(let s=e;s<this.i;++s)i.push(this.getElementByPos(s));this.cut(e-1);for(let s=0;s<n;++s)this.pushBack(r);for(let s=0;s<i.length;++s)this.pushBack(i[s])}return this.i}cut(e){if(e<0)return this.clear(),0;let{curNodeBucketIndex:r,curNodePointerIndex:n}=this.O(e);return this.R=r,this.N=n,this.i=e+1,this.i}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;if(e===0)this.popFront();else if(e===this.i-1)this.popBack();else{let r=[];for(let i=e+1;i<this.i;++i)r.push(this.getElementByPos(i));this.cut(e),this.popBack();let n=this;r.forEach(function(i){n.pushBack(i)})}return this.i}eraseElementByValue(e){if(this.i===0)return 0;let r=[];for(let i=0;i<this.i;++i){let s=this.getElementByPos(i);s!==e&&r.push(s)}let n=r.length;for(let i=0;i<n;++i)this.setElementByPos(i,r[i]);return this.cut(n-1)}eraseElementByIterator(e){let r=e.o;return this.eraseElementByPos(r),e=e.next(),e}find(e){for(let r=0;r<this.i;++r)if(this.getElementByPos(r)===e)return new gl(r,this);return this.end()}reverse(){let e=0,r=this.i-1;for(;e<r;){let n=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(r)),this.setElementByPos(r,n),e+=1,r-=1}}unique(){if(this.i<=1)return this.i;let e=1,r=this.getElementByPos(0);for(let n=1;n<this.i;++n){let i=this.getElementByPos(n);i!==r&&(r=i,this.setElementByPos(e++,i))}for(;this.i>e;)this.popBack();return this.i}sort(e){let r=[];for(let n=0;n<this.i;++n)r.push(this.getElementByPos(n));r.sort(e);for(let n=0;n<this.i;++n)this.setElementByPos(n,r[n])}shrinkToFit(){if(this.i===0)return;let e=[];this.forEach(function(r){e.push(r)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let r=0;r<this.P;++r)this.A.push(new Array(this.F));for(let r=0;r<e.length;++r)this.pushBack(e[r])}forEach(e){for(let r=0;r<this.i;++r)e(this.getElementByPos(r),r,this)}[Symbol.iterator](){return function*(){for(let e=0;e<this.i;++e)yield this.getElementByPos(e)}.bind(this)()}},Nbe=ZR;p_.default=Nbe});var r4=g(cc=>{"use strict";Object.defineProperty(cc,"t",{value:!0});cc.TreeNodeEnableIndex=cc.TreeNode=void 0;var m_=class{constructor(e,r){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=e,this.l=r}L(){let e=this;if(e.ee===1&&e.tt.tt===e)e=e.W;else if(e.U)for(e=e.U;e.W;)e=e.W;else{let r=e.tt;for(;r.U===e;)e=r,r=e.tt;e=r}return e}B(){let e=this;if(e.W){for(e=e.W;e.U;)e=e.U;return e}else{let r=e.tt;for(;r.W===e;)e=r,r=e.tt;return e.W!==r?r:e}}te(){let e=this.tt,r=this.W,n=r.U;return e.tt===this?e.tt=r:e.U===this?e.U=r:e.W=r,r.tt=e,r.U=this,this.tt=r,this.W=n,n&&(n.tt=this),r}se(){let e=this.tt,r=this.U,n=r.W;return e.tt===this?e.tt=r:e.U===this?e.U=r:e.W=r,r.tt=e,r.W=this,this.tt=r,this.U=n,n&&(n.tt=this),r}};cc.TreeNode=m_;var eT=class extends m_{constructor(){super(...arguments),this.rt=1}te(){let e=super.te();return this.ie(),e.ie(),e}se(){let e=super.se();return this.ie(),e.ie(),e}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};cc.TreeNodeEnableIndex=eT});var rT=g(g_=>{"use strict";Object.defineProperty(g_,"t",{value:!0});g_.default=void 0;var n4=r4(),Cbe=ns(),i4=is(),tT=class extends Cbe.Container{constructor(e=function(n,i){return n<i?-1:n>i?1:0},r=!1){super(),this.Y=void 0,this.v=e,r?(this.re=n4.TreeNodeEnableIndex,this.M=function(n,i,s){let o=this.ne(n,i,s);if(o){let a=o.tt;for(;a!==this.h;)a.rt+=1,a=a.tt;let l=this.he(o);if(l){let{parentNode:u,grandParent:c,curNode:f}=l;u.ie(),c.ie(),f.ie()}}return this.i},this.V=function(n){let i=this.fe(n);for(;i!==this.h;)i.rt-=1,i=i.tt}):(this.re=n4.TreeNode,this.M=function(n,i,s){let o=this.ne(n,i,s);return o&&this.he(o),this.i},this.V=this.fe),this.h=new this.re}X(e,r){let n=this.h;for(;e;){let i=this.v(e.u,r);if(i<0)e=e.W;else if(i>0)n=e,e=e.U;else return e}return n}Z(e,r){let n=this.h;for(;e;)this.v(e.u,r)<=0?e=e.W:(n=e,e=e.U);return n}$(e,r){let n=this.h;for(;e;){let i=this.v(e.u,r);if(i<0)n=e,e=e.W;else if(i>0)e=e.U;else return e}return n}rr(e,r){let n=this.h;for(;e;)this.v(e.u,r)<0?(n=e,e=e.W):e=e.U;return n}ue(e){for(;;){let r=e.tt;if(r===this.h)return;if(e.ee===1){e.ee=0;return}if(e===r.U){let n=r.W;if(n.ee===1)n.ee=0,r.ee=1,r===this.Y?this.Y=r.te():r.te();else if(n.W&&n.W.ee===1){n.ee=r.ee,r.ee=0,n.W.ee=0,r===this.Y?this.Y=r.te():r.te();return}else n.U&&n.U.ee===1?(n.ee=1,n.U.ee=0,n.se()):(n.ee=1,e=r)}else{let n=r.U;if(n.ee===1)n.ee=0,r.ee=1,r===this.Y?this.Y=r.se():r.se();else if(n.U&&n.U.ee===1){n.ee=r.ee,r.ee=0,n.U.ee=0,r===this.Y?this.Y=r.se():r.se();return}else n.W&&n.W.ee===1?(n.ee=1,n.W.ee=0,n.te()):(n.ee=1,e=r)}}}fe(e){if(this.i===1)return this.clear(),this.h;let r=e;for(;r.U||r.W;){if(r.W)for(r=r.W;r.U;)r=r.U;else r=r.U;[e.u,r.u]=[r.u,e.u],[e.l,r.l]=[r.l,e.l],e=r}this.h.U===r?this.h.U=r.tt:this.h.W===r&&(this.h.W=r.tt),this.ue(r);let n=r.tt;return r===n.U?n.U=void 0:n.W=void 0,this.i-=1,this.Y.ee=0,n}oe(e,r){return e===void 0?!1:this.oe(e.U,r)||r(e)?!0:this.oe(e.W,r)}he(e){for(;;){let r=e.tt;if(r.ee===0)return;let n=r.tt;if(r===n.U){let i=n.W;if(i&&i.ee===1){if(i.ee=r.ee=0,n===this.Y)return;n.ee=1,e=n;continue}else if(e===r.W){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=n),r.W=e.U,n.U=e.W,e.U=r,e.W=n,n===this.Y)this.Y=e,this.h.tt=e;else{let s=n.tt;s.U===n?s.U=e:s.W=e}return e.tt=n.tt,r.tt=e,n.tt=e,n.ee=1,{parentNode:r,grandParent:n,curNode:e}}else r.ee=0,n===this.Y?this.Y=n.se():n.se(),n.ee=1}else{let i=n.U;if(i&&i.ee===1){if(i.ee=r.ee=0,n===this.Y)return;n.ee=1,e=n;continue}else if(e===r.U){if(e.ee=0,e.U&&(e.U.tt=n),e.W&&(e.W.tt=r),n.W=e.U,r.U=e.W,e.U=n,e.W=r,n===this.Y)this.Y=e,this.h.tt=e;else{let s=n.tt;s.U===n?s.U=e:s.W=e}return e.tt=n.tt,r.tt=e,n.tt=e,n.ee=1,{parentNode:r,grandParent:n,curNode:e}}else r.ee=0,n===this.Y?this.Y=n.te():n.te(),n.ee=1}return}}ne(e,r,n){if(this.Y===void 0){this.i+=1,this.Y=new this.re(e,r),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let i,s=this.h.U,o=this.v(s.u,e);if(o===0){s.l=r;return}else if(o>0)s.U=new this.re(e,r),s.U.tt=s,i=s.U,this.h.U=i;else{let a=this.h.W,l=this.v(a.u,e);if(l===0){a.l=r;return}else if(l<0)a.W=new this.re(e,r),a.W.tt=a,i=a.W,this.h.W=i;else{if(n!==void 0){let u=n.o;if(u!==this.h){let c=this.v(u.u,e);if(c===0){u.l=r;return}else if(c>0){let f=u.L(),h=this.v(f.u,e);if(h===0){f.l=r;return}else h<0&&(i=new this.re(e,r),f.W===void 0?(f.W=i,i.tt=f):(u.U=i,i.tt=u))}}}if(i===void 0)for(i=this.Y;;){let u=this.v(i.u,e);if(u>0){if(i.U===void 0){i.U=new this.re(e,r),i.U.tt=i,i=i.U;break}i=i.U}else if(u<0){if(i.W===void 0){i.W=new this.re(e,r),i.W.tt=i,i=i.W;break}i=i.W}else{i.l=r;return}}}}return this.i+=1,i}I(e,r){for(;e;){let n=this.v(e.u,r);if(n<0)e=e.W;else if(n>0)e=e.U;else return e}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,r){let n=e.o;if(n===this.h&&(0,i4.throwIteratorAccessError)(),this.i===1)return n.u=r,!0;if(n===this.h.U)return this.v(n.B().u,r)>0?(n.u=r,!0):!1;if(n===this.h.W)return this.v(n.L().u,r)<0?(n.u=r,!0):!1;let i=n.L().u;if(this.v(i,r)>=0)return!1;let s=n.B().u;return this.v(s,r)<=0?!1:(n.u=r,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=0,n=this;return this.oe(this.Y,function(i){return e===r?(n.V(i),!0):(r+=1,!1)}),this.i}eraseElementByKey(e){if(this.i===0)return!1;let r=this.I(this.Y,e);return r===this.h?!1:(this.V(r),!0)}eraseElementByIterator(e){let r=e.o;r===this.h&&(0,i4.throwIteratorAccessError)();let n=r.W===void 0;return e.iteratorType===0?n&&e.next():(!n||r.U===void 0)&&e.next(),this.V(r),e}forEach(e){let r=0;for(let n of this)e(n,r++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r,n=0;for(let i of this){if(n===e){r=i;break}n+=1}return r}getHeight(){if(this.i===0)return 0;let e=function(r){return r?Math.max(e(r.U),e(r.W))+1:0};return e(this.Y)}},kbe=tT;g_.default=kbe});var iT=g(__=>{"use strict";Object.defineProperty(__,"t",{value:!0});__.default=void 0;var qbe=ns(),y_=is(),nT=class extends qbe.ContainerIterator{constructor(e,r,n){super(n),this.o=e,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,y_.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,y_.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,y_.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,y_.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o,r=this.h.tt;if(e===this.h)return r?r.rt-1:0;let n=0;for(e.U&&(n+=e.U.rt);e!==r;){let i=e.tt;e===i.W&&(n+=1,i.U&&(n+=i.U.rt)),e=i}return n}},xbe=nT;__.default=xbe});var o4=g(b_=>{"use strict";Object.defineProperty(b_,"t",{value:!0});b_.default=void 0;var jbe=s4(rT()),Mbe=s4(iT()),Lbe=is();function s4(t){return t&&t.t?t:{default:t}}var gi=class t extends Mbe.default{constructor(e,r,n,i){super(e,r,i),this.container=n}get pointer(){return this.o===this.h&&(0,Lbe.throwIteratorAccessError)(),this.o.u}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},sT=class extends jbe.default{constructor(e=[],r,n){super(r,n);let i=this;e.forEach(function(s){i.insert(s)})}*K(e){e!==void 0&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new gi(this.h.U||this.h,this.h,this)}end(){return new gi(this.h,this.h,this)}rBegin(){return new gi(this.h.W||this.h,this.h,this,1)}rEnd(){return new gi(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,r){return this.M(e,void 0,r)}find(e){let r=this.I(this.Y,e);return new gi(r,this.h,this)}lowerBound(e){let r=this.X(this.Y,e);return new gi(r,this.h,this)}upperBound(e){let r=this.Z(this.Y,e);return new gi(r,this.h,this)}reverseLowerBound(e){let r=this.$(this.Y,e);return new gi(r,this.h,this)}reverseUpperBound(e){let r=this.rr(this.Y,e);return new gi(r,this.h,this)}union(e){let r=this;return e.forEach(function(n){r.insert(n)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},Dbe=sT;b_.default=Dbe});var l4=g(v_=>{"use strict";Object.defineProperty(v_,"t",{value:!0});v_.default=void 0;var Fbe=a4(rT()),Ube=a4(iT()),Bbe=is();function a4(t){return t&&t.t?t:{default:t}}var yi=class t extends Ube.default{constructor(e,r,n,i){super(e,r,i),this.container=n}get pointer(){this.o===this.h&&(0,Bbe.throwIteratorAccessError)();let e=this;return new Proxy([],{get(r,n){if(n==="0")return e.o.u;if(n==="1")return e.o.l},set(r,n,i){if(n!=="1")throw new TypeError("props must be 1");return e.o.l=i,!0}})}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},oT=class extends Fbe.default{constructor(e=[],r,n){super(r,n);let i=this;e.forEach(function(s){i.setElement(s[0],s[1])})}*K(e){e!==void 0&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new yi(this.h.U||this.h,this.h,this)}end(){return new yi(this.h,this.h,this)}rBegin(){return new yi(this.h.W||this.h,this.h,this,1)}rEnd(){return new yi(this.h,this.h,this,1)}front(){if(this.i===0)return;let e=this.h.U;return[e.u,e.l]}back(){if(this.i===0)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let r=this.X(this.Y,e);return new yi(r,this.h,this)}upperBound(e){let r=this.Z(this.Y,e);return new yi(r,this.h,this)}reverseLowerBound(e){let r=this.$(this.Y,e);return new yi(r,this.h,this)}reverseUpperBound(e){let r=this.rr(this.Y,e);return new yi(r,this.h,this)}setElement(e,r,n){return this.M(e,r,n)}find(e){let r=this.I(this.Y,e);return new yi(r,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let r=this;return e.forEach(function(n){r.setElement(n[0],n[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},Vbe=oT;v_.default=Vbe});var lT=g(aT=>{"use strict";Object.defineProperty(aT,"t",{value:!0});aT.default=Hbe;function Hbe(t){let e=typeof t;return e==="object"&&t!==null||e==="function"}});var dT=g(fc=>{"use strict";Object.defineProperty(fc,"t",{value:!0});fc.HashContainerIterator=fc.HashContainer=void 0;var u4=ns(),uT=zbe(lT()),th=is();function zbe(t){return t&&t.t?t:{default:t}}var cT=class extends u4.ContainerIterator{constructor(e,r,n){super(n),this.o=e,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,th.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,th.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,th.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,th.throwIteratorAccessError)(),this.o=this.o.L,this})}};fc.HashContainerIterator=cT;var fT=class extends u4.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){let{L:r,B:n}=e;r.B=n,n.L=r,e===this.p&&(this.p=n),e===this._&&(this._=r),this.i-=1}M(e,r,n){n===void 0&&(n=(0,uT.default)(e));let i;if(n){let s=e[this.HASH_TAG];if(s!==void 0)return this.H[s].l=r,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),i={u:e,l:r,L:this._,B:this.h},this.H.push(i)}else{let s=this.g[e];if(s)return s.l=r,this.i;i={u:e,l:r,L:this._,B:this.h},this.g[e]=i}return this.i===0?(this.p=i,this.h.B=i):this._.B=i,this._=i,this.h.L=i,++this.i}I(e,r){if(r===void 0&&(r=(0,uT.default)(e)),r){let n=e[this.HASH_TAG];return n===void 0?this.h:this.H[n]}else return this.g[e]||this.h}clear(){let e=this.HASH_TAG;this.H.forEach(function(r){delete r.u[e]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,r){let n;if(r===void 0&&(r=(0,uT.default)(e)),r){let i=e[this.HASH_TAG];if(i===void 0)return!1;delete e[this.HASH_TAG],n=this.H[i],delete this.H[i]}else{if(n=this.g[e],n===void 0)return!1;delete this.g[e]}return this.V(n),!0}eraseElementByIterator(e){let r=e.o;return r===this.h&&(0,th.throwIteratorAccessError)(),this.V(r),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return this.V(r),this.i}};fc.HashContainer=fT});var f4=g(w_=>{"use strict";Object.defineProperty(w_,"t",{value:!0});w_.default=void 0;var c4=dT(),Wbe=is(),yl=class t extends c4.HashContainerIterator{constructor(e,r,n,i){super(e,r,i),this.container=n}get pointer(){return this.o===this.h&&(0,Wbe.throwIteratorAccessError)(),this.o.u}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},hT=class extends c4.HashContainer{constructor(e=[]){super();let r=this;e.forEach(function(n){r.insert(n)})}begin(){return new yl(this.p,this.h,this)}end(){return new yl(this.h,this.h,this)}rBegin(){return new yl(this._,this.h,this,1)}rEnd(){return new yl(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,r){return this.M(e,void 0,r)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return r.u}find(e,r){let n=this.I(e,r);return new yl(n,this.h,this)}forEach(e){let r=0,n=this.p;for(;n!==this.h;)e(n.u,r++,this),n=n.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}.bind(this)()}},Gbe=hT;w_.default=Gbe});var h4=g(E_=>{"use strict";Object.defineProperty(E_,"t",{value:!0});E_.default=void 0;var d4=dT(),Kbe=Jbe(lT()),Ybe=is();function Jbe(t){return t&&t.t?t:{default:t}}var _l=class t extends d4.HashContainerIterator{constructor(e,r,n,i){super(e,r,i),this.container=n}get pointer(){this.o===this.h&&(0,Ybe.throwIteratorAccessError)();let e=this;return new Proxy([],{get(r,n){if(n==="0")return e.o.u;if(n==="1")return e.o.l},set(r,n,i){if(n!=="1")throw new TypeError("props must be 1");return e.o.l=i,!0}})}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},pT=class extends d4.HashContainer{constructor(e=[]){super();let r=this;e.forEach(function(n){r.setElement(n[0],n[1])})}begin(){return new _l(this.p,this.h,this)}end(){return new _l(this.h,this.h,this)}rBegin(){return new _l(this._,this.h,this,1)}rEnd(){return new _l(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(e,r,n){return this.M(e,r,n)}getElementByKey(e,r){if(r===void 0&&(r=(0,Kbe.default)(e)),r){let i=e[this.HASH_TAG];return i!==void 0?this.H[i].l:void 0}let n=this.g[e];return n?n.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return[r.u,r.l]}find(e,r){let n=this.I(e,r);return new _l(n,this.h,this)}forEach(e){let r=0,n=this.p;for(;n!==this.h;)e([n.u,n.l],r++,this),n=n.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}.bind(this)()}},Qbe=pT;E_.default=Qbe});var p4=g(xn=>{"use strict";Object.defineProperty(xn,"t",{value:!0});Object.defineProperty(xn,"Deque",{enumerable:!0,get:function(){return nve.default}});Object.defineProperty(xn,"HashMap",{enumerable:!0,get:function(){return ave.default}});Object.defineProperty(xn,"HashSet",{enumerable:!0,get:function(){return ove.default}});Object.defineProperty(xn,"LinkList",{enumerable:!0,get:function(){return rve.default}});Object.defineProperty(xn,"OrderedMap",{enumerable:!0,get:function(){return sve.default}});Object.defineProperty(xn,"OrderedSet",{enumerable:!0,get:function(){return ive.default}});Object.defineProperty(xn,"PriorityQueue",{enumerable:!0,get:function(){return eve.default}});Object.defineProperty(xn,"Queue",{enumerable:!0,get:function(){return Zbe.default}});Object.defineProperty(xn,"Stack",{enumerable:!0,get:function(){return Xbe.default}});Object.defineProperty(xn,"Vector",{enumerable:!0,get:function(){return tve.default}});var Xbe=ss(JV()),Zbe=ss(QV()),eve=ss(XV()),tve=ss(ZV()),rve=ss(e4()),nve=ss(t4()),ive=ss(o4()),sve=ss(l4()),ove=ss(f4()),ave=ss(h4());function ss(t){return t&&t.t?t:{default:t}}});var g4=g((nZe,m4)=>{"use strict";var lve=p4().OrderedSet,os=ts()("number-allocator:trace"),uve=ts()("number-allocator:error");function Dr(t,e){this.low=t,this.high=e}Dr.prototype.equals=function(t){return this.low===t.low&&this.high===t.high};Dr.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0};function as(t,e){if(!(this instanceof as))return new as(t,e);this.min=t,this.max=e,this.ss=new lve([],(r,n)=>r.compare(n)),os("Create"),this.clear()}as.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low};as.prototype.alloc=function(){if(this.ss.size()===0)return os("alloc():empty"),null;let t=this.ss.begin(),e=t.pointer.low,r=t.pointer.high,n=e;return n+1<=r?this.ss.updateKeyByIterator(t,new Dr(e+1,r)):this.ss.eraseElementByPos(0),os("alloc():"+n),n};as.prototype.use=function(t){let e=new Dr(t,t),r=this.ss.lowerBound(e);if(!r.equals(this.ss.end())){let n=r.pointer.low,i=r.pointer.high;return r.pointer.equals(e)?(this.ss.eraseElementByIterator(r),os("use():"+t),!0):n>t?!1:n===t?(this.ss.updateKeyByIterator(r,new Dr(n+1,i)),os("use():"+t),!0):i===t?(this.ss.updateKeyByIterator(r,new Dr(n,i-1)),os("use():"+t),!0):(this.ss.updateKeyByIterator(r,new Dr(t+1,i)),this.ss.insert(new Dr(n,t-1)),os("use():"+t),!0)}return os("use():failed"),!1};as.prototype.free=function(t){if(t<this.min||t>this.max){uve("free():"+t+" is out of range");return}let e=new Dr(t,t),r=this.ss.upperBound(e);if(r.equals(this.ss.end())){if(r.equals(this.ss.begin())){this.ss.insert(e);return}r.pre();let n=r.pointer.high;r.pointer.high+1===t?this.ss.updateKeyByIterator(r,new Dr(n,t)):this.ss.insert(e)}else if(r.equals(this.ss.begin()))if(t+1===r.pointer.low){let n=r.pointer.high;this.ss.updateKeyByIterator(r,new Dr(t,n))}else this.ss.insert(e);else{let n=r.pointer.low,i=r.pointer.high;r.pre();let s=r.pointer.low;r.pointer.high+1===t?t+1===n?(this.ss.eraseElementByIterator(r),this.ss.updateKeyByIterator(r,new Dr(s,i))):this.ss.updateKeyByIterator(r,new Dr(s,t)):t+1===n?(this.ss.eraseElementByIterator(r.next()),this.ss.insert(new Dr(t,i))):this.ss.insert(e)}os("free():"+t)};as.prototype.clear=function(){os("clear()"),this.ss.clear(),this.ss.insert(new Dr(this.min,this.max))};as.prototype.intervalCount=function(){return this.ss.size()};as.prototype.dump=function(){console.log("length:"+this.ss.size());for(let t of this.ss)console.log(t)};m4.exports=as});var mT=g((iZe,y4)=>{"use strict";var cve=g4();y4.exports.NumberAllocator=cve});var _4=g(yT=>{"use strict";Object.defineProperty(yT,"__esModule",{value:!0});var fve=YV(),dve=mT(),gT=class{constructor(e){e>0&&(this.aliasToTopic=new fve.LRUCache({max:e}),this.topicToAlias={},this.numberAllocator=new dve.NumberAllocator(1,e),this.max=e,this.length=0)}put(e,r){if(r===0||r>this.max)return!1;let n=this.aliasToTopic.get(r);return n&&delete this.topicToAlias[n],this.aliasToTopic.set(r,e),this.topicToAlias[e]=r,this.numberAllocator.use(r),this.length=this.aliasToTopic.size,!0}getTopicByAlias(e){return this.aliasToTopic.get(e)}getAliasByTopic(e){let r=this.topicToAlias[e];return typeof r<"u"&&this.aliasToTopic.get(r),r}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){let e=this.numberAllocator.firstVacant();return e||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};yT.default=gT});var b4=g(rh=>{"use strict";var hve=rh&&rh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rh,"__esModule",{value:!0});var pve=eh(),mve=hve(_4()),gve=dl(),yve=(t,e)=>{t.log("_handleConnack");let{options:r}=t,i=r.protocolVersion===5?e.reasonCode:e.returnCode;if(clearTimeout(t.connackTimer),delete t.topicAliasSend,e.properties){if(e.properties.topicAliasMaximum){if(e.properties.topicAliasMaximum>65535){t.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}e.properties.topicAliasMaximum>0&&(t.topicAliasSend=new mve.default(e.properties.topicAliasMaximum))}e.properties.serverKeepAlive&&r.keepalive&&(r.keepalive=e.properties.serverKeepAlive),e.properties.maximumPacketSize&&(r.properties||(r.properties={}),r.properties.maximumPacketSize=e.properties.maximumPacketSize)}if(i===0)t.reconnecting=!1,t._onConnect(e);else if(i>0){let s=new gve.ErrorWithReasonCode(`Connection refused: ${pve.ReasonCodes[i]}`,i);t.emit("error",s),t.options.reconnectOnConnackError&&t._cleanUp(!0)}};rh.default=yve});var v4=g(_T=>{"use strict";Object.defineProperty(_T,"__esModule",{value:!0});var _ve=(t,e,r)=>{t.log("handling pubrel packet");let n=typeof r<"u"?r:t.noop,{messageId:i}=e,s={cmd:"pubcomp",messageId:i};t.incomingStore.get(e,(o,a)=>{o?t._sendPacket(s,n):(t.emit("message",a.topic,a.payload,a),t.handleMessage(a,l=>{if(l)return n(l);t.incomingStore.del(a,t.noop),t._sendPacket(s,n)}))})};_T.default=_ve});var w4=g(nh=>{"use strict";var ih=nh&&nh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nh,"__esModule",{value:!0});var bve=ih(FV()),vve=ih(HV()),wve=ih(b4()),Eve=ih(eh()),Sve=ih(v4()),Rve=(t,e,r)=>{let{options:n}=t;if(n.protocolVersion===5&&n.properties&&n.properties.maximumPacketSize&&n.properties.maximumPacketSize<e.length)return t.emit("error",new Error(`exceeding packets size ${e.cmd}`)),t.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),t;switch(t.log("_handlePacket :: emitting packetreceive"),t.emit("packetreceive",e),e.cmd){case"publish":(0,bve.default)(t,e,r);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":t.reschedulePing(),(0,Eve.default)(t,e),r();break;case"pubrel":t.reschedulePing(),(0,Sve.default)(t,e,r);break;case"connack":(0,wve.default)(t,e),r();break;case"auth":t.reschedulePing(),(0,vve.default)(t,e),r();break;case"pingresp":t.log("_handlePacket :: received pingresp"),t.reschedulePing(!0),r();break;case"disconnect":t.emit("disconnect",e),r();break;default:t.log("_handlePacket :: unknown command"),r();break}};nh.default=Rve});var E4=g(dc=>{"use strict";var Tve=dc&&dc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dc,"__esModule",{value:!0});dc.TypedEventEmitter=void 0;var Pve=Tve(A("events")),$ve=dl(),S_=class{};dc.TypedEventEmitter=S_;(0,$ve.applyMixin)(S_,Pve.default)});var sh=g(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.isReactNativeBrowser=bl.isWebWorker=void 0;var Ove=()=>{var t;return typeof window<"u"?typeof navigator<"u"&&((t=navigator.userAgent)===null||t===void 0?void 0:t.toLowerCase().indexOf(" electron/"))>-1&&(process!=null&&process.versions)?!Object.prototype.hasOwnProperty.call(process.versions,"electron"):typeof window.document<"u":!1},S4=()=>{var t,e;return!!(typeof self=="object"&&(!((e=(t=self?.constructor)===null||t===void 0?void 0:t.name)===null||e===void 0)&&e.includes("WorkerGlobalScope")))},R4=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ive=Ove()||S4()||R4();bl.isWebWorker=S4();bl.isReactNativeBrowser=R4();bl.default=Ive});var T4=g(R_=>{"use strict";Object.defineProperty(R_,"__esModule",{value:!0});R_.createAddUniqueNumber=void 0;var Ave=t=>e=>{let r=t(e);return e.add(r),r};R_.createAddUniqueNumber=Ave});var P4=g(T_=>{"use strict";Object.defineProperty(T_,"__esModule",{value:!0});T_.createCache=void 0;var Nve=t=>(e,r)=>(t.set(e,r),r);T_.createCache=Nve});var A4=g(P_=>{"use strict";Object.defineProperty(P_,"__esModule",{value:!0});P_.createGenerateUniqueNumber=void 0;var $4=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,I4=536870912,O4=I4*2,Cve=(t,e)=>r=>{let n=e.get(r),i=n===void 0?r.size:n<O4?n+1:0;if(!r.has(i))return t(r,i);if(r.size<I4){for(;r.has(i);)i=Math.floor(Math.random()*O4);return t(r,i)}if(r.size>$4)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*$4);return t(r,i)};P_.createGenerateUniqueNumber=Cve});var C4=g(N4=>{"use strict";Object.defineProperty(N4,"__esModule",{value:!0})});var q4=g(k4=>{"use strict";Object.defineProperty(k4,"__esModule",{value:!0})});var j4=g(x4=>{"use strict";Object.defineProperty(x4,"__esModule",{value:!0})});var L4=g(M4=>{"use strict";Object.defineProperty(M4,"__esModule",{value:!0})});var F4=g(D4=>{"use strict";Object.defineProperty(D4,"__esModule",{value:!0})});var B4=g(U4=>{"use strict";Object.defineProperty(U4,"__esModule",{value:!0})});var V4=g(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});var bT=C4();Object.keys(bT).forEach(function(t){t==="default"||t==="__esModule"||t in Ft&&Ft[t]===bT[t]||Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return bT[t]}})});var vT=q4();Object.keys(vT).forEach(function(t){t==="default"||t==="__esModule"||t in Ft&&Ft[t]===vT[t]||Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return vT[t]}})});var wT=j4();Object.keys(wT).forEach(function(t){t==="default"||t==="__esModule"||t in Ft&&Ft[t]===wT[t]||Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return wT[t]}})});var ET=L4();Object.keys(ET).forEach(function(t){t==="default"||t==="__esModule"||t in Ft&&Ft[t]===ET[t]||Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return ET[t]}})});var ST=F4();Object.keys(ST).forEach(function(t){t==="default"||t==="__esModule"||t in Ft&&Ft[t]===ST[t]||Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return ST[t]}})});var RT=B4();Object.keys(RT).forEach(function(t){t==="default"||t==="__esModule"||t in Ft&&Ft[t]===RT[t]||Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return RT[t]}})})});var z4=g(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});var kve={addUniqueNumber:!0,generateUniqueNumber:!0};Ms.generateUniqueNumber=Ms.addUniqueNumber=void 0;var qve=T4(),xve=P4(),jve=A4(),TT=V4();Object.keys(TT).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(kve,t)||t in Ms&&Ms[t]===TT[t]||Object.defineProperty(Ms,t,{enumerable:!0,get:function(){return TT[t]}})});var H4=new WeakMap,Mve=(0,xve.createCache)(H4),Lve=Ms.generateUniqueNumber=(0,jve.createGenerateUniqueNumber)(Mve,H4),wZe=Ms.addUniqueNumber=(0,qve.createAddUniqueNumber)(Lve)});var G4=g(($_,W4)=>{"use strict";(function(t,e){typeof $_=="object"&&typeof W4<"u"?e($_,z4()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.workerTimersBroker={},t.fastUniqueNumbers))})($_,function(t,e){"use strict";var r=function(o){return o.method!==void 0&&o.method==="call"},n=function(o){return o.error===null&&typeof o.id=="number"},i=function(o){var a=new Map([[0,function(){}]]),l=new Map([[0,function(){}]]),u=new Map,c=new Worker(o);c.addEventListener("message",function(m){var y=m.data;if(r(y)){var _=y.params,w=_.timerId,v=_.timerType;if(v==="interval"){var b=a.get(w);if(typeof b=="number"){var E=u.get(b);if(E===void 0||E.timerId!==w||E.timerType!==v)throw new Error("The timer is in an undefined state.")}else if(typeof b<"u")b();else throw new Error("The timer is in an undefined state.")}else if(v==="timeout"){var R=l.get(w);if(typeof R=="number"){var S=u.get(R);if(S===void 0||S.timerId!==w||S.timerType!==v)throw new Error("The timer is in an undefined state.")}else if(typeof R<"u")R(),l.delete(w);else throw new Error("The timer is in an undefined state.")}}else if(n(y)){var P=y.id,T=u.get(P);if(T===void 0)throw new Error("The timer is in an undefined state.");var O=T.timerId,j=T.timerType;u.delete(P),j==="interval"?a.delete(O):l.delete(O)}else{var N=y.error.message;throw new Error(N)}});var f=function(y){var _=e.generateUniqueNumber(u);u.set(_,{timerId:y,timerType:"interval"}),a.set(y,_),c.postMessage({id:_,method:"clear",params:{timerId:y,timerType:"interval"}})},h=function(y){var _=e.generateUniqueNumber(u);u.set(_,{timerId:y,timerType:"timeout"}),l.set(y,_),c.postMessage({id:_,method:"clear",params:{timerId:y,timerType:"timeout"}})},d=function(y){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=e.generateUniqueNumber(a);return a.set(w,function(){y(),typeof a.get(w)=="function"&&c.postMessage({id:null,method:"set",params:{delay:_,now:performance.now(),timerId:w,timerType:"interval"}})}),c.postMessage({id:null,method:"set",params:{delay:_,now:performance.now(),timerId:w,timerType:"interval"}}),w},p=function(y){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=e.generateUniqueNumber(l);return l.set(w,y),c.postMessage({id:null,method:"set",params:{delay:_,now:performance.now(),timerId:w,timerType:"timeout"}}),w};return{clearInterval:f,clearTimeout:h,setInterval:d,setTimeout:p}};t.load=i})});var Y4=g((O_,K4)=>{"use strict";(function(t,e){typeof O_=="object"&&typeof K4<"u"?e(O_,G4()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.workerTimers={},t.workerTimersBroker))})(O_,function(t,e){"use strict";var r=function(c,f){var h=null;return function(){if(h!==null)return h;var d=new Blob([f],{type:"application/javascript; charset=utf-8"}),p=URL.createObjectURL(d);return h=c(p),setTimeout(function(){return URL.revokeObjectURL(p)}),h}},n=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=r(e.load,n),s=function(c){return i().clearInterval(c)},o=function(c){return i().clearTimeout(c)},a=function(){var c;return(c=i()).setInterval.apply(c,arguments)},l=function(){var c;return(c=i()).setTimeout.apply(c,arguments)};t.clearInterval=s,t.clearTimeout=o,t.setInterval=a,t.setTimeout=l})});var Z4=g(Ls=>{"use strict";var Dve=Ls&&Ls.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fve=Ls&&Ls.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Uve=Ls&&Ls.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Dve(e,t,r);return Fve(e,t),e};Object.defineProperty(Ls,"__esModule",{value:!0});var PT=Uve(sh()),J4=Y4(),Q4={set:J4.setInterval,clear:J4.clearInterval},X4={set:(t,e)=>setInterval(t,e),clear:t=>clearInterval(t)},Bve=t=>{switch(t){case"native":return X4;case"worker":return Q4;case"auto":default:return PT.default&&!PT.isWebWorker&&!PT.isReactNativeBrowser?Q4:X4}};Ls.default=Bve});var OT=g(oh=>{"use strict";var Vve=oh&&oh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oh,"__esModule",{value:!0});var Hve=Vve(Z4()),$T=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(e,r){this.destroyed=!1,this.client=e,this.timer=typeof r=="object"&&"set"in r&&"clear"in r?r:(0,Hve.default)(r),this.setKeepalive(e.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(e){if(e*=1e3,isNaN(e)||e<=0||e>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${e}`);this._keepalive=e,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${e}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let e=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+e,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};oh.default=$T});var N_=g(_i=>{"use strict";var zve=_i&&_i.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wve=_i&&_i.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i3=_i&&_i.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zve(e,t,r);return Wve(e,t),e},Ko=_i&&_i.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_i,"__esModule",{value:!0});var Gve=Ko(QF()),IT=Ko(kV()),Kve=Ko(CR()),Yve=Uo(),e3=Ko(jV()),t3=i3(LV()),Jve=Ko(ts()),hc=Ko(xR()),Qve=Ko(w4()),I_=dl(),Xve=E4(),Zve=Ko(OT()),r3=i3(sh()),AT=globalThis.setImmediate||((...t)=>{let e=t.shift();(0,I_.nextTick)(()=>{e(...t)})}),n3={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},A_=class t extends Xve.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(e,r){super(),this.options=r||{};for(let n in n3)typeof this.options[n]>"u"?this.options[n]=n3[n]:this.options[n]=r[n];this.log=this.options.log||(0,Jve.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",t.VERSION),r3.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",r3.default?"browser":"node"),this.log("MqttClient :: options.protocol",r.protocol),this.log("MqttClient :: options.protocolVersion",r.protocolVersion),this.log("MqttClient :: options.username",r.username),this.log("MqttClient :: options.keepalive",r.keepalive),this.log("MqttClient :: options.reconnectPeriod",r.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",r.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",r.properties?r.properties.topicAliasMaximum:void 0),this.options.clientId=typeof r.clientId=="string"?r.clientId:t.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=r.protocolVersion===5&&r.customHandleAcks?r.customHandleAcks:(...n)=>{n[3](null,0)},this.options.writeCache||(IT.default.writeToStream.cacheNumbers=!1),this.streamBuilder=e,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new Kve.default:this.options.messageIdProvider,this.outgoingStore=r.outgoingStore||new hc.default,this.incomingStore=r.incomingStore||new hc.default,this.queueQoSZero=r.queueQoSZero===void 0?!0:r.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,r.properties&&r.properties.topicAliasMaximum>0&&(r.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new Gve.default(r.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:n}=this,i=()=>{let s=n.shift();this.log("deliver :: entry %o",s);let o=null;if(!s){this._resubscribe();return}o=s.packet,this.log("deliver :: call _sendPacket for %o",o);let a=!0;o.messageId&&o.messageId!==0&&(this.messageIdProvider.register(o.messageId)||(a=!1)),a?this._sendPacket(o,l=>{s.cb&&s.cb(l),i()}):(this.log("messageId: %d has already used. The message is skipped and removed.",o.messageId),i())};this.log("connect :: sending queued packets"),i()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(e,r){r()}handleMessage(e,r){r()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var e;let r=new Yve.Writable,n=IT.default.parser(this.options),i=null,s=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new hc.default,this.outgoingStore=this.options.outgoingStore||new hc.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",c=>{this.log("parser :: on packet push to packets array."),s.push(c)});let o=()=>{this.log("work :: getting next packet in queue");let c=s.shift();if(c)this.log("work :: packet pulled from queue"),(0,Qve.default)(this,c,a);else{this.log("work :: no packets in queue");let f=i;i=null,this.log("work :: done flag is %s",!!f),f&&f()}},a=()=>{if(s.length)(0,I_.nextTick)(o);else{let c=i;i=null,c()}};r._write=(c,f,h)=>{i=h,this.log("writable stream :: parsing buffer"),n.parse(c),o()};let l=c=>{this.log("streamErrorHandler :: error",c.message),c.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",c)):this.noop(c)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(r),this.stream.on("error",l),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let u={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(u.will=Object.assign(Object.assign({},this.options.will),{payload:(e=this.options.will)===null||e===void 0?void 0:e.payload})),this.topicAliasRecv&&(u.properties||(u.properties={}),this.topicAliasRecv&&(u.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(u),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let c=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(c)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(e,r,n,i){this.log("publish :: message `%s` to topic `%s`",r,e);let{options:s}=this;typeof n=="function"&&(i=n,n=null),n=n||{},n=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),n);let{qos:a,retain:l,dup:u,properties:c,cbStorePut:f}=n;if(this._checkDisconnecting(i))return this;let h=()=>{let d=0;if((a===1||a===2)&&(d=this._nextId(),d===null))return this.log("No messageId left"),!1;let p={cmd:"publish",topic:e,payload:r,qos:a,retain:l,messageId:d,dup:u};switch(s.protocolVersion===5&&(p.properties=c),this.log("publish :: qos",a),a){case 1:case 2:this.outgoing[p.messageId]={volatile:!1,cb:i||this.noop},this.log("MqttClient:publish: packet cmd: %s",p.cmd),this._sendPacket(p,void 0,f);break;default:this.log("MqttClient:publish: packet cmd: %s",p.cmd),this._sendPacket(p,i,f);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!h())&&this._storeProcessingQueue.push({invoke:h,cbStorePut:n.cbStorePut,callback:i}),this}publishAsync(e,r,n){return new Promise((i,s)=>{this.publish(e,r,n,(o,a)=>{o?s(o):i(a)})})}subscribe(e,r,n){let i=this.options.protocolVersion;typeof r=="function"&&(n=r),n=n||this.noop;let s=!1,o=[];typeof e=="string"?(e=[e],o=e):Array.isArray(e)?o=e:typeof e=="object"&&(s=e.resubscribe,delete e.resubscribe,o=Object.keys(e));let a=t3.validateTopics(o);if(a!==null)return AT(n,new Error(`Invalid topic ${a}`)),this;if(this._checkDisconnecting(n))return this.log("subscribe: discconecting true"),this;let l={qos:0};i===5&&(l.nl=!1,l.rap=!1,l.rh=0),r=Object.assign(Object.assign({},l),r);let u=r.properties,c=[],f=(d,p)=>{if(p=p||r,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,d)||this._resubscribeTopics[d].qos<p.qos||s){let m={topic:d,qos:p.qos};i===5&&(m.nl=p.nl,m.rap=p.rap,m.rh=p.rh,m.properties=u),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",m.topic,m.qos),c.push(m)}};if(Array.isArray(e)?e.forEach(d=>{this.log("subscribe: array topic %s",d),f(d)}):Object.keys(e).forEach(d=>{this.log("subscribe: object topic %s, %o",d,e[d]),f(d,e[d])}),!c.length)return n(null,[]),this;let h=()=>{let d=this._nextId();if(d===null)return this.log("No messageId left"),!1;let p={cmd:"subscribe",subscriptions:c,messageId:d};if(u&&(p.properties=u),this.options.resubscribe){this.log("subscribe :: resubscribe true");let m=[];c.forEach(y=>{if(this.options.reconnectPeriod>0){let _={qos:y.qos};i===5&&(_.nl=y.nl||!1,_.rap=y.rap||!1,_.rh=y.rh||0,_.properties=y.properties),this._resubscribeTopics[y.topic]=_,m.push(y.topic)}}),this.messageIdToTopic[p.messageId]=m}return this.outgoing[p.messageId]={volatile:!0,cb(m,y){if(!m){let{granted:_}=y;for(let w=0;w<_.length;w+=1)c[w].qos=_[w]}n(m,c,y)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(p),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!h())&&this._storeProcessingQueue.push({invoke:h,callback:n}),this}subscribeAsync(e,r){return new Promise((n,i)=>{this.subscribe(e,r,(s,o)=>{s?i(s):n(o)})})}unsubscribe(e,r,n){typeof e=="string"&&(e=[e]),typeof r=="function"&&(n=r),n=n||this.noop;let i=t3.validateTopics(e);if(i!==null)return AT(n,new Error(`Invalid topic ${i}`)),this;if(this._checkDisconnecting(n))return this;let s=()=>{let o=this._nextId();if(o===null)return this.log("No messageId left"),!1;let a={cmd:"unsubscribe",messageId:o,unsubscriptions:[]};return typeof e=="string"?a.unsubscriptions=[e]:Array.isArray(e)&&(a.unsubscriptions=e),this.options.resubscribe&&a.unsubscriptions.forEach(l=>{delete this._resubscribeTopics[l]}),typeof r=="object"&&r.properties&&(a.properties=r.properties),this.outgoing[a.messageId]={volatile:!0,cb:n},this.log("unsubscribe: call _sendPacket"),this._sendPacket(a),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!s())&&this._storeProcessingQueue.push({invoke:s,callback:n}),this}unsubscribeAsync(e,r){return new Promise((n,i)=>{this.unsubscribe(e,r,(s,o)=>{s?i(s):n(o)})})}end(e,r,n){this.log("end :: (%s)",this.options.clientId),(e==null||typeof e!="boolean")&&(n=n||r,r=e,e=!1),typeof r!="object"&&(n=n||r,r=null),this.log("end :: cb? %s",!!n),(!n||typeof n!="function")&&(n=this.noop);let i=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(o=>{this.outgoingStore.close(a=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),n){let l=o||a;this.log("end :: closeStores: invoking callback with args"),n(l)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},s=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,e),this._cleanUp(e,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,I_.nextTick)(i)},r)};return this.disconnecting?(n(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,s,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),s()),this)}endAsync(e,r){return new Promise((n,i)=>{this.end(e,r,s=>{s?i(s):n()})})}removeOutgoingMessage(e){if(this.outgoing[e]){let{cb:r}=this.outgoing[e];this._removeOutgoingAndStoreMessage(e,()=>{r(new Error("Message removed"))})}return this}reconnect(e){this.log("client reconnect");let r=()=>{e?(this.options.incomingStore=e.incomingStore,this.options.outgoingStore=e.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new hc.default,this.outgoingStore=this.options.outgoingStore||new hc.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(e=>{this.outgoing[e].volatile&&typeof this.outgoing[e].cb=="function"&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(e=>{typeof this.outgoing[e].cb=="function"&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_removeTopicAliasAndRecoverTopicName(e){let r;e.properties&&(r=e.properties.topicAlias);let n=e.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",r,n),n.length===0){if(typeof r>"u")return new Error("Unregistered Topic Alias");if(n=this.topicAliasSend.getTopicByAlias(r),typeof n>"u")return new Error("Unregistered Topic Alias");e.topic=n}r&&delete e.properties.topicAlias}_checkDisconnecting(e){return this.disconnecting&&(e&&e!==this.noop?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(e,r,n={}){if(r&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",r)),this.log("_cleanUp :: forced? %s",e),e)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let i=Object.assign({cmd:"disconnect"},n);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(i,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),AT(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),r&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",r),r())}_storeAndSend(e,r,n){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let i=e,s;if(i.cmd==="publish"&&(i=(0,e3.default)(e),s=this._removeTopicAliasAndRecoverTopicName(i),s))return r&&r(s);this.outgoingStore.put(i,o=>{if(o)return r&&r(o);n(),this._writePacket(e,r)})}_applyTopicAlias(e){if(this.options.protocolVersion===5&&e.cmd==="publish"){let r;e.properties&&(r=e.properties.topicAlias);let n=e.topic.toString();if(this.topicAliasSend)if(r){if(n.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",n,r),!this.topicAliasSend.put(n,r)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,r),new Error("Sending Topic Alias out of range")}else n.length!==0&&(this.options.autoAssignTopicAlias?(r=this.topicAliasSend.getAliasByTopic(n),r?(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:r}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",n,r)):(r=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(n,r),e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:r}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",n,r))):this.options.autoUseTopicAlias&&(r=this.topicAliasSend.getAliasByTopic(n),r&&(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:r}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",n,r))));else if(r)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,r),new Error("Sending Topic Alias out of range")}}_noop(e){this.log("noop ::",e)}_writePacket(e,r){this.log("_writePacket :: packet: %O",e),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",e),this.log("_writePacket :: writing to stream");let n=IT.default.writeToStream(e,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",n),!n&&r&&r!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",r)):r&&(this.log("_writePacket :: invoking cb"),r())}_sendPacket(e,r,n,i){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),n=n||this.noop,r=r||this.noop;let s=this._applyTopicAlias(e);if(s){r(s);return}if(!this.connected){if(e.cmd==="auth"){this._writePacket(e,r);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(e,r,n);return}if(i){this._writePacket(e,r);return}switch(e.cmd){case"publish":break;case"pubrel":this._storeAndSend(e,r,n);return;default:this._writePacket(e,r);return}switch(e.qos){case 2:case 1:this._storeAndSend(e,r,n);break;case 0:default:this._writePacket(e,r);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(e,r,n){this.log("_storePacket :: packet: %o",e),this.log("_storePacket :: cb? %s",!!r),n=n||this.noop;let i=e;if(i.cmd==="publish"){i=(0,e3.default)(e);let o=this._removeTopicAliasAndRecoverTopicName(i);if(o)return r&&r(o)}let s=i.qos||0;s===0&&this.queueQoSZero||i.cmd!=="publish"?this.queue.push({packet:i,cb:r}):s>0?(r=this.outgoing[i.messageId]?this.outgoing[i.messageId].cb:null,this.outgoingStore.put(i,o=>{if(o)return r&&r(o);n()})):r&&r(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new Zve.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(e=!1){this.keepaliveManager&&this.options.keepalive&&(e||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let r=0;r<e.length;r++){let n={};n[e[r]]=this._resubscribeTopics[e[r]],n.resubscribe=!0,this.subscribe(n,{properties:n[e[r]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(e){if(this.disconnected){this.emit("connect",e);return}this.connackPacket=e,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let r=()=>{let n=this.outgoingStore.createStream(),i=()=>{n.destroy(),n=null,this._flushStoreProcessingQueue(),s()},s=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",i),n.on("error",a=>{s(),this._flushStoreProcessingQueue(),this.removeListener("close",i),this.emit("error",a)});let o=()=>{if(!n)return;let a=n.read(1),l;if(!a){n.once("readable",o);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[a.messageId]){o();return}!this.disconnecting&&!this.reconnectTimer?(l=this.outgoing[a.messageId]?this.outgoing[a.messageId].cb:null,this.outgoing[a.messageId]={volatile:!1,cb(u,c){l&&l(u,c),o()}},this._packetIdsDuringStoreProcessing[a.messageId]=!0,this.messageIdProvider.register(a.messageId)?this._sendPacket(a,void 0,void 0,!0):this.log("messageId: %d has already used.",a.messageId)):n.destroy&&n.destroy()};n.on("end",()=>{let a=!0;for(let l in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[l]){a=!1;break}this.removeListener("close",i),a?(s(),this._invokeAllStoreProcessingQueue(),this.emit("connect",e)):r()}),o()};r()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(e,r){delete this.outgoing[e],this.outgoingStore.del({messageId:e},(n,i)=>{r(n,i),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue()})}};A_.VERSION=I_.MQTTJS_VERSION;_i.default=A_});var s3=g(CT=>{"use strict";Object.defineProperty(CT,"__esModule",{value:!0});var ewe=mT(),NT=class{constructor(){this.numberAllocator=new ewe.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(e){return this.numberAllocator.use(e)}deallocate(e){this.numberAllocator.free(e)}clear(){this.numberAllocator.clear()}};CT.default=NT});var Ds=g(($Ze,l3)=>{"use strict";var o3=["nodebuffer","arraybuffer","fragments"],a3=typeof Blob<"u";a3&&o3.push("blob");l3.exports={BINARY_TYPES:o3,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:a3,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var ah=g((OZe,C_)=>{"use strict";var{EMPTY_BUFFER:twe}=Ds(),kT=Buffer[Symbol.species];function rwe(t,e){if(t.length===0)return twe;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return n<e?new kT(r.buffer,r.byteOffset,n):r}function u3(t,e,r,n,i){for(let s=0;s<i;s++)r[n+s]=t[s]^e[s&3]}function c3(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function nwe(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function qT(t){if(qT.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new kT(t):ArrayBuffer.isView(t)?e=new kT(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),qT.readOnly=!1),e}C_.exports={concat:rwe,mask:u3,toArrayBuffer:nwe,toBuffer:qT,unmask:c3};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=A("bufferutil");C_.exports.mask=function(e,r,n,i,s){s<48?u3(e,r,n,i,s):t.mask(e,r,n,i,s)},C_.exports.unmask=function(e,r){e.length<32?c3(e,r):t.unmask(e,r)}}catch{}});var h3=g((IZe,d3)=>{"use strict";var f3=Symbol("kDone"),xT=Symbol("kRun"),jT=class{constructor(e){this[f3]=()=>{this.pending--,this[xT]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[xT]()}[xT](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[f3])}}};d3.exports=jT});var ch=g((AZe,y3)=>{"use strict";var lh=A("zlib"),p3=ah(),iwe=h3(),{kStatusCode:m3}=Ds(),swe=Buffer[Symbol.species],owe=Buffer.from([0,0,255,255]),x_=Symbol("permessage-deflate"),Fs=Symbol("total-length"),uh=Symbol("callback"),Yo=Symbol("buffers"),q_=Symbol("error"),k_,MT=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!k_){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;k_=new iwe(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[uh];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){k_.add(i=>{this._decompress(e,r,(s,o)=>{i(),n(s,o)})})}compress(e,r,n){k_.add(i=>{this._compress(e,r,(s,o)=>{i(),n(s,o)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?lh.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=lh.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[x_]=this,this._inflate[Fs]=0,this._inflate[Yo]=[],this._inflate.on("error",lwe),this._inflate.on("data",g3)}this._inflate[uh]=n,this._inflate.write(e),r&&this._inflate.write(owe),this._inflate.flush(()=>{let s=this._inflate[q_];if(s){this._inflate.close(),this._inflate=null,n(s);return}let o=p3.concat(this._inflate[Yo],this._inflate[Fs]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Fs]=0,this._inflate[Yo]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?lh.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=lh.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Fs]=0,this._deflate[Yo]=[],this._deflate.on("data",awe)}this._deflate[uh]=n,this._deflate.write(e),this._deflate.flush(lh.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=p3.concat(this._deflate[Yo],this._deflate[Fs]);r&&(s=new swe(s.buffer,s.byteOffset,s.length-4)),this._deflate[uh]=null,this._deflate[Fs]=0,this._deflate[Yo]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}};y3.exports=MT;function awe(t){this[Yo].push(t),this[Fs]+=t.length}function g3(t){if(this[Fs]+=t.length,this[x_]._maxPayload<1||this[Fs]<=this[x_]._maxPayload){this[Yo].push(t);return}this[q_]=new RangeError("Max payload size exceeded"),this[q_].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[q_][m3]=1009,this.removeListener("data",g3),this.reset()}function lwe(t){this[x_]._inflate=null,t[m3]=1007,this[uh](t)}});var pc=g((NZe,j_)=>{"use strict";var{isUtf8:_3}=A("buffer"),{hasBlob:uwe}=Ds(),cwe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function fwe(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function LT(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function dwe(t){return uwe&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}j_.exports={isBlob:dwe,isValidStatusCode:fwe,isValidUTF8:LT,tokenChars:cwe};if(_3)j_.exports.isValidUTF8=function(t){return t.length<24?LT(t):_3(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=A("utf-8-validate");j_.exports.isValidUTF8=function(e){return e.length<32?LT(e):t(e)}}catch{}});var VT=g((CZe,T3)=>{"use strict";var{Writable:hwe}=A("stream"),b3=ch(),{BINARY_TYPES:pwe,EMPTY_BUFFER:v3,kStatusCode:mwe,kWebSocket:gwe}=Ds(),{concat:DT,toArrayBuffer:ywe,unmask:_we}=ah(),{isValidStatusCode:bwe,isValidUTF8:w3}=pc(),M_=Buffer[Symbol.species],jn=0,E3=1,S3=2,R3=3,FT=4,UT=5,L_=6,BT=class extends hwe{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||pwe[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[gwe]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=jn}_write(e,r,n){if(this._opcode===8&&this._state==jn)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new M_(n.buffer,n.byteOffset+e,n.length-e),new M_(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new M_(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case jn:this.getInfo(e);break;case E3:this.getPayloadLength16(e);break;case S3:this.getPayloadLength64(e);break;case R3:this.getMask();break;case FT:this.getData(e);break;case UT:case L_:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if(r[0]&48){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let n=(r[0]&64)===64;if(n&&!this._extensions[b3.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=E3:this._payloadLength===127?this._state=S3:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=R3:this._state=FT}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=FT}getData(e){let r=v3;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&_we(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=UT,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[b3.extensionName].decompress(e,this._fin,(i,s)=>{if(i)return r(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(s)}this.dataMessage(r),this._state===jn&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=jn;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=DT(n,r):this._binaryType==="arraybuffer"?i=ywe(DT(n,r)):this._binaryType==="blob"?i=new Blob(n):i=n,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=jn):(this._state=L_,setImmediate(()=>{this.emit("message",i,!0),this._state=jn,this.startLoop(e)}))}else{let i=DT(n,r);if(!this._skipUTF8Validation&&!w3(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._state===UT||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=jn):(this._state=L_,setImmediate(()=>{this.emit("message",i,!1),this._state=jn,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,v3),this.end();else{let n=e.readUInt16BE(0);if(!bwe(n)){let s=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(s);return}let i=new M_(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!w3(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(s);return}this._loop=!1,this.emit("conclude",n,i),this.end()}this._state=jn;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=jn):(this._state=L_,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=jn,this.startLoop(r)}))}createError(e,r,n,i,s){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=s,o[mwe]=i,o}};T3.exports=BT});var WT=g((qZe,O3)=>{"use strict";var{Duplex:kZe}=A("stream"),{randomFillSync:vwe}=A("crypto"),P3=ch(),{EMPTY_BUFFER:wwe,kWebSocket:Ewe,NOOP:Swe}=Ds(),{isBlob:mc,isValidStatusCode:Rwe}=pc(),{mask:$3,toBuffer:vl}=ah(),Mn=Symbol("kByteLength"),Twe=Buffer.alloc(4),D_=8*1024,wl,gc=D_,bi=0,Pwe=1,$we=2,HT=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=bi,this.onerror=Swe,this[Ewe]=void 0}static frame(e,r){let n,i=!1,s=2,o=!1;r.mask&&(n=r.maskBuffer||Twe,r.generateMask?r.generateMask(n):(gc===D_&&(wl===void 0&&(wl=Buffer.alloc(D_)),vwe(wl,0,D_),gc=0),n[0]=wl[gc++],n[1]=wl[gc++],n[2]=wl[gc++],n[3]=wl[gc++]),o=(n[0]|n[1]|n[2]|n[3])===0,s=6);let a;typeof e=="string"?(!r.mask||o)&&r[Mn]!==void 0?a=r[Mn]:(e=Buffer.from(e),a=e.length):(a=e.length,i=r.mask&&r.readOnly&&!o);let l=a;a>=65536?(s+=8,l=127):a>125&&(s+=2,l=126);let u=Buffer.allocUnsafe(i?a+s:s);return u[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(u[0]|=64),u[1]=l,l===126?u.writeUInt16BE(a,2):l===127&&(u[2]=u[3]=0,u.writeUIntBE(a,4,6)),r.mask?(u[1]|=128,u[s-4]=n[0],u[s-3]=n[1],u[s-2]=n[2],u[s-1]=n[3],o?[u,e]:i?($3(e,n,u,s,a),[u]):($3(e,n,e,0,a),[u,e])):[u,e]}close(e,r,n,i){let s;if(e===void 0)s=wwe;else{if(typeof e!="number"||!Rwe(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}let o={[Mn]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==bi?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(t.frame(s,o),i)}ping(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):mc(e)?(i=e.size,s=!1):(e=vl(e),i=e.length,s=vl.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Mn]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};mc(e)?this._state!==bi?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==bi?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):mc(e)?(i=e.size,s=!1):(e=vl(e),i=e.length,s=vl.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Mn]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};mc(e)?this._state!==bi?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==bi?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let i=this._extensions[P3.extensionName],s=r.binary?2:1,o=r.compress,a,l;typeof e=="string"?(a=Buffer.byteLength(e),l=!1):mc(e)?(a=e.size,l=!1):(e=vl(e),a=e.length,l=vl.readOnly),this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=i._threshold),this._compress=o):(o=!1,s=0),r.fin&&(this._firstFragment=!0);let u={[Mn]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:l,rsv1:o};mc(e)?this._state!==bi?this.enqueue([this.getBlobData,e,this._compress,u,n]):this.getBlobData(e,this._compress,u,n):this._state!==bi?this.enqueue([this.dispatch,e,this._compress,u,n]):this.dispatch(e,this._compress,u,n)}getBlobData(e,r,n,i){this._bufferedBytes+=n[Mn],this._state=$we,e.arrayBuffer().then(s=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(zT,this,a,i);return}this._bufferedBytes-=n[Mn];let o=vl(s);r?this.dispatch(o,r,n,i):(this._state=bi,this.sendFrame(t.frame(o,n),i),this.dequeue())}).catch(s=>{process.nextTick(Owe,this,s,i)})}dispatch(e,r,n,i){if(!r){this.sendFrame(t.frame(e,n),i);return}let s=this._extensions[P3.extensionName];this._bufferedBytes+=n[Mn],this._state=Pwe,s.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");zT(this,l,i);return}this._bufferedBytes-=n[Mn],this._state=bi,n.readOnly=!1,this.sendFrame(t.frame(a,n),i),this.dequeue()})}dequeue(){for(;this._state===bi&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Mn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Mn],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};O3.exports=HT;function zT(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let i=t._queue[n],s=i[i.length-1];typeof s=="function"&&s(e)}}function Owe(t,e,r){zT(t,e,r),t.onerror(e)}});var M3=g((xZe,j3)=>{"use strict";var{kForOnEventAttribute:fh,kListener:GT}=Ds(),I3=Symbol("kCode"),A3=Symbol("kData"),N3=Symbol("kError"),C3=Symbol("kMessage"),k3=Symbol("kReason"),yc=Symbol("kTarget"),q3=Symbol("kType"),x3=Symbol("kWasClean"),Us=class{constructor(e){this[yc]=null,this[q3]=e}get target(){return this[yc]}get type(){return this[q3]}};Object.defineProperty(Us.prototype,"target",{enumerable:!0});Object.defineProperty(Us.prototype,"type",{enumerable:!0});var El=class extends Us{constructor(e,r={}){super(e),this[I3]=r.code===void 0?0:r.code,this[k3]=r.reason===void 0?"":r.reason,this[x3]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[I3]}get reason(){return this[k3]}get wasClean(){return this[x3]}};Object.defineProperty(El.prototype,"code",{enumerable:!0});Object.defineProperty(El.prototype,"reason",{enumerable:!0});Object.defineProperty(El.prototype,"wasClean",{enumerable:!0});var _c=class extends Us{constructor(e,r={}){super(e),this[N3]=r.error===void 0?null:r.error,this[C3]=r.message===void 0?"":r.message}get error(){return this[N3]}get message(){return this[C3]}};Object.defineProperty(_c.prototype,"error",{enumerable:!0});Object.defineProperty(_c.prototype,"message",{enumerable:!0});var dh=class extends Us{constructor(e,r={}){super(e),this[A3]=r.data===void 0?null:r.data}get data(){return this[A3]}};Object.defineProperty(dh.prototype,"data",{enumerable:!0});var Iwe={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[fh]&&i[GT]===e&&!i[fh])return;let n;if(t==="message")n=function(s,o){let a=new dh("message",{data:o?s:s.toString()});a[yc]=this,F_(e,this,a)};else if(t==="close")n=function(s,o){let a=new El("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[yc]=this,F_(e,this,a)};else if(t==="error")n=function(s){let o=new _c("error",{error:s,message:s.message});o[yc]=this,F_(e,this,o)};else if(t==="open")n=function(){let s=new Us("open");s[yc]=this,F_(e,this,s)};else return;n[fh]=!!r[fh],n[GT]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[GT]===e&&!r[fh]){this.removeListener(t,r);break}}};j3.exports={CloseEvent:El,ErrorEvent:_c,Event:Us,EventTarget:Iwe,MessageEvent:dh};function F_(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var KT=g((jZe,L3)=>{"use strict";var{tokenChars:hh}=pc();function ls(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function Awe(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,s=!1,o,a,l=-1,u=-1,c=-1,f=0;for(;f<t.length;f++)if(u=t.charCodeAt(f),o===void 0)if(c===-1&&hh[u]===1)l===-1&&(l=f);else if(f!==0&&(u===32||u===9))c===-1&&l!==-1&&(c=f);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${f}`);c===-1&&(c=f);let d=t.slice(l,c);u===44?(ls(e,d,r),r=Object.create(null)):o=d,l=c=-1}else throw new SyntaxError(`Unexpected character at index ${f}`);else if(a===void 0)if(c===-1&&hh[u]===1)l===-1&&(l=f);else if(u===32||u===9)c===-1&&l!==-1&&(c=f);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${f}`);c===-1&&(c=f),ls(r,t.slice(l,c),!0),u===44&&(ls(e,o,r),r=Object.create(null),o=void 0),l=c=-1}else if(u===61&&l!==-1&&c===-1)a=t.slice(l,f),l=c=-1;else throw new SyntaxError(`Unexpected character at index ${f}`);else if(i){if(hh[u]!==1)throw new SyntaxError(`Unexpected character at index ${f}`);l===-1?l=f:n||(n=!0),i=!1}else if(s)if(hh[u]===1)l===-1&&(l=f);else if(u===34&&l!==-1)s=!1,c=f;else if(u===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${f}`);else if(u===34&&t.charCodeAt(f-1)===61)s=!0;else if(c===-1&&hh[u]===1)l===-1&&(l=f);else if(l!==-1&&(u===32||u===9))c===-1&&(c=f);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${f}`);c===-1&&(c=f);let d=t.slice(l,c);n&&(d=d.replace(/\\/g,""),n=!1),ls(r,a,d),u===44&&(ls(e,o,r),r=Object.create(null),o=void 0),a=void 0,l=c=-1}else throw new SyntaxError(`Unexpected character at index ${f}`);if(l===-1||s||u===32||u===9)throw new SyntaxError("Unexpected end of input");c===-1&&(c=f);let h=t.slice(l,c);return o===void 0?ls(e,h,r):(a===void 0?ls(r,h,!0):n?ls(r,a,h.replace(/\\/g,"")):ls(r,a,h),ls(e,o,r)),e}function Nwe(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let s=n[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}L3.exports={format:Nwe,parse:Awe}});var ZT=g((DZe,J3)=>{"use strict";var Cwe=A("events"),kwe=A("https"),qwe=A("http"),U3=A("net"),xwe=A("tls"),{randomBytes:jwe,createHash:Mwe}=A("crypto"),{Duplex:MZe,Readable:LZe}=A("stream"),{URL:YT}=A("url"),Jo=ch(),Lwe=VT(),Dwe=WT(),{isBlob:Fwe}=pc(),{BINARY_TYPES:D3,EMPTY_BUFFER:U_,GUID:Uwe,kForOnEventAttribute:JT,kListener:Bwe,kStatusCode:Vwe,kWebSocket:Xt,NOOP:B3}=Ds(),{EventTarget:{addEventListener:Hwe,removeEventListener:zwe}}=M3(),{format:Wwe,parse:Gwe}=KT(),{toBuffer:Kwe}=ah(),Ywe=30*1e3,V3=Symbol("kAborted"),QT=[8,13],Bs=["CONNECTING","OPEN","CLOSING","CLOSED"],Jwe=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,St=class t extends Cwe{constructor(e,r,n){super(),this._binaryType=D3[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=U_,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),H3(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){D3.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new Lwe({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),s=new Dwe(e,this._extensions,n.generateMask);this._receiver=i,this._sender=s,this._socket=e,i[Xt]=this,s[Xt]=this,e[Xt]=this,i.on("conclude",Zwe),i.on("drain",eEe),i.on("error",tEe),i.on("message",rEe),i.on("ping",nEe),i.on("pong",iEe),s.onerror=sEe,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",G3),e.on("data",V_),e.on("end",K3),e.on("error",Y3),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Jo.extensionName]&&this._extensions[Jo.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){bn(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),W3(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){XT(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||U_,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){XT(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||U_,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){XT(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[Jo.extensionName]||(i.compress=!1),this._sender.send(e||U_,i,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){bn(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(St,"CONNECTING",{enumerable:!0,value:Bs.indexOf("CONNECTING")});Object.defineProperty(St.prototype,"CONNECTING",{enumerable:!0,value:Bs.indexOf("CONNECTING")});Object.defineProperty(St,"OPEN",{enumerable:!0,value:Bs.indexOf("OPEN")});Object.defineProperty(St.prototype,"OPEN",{enumerable:!0,value:Bs.indexOf("OPEN")});Object.defineProperty(St,"CLOSING",{enumerable:!0,value:Bs.indexOf("CLOSING")});Object.defineProperty(St.prototype,"CLOSING",{enumerable:!0,value:Bs.indexOf("CLOSING")});Object.defineProperty(St,"CLOSED",{enumerable:!0,value:Bs.indexOf("CLOSED")});Object.defineProperty(St.prototype,"CLOSED",{enumerable:!0,value:Bs.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(St.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(St.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[JT])return e[Bwe];return null},set(e){for(let r of this.listeners(t))if(r[JT]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[JT]:!0})}})});St.prototype.addEventListener=Hwe;St.prototype.removeEventListener=zwe;J3.exports=St;function H3(t,e,r,n){let i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:QT[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=i.autoPong,!QT.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${QT.join(", ")})`);let s;if(e instanceof YT)s=e;else try{s=new YT(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),t._url=s.href;let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",l;if(s.protocol!=="ws:"&&!o&&!a?l=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!s.pathname?l="The URL's pathname is empty":s.hash&&(l="The URL contains a fragment identifier"),l){let m=new SyntaxError(l);if(t._redirects===0)throw m;B_(t,m);return}let u=o?443:80,c=jwe(16).toString("base64"),f=o?kwe.request:qwe.request,h=new Set,d;if(i.createConnection=i.createConnection||(o?Xwe:Qwe),i.defaultPort=i.defaultPort||u,i.port=s.port||u,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":c,Connection:"Upgrade",Upgrade:"websocket"},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(d=new Jo(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=Wwe({[Jo.extensionName]:d.offer()})),r.length){for(let m of r){if(typeof m!="string"||!Jwe.test(m)||h.has(m))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(m)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){let m=i.path.split(":");i.socketPath=m[0],i.path=m[1]}let p;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?i.socketPath:s.host;let m=n&&n.headers;if(n={...n,headers:{}},m)for(let[y,_]of Object.entries(m))n.headers[y.toLowerCase()]=_}else if(t.listenerCount("redirect")===0){let m=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!m||t._originalSecure&&!o)&&(delete i.headers.authorization,delete i.headers.cookie,m||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),p=t._req=f(i),t._redirects&&t.emit("redirect",t.url,p)}else p=t._req=f(i);i.timeout&&p.on("timeout",()=>{bn(t,p,"Opening handshake has timed out")}),p.on("error",m=>{p===null||p[V3]||(p=t._req=null,B_(t,m))}),p.on("response",m=>{let y=m.headers.location,_=m.statusCode;if(y&&i.followRedirects&&_>=300&&_<400){if(++t._redirects>i.maxRedirects){bn(t,p,"Maximum redirects exceeded");return}p.abort();let w;try{w=new YT(y,e)}catch{let b=new SyntaxError(`Invalid URL: ${y}`);B_(t,b);return}H3(t,w,r,n)}else t.emit("unexpected-response",p,m)||bn(t,p,`Unexpected server response: ${m.statusCode}`)}),p.on("upgrade",(m,y,_)=>{if(t.emit("upgrade",m),t.readyState!==St.CONNECTING)return;p=t._req=null;let w=m.headers.upgrade;if(w===void 0||w.toLowerCase()!=="websocket"){bn(t,y,"Invalid Upgrade header");return}let v=Mwe("sha1").update(c+Uwe).digest("base64");if(m.headers["sec-websocket-accept"]!==v){bn(t,y,"Invalid Sec-WebSocket-Accept header");return}let b=m.headers["sec-websocket-protocol"],E;if(b!==void 0?h.size?h.has(b)||(E="Server sent an invalid subprotocol"):E="Server sent a subprotocol but none was requested":h.size&&(E="Server sent no subprotocol"),E){bn(t,y,E);return}b&&(t._protocol=b);let R=m.headers["sec-websocket-extensions"];if(R!==void 0){if(!d){bn(t,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let S;try{S=Gwe(R)}catch{bn(t,y,"Invalid Sec-WebSocket-Extensions header");return}let P=Object.keys(S);if(P.length!==1||P[0]!==Jo.extensionName){bn(t,y,"Server indicated an extension that was not requested");return}try{d.accept(S[Jo.extensionName])}catch{bn(t,y,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[Jo.extensionName]=d}t.setSocket(y,_,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(p,t):p.end()}function B_(t,e){t._readyState=St.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function Qwe(t){return t.path=t.socketPath,U3.connect(t)}function Xwe(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=U3.isIP(t.host)?"":t.host),xwe.connect(t)}function bn(t,e,r){t._readyState=St.CLOSING;let n=new Error(r);Error.captureStackTrace(n,bn),e.setHeader?(e[V3]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(B_,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function XT(t,e,r){if(e){let n=Fwe(e)?e.size:Kwe(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${Bs[t.readyState]})`);process.nextTick(r,n)}}function Zwe(t,e){let r=this[Xt];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[Xt]!==void 0&&(r._socket.removeListener("data",V_),process.nextTick(z3,r._socket),t===1005?r.close():r.close(t,e))}function eEe(){let t=this[Xt];t.isPaused||t._socket.resume()}function tEe(t){let e=this[Xt];e._socket[Xt]!==void 0&&(e._socket.removeListener("data",V_),process.nextTick(z3,e._socket),e.close(t[Vwe])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function F3(){this[Xt].emitClose()}function rEe(t,e){this[Xt].emit("message",t,e)}function nEe(t){let e=this[Xt];e._autoPong&&e.pong(t,!this._isServer,B3),e.emit("ping",t)}function iEe(t){this[Xt].emit("pong",t)}function z3(t){t.resume()}function sEe(t){let e=this[Xt];e.readyState!==St.CLOSED&&(e.readyState===St.OPEN&&(e._readyState=St.CLOSING,W3(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function W3(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),Ywe)}function G3(){let t=this[Xt];this.removeListener("close",G3),this.removeListener("data",V_),this.removeListener("end",K3),t._readyState=St.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[Xt]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",F3),t._receiver.on("finish",F3))}function V_(t){this[Xt]._receiver.write(t)||this.pause()}function K3(){let t=this[Xt];t._readyState=St.CLOSING,t._receiver.end(),this.end()}function Y3(){let t=this[Xt];this.removeListener("error",Y3),this.on("error",B3),t&&(t._readyState=St.CLOSING,this.destroy())}});var eH=g((FZe,Z3)=>{"use strict";var{Duplex:oEe}=A("stream");function Q3(t){t.emit("close")}function aEe(){!this.destroyed&&this._writableState.finished&&this.destroy()}function X3(t){this.removeListener("error",X3),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function lEe(t,e){let r=!0,n=new oEe({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&n._readableState.objectMode?s.toString():s;n.push(a)||t.pause()}),t.once("error",function(s){n.destroyed||(r=!1,n.destroy(s))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,s){if(t.readyState===t.CLOSED){s(i),process.nextTick(Q3,n);return}let o=!1;t.once("error",function(l){o=!0,s(l)}),t.once("close",function(){o||s(i),process.nextTick(Q3,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,s,o)});return}t.send(i,o)},n.on("end",aEe),n.on("error",X3),n}Z3.exports=lEe});var rH=g((UZe,tH)=>{"use strict";var{tokenChars:uEe}=pc();function cEe(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let o=t.charCodeAt(i);if(n===-1&&uEe[o]===1)r===-1&&(r=i);else if(i!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=i);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(r,i);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}tH.exports={parse:cEe}});var uH=g((VZe,lH)=>{"use strict";var fEe=A("events"),H_=A("http"),{Duplex:BZe}=A("stream"),{createHash:dEe}=A("crypto"),nH=KT(),Sl=ch(),hEe=rH(),pEe=ZT(),{GUID:mEe,kWebSocket:gEe}=Ds(),yEe=/^[+/0-9A-Za-z]{22}==$/,iH=0,sH=1,aH=2,eP=class extends fEe{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:pEe,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=H_.createServer((n,i)=>{let s=H_.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=_Ee(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=iH}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===aH){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(ph,this);return}if(e&&this.once("close",e),this._state!==sH)if(this._state=sH,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(ph,this):process.nextTick(ph,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{ph(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",oH);let s=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Rl(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){Rl(this,e,r,400,"Invalid Upgrade header");return}if(s===void 0||!yEe.test(s)){Rl(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){Rl(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){mh(r,400);return}let l=e.headers["sec-websocket-protocol"],u=new Set;if(l!==void 0)try{u=hEe.parse(l)}catch{Rl(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let c=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&c!==void 0){let h=new Sl(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let d=nH.parse(c);d[Sl.extensionName]&&(h.accept(d[Sl.extensionName]),f[Sl.extensionName]=h)}catch{Rl(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let h={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(h,(d,p,m,y)=>{if(!d)return mh(r,p||401,m,y);this.completeUpgrade(f,s,u,e,r,n,i)});return}if(!this.options.verifyClient(h))return mh(r,401)}this.completeUpgrade(f,s,u,e,r,n,i)}completeUpgrade(e,r,n,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[gEe])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>iH)return mh(s,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${dEe("sha1").update(r+mEe).digest("base64")}`],c=new this.options.WebSocket(null,void 0,this.options);if(n.size){let f=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;f&&(u.push(`Sec-WebSocket-Protocol: ${f}`),c._protocol=f)}if(e[Sl.extensionName]){let f=e[Sl.extensionName].params,h=nH.format({[Sl.extensionName]:[f]});u.push(`Sec-WebSocket-Extensions: ${h}`),c._extensions=e}this.emit("headers",u,i),s.write(u.concat(`\r
`).join(`\r
`)),s.removeListener("error",oH),c.setSocket(s,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(c),c.on("close",()=>{this.clients.delete(c),this._shouldEmitClose&&!this.clients.size&&process.nextTick(ph,this)})),a(c,i)}};lH.exports=eP;function _Ee(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function ph(t){t._state=aH,t.emit("close")}function oH(){this.destroy()}function mh(t,e,r,n){r=r||H_.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${H_.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function Rl(t,e,r,n,i){if(t.listenerCount("wsClientError")){let s=new Error(i);Error.captureStackTrace(s,Rl),t.emit("wsClientError",s,r,e)}else mh(r,n,i)}});var fH=g((HZe,cH)=>{"use strict";var Vs=ZT();Vs.createWebSocketStream=eH();Vs.Server=uH();Vs.Receiver=VT();Vs.Sender=WT();Vs.WebSocket=Vs;Vs.WebSocketServer=Vs.Server;cH.exports=Vs});var z_=g(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.BufferedDuplex=bc.writev=void 0;var bEe=Uo(),dH=A("buffer");function hH(t,e){let r=new Array(t.length);for(let n=0;n<t.length;n++)typeof t[n].chunk=="string"?r[n]=dH.Buffer.from(t[n].chunk,"utf8"):r[n]=t[n].chunk;this._write(dH.Buffer.concat(r),"binary",e)}bc.writev=hH;var tP=class extends bEe.Duplex{constructor(e,r,n){super({objectMode:!0}),this.proxy=r,this.socket=n,this.writeQueue=[],e.objectMode||(this._writev=hH.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",i=>{this.destroyed||this.push(i)})}_read(e){this.proxy.read(e)}_write(e,r,n){this.isSocketOpen?this.writeToProxy(e,r,n):this.writeQueue.push({chunk:e,encoding:r,cb:n})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,r){this.writeQueue=[],this.proxy.destroy(),r(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,r,n){this.proxy.write(e,r)===!1?this.proxy.once("drain",n):n()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:e,encoding:r,cb:n}=this.writeQueue.shift();this.writeToProxy(e,r,n)}}};bc.BufferedDuplex=tP});var gh=g(Xo=>{"use strict";var nP=Xo&&Xo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.streamBuilder=Xo.browserStreamBuilder=void 0;var W_=A("buffer"),pH=nP(fH()),vEe=nP(ts()),wEe=Uo(),EEe=nP(sh()),rP=z_(),Qo=(0,vEe.default)("mqttjs:ws"),SEe=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function mH(t,e){let r=`${t.protocol}://${t.hostname}:${t.port}${t.path}`;return typeof t.transformWsUrl=="function"&&(r=t.transformWsUrl(r,t,e)),r}function gH(t){let e=t;return t.port||(t.protocol==="wss"?e.port=443:e.port=80),t.path||(e.path="/"),t.wsOptions||(e.wsOptions={}),!EEe.default&&!t.forceNativeWebSocket&&t.protocol==="wss"&&SEe.forEach(r=>{Object.prototype.hasOwnProperty.call(t,r)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,r)&&(e.wsOptions[r]=t[r])}),e}function REe(t){let e=gH(t);if(e.hostname||(e.hostname=e.host),!e.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let r=new URL(document.URL);e.hostname=r.hostname,e.port||(e.port=Number(r.port))}return e.objectMode===void 0&&(e.objectMode=!(e.binary===!0||e.binary===void 0)),e}function TEe(t,e,r){Qo("createWebSocket"),Qo(`protocol: ${r.protocolId} ${r.protocolVersion}`);let n=r.protocolId==="MQIsdp"&&r.protocolVersion===3?"mqttv3.1":"mqtt";Qo(`creating new Websocket for url: ${e} and protocol: ${n}`);let i;return r.createWebsocket?i=r.createWebsocket(e,[n],r):i=new pH.default(e,[n],r.wsOptions),i}function PEe(t,e){let r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt",n=mH(e,t),i;return e.createWebsocket?i=e.createWebsocket(n,[r],e):i=new WebSocket(n,[r]),i.binaryType="arraybuffer",i}var $Ee=(t,e)=>{Qo("streamBuilder");let r=gH(e);r.hostname=r.hostname||r.host||"localhost";let n=mH(r,t),i=TEe(t,n,r),s=pH.default.createWebSocketStream(i,r.wsOptions);return s.url=n,i.on("close",()=>{s.destroy()}),s};Xo.streamBuilder=$Ee;var OEe=(t,e)=>{Qo("browserStreamBuilder");let r,i=REe(e).browserBufferSize||1024*512,s=e.browserBufferTimeout||1e3,o=!e.objectMode,a=PEe(t,e),l=c(e,m,y);e.objectMode||(l._writev=rP.writev.bind(l)),l.on("close",()=>{a.close()});let u=typeof a.addEventListener<"u";a.readyState===a.OPEN?(r=l,r.socket=a):(r=new rP.BufferedDuplex(e,l,a),u?a.addEventListener("open",f):a.onopen=f),u?(a.addEventListener("close",h),a.addEventListener("error",d),a.addEventListener("message",p)):(a.onclose=h,a.onerror=d,a.onmessage=p);function c(_,w,v){let b=new wEe.Transform({objectMode:_.objectMode});return b._write=w,b._flush=v,b}function f(){Qo("WebSocket onOpen"),r instanceof rP.BufferedDuplex&&r.socketReady()}function h(_){Qo("WebSocket onClose",_),r.end(),r.destroy()}function d(_){Qo("WebSocket onError",_);let w=new Error("WebSocket error");w.event=_,r.destroy(w)}async function p(_){let{data:w}=_;w instanceof ArrayBuffer?w=W_.Buffer.from(w):w instanceof Blob?w=W_.Buffer.from(await new Response(w).arrayBuffer()):w=W_.Buffer.from(w,"utf8"),l&&!l.destroyed&&l.push(w)}function m(_,w,v){if(a.bufferedAmount>i){setTimeout(m,s,_,w,v);return}o&&typeof _=="string"&&(_=W_.Buffer.from(_,"utf8"));try{a.send(_)}catch(b){return v(b)}v()}function y(_){a.close(),_()}return r};Xo.browserStreamBuilder=OEe});var iP=g(yh=>{"use strict";var yH=yh&&yh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yh,"__esModule",{value:!0});var IEe=yH(A("net")),AEe=yH(ts()),NEe=(0,AEe.default)("mqttjs:tcp"),CEe=(t,e)=>{e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost";let{port:r,path:n}=e,i=e.hostname;return NEe("port %d and host %s",r,i),IEe.default.createConnection({port:r,host:i,path:n})};yh.default=CEe});var oP=g(_h=>{"use strict";var sP=_h&&_h.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_h,"__esModule",{value:!0});var kEe=sP(A("tls")),qEe=sP(A("net")),xEe=sP(ts()),jEe=(0,xEe.default)("mqttjs:tls"),MEe=(t,e)=>{e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",qEe.default.isIP(e.host)===0&&(e.servername=e.host),e.rejectUnauthorized=e.rejectUnauthorized!==!1,delete e.path,jEe("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized);let r=kEe.default.connect(e);r.on("secureConnect",()=>{e.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",n)});function n(i){e.rejectUnauthorized&&t.emit("error",i),r.end()}return r.on("error",n),r};_h.default=MEe});var uP=g(lP=>{"use strict";Object.defineProperty(lP,"__esModule",{value:!0});var _H=A("buffer"),LEe=Uo(),DEe=z_(),us,aP,vn;function FEe(){let t=new LEe.Transform;return t._write=(e,r,n)=>{us.send({data:e.buffer,success(){n()},fail(i){n(new Error(i))}})},t._flush=e=>{us.close({success(){e()}})},t}function UEe(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}function BEe(t,e){let r=t.protocol==="wxs"?"wss":"ws",n=`${r}://${t.hostname}${t.path}`;return t.port&&t.port!==80&&t.port!==443&&(n=`${r}://${t.hostname}:${t.port}${t.path}`),typeof t.transformWsUrl=="function"&&(n=t.transformWsUrl(n,t,e)),n}function VEe(){us.onOpen(()=>{vn.socketReady()}),us.onMessage(t=>{let{data:e}=t;e instanceof ArrayBuffer?e=_H.Buffer.from(e):e=_H.Buffer.from(e,"utf8"),aP.push(e)}),us.onClose(()=>{vn.emit("close"),vn.end(),vn.destroy()}),us.onError(t=>{let e=new Error(t.errMsg);vn.destroy(e)})}var HEe=(t,e)=>{if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");let r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt";UEe(e);let n=BEe(e,t);us=wx.connectSocket({url:n,protocols:[r]}),aP=FEe(),vn=new DEe.BufferedDuplex(e,aP,us),vn._destroy=(s,o)=>{us.close({success(){o&&o(s)}})};let i=vn.destroy;return vn.destroy=(s,o)=>(vn.destroy=i,setTimeout(()=>{us.close({fail(){vn._destroy(s,o)}})},0),vn),VEe(),vn};lP.default=HEe});var dP=g(fP=>{"use strict";Object.defineProperty(fP,"__esModule",{value:!0});var cP=A("buffer"),zEe=Uo(),WEe=z_(),Hs,G_,vc,bH=!1;function GEe(){let t=new zEe.Transform;return t._write=(e,r,n)=>{Hs.sendSocketMessage({data:e.buffer,success(){n()},fail(){n(new Error)}})},t._flush=e=>{Hs.closeSocket({success(){e()}})},t}function KEe(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}function YEe(t,e){let r=t.protocol==="alis"?"wss":"ws",n=`${r}://${t.hostname}${t.path}`;return t.port&&t.port!==80&&t.port!==443&&(n=`${r}://${t.hostname}:${t.port}${t.path}`),typeof t.transformWsUrl=="function"&&(n=t.transformWsUrl(n,t,e)),n}function JEe(){bH||(bH=!0,Hs.onSocketOpen(()=>{vc.socketReady()}),Hs.onSocketMessage(t=>{if(typeof t.data=="string"){let e=cP.Buffer.from(t.data,"base64");G_.push(e)}else{let e=new FileReader;e.addEventListener("load",()=>{let r=e.result;r instanceof ArrayBuffer?r=cP.Buffer.from(r):r=cP.Buffer.from(r,"utf8"),G_.push(r)}),e.readAsArrayBuffer(t.data)}}),Hs.onSocketClose(()=>{vc.end(),vc.destroy()}),Hs.onSocketError(t=>{vc.destroy(t)}))}var QEe=(t,e)=>{if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");let r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt";KEe(e);let n=YEe(e,t);return Hs=e.my,Hs.connectSocket({url:n,protocols:r}),G_=GEe(),vc=new WEe.BufferedDuplex(e,G_,Hs),JEe(),vc};fP.default=QEe});var EH=g(Tl=>{"use strict";var K_=Tl&&Tl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.connectAsync=void 0;var XEe=K_(ts()),ZEe=K_(A("url")),eSe=K_(N_()),tSe=K_(sh());typeof(process==null?void 0:process.nextTick)!="function"&&(process.nextTick=setImmediate);var vH=(0,XEe.default)("mqttjs"),Gt=null;function rSe(t){let e;t.auth&&(e=t.auth.match(/^(.+):(.+)$/),e?(t.username=e[1],t.password=e[2]):t.username=t.auth)}function wH(t,e){var r,n,i,s;if(vH("connecting to an MQTT broker..."),typeof t=="object"&&!e&&(e=t,t=""),e=e||{},t&&typeof t=="string"){let l=ZEe.default.parse(t,!0),u={};if(l.port!=null&&(u.port=Number(l.port)),u.host=l.hostname,u.query=l.query,u.auth=l.auth,u.protocol=l.protocol,u.path=l.path,u.protocol=(r=u.protocol)===null||r===void 0?void 0:r.replace(/:$/,""),e=Object.assign(Object.assign({},u),e),!e.protocol)throw new Error("Missing protocol")}if(e.unixSocket=e.unixSocket||((n=e.protocol)===null||n===void 0?void 0:n.includes("+unix")),e.unixSocket?e.protocol=e.protocol.replace("+unix",""):!(!((i=e.protocol)===null||i===void 0)&&i.startsWith("ws"))&&!(!((s=e.protocol)===null||s===void 0)&&s.startsWith("wx"))&&delete e.path,rSe(e),e.query&&typeof e.query.clientId=="string"&&(e.clientId=e.query.clientId),e.cert&&e.key)if(e.protocol){if(["mqtts","wss","wxs","alis"].indexOf(e.protocol)===-1)switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${e.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(Gt||(Gt={},!tSe.default&&!e.forceNativeWebSocket?(Gt.ws=gh().streamBuilder,Gt.wss=gh().streamBuilder,Gt.mqtt=iP().default,Gt.tcp=iP().default,Gt.ssl=oP().default,Gt.tls=Gt.ssl,Gt.mqtts=oP().default):(Gt.ws=gh().browserStreamBuilder,Gt.wss=gh().browserStreamBuilder,Gt.wx=uP().default,Gt.wxs=uP().default,Gt.ali=dP().default,Gt.alis=dP().default)),!Gt[e.protocol]){let l=["mqtts","wss"].indexOf(e.protocol)!==-1;e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((u,c)=>l&&c%2===0?!1:typeof Gt[u]=="function")[0]}if(e.clean===!1&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);function o(l){return e.servers&&((!l._reconnectCount||l._reconnectCount===e.servers.length)&&(l._reconnectCount=0),e.host=e.servers[l._reconnectCount].host,e.port=e.servers[l._reconnectCount].port,e.protocol=e.servers[l._reconnectCount].protocol?e.servers[l._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,l._reconnectCount++),vH("calling streambuilder for",e.protocol),Gt[e.protocol](l,e)}let a=new eSe.default(o,e);return a.on("error",()=>{}),a}function nSe(t,e,r=!0){return new Promise((n,i)=>{let s=wH(t,e),o={connect:l=>{a(),n(s)},end:()=>{a(),n(s)},error:l=>{a(),s.end(),i(l)}};r===!1&&(o.close=()=>{o.error(new Error("Couldn't connect to server"))});function a(){Object.keys(o).forEach(l=>{s.off(l,o[l])})}Object.keys(o).forEach(l=>{s.on(l,o[l])})})}Tl.connectAsync=nSe;Tl.default=wH});var hP=g(Ye=>{"use strict";var SH=Ye&&Ye.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iSe=Ye&&Ye.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sSe=Ye&&Ye.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SH(e,t,r);return iSe(e,t),e},RH=Ye&&Ye.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&SH(e,t,r)},bh=Ye&&Ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.ReasonCodes=Ye.KeepaliveManager=Ye.UniqueMessageIdProvider=Ye.DefaultMessageIdProvider=Ye.Store=Ye.MqttClient=Ye.connectAsync=Ye.connect=Ye.Client=void 0;var TH=bh(N_());Ye.MqttClient=TH.default;var oSe=bh(CR());Ye.DefaultMessageIdProvider=oSe.default;var aSe=bh(s3());Ye.UniqueMessageIdProvider=aSe.default;var lSe=bh(xR());Ye.Store=lSe.default;var PH=sSe(EH());Ye.connect=PH.default;Object.defineProperty(Ye,"connectAsync",{enumerable:!0,get:function(){return PH.connectAsync}});var uSe=bh(OT());Ye.KeepaliveManager=uSe.default;Ye.Client=TH.default;RH(N_(),Ye);RH(dl(),Ye);var cSe=eh();Object.defineProperty(Ye,"ReasonCodes",{enumerable:!0,get:function(){return cSe.ReasonCodes}})});var OH=g(Ln=>{"use strict";var $H=Ln&&Ln.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fSe=Ln&&Ln.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dSe=Ln&&Ln.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$H(e,t,r);return fSe(e,t),e},hSe=Ln&&Ln.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$H(e,t,r)};Object.defineProperty(Ln,"__esModule",{value:!0});var pSe=dSe(hP());Ln.default=pSe;hSe(hP(),Ln)});var CH=g((cet,NH)=>{"use strict";function mSe(t){var e=new t,r=e;function n(){var s=e;return s.next?e=s.next:(e=new t,r=e),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}NH.exports=mSe});var qH=g((fet,gP)=>{"use strict";var gSe=CH();function kH(t,e,r){if(typeof t=="function"&&(r=e,e=t,t=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=gSe(ySe),i=null,s=null,o=0,a=null,l={push:m,drain:Dn,saturated:Dn,pause:c,paused:!1,get concurrency(){return r},set concurrency(E){if(!(E>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=E,!l.paused)for(;i&&o<r;)o++,_()},running:u,resume:d,idle:p,length:f,getQueue:h,unshift:y,empty:Dn,kill:w,killAndDrain:v,error:b};return l;function u(){return o}function c(){l.paused=!0}function f(){for(var E=i,R=0;E;)E=E.next,R++;return R}function h(){for(var E=i,R=[];E;)R.push(E.value),E=E.next;return R}function d(){if(l.paused){if(l.paused=!1,i===null){o++,_();return}for(;i&&o<r;)o++,_()}}function p(){return o===0&&l.length()===0}function m(E,R){var S=n.get();S.context=t,S.release=_,S.value=E,S.callback=R||Dn,S.errorHandler=a,o>=r||l.paused?s?(s.next=S,s=S):(i=S,s=S,l.saturated()):(o++,e.call(t,S.value,S.worked))}function y(E,R){var S=n.get();S.context=t,S.release=_,S.value=E,S.callback=R||Dn,S.errorHandler=a,o>=r||l.paused?i?(S.next=i,i=S):(i=S,s=S,l.saturated()):(o++,e.call(t,S.value,S.worked))}function _(E){E&&n.release(E);var R=i;R&&o<=r?l.paused?o--:(s===i&&(s=null),i=R.next,R.next=null,e.call(t,R.value,R.worked),s===null&&l.empty()):--o===0&&l.drain()}function w(){i=null,s=null,l.drain=Dn}function v(){i=null,s=null,l.drain(),l.drain=Dn}function b(E){a=E}}function Dn(){}function ySe(){this.value=null,this.callback=Dn,this.next=null,this.release=Dn,this.context=null,this.errorHandler=null;var t=this;this.worked=function(r,n){var i=t.callback,s=t.errorHandler,o=t.value;t.value=null,t.callback=Dn,t.errorHandler&&s(r,o),i.call(t.context,r,n),t.release(t)}}function _Se(t,e,r){typeof t=="function"&&(r=e,e=t,t=null);function n(c,f){e.call(this,c).then(function(h){f(null,h)},f)}var i=kH(t,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=l,i.drained=u,i;function a(c){var f=new Promise(function(h,d){s(c,function(p,m){if(p){d(p);return}h(m)})});return f.catch(Dn),f}function l(c){var f=new Promise(function(h,d){o(c,function(p,m){if(p){d(p);return}h(m)})});return f.catch(Dn),f}function u(){var c=new Promise(function(f){process.nextTick(function(){if(i.idle())f();else{var h=i.drain;i.drain=function(){typeof h=="function"&&h(),f(),i.drain=h}}})});return c}}gP.exports=kH;gP.exports.promise=_Se});var _P=g((det,Y_)=>{"use strict";var{format:bSe}=A("node:util");function vSe(){return`${this.name} [${this.code}]: ${this.message}`}function yP(t,e,r=500,n=Error){if(!t)throw new Error("Fastify error code must not be empty");if(!e)throw new Error("Fastify error message must not be empty");t=t.toUpperCase(),!r&&(r=void 0);function i(...s){if(!new.target)return new i(...s);this.code=t,this.name="FastifyError",this.statusCode=r;let o=s.length-1;o!==-1&&s[o]&&typeof s[o]=="object"&&"cause"in s[o]&&(this.cause=s.pop().cause),this.message=bSe(e,...s),Error.stackTraceLimit!==0&&Error.captureStackTrace(this,i)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),i.prototype[Symbol.toStringTag]="Error",i.prototype.toString=vSe,i}Y_.exports=yP;Y_.exports.default=yP;Y_.exports.createError=yP});var J_=g((het,xH)=>{"use strict";var{createError:Zo}=_P();xH.exports={AVV_ERR_EXPOSE_ALREADY_DEFINED:Zo("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' is already defined, specify an expose option for '%s'"),AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:Zo("AVV_ERR_ATTRIBUTE_ALREADY_DEFINED","'%s' is already defined"),AVV_ERR_CALLBACK_NOT_FN:Zo("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Zo("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Zo("AVV_ERR_ROOT_PLG_BOOTED","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Zo("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Zo("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise"),AVV_ERR_PLUGIN_EXEC_TIMEOUT:Zo("AVV_ERR_PLUGIN_EXEC_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var wc=g((pet,jH)=>{"use strict";var wSe=Symbol("avvio.Boot"),ESe=Symbol("isOnCloseHandler"),SSe=Symbol("avvio.ThenifyDoNotWrap"),RSe=Symbol("avvio.TimeTree.untrackNode"),TSe=Symbol("avvio.TimeTree.trackNode"),PSe=Symbol("avvio.TimeTree.getParent"),$Se=Symbol("avvio.TimeTree.getNode"),OSe=Symbol("avvio.TimeTree.addNode"),ISe=Symbol.for("plugin-meta");jH.exports={kAvvio:wSe,kIsOnCloseHandler:ESe,kThenifyDoNotWrap:SSe,kUntrackNode:RSe,kTrackNode:TSe,kGetParent:PSe,kGetNode:$Se,kAddNode:OSe,kPluginMeta:ISe}});var VH=g((met,BH)=>{"use strict";var{kUntrackNode:MH,kTrackNode:bP,kGetParent:LH,kGetNode:DH,kAddNode:FH}=wc(),vP=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[bP](e){this.tableId.set(e.id,e),this.tableLabel.has(e.label)?this.tableLabel.get(e.label).push(e):this.tableLabel.set(e.label,[e])}[MH](e){this.tableId.delete(e.id);let r=this.tableLabel.get(e.label);r.pop(),r.length===0&&this.tableLabel.delete(e.label)}[LH](e){if(e===null)return null;if(this.tableLabel.has(e)){let r=this.tableLabel.get(e);return r[r.length-1]}else return null}[DH](e){return this.tableId.get(e)}[FH](e,r,n){let i=this[LH](e);if(i===null)return this.root={parent:null,id:"root",label:r,nodes:[],start:n,stop:null,diff:-1},this[bP](this.root),this.root.id;let o=`${r}-${Math.random()}`,a={parent:e,id:o,label:r,nodes:[],start:n,stop:null,diff:-1};return i.nodes.push(a),this[bP](a),o}start(e,r,n=Date.now()){return this[FH](e,r,n)}stop(e,r=Date.now()){let n=this[DH](e);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[MH](n))}toJSON(){return Object.assign({},this.root)}prettyPrint(){return UH(this.toJSON())}};function UH(t,e=""){let r=e,n=t.nodes.length,i=n-1;r+=`${t.label} ${t.diff} ms
`;for(let s=0;s<n;++s){let o=t.nodes[s],a=e+(s===i?"  ":"\u2502 ");r+=e,r+=s===i?"\u2514\u2500":"\u251C\u2500",r+=o.nodes.length===0?"\u2500 ":"\u252C ",r+=UH(o,a).slice(e.length+2)}return r}BH.exports={TimeTree:vP}});var Q_=g((get,HH)=>{"use strict";var{debuglog:ASe}=A("node:util"),NSe=ASe("avvio");HH.exports={debug:NSe}});var WH=g((yet,zH)=>{"use strict";function CSe(){let t={resolve:null,reject:null,promise:null};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}zH.exports={createPromise:CSe}});var KH=g((_et,GH)=>{"use strict";var{kPluginMeta:wP}=wc();function kSe(t,e){return t[wP]&&t[wP].name?t[wP].name:e&&e.name?e.name:t.name?t.name:t.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}GH.exports={getPluginName:kSe}});var X_=g((bet,YH)=>{"use strict";function qSe(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}YH.exports={isPromiseLike:qSe}});var QH=g((vet,JH)=>{"use strict";var{EventEmitter:xSe}=A("node:events"),{inherits:jSe}=A("node:util"),{debug:lr}=Q_(),{createPromise:MSe}=WH(),{AVV_ERR_PLUGIN_EXEC_TIMEOUT:LSe}=J_(),{getPluginName:DSe}=KH(),{isPromiseLike:FSe}=X_();function Ec(t,e,r,n,i){this.queue=t,this.func=e,this.options=r,this.isAfter=n,this.timeout=i,this.started=!1,this.name=DSe(e,r),this.queue.pause(),this._error=null,this.loaded=!1,this._promise=null,this.startTime=null}jSe(Ec,xSe);Ec.prototype.exec=function(t,e){lr("exec",this.name),this.server=t;let r=this.func,n=this.name,i=!1;this.options=typeof this.options=="function"?this.options(this.server):this.options;let s=null,o=l=>{if(i){lr("loading complete",n);return}this._error=l,lr(l?"exec errored":"exec completed",n),i=!0,s&&clearTimeout(s),e(l)};this.timeout>0&&(lr("setting up timeout",n,this.timeout),s=setTimeout(function(){lr("timed out",n),s=null;let l=new LSe(n);l.fn=r,o(l)},this.timeout)),this.started=!0,this.startTime=Date.now(),this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.options,o);FSe(a)?(lr("exec: resolving promise",n),a.then(()=>process.nextTick(o),l=>process.nextTick(o,l))):r.length<3&&o()};Ec.prototype.loadedSoFar=function(){if(lr("loadedSoFar",this.name),this.loaded)return Promise.resolve();let t=()=>{this.server.after((r,n)=>{this._error=r,this.queue.pause(),this._promise&&(r?(lr("rejecting promise",this.name,r),this._promise.reject(r)):(lr("resolving promise",this.name),this._promise.resolve()),this._promise=null),process.nextTick(n,r)}),this.queue.resume()},e;return this._promise?e=Promise.resolve():(this._promise=MSe(),e=this._promise.promise,this.server?t():this.on("start",t)),e};Ec.prototype.enqueue=function(t,e){lr("enqueue",this.name,t.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.queue.push(t,e)};Ec.prototype.finish=function(t,e){lr("finish",this.name,t);let r=()=>{this.loaded||(lr("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,e(t))};if(t){this._promise&&(this._promise.reject(t),this._promise=null),r();return}let n=()=>{if(lr("check",this.name,this.queue.length(),this.queue.running(),this._promise),this.queue.length()===0&&this.queue.running()===0)if(this._promise){let i=()=>{lr("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(i,i),this._promise=null}else r();else lr("delayed",this.name),this.queue.drain=()=>{lr("drain",this.name),this.queue.drain=USe,queueMicrotask(n)}};queueMicrotask(n),this.queue.resume()};function USe(){}JH.exports={Plugin:Ec}});var ZH=g((wet,XH)=>{"use strict";var{AVV_ERR_PLUGIN_NOT_VALID:EP}=J_();function BSe(t){if(!(t&&(typeof t=="function"||typeof t.then=="function")))throw Array.isArray(t)?new EP("array"):t===null?new EP("null"):new EP(typeof t)}XH.exports={validatePlugin:BSe}});var tz=g((Eet,ez)=>{"use strict";function VSe(t){return t!==null&&typeof t=="object"&&typeof t.default=="function"}ez.exports={isBundledOrTypescriptPlugin:VSe}});var iz=g((Ret,nz)=>{"use strict";var{debug:rz}=Q_(),{kThenifyDoNotWrap:SP}=wc();function HSe(){if(this.booted){rz("thenify returning undefined because we are already booted");return}if(this[SP]){this[SP]=!1;return}return rz("thenify"),(t,e)=>this._loadRegistered().then(()=>(this[SP]=!0,t(this._server)),e)}nz.exports={thenify:HSe}});var oz=g((Tet,sz)=>{"use strict";var{isPromiseLike:zSe}=X_(),{kAvvio:WSe}=wc();function GSe(t,e,r){let n=t.apply(t,e);zSe(n)&&!n[WSe]?n.then(()=>process.nextTick(r),i=>process.nextTick(r,i)):r&&process.nextTick(r)}sz.exports={executeWithThenable:GSe}});var mz=g((Pet,pz)=>{"use strict";var Z_=qH(),KSe=A("node:events").EventEmitter,YSe=A("node:util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:vh,AVV_ERR_CALLBACK_NOT_FN:Sc,AVV_ERR_ROOT_PLG_BOOTED:JSe,AVV_ERR_READY_TIMEOUT:QSe,AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:XSe}=J_(),{kAvvio:uz,kIsOnCloseHandler:cz}=wc(),{TimeTree:ZSe}=VH(),{Plugin:fz}=QH(),{debug:Rc}=Q_(),{validatePlugin:e1e}=ZH(),{isBundledOrTypescriptPlugin:t1e}=tz(),{isPromiseLike:r1e}=X_(),{thenify:dz}=iz(),{executeWithThenable:az}=oz();function Ut(t,e,r){if(typeof t=="function"&&arguments.length===1&&(r=t,e={},t=null),typeof e=="function"&&(r=e,e={}),e=e||{},e.autostart=e.autostart!==!1,e.timeout=Number(e.timeout)||0,e.expose=e.expose||{},!new.target)return new Ut(t,e,r);this._server=t||this,this._opts=e,t&&this._expose(),this._current=[],this._error=null,this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new ZSe,this._readyQ=Z_(this,hz,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=lz},this._closeQ=Z_(this,i1e,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=lz},this._doStart=null;let n=this;this._root=new fz(Z_(this,this._loadPluginNextTick,1),function(s,o,a){n._doStart=a,o.autostart&&n.start()},e,!1,0),this._trackPluginLoading(this._root),this._loadPlugin(this._root,i=>{Rc("root plugin ready");try{this.emit("preReady"),this._root=null}catch(s){i=i||this._error||s}if(i){if(this._error=i,this._readyQ.length()===0)throw i}else this.booted=!0;this._readyQ.resume()})}YSe(Ut,KSe);Ut.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};Ut.prototype.override=function(t,e,r){return t};Ut.prototype[uz]=!0;Ut.prototype.use=function(t,e){return this._lastUsed=this._addPlugin(t,e,!1),this};Ut.prototype._loadRegistered=function(){let t=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.queue.resume()),t?t.loadedSoFar():Promise.resolve()};Object.defineProperty(Ut.prototype,"then",{get:dz});Ut.prototype._addPlugin=function(t,e,r){if(t1e(t)&&(t=t.default),e1e(t),e=e||{},this.booted)throw new JSe;let n=this._current[0],i=this._opts.timeout;if(!n.loaded&&n.timeout>0){let o=Date.now()-n.startTime;i=n.timeout-(o+3)}let s=new fz(Z_(this,this._loadPluginNextTick,1),t,e,r,i);if(this._trackPluginLoading(s),n.loaded)throw new Error(s.name,n.name);return n.enqueue(s,o=>{o&&(this._error=o)}),s};Ut.prototype._expose=function(){let e=this,r=e._server,{use:n="use",after:i="after",ready:s="ready",onClose:o="onClose",close:a="close"}=this._opts.expose;if(r[n])throw new vh(n,"use");if(r[n]=function(l,u){return e.use(l,u),this},r[i])throw new vh(i,"after");if(r[i]=function(l){return typeof l!="function"?e._loadRegistered():(e.after(RP(l,this)),this)},r[s])throw new vh(s,"ready");if(r[s]=function(l){if(l&&typeof l!="function")throw new Sc(s,typeof l);return e.ready(l?RP(l,this):void 0)},r[o])throw new vh(o,"onClose");if(r[o]=function(l){if(typeof l!="function")throw new Sc(o,typeof l);return e.onClose(s1e(l,this)),this},r[a])throw new vh(a,"close");if(r[a]=function(l){if(l&&typeof l!="function")throw new Sc(a,typeof l);return l?(e.close(RP(l,this)),this):e.close()},r.then)throw new XSe("then");Object.defineProperty(r,"then",{get:dz.bind(e)}),r[uz]=!0};Ut.prototype.after=function(t){if(!t)return this._loadRegistered();this._addPlugin(e.bind(this),{},!0);function e(r,n,i){hz.call(this,t,i)}return this};Ut.prototype.onClose=function(t){if(typeof t!="function")throw new Sc("onClose",typeof t);return t[cz]=!0,this._closeQ.unshift(t,e=>{e&&(this._error=e)}),this};Ut.prototype.close=function(t){let e;if(t){if(typeof t!="function")throw new Sc("close",typeof t)}else e=new Promise(function(r,n){t=function(i){if(i)return n(i);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(t),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),e};Ut.prototype.ready=function(t){if(t){if(typeof t!="function")throw new Sc("ready",typeof t);this._readyQ.push(t),queueMicrotask(this.start.bind(this));return}return new Promise((e,r)=>{this._readyQ.push(i),this.start();let n=this._current[0].server;function i(s,o,a){s?r(s):e(n),process.nextTick(a)}})};Ut.prototype._trackPluginLoading=function(t){let e=this._current[0]?.name||null;t.once("start",(r,n,i)=>{let s=this.pluginTree.start(e||null,n,i);t.once("loaded",(o,a,l)=>{this.pluginTree.stop(s,l)})})};Ut.prototype.prettyPrint=function(){return this.pluginTree.prettyPrint()};Ut.prototype.toJSON=function(){return this.pluginTree.toJSON()};Ut.prototype._loadPlugin=function(t,e){let r=this;if(r1e(t.func)){t.func.then(o=>{typeof o.default=="function"&&(o=o.default),t.func=o,this._loadPlugin(t,e)},e);return}let n=r._current[0];if(r._current.unshift(t),r._error&&!t.isAfter){Rc("skipping loading of plugin as instance errored and it is not an after",t.name),process.nextTick(s);return}let i=n&&n.server||r._server;if(!t.isAfter)try{i=r.override(i,t.func,t.options)}catch(o){return Rc("override errored",t.name),s(o)}t.exec(i,s);function s(o){t.finish(o,a=>{r._current.shift(),e(a)})}};Ut.prototype._loadPluginNextTick=function(t,e){process.nextTick(this._loadPlugin.bind(this),t,e)};function lz(){}function hz(t,e){let r=this._server,n=this._error;if(this._error=null,t.length===0)this._error=n,az(t,[],e);else if(t.length===1)az(t,[n],e);else if(this._opts.timeout===0){let i=s=>{this._error=s,e(this._error)};t.length===2?t(n,i):t(n,r,i)}else n1e.call(this,t,n,r,e)}function n1e(t,e,r,n){let i=t.unwrappedName??t.name;Rc("setting up ready timeout",i,this._opts.timeout);let s=setTimeout(()=>{Rc("timed out",i),s=null;let a=new QSe(i);a.fn=t,this._error=a,n(a)},this._opts.timeout);t.length===2?t(e,o.bind(this)):t(e,r,o.bind(this));function o(a){s&&(clearTimeout(s),this._error=a,n(this._error))}}function i1e(t,e){let r=this._server,n=t[cz];if(t.length===0||t.length===1){let i;n?i=t(r):i=t(this._error),i&&typeof i.then=="function"?(Rc("resolving close/onClose promise"),i.then(()=>process.nextTick(e),s=>process.nextTick(e,s))):process.nextTick(e)}else t.length===2?t(n?r:this._error,e):n?t(r,e):t(this._error,r,e)}function s1e(t,e){return r.bind(e);function r(n,i){let s;t.length===0?(s=t(),s&&s.then?s.then(function(){process.nextTick(i)},i):process.nextTick(i)):t.length===1?(s=t(this),s&&s.then?s.then(function(){process.nextTick(i)},i):process.nextTick(i)):t(this,i)}}function RP(t,e){let r=n.bind(e);return r.unwrappedName=t.name,r;function n(i,s){let o;t?t.length===0?(o=t(),o&&o.then?o.then(function(){process.nextTick(s,i)},s):process.nextTick(s,i)):t.length===1?(o=t(i),o&&o.then?o.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===2?t(i,s):t(i,this,s):process.nextTick(s)}}pz.exports=Ut});var Zt=g(($et,gz)=>{"use strict";var o1e={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kSupportedHTTPMethods:Symbol("fastify.acceptedHTTPMethods"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kGenReqId:Symbol("fastify.genReqId"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};gz.exports=o1e});var ur=g((Oet,e0)=>{"use strict";var L=_P(),Pl={FST_ERR_NOT_FOUND:L("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:L("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:L("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:L("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:L("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:L("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:L("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VALIDATION:L("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:L("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:L("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:L("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:L("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:L("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:L("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:L("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:L("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:L("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:L("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:L("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:L("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:L("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:L("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:L("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:L("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_DEC_REFERENCE_TYPE:L("FST_ERR_DEC_REFERENCE_TYPE","The decorator '%s' of type '%s' is a reference type. Use the { getter, setter } interface instead."),FST_ERR_HOOK_INVALID_TYPE:L("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:L("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:L("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:L("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:L("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:L("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook%s timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:L("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:L("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_INSTANCE:L("FST_ERR_LOG_INVALID_LOGGER_INSTANCE","loggerInstance only accepts a logger instance.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_CONFIG:L("FST_ERR_LOG_INVALID_LOGGER_CONFIG","logger options only accepts a configuration object.",500,TypeError),FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:L("FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED","You cannot provide both logger and loggerInstance. Please provide only one.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:L("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:L("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_READABLE_STREAM_LOCKED:L("FST_ERR_REP_READABLE_STREAM_LOCKED","ReadableStream was locked. You should call releaseLock() method on reader before sending."),FST_ERR_REP_ALREADY_SENT:L("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:L("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:L("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:L("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:L("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:L("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:L("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:L("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:L("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:L("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:L("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:L("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:L("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:L("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:L("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:L("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:L("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:L("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:L("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:L("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:L("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:L("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:L("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:L("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_INVALID_URL:L("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:L("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:L("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:L("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:L("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:L("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:L("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:L("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:L("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:L("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:L("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:L("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:L("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:L("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:L("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:L("FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER","The %s plugin being registered mixes async and callback styles. Async plugin should not mix async and callback style.",500,TypeError),FST_ERR_PLUGIN_CALLBACK_NOT_FN:L("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:L("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:L("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:L("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:L("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function a1e(t,e){return e.cause=t,e}e0.exports=Pl;e0.exports.appendStackTrace=a1e;e0.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:Pl.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:Pl.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:Pl.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:Pl.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:Pl.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:Pl.FST_ERR_PLUGIN_TIMEOUT}});var ea=g((Iet,Tz)=>{"use strict";var l1e=["onRoute","onRegister","onReady","onListen","preClose","onClose"],vz=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],u1e=vz.concat(l1e),{FST_ERR_HOOK_INVALID_TYPE:c1e,FST_ERR_HOOK_INVALID_HANDLER:f1e,FST_ERR_SEND_UNDEFINED_ERR:t0,FST_ERR_HOOK_TIMEOUT:d1e,FST_ERR_HOOK_NOT_SUPPORTED:h1e,AVVIO_ERRORS_MAP:yz,appendStackTrace:_z}=ur(),{kChildren:wh,kHooks:wz,kRequestPayloadStream:bz}=Zt();function Eh(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}Eh.prototype=Object.create(null);Eh.prototype.validate=function(t,e){if(typeof t!="string")throw new c1e;if(Array.isArray(this[t])===!1)throw new h1e(t);if(typeof e!="function")throw new f1e(t,Object.prototype.toString.call(e))};Eh.prototype.add=function(t,e){this.validate(t,e),this[t].push(e)};function p1e(t){let e=new Eh;return e.onRequest=t.onRequest.slice(),e.preParsing=t.preParsing.slice(),e.preValidation=t.preValidation.slice(),e.preSerialization=t.preSerialization.slice(),e.preHandler=t.preHandler.slice(),e.onSend=t.onSend.slice(),e.onResponse=t.onResponse.slice(),e.onError=t.onError.slice(),e.onRoute=t.onRoute.slice(),e.onRegister=t.onRegister.slice(),e.onTimeout=t.onTimeout.slice(),e.onRequestAbort=t.onRequestAbort.slice(),e.onReady=[],e.onListen=[],e.preClose=[],e}function Ez(t,e,r,n){let i=r[wz][t],s=0,o=0;l();function a(c){let f=i[s-1]?.name,h=f?` "${f}"`:"";if(c){c.code==="AVV_ERR_READY_TIMEOUT"?c=_z(c,new d1e(t,h)):c=yz[c.code]!=null?_z(c,new yz[c.code](c.message)):c,n(c);return}n()}function l(c){if(c){a(c);return}if(s===i.length&&o===r[wh].length){s===0&&o===0?a():e(function(h,d){a(h),d(h)});return}if(s===i.length&&o<r[wh].length){let f=r[wh][o++];Ez(t,e,f,l);return}e(u(i[s++],r)),l()}function u(c,f){return function(h,d){if(h){d(h);return}if(c.length===1){try{c.call(f,d)}catch(p){d(p)}return}try{let p=c.call(f);if(p&&typeof p.then=="function"){p.then(d,d);return}}catch(p){h=p}d(h)}}}function Sz(t){let e=t[wz].onListen,r=e.length,n=0,i=0;s();function s(a){if(a&&t.log.error(a),n===r){for(;i<t[wh].length;){let l=t[wh][i++];Sz(l)}return}o(e[n++],t,s)}async function o(a,l,u){if(a.length===1){try{a.call(l,u)}catch(c){u(c)}return}try{let c=a.call(l);if(c&&typeof c.then=="function"){c.then(u,u);return}u()}catch(c){u(c)}}}function Tc(t){return function(r,n,i,s){let o=0;function a(c){if(c||o===r.length){s(c,n,i);return}let f;try{f=t(r[o++],n,i,a)}catch(h){s(h,n,i);return}f&&typeof f.then=="function"&&f.then(l,u)}function l(){a()}function u(c){c||(c=new t0),s(c,n,i)}a()}}function m1e(t,e,r,n){return t(e,r,n)}var g1e=Tc(m1e),y1e=Tc(Sh),_1e=Tc(Sh),b1e=Tc(Sh),v1e=Tc(Sh);function Rz(t,e,r,n,i){let s=0;function o(u,c){if(u){i(u,e,r,n);return}if(c!==void 0&&(n=c),s===t.length){i(null,e,r,n);return}let f;try{f=t[s++](e,r,n,o)}catch(h){i(h,e,r);return}f&&typeof f.then=="function"&&f.then(a,l)}function a(u){o(null,u)}function l(u){u||(u=new t0),i(u,e,r,n)}o()}var w1e=Rz;function E1e(t,e,r,n){let i=0;function s(l,u){if(r.sent)return;if(u!==void 0&&(e[bz]=u),l||i===t.length){n(l,e,r);return}let c;try{c=t[i++](e,r,e[bz],s)}catch(f){n(f,e,r);return}c&&typeof c.then=="function"&&c.then(o,a)}function o(l){s(null,l)}function a(l){l||(l=new t0),n(l,e,r)}s()}function S1e(t,e,r){let n=0;function i(a){if(a||n===t.length){r(a,e);return}let l;try{l=t[n++](e,i)}catch(u){r(u,e);return}l&&typeof l.then=="function"&&l.then(s,o)}function s(){i()}function o(a){a||(a=new t0),r(a,e)}i()}function Sh(t,e,r,n){if(r.sent!==!0)return t(e,r,n)}Tz.exports={Hooks:Eh,buildHooks:p1e,hookRunnerGenerator:Tc,preParsingHookRunner:E1e,onResponseHookRunner:g1e,onSendHookRunner:Rz,preSerializationHookRunner:w1e,onRequestAbortHookRunner:S1e,hookIterator:Sh,hookRunnerApplication:Ez,onListenHookRunner:Sz,preHandlerHookRunner:_1e,preValidationHookRunner:y1e,onRequestHookRunner:v1e,onTimeoutHookRunner:b1e,lifecycleHooks:vz,supportedHooks:u1e}});var xz=g((Aet,qz)=>{"use strict";var R1e=A("node:http"),T1e=A("node:https"),P1e=A("node:dns"),$1e=A("node:os"),{kState:wr,kOptions:O1e,kServerBindings:I1e}=Zt(),{onListenHookRunner:r0}=ea(),{FST_ERR_HTTP2_INVALID_VERSION:A1e,FST_ERR_REOPENED_CLOSE_SERVER:Oz,FST_ERR_REOPENED_SERVER:Iz,FST_ERR_LISTEN_OPTIONS_INVALID:N1e}=ur();qz.exports.createServer=C1e;function Az(t){return`Server listening at ${t}`}function C1e(t,e){let r=Cz(t,e);function n(i={port:0,host:"localhost"},s=void 0){if(typeof s=="function"&&(i.cb=s),i.signal){if(typeof i.signal.on!="function"&&typeof i.signal.addEventListener!="function")throw new N1e("Invalid options.signal");if(i.signal.aborted)this.close();else{let a=()=>{this.close()};i.signal.addEventListener("abort",a,{once:!0})}}let o;if(i.path==null?o=i.host??"localhost":o=i.host,(!Object.hasOwn(i,"host")||i.host==null)&&(i.host=o),o==="localhost"?i.cb=(a,l)=>{if(a){s(a,l);return}Pz.call(this,r,e,t,i,()=>{this[wr].listening=!0,s(null,l),r0(this)})}:i.cb=(a,l)=>{if(a){s(a,l);return}this[wr].listening=!0,s(null,l),r0(this)},s===void 0)return k1e.call(this,r,i).then(l=>new Promise((u,c)=>{o==="localhost"?Pz.call(this,r,e,t,i,()=>{this[wr].listening=!0,u(l),r0(this)}):(u(l),r0(this))}));this.ready(Nz.call(this,r,i))}return{server:r,listen:n}}function Pz(t,e,r,n,i){this[wr].listening=!1,P1e.lookup(n.host,{all:!0},(s,o)=>{if(s){i();return}let a=t.listening&&r.serverFactory,l=0,u=0;if(!a){let f=t.address();for(let h of o)if(h.address!==f.address){l++;let d=Object.assign({},n,{host:h.address,port:f.port,cb:y=>{u++,y||this[I1e].push(p),u===l&&i()}}),p=Cz(r,e),m=()=>{p.close(()=>{}),typeof p.closeAllConnections=="function"&&r.forceCloseConnections===!0&&p.closeAllConnections()};p.on("upgrade",t.emit.bind(t,"upgrade")),t.on("unref",m),t.on("close",m),t.on("error",m),this[wr].listening=!1,Nz.call(this,p,d)()}}if(l===0){i();return}let c=t.unref;t.unref=function(){c.call(t),t.emit("unref")}})}function Nz(t,e){let r=n=>{if(t.removeListener("error",r),t.removeListener("listening",r),n)this[wr].listening=!1,e.cb(n,null);else{let i=kz.call(this,t,e.listenTextResolver||Az);e.cb(null,i)}};return n=>{if(n!=null)return e.cb(n);if(this[wr].listening&&this[wr].closing)return e.cb(new Oz,null);if(this[wr].listening)return e.cb(new Iz,null);t.once("error",r),this[wr].closing||(t.once("listening",r),t.listen(e),this[wr].listening=!0)}}function k1e(t,e){return this[wr].listening&&this[wr].closing?Promise.reject(new Oz):this[wr].listening?Promise.reject(new Iz):this.ready().then(()=>{let r,n;function i(){t.removeListener("error",r),t.removeListener("listening",n)}let s=new Promise((a,l)=>{r=u=>{i(),this[wr].listening=!1,l(u)},t.once("error",r)}),o=new Promise((a,l)=>{n=()=>{i(),this[wr].listening=!0,a(kz.call(this,t,e.listenTextResolver||Az))},t.once("listening",n)});return t.listen(e),Promise.race([s,o])})}function Cz(t,e){let r=null,n=t.https===!0?{}:t.https;return t.serverFactory?r=t.serverFactory(e,t):t.http2?(typeof n=="object"?r=$z().createSecureServer(n,e):r=$z().createServer(e),r.on("session",x1e(t.http2SessionTimeout))):(n?r=T1e.createServer(n,e):r=R1e.createServer(t.http,e),r.keepAliveTimeout=t.keepAliveTimeout,r.requestTimeout=t.requestTimeout,t.maxRequestsPerSocket>0&&(r.maxRequestsPerSocket=t.maxRequestsPerSocket)),t.serverFactory||r.setTimeout(t.connectionTimeout),r}function q1e(t){return t.address==="0.0.0.0"?Object.values($1e.networkInterfaces()).flatMap(e=>e.filter(r=>r.family==="IPv4")).sort(e=>e.internal?-1:1).map(e=>e.address):[t.address]}function kz(t,e){let r;typeof t.address()=="string"?r=[t.address()]:(t.address().address.indexOf(":")===-1?r=q1e(t.address()).map(i=>i+":"+t.address().port):r=["["+t.address().address+"]:"+t.address().port],r=r.map(i=>"http"+(this[O1e].https?"s":"")+"://"+i));for(let i of r)this.log.info(e(i));return r[0]}function $z(){try{return A("node:http2")}catch{throw new A1e}}function x1e(t){return function(e){e.setTimeout(t,j1e)}}function j1e(){this.close()}});var $P=g((Net,n0)=>{"use strict";var{format:TP}=A("node:util");function M1e(t){return jz({...t,name:"DeprecationWarning"})}function jz({name:t,code:e,message:r,unlimited:n=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let i={[t]:function(o,a,l){s.emitted===!0&&s.unlimited!==!0||(s.emitted=!0,process.emitWarning(s.format(o,a,l),s.name,s.code))}};n&&(i={[t]:function(o,a,l){s.emitted=!0,process.emitWarning(s.format(o,a,l),s.name,s.code)}});let s=i[t];return s.emitted=!1,s.message=r,s.unlimited=n,s.code=e,s.format=function(o,a,l){let u;return o&&a&&l?u=TP(r,o,a,l):o&&a?u=TP(r,o,a):o?u=TP(r,o):u=r,u},s}var PP={createWarning:jz,createDeprecation:M1e};n0.exports=PP;n0.exports.default=PP;n0.exports.processWarning=PP});var OP=g((Cet,Lz)=>{"use strict";var{createWarning:Mz}=$P(),L1e=Mz({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),D1e=Mz({name:"FastifySecurity",code:"FSTSEC001",message:'You are using /%s/ Content-Type which may be vulnerable to CORS attack. Please make sure your RegExp start with "^" or include ";?" to proper detection of the essence MIME type.',unlimited:!0});Lz.exports={FSTWRN001:L1e,FSTSEC001:D1e}});var NP=g((ket,Fz)=>{"use strict";var{kSchemaHeaders:o0,kSchemaParams:IP,kSchemaQuerystring:AP,kSchemaBody:$l,kSchemaResponse:Dz}=Zt(),F1e=/^[1-5](?:\d{2}|xx)$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:U1e}=ur(),{FSTWRN001:i0}=OP();function B1e(t,e){if(!t.schema||!t.schema.response)return;let{method:r,url:n}=t.config||{};t[Dz]=Object.keys(t.schema.response).reduce(function(i,s){let o=t.schema.response[s];if(s=s.toLowerCase(),!F1e.test(s))throw new U1e;if(o.content){let a={};for(let l of Object.keys(o.content)){let u=o.content[l].schema;a[l]=e({schema:u,url:n,method:r,httpStatus:s,contentType:l})}i[s]=a}else i[s]=e({schema:o,url:n,method:r,httpStatus:s});return i},{})}function V1e(t,e,r){let{schema:n}=t;if(!n)return;let{method:i,url:s}=t.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))t[o0]=e({schema:o,method:i,url:s,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(l=>{a[l]=o[l]}),a.required instanceof Array&&(a.required=a.required.map(l=>l.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(l=>{a.properties[l.toLowerCase()]=o.properties[l]})),t[o0]=e({schema:a,method:i,url:s,httpPart:"headers"})}else Object.hasOwn(n,"headers")&&i0("headers",i,s);if(n.body){let a=n.body.content;if(a){let l={};for(let u of Object.keys(a)){let c=a[u].schema;l[u]=e({schema:c,method:i,url:s,httpPart:"body",contentType:u})}t[$l]=l}else t[$l]=e({schema:n.body,method:i,url:s,httpPart:"body"})}else Object.hasOwn(n,"body")&&i0("body",i,s);n.querystring?t[AP]=e({schema:n.querystring,method:i,url:s,httpPart:"querystring"}):Object.hasOwn(n,"querystring")&&i0("querystring",i,s),n.params?t[IP]=e({schema:n.params,method:i,url:s,httpPart:"params"}):Object.hasOwn(n,"params")&&i0("params",i,s)}function s0(t,e,r){let n=e[r]===void 0,i=t&&t(n?null:e[r]);if(i?.then)return i.then(o=>s(o)).catch(o=>o);return s(i);function s(o){return o===!1?t.errors:o&&o.error?o.error:(o&&o.value&&(e[r]=o.value),!1)}}function a0(t,e,r){let n=r===void 0;if(n||!r.skipParams){let s=s0(t[IP],e,"params");if(s)return typeof s.then!="function"?ta(s,"params",t.schemaErrorFormatter):H1e(s,t,e)}if(n||!r.skipBody){let s=null;if(typeof t[$l]=="function")s=t[$l];else if(t[$l]){let a=e.headers["content-type"]?.split(";",1)[0],l=t[$l][a];l&&(s=l)}let o=s0(s,e,"body");if(o)return typeof o.then!="function"?ta(o,"body",t.schemaErrorFormatter):z1e(o,t,e)}if(n||!r.skipQuery){let s=s0(t[AP],e,"query");if(s)return typeof s.then!="function"?ta(s,"querystring",t.schemaErrorFormatter):W1e(s,t,e)}let i=s0(t[o0],e,"headers");return i?typeof i.then!="function"?ta(i,"headers",t.schemaErrorFormatter):G1e(i,t,e):!1}function H1e(t,e,r){return t.then(n=>n?ta(n,"params",e.schemaErrorFormatter):a0(e,r,{skipParams:!0}))}function z1e(t,e,r){return t.then(n=>n?ta(n,"body",e.schemaErrorFormatter):a0(e,r,{skipParams:!0,skipBody:!0}))}function W1e(t,e,r){return t.then(n=>n?ta(n,"querystring",e.schemaErrorFormatter):a0(e,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function G1e(t,e,r){return t.then(n=>n?ta(n,"headers",e.schemaErrorFormatter):!1)}function ta(t,e,r){if(t instanceof Error)return t.statusCode=t.statusCode||400,t.code=t.code||"FST_ERR_VALIDATION",t.validationContext=t.validationContext||e,t;let n=r(t,e);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=t,n.validationContext=e,n}Fz.exports={symbols:{bodySchema:$l,querystringSchema:AP,responseSchema:Dz,paramsSchema:IP,headersSchema:o0},compileSchemasForValidation:V1e,compileSchemasForSerialization:B1e,validate:a0}});var CP=g((qet,Bz)=>{"use strict";var{kReplyIsError:Uz,kReplyHijacked:K1e}=Zt(),Y1e=A("node:diagnostics_channel"),Rh=Y1e.tracingChannel("fastify.request.handler");function J1e(t,e,r){r&&(r.async=!0),t.then(function(n){if(e[K1e]!==!0){r&&Rh.asyncStart.publish(r);try{if(n!==void 0||e.sent===!1&&e.raw.headersSent===!1&&e.request.raw.aborted===!1)try{e.send(n)}catch(i){e[Uz]=!0,e.send(i)}}finally{r&&Rh.asyncEnd.publish(r)}}},function(n){r&&(r.error=n,Rh.error.publish(r),Rh.asyncStart.publish(r));try{if(e.sent===!0){e.log.error({err:n},"Promise errored, but reply.sent = true was set");return}e[Uz]=!0,e.send(n)}catch(i){e.send(i)}finally{r&&Rh.asyncEnd.publish(r)}})}Bz.exports=J1e});var jP=g((xet,xP)=>{"use strict";var Q1e=A("node:diagnostics_channel"),{validate:X1e}=NP(),{preValidationHookRunner:Z1e,preHandlerHookRunner:eRe}=ea(),tRe=CP(),{kReplyIsError:l0,kRouteContext:zs,kFourOhFourContext:rRe,kSupportedHTTPMethods:Vz}=Zt(),Th=Q1e.tracingChannel("fastify.request.handler");function nRe(t,e,r){if(r.sent===!0)return;if(t!=null){r[l0]=!0,r.send(t);return}let n=e.raw.method,i=e.headers,s=e[zs];if(this[Vz].bodyless.has(n)){Ol(e,r);return}if(this[Vz].bodywith.has(n)){let o=i["content-type"],a=i["content-length"],l=i["transfer-encoding"];if(o===void 0)(a===void 0||a==="0")&&l===void 0?Ol(e,r):s.contentTypeParser.run("",Ol,e,r);else{if(a===void 0&&l===void 0&&n==="OPTIONS"){Ol(e,r);return}s.contentTypeParser.run(o,Ol,e,r)}return}Ol(e,r)}function Ol(t,e){try{t[zs].preValidation!==null?Z1e(t[zs].preValidation,t,e,kP):kP(null,t,e)}catch(r){kP(r,t,e)}}function kP(t,e,r){if(r.sent===!0)return;if(t!=null){r[l0]=!0,r.send(t);return}let n=X1e(r[zs],e);if(n&&typeof n.then=="function"||!1){let s=Hz.bind(null,e,r);n.then(s,s)}else Hz(e,r,n)}function Hz(t,e,r){if(r){if(e[zs].attachValidation===!1){e.send(r);return}e.request.validationError=r}t[zs].preHandler!==null?eRe(t[zs].preHandler,t,e,qP):qP(null,t,e)}function qP(t,e,r){if(r.sent)return;let n=e[zs];if(!Th.hasSubscribers||n[rRe]===null)zz(t,e,r);else{let i={request:e,reply:r,async:!1,route:{url:n.config.url,method:n.config.method}};Th.start.runStores(i,zz,void 0,t,e,r,i)}}function zz(t,e,r,n){let i=e[zs];try{if(t!=null){r[l0]=!0,r.send(t),n&&(n.error=t,Th.error.publish(n));return}let s;try{s=i.handler(e,r)}catch(o){n&&(n.error=o,Th.error.publish(n)),r[l0]=!0,r.send(o);return}s!==void 0&&(s!==null&&typeof s.then=="function"?tRe(s,r,n):r.send(s))}finally{n&&Th.end.publish(n)}}xP.exports=nRe;xP.exports[Symbol.for("internals")]={handler:Ol,preHandlerCallback:qP}});var Gz=g((jet,Wz)=>{"use strict";function Pc(){}var iRe={fatal:Pc,error:Pc,warn:Pc,info:Pc,debug:Pc,trace:Pc};Object.defineProperty(Wz,"exports",{get(){return Object.create(iRe)}})});var LP=g((Met,Jz)=>{"use strict";var Ph=t=>t&&typeof t.message=="string",MP=t=>{if(!t)return;let e=t.cause;if(typeof e=="function"){let r=t.cause();return Ph(r)?r:void 0}else return Ph(e)?e:void 0},Kz=(t,e)=>{if(!Ph(t))return"";let r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;let n=MP(t);return n?(e.add(t),r+`
caused by: `+Kz(n,e)):r},sRe=t=>Kz(t,new Set),Yz=(t,e,r)=>{if(!Ph(t))return"";let n=r?"":t.message||"";if(e.has(t))return n+": ...";let i=MP(t);if(i){e.add(t);let s=typeof t.cause=="function";return n+(s?"":": ")+Yz(i,e,s)}else return n},oRe=t=>Yz(t,new Set);Jz.exports={isErrorLike:Ph,getErrorCause:MP,stackWithCauses:sRe,messageWithCauses:oRe}});var DP=g((Let,Xz)=>{"use strict";var aRe=Symbol("circular-ref-tag"),u0=Symbol("pino-raw-err-ref"),Qz=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[u0]},set:function(t){this[u0]=t}}});Object.defineProperty(Qz,u0,{writable:!0,value:{}});Xz.exports={pinoErrProto:Qz,pinoErrorSymbols:{seen:aRe,rawSymbol:u0}}});var tW=g((Det,eW)=>{"use strict";eW.exports=UP;var{messageWithCauses:lRe,stackWithCauses:uRe,isErrorLike:Zz}=LP(),{pinoErrProto:cRe,pinoErrorSymbols:fRe}=DP(),{seen:FP}=fRe,{toString:dRe}=Object.prototype;function UP(t){if(!Zz(t))return t;t[FP]=void 0;let e=Object.create(cRe);e.type=dRe.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=lRe(t),e.stack=uRe(t),Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>UP(r)));for(let r in t)if(e[r]===void 0){let n=t[r];Zz(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,FP)&&(e[r]=UP(n)):e[r]=n}return delete t[FP],e.raw=t,e}});var nW=g((Fet,rW)=>{"use strict";rW.exports=f0;var{isErrorLike:BP}=LP(),{pinoErrProto:hRe,pinoErrorSymbols:pRe}=DP(),{seen:c0}=pRe,{toString:mRe}=Object.prototype;function f0(t){if(!BP(t))return t;t[c0]=void 0;let e=Object.create(hRe);e.type=mRe.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=t.message,e.stack=t.stack,Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>f0(r))),BP(t.cause)&&!Object.prototype.hasOwnProperty.call(t.cause,c0)&&(e.cause=f0(t.cause));for(let r in t)if(e[r]===void 0){let n=t[r];BP(n)?Object.prototype.hasOwnProperty.call(n,c0)||(e[r]=f0(n)):e[r]=n}return delete t[c0],e.raw=t,e}});var aW=g((Uet,oW)=>{"use strict";oW.exports={mapHttpRequest:gRe,reqSerializer:sW};var VP=Symbol("pino-raw-req-ref"),iW=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[VP]},set:function(t){this[VP]=t}}});Object.defineProperty(iW,VP,{writable:!0,value:{}});function sW(t){let e=t.info||t.socket,r=Object.create(iW);if(r.id=typeof t.id=="function"?t.id():t.id||(t.info?t.info.id:void 0),r.method=t.method,t.originalUrl)r.url=t.originalUrl;else{let n=t.path;r.url=typeof n=="string"?n:t.url?t.url.path||t.url:void 0}return t.query&&(r.query=t.query),t.params&&(r.params=t.params),r.headers=t.headers,r.remoteAddress=e&&e.remoteAddress,r.remotePort=e&&e.remotePort,r.raw=t.raw||t,r}function gRe(t){return{req:sW(t)}}});var fW=g((Bet,cW)=>{"use strict";cW.exports={mapHttpResponse:yRe,resSerializer:uW};var HP=Symbol("pino-raw-res-ref"),lW=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[HP]},set:function(t){this[HP]=t}}});Object.defineProperty(lW,HP,{writable:!0,value:{}});function uW(t){let e=Object.create(lW);return e.statusCode=t.headersSent?t.statusCode:null,e.headers=t.getHeaders?t.getHeaders():t._headers,e.raw=t,e}function yRe(t){return{res:uW(t)}}});var WP=g((Vet,dW)=>{"use strict";var zP=tW(),_Re=nW(),d0=aW(),h0=fW();dW.exports={err:zP,errWithCause:_Re,mapHttpRequest:d0.mapHttpRequest,mapHttpResponse:h0.mapHttpResponse,req:d0.reqSerializer,res:h0.resSerializer,wrapErrorSerializer:function(e){return e===zP?e:function(n){return e(zP(n))}},wrapRequestSerializer:function(e){return e===d0.reqSerializer?e:function(n){return e(d0.reqSerializer(n))}},wrapResponseSerializer:function(e){return e===h0.resSerializer?e:function(n){return e(h0.resSerializer(n))}}}});var GP=g((Het,hW)=>{"use strict";function bRe(t,e){return e}hW.exports=function(){let e=Error.prepareStackTrace;Error.prepareStackTrace=bRe;let r=new Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let s of n)s&&i.push(s.getFileName());return i}});var mW=g((zet,pW)=>{"use strict";pW.exports=vRe;function vRe(t={}){let{ERR_PATHS_MUST_BE_STRINGS:e=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=t;return function({paths:i}){i.forEach(s=>{if(typeof s!="string")throw Error(e());try{if(//.test(s))throw Error();let o=(s[0]==="["?"":".")+s.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(o)||/\/\*/.test(o))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${o}
            if ([o${o}].length !== 1) throw Error()`)()}catch{throw Error(r(s))}})}}});var p0=g((Wet,gW)=>{"use strict";gW.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var _W=g((Get,yW)=>{"use strict";var wRe=p0();yW.exports=ERe;function ERe({paths:t}){let e=[];var r=0;let n=t.reduce(function(i,s,o){var a=s.match(wRe).map(c=>c.replace(/'|"|`/g,""));let l=s[0]==="[";a=a.map(c=>c[0]==="["?c.substr(1,c.length-2):c);let u=a.indexOf("*");if(u>-1){let c=a.slice(0,u),f=c.join("."),h=a.slice(u+1,a.length),d=h.length>0;r++,e.push({before:c,beforeStr:f,after:h,nested:d})}else i[s]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(s),leadingBracket:l};return i},{});return{wildcards:e,wcLen:r,secret:n}}});var vW=g((Ket,bW)=>{"use strict";var SRe=p0();bW.exports=RRe;function RRe({secret:t,serialize:e,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:s},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${ORe(n,e)}
    }
    const { censor, secret } = this
    const originalSecret = {}
    const secretKeys = Object.keys(secret)
    for (var i = 0; i < secretKeys.length; i++) {
      originalSecret[secretKeys[i]] = secret[secretKeys[i]]
    }

    ${TRe(t,i,s)}
    this.compileRestore()
    ${PRe(r>0,i,s)}
    this.secret = originalSecret
    ${$Re(e)}
  `).bind(o);return a.state=o,e===!1&&(a.restore=l=>o.restore(l)),a}function TRe(t,e,r){return Object.keys(t).map(n=>{let{escPath:i,leadingBracket:s,path:o}=t[n],a=s?1:0,l=s?"":".",u=[];for(var c;(c=SRe.exec(n))!==null;){let[,p]=c,{index:m,input:y}=c;m>a&&u.push(y.substring(0,m-(p?0:1)))}var f=u.map(p=>`o${l}${p}`).join(" && ");f.length===0?f+=`o${l}${n} != null`:f+=` && o${l}${n} != null`;let h=`
      switch (true) {
        ${u.reverse().map(p=>`
          case o${l}${p} === censor:
            secret[${i}].circle = ${JSON.stringify(p)}
            break
        `).join(`
`)}
      }
    `,d=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${f}) {
        const val = o${l}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${l}${n} = ${e?`censor(${d})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function PRe(t,e,r){return t===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${e}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${e}, ${r})
      }
    }
  `:""}function $Re(t){return t===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function ORe(t,e){return t===!0?"throw Error('fast-redact: primitives cannot be redacted')":e===!1?"return o":"return this.serialize(o)"}});var YP=g((Yet,SW)=>{"use strict";SW.exports={groupRedact:ARe,groupRestore:IRe,nestedRedact:CRe,nestedRestore:NRe};function IRe({keys:t,values:e,target:r}){if(r==null||typeof r=="string")return;let n=t.length;for(var i=0;i<n;i++){let s=t[i];r[s]=e[i]}}function ARe(t,e,r,n,i){let s=wW(t,e);if(s==null||typeof s=="string")return{keys:null,values:null,target:s,flat:!0};let o=Object.keys(s),a=o.length,l=e.length,u=i?[...e]:void 0,c=new Array(a);for(var f=0;f<a;f++){let h=o[f];c[f]=s[h],i?(u[l]=h,s[h]=r(s[h],u)):n?s[h]=r(s[h]):s[h]=r}return{keys:o,values:c,target:s,flat:!0}}function NRe(t){for(let e=0;e<t.length;e++){let{target:r,path:n,value:i}=t[e],s=r;for(let o=n.length-1;o>0;o--)s=s[n[o]];s[n[0]]=i}}function CRe(t,e,r,n,i,s,o){let a=wW(e,r);if(a==null)return;let l=Object.keys(a),u=l.length;for(var c=0;c<u;c++){let f=l[c];kRe(t,a,f,r,n,i,s,o)}return t}function KP(t,e){return t!=null?"hasOwn"in Object?Object.hasOwn(t,e):Object.prototype.hasOwnProperty.call(t,e):!1}function kRe(t,e,r,n,i,s,o,a){let l=i.length,u=l-1,c=r;var f=-1,h,d,p,m=null,y=null,_,w,v=!1,b=0,E=0,R=qRe();if(p=h=e[r],typeof h=="object"){for(;h!=null&&++f<l&&(E+=1,r=i[f],m=p,!(r!=="*"&&!y&&!(typeof h=="object"&&r in h)));)if(!(r==="*"&&(y==="*"&&(v=!0),y=r,f!==u))){if(y){let P=Object.keys(h);for(var S=0;S<P.length;S++){let T=P[S];if(w=h[T],_=r==="*",v)R=Ws(R,T,E),b=f,p=EW(w,b-1,r,n,i,s,o,a,c,h,d,p,_,T,f,u,R,t,e[c],E+1);else if(_||typeof w=="object"&&w!==null&&r in w){if(_?p=w:p=w[r],d=f!==u?p:o?a?s(p,[...n,c,...i]):s(p):s,_){let O=$h(Ws(R,T,E),p,e[c]);t.push(O),h[T]=d}else if(w[r]!==d)if(d===void 0&&s!==void 0||KP(w,r)&&d===p)R=Ws(R,T,E);else{R=Ws(R,T,E);let O=$h(Ws(R,r,E+1),p,e[c]);t.push(O),w[r]=d}}}y=null}else{if(p=h[r],R=Ws(R,r,E),d=f!==u?p:o?a?s(p,[...n,c,...i]):s(p):s,!(KP(h,r)&&d===p||d===void 0&&s!==void 0)){let P=$h(R,p,e[c]);t.push(P),h[r]=d}h=h[r]}if(typeof h!="object")break}}}function wW(t,e){for(var r=-1,n=e.length,i=t;i!=null&&++r<n;)i=i[e[r]];return i}function EW(t,e,r,n,i,s,o,a,l,u,c,f,h,d,p,m,y,_,w,v){if(e===0&&(h||typeof t=="object"&&t!==null&&r in t)){if(h?f=t:f=t[r],c=p!==m?f:o?a?s(f,[...n,l,...i]):s(f):s,h){let b=$h(y,f,w);_.push(b),u[d]=c}else if(t[r]!==c){if(!(c===void 0&&s!==void 0||KP(t,r)&&c===f)){let b=$h(Ws(y,r,v+1),f,w);_.push(b),t[r]=c}}}for(let b in t)typeof t[b]=="object"&&(y=Ws(y,b,v),EW(t[b],e-1,r,n,i,s,o,a,l,u,c,f,h,d,p,m,y,_,w,v+1))}function qRe(){return{parent:null,key:null,children:[],depth:0}}function Ws(t,e,r){if(t.depth===r)return Ws(t.parent,e,r);var n={parent:t,key:e,depth:r,children:[]};return t.children.push(n),n}function $h(t,e,r){let n=t,i=[];do i.push(n.key),n=n.parent;while(n.parent!=null);return{path:i,value:e,target:r}}});var TW=g((Jet,RW)=>{"use strict";var{groupRestore:xRe,nestedRestore:jRe}=YP();RW.exports=MRe;function MRe(){return function(){if(this.restore){this.restore.state.secret=this.secret;return}let{secret:e,wcLen:r}=this,n=Object.keys(e),i=LRe(e,n),s=r>0,o=s?{secret:e,groupRestore:xRe,nestedRestore:jRe}:{secret:e};this.restore=Function("o",DRe(i,n,s)).bind(o),this.restore.state=o}}function LRe(t,e){return e.map(r=>{let{circle:n,escPath:i,leadingBracket:s}=t[r],a=n?`o.${n} = secret[${i}].val`:`o${s?"":"."}${r} = secret[${i}].val`,l=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${l}
      }
    `}).join("")}function DRe(t,e,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${e.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o) {
        if (o.flat === true) this.groupRestore(o)
        else this.nestedRestore(o)
        secret[k] = null
      }
    }
  `:""}
    ${t}
    return o
  `}});var $W=g((Qet,PW)=>{"use strict";PW.exports=FRe;function FRe(t){let{secret:e,censor:r,compileRestore:n,serialize:i,groupRedact:s,nestedRedact:o,wildcards:a,wcLen:l}=t,u=[{secret:e,censor:r,compileRestore:n}];return i!==!1&&u.push({serialize:i}),l>0&&u.push({groupRedact:s,nestedRedact:o,wildcards:a,wcLen:l}),Object.assign(...u)}});var AW=g((Xet,IW)=>{"use strict";var OW=mW(),URe=_W(),BRe=vW(),VRe=TW(),{groupRedact:HRe,nestedRedact:zRe}=YP(),WRe=$W(),GRe=p0(),KRe=OW(),JP=t=>t;JP.restore=JP;var YRe="[REDACTED]";QP.rx=GRe;QP.validator=OW;IW.exports=QP;function QP(t={}){let e=Array.from(new Set(t.paths||[])),r="serialize"in t&&(t.serialize===!1||typeof t.serialize=="function")?t.serialize:JSON.stringify,n=t.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in t?t.censor:YRe,s=typeof i=="function",o=s&&i.length>1;if(e.length===0)return r||JP;KRe({paths:e,serialize:r,censor:i});let{wildcards:a,wcLen:l,secret:u}=URe({paths:e,censor:i}),c=VRe(),f="strict"in t?t.strict:!0;return BRe({secret:u,wcLen:l,serialize:r,strict:f,isCensorFct:s,censorFctTakesPath:o},WRe({secret:u,censor:i,compileRestore:c,serialize:r,groupRedact:HRe,nestedRedact:zRe,wildcards:a,wcLen:l}))}});var $c=g((Zet,NW)=>{"use strict";var JRe=Symbol("pino.setLevel"),QRe=Symbol("pino.getLevel"),XRe=Symbol("pino.levelVal"),ZRe=Symbol("pino.levelComp"),eTe=Symbol("pino.useLevelLabels"),tTe=Symbol("pino.useOnlyCustomLevels"),rTe=Symbol("pino.mixin"),nTe=Symbol("pino.lsCache"),iTe=Symbol("pino.chindings"),sTe=Symbol("pino.asJson"),oTe=Symbol("pino.write"),aTe=Symbol("pino.redactFmt"),lTe=Symbol("pino.time"),uTe=Symbol("pino.timeSliceIndex"),cTe=Symbol("pino.stream"),fTe=Symbol("pino.stringify"),dTe=Symbol("pino.stringifySafe"),hTe=Symbol("pino.stringifiers"),pTe=Symbol("pino.end"),mTe=Symbol("pino.formatOpts"),gTe=Symbol("pino.messageKey"),yTe=Symbol("pino.errorKey"),_Te=Symbol("pino.nestedKey"),bTe=Symbol("pino.nestedKeyStr"),vTe=Symbol("pino.mixinMergeStrategy"),wTe=Symbol("pino.msgPrefix"),ETe=Symbol("pino.wildcardFirst"),STe=Symbol.for("pino.serializers"),RTe=Symbol.for("pino.formatters"),TTe=Symbol.for("pino.hooks"),PTe=Symbol.for("pino.metadata");NW.exports={setLevelSym:JRe,getLevelSym:QRe,levelValSym:XRe,levelCompSym:ZRe,useLevelLabelsSym:eTe,mixinSym:rTe,lsCacheSym:nTe,chindingsSym:iTe,asJsonSym:sTe,writeSym:oTe,serializersSym:STe,redactFmtSym:aTe,timeSym:lTe,timeSliceIndexSym:uTe,streamSym:cTe,stringifySym:fTe,stringifySafeSym:dTe,stringifiersSym:hTe,endSym:pTe,formatOptsSym:mTe,messageKeySym:gTe,errorKeySym:yTe,nestedKeySym:_Te,wildcardFirstSym:ETe,needsMetadataGsym:PTe,useOnlyCustomLevelsSym:tTe,formattersSym:RTe,hooksSym:TTe,nestedKeyStrSym:bTe,mixinMergeStrategySym:vTe,msgPrefixSym:wTe}});var e$=g((ett,xW)=>{"use strict";var ZP=AW(),{redactFmtSym:$Te,wildcardFirstSym:m0}=$c(),{rx:XP,validator:OTe}=ZP,CW=OTe({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:t=>`pino \u2013 redact paths array contains an invalid path (${t})`}),kW="[Redacted]",qW=!1;function ITe(t,e){let{paths:r,censor:n}=ATe(t),i=r.reduce((a,l)=>{XP.lastIndex=0;let u=XP.exec(l),c=XP.exec(l),f=u[1]!==void 0?u[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):u[0];if(f==="*"&&(f=m0),c===null)return a[f]=null,a;if(a[f]===null)return a;let{index:h}=c,d=`${l.substr(h,l.length-1)}`;return a[f]=a[f]||[],f!==m0&&a[f].length===0&&a[f].push(...a[m0]||[]),f===m0&&Object.keys(a).forEach(function(p){a[p]&&a[p].push(d)}),a[f].push(d),a},{}),s={[$Te]:ZP({paths:r,censor:n,serialize:e,strict:qW})},o=(...a)=>e(typeof n=="function"?n(...a):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((a,l)=>{if(i[l]===null)a[l]=u=>o(u,[l]);else{let u=typeof n=="function"?(c,f)=>n(c,[l,...f]):n;a[l]=ZP({paths:i[l],censor:u,serialize:e,strict:qW})}return a},s)}function ATe(t){if(Array.isArray(t))return t={paths:t,censor:kW},CW(t),t;let{paths:e,censor:r=kW,remove:n}=t;if(Array.isArray(e)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),CW({paths:e,censor:r}),{paths:e,censor:r}}xW.exports=ITe});var MW=g((ttt,jW)=>{"use strict";var NTe=()=>"",CTe=()=>`,"time":${Date.now()}`,kTe=()=>`,"time":${Math.round(Date.now()/1e3)}`,qTe=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;jW.exports={nullTime:NTe,epochTime:CTe,unixTime:kTe,isoTime:qTe}});var DW=g((rtt,LW)=>{"use strict";function xTe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}LW.exports=jTe;function jTe(t,e,r){var n=r&&r.stringify||xTe,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var l=e.length;if(l===0)return t;for(var u="",c=1-i,f=-1,h=t&&t.length||0,d=0;d<h;){if(t.charCodeAt(d)===37&&d+1<h){switch(f=f>-1?f:0,t.charCodeAt(d+1)){case 100:case 102:if(c>=l||e[c]==null)break;f<d&&(u+=t.slice(f,d)),u+=Number(e[c]),f=d+2,d++;break;case 105:if(c>=l||e[c]==null)break;f<d&&(u+=t.slice(f,d)),u+=Math.floor(Number(e[c])),f=d+2,d++;break;case 79:case 111:case 106:if(c>=l||e[c]===void 0)break;f<d&&(u+=t.slice(f,d));var p=typeof e[c];if(p==="string"){u+="'"+e[c]+"'",f=d+2,d++;break}if(p==="function"){u+=e[c].name||"<anonymous>",f=d+2,d++;break}u+=n(e[c]),f=d+2,d++;break;case 115:if(c>=l)break;f<d&&(u+=t.slice(f,d)),u+=String(e[c]),f=d+2,d++;break;case 37:f<d&&(u+=t.slice(f,d)),u+="%",f=d+2,d++,c--;break}++c}++d}return f===-1?t:(f<h&&(u+=t.slice(f)),u)}});var r$=g((ntt,t$)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let e=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(t,0,0,Number(r))},t=new Int32Array(new SharedArrayBuffer(4));t$.exports=e}else{let t=function(e){if((e>0&&e<1/0)===!1)throw typeof e!="number"&&typeof e!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(e);for(;n>Date.now(););};t$.exports=t}});var GW=g((itt,WW)=>{"use strict";var kt=A("fs"),MTe=A("events"),LTe=A("util").inherits,FW=A("path"),i$=r$(),DTe=A("assert"),g0=100,y0=Buffer.allocUnsafe(0),FTe=16*1024,UW="buffer",BW="utf8",[UTe,BTe]=(process.versions.node||"0.0").split(".").map(Number),VTe=UTe>=22&&BTe>=7;function VW(t,e){e._opening=!0,e._writing=!0,e._asyncDrainScheduled=!1;function r(s,o){if(s){e._reopening=!1,e._writing=!1,e._opening=!1,e.sync?process.nextTick(()=>{e.listenerCount("error")>0&&e.emit("error",s)}):e.emit("error",s);return}let a=e._reopening;e.fd=o,e.file=t,e._reopening=!1,e._opening=!1,e._writing=!1,e.sync?process.nextTick(()=>e.emit("ready")):e.emit("ready"),!e.destroyed&&(!e._writing&&e._len>e.minLength||e._flushPending?e._actualWrite():a&&process.nextTick(()=>e.emit("drain")))}let n=e.append?"a":"w",i=e.mode;if(e.sync)try{e.mkdir&&kt.mkdirSync(FW.dirname(t),{recursive:!0});let s=kt.openSync(t,n,i);r(null,s)}catch(s){throw r(s),s}else e.mkdir?kt.mkdir(FW.dirname(t),{recursive:!0},s=>{if(s)return r(s);kt.open(t,n,i,r)}):kt.open(t,n,i,r)}function vi(t){if(!(this instanceof vi))return new vi(t);let{fd:e,dest:r,minLength:n,maxLength:i,maxWrite:s,periodicFlush:o,sync:a,append:l=!0,mkdir:u,retryEAGAIN:c,fsync:f,contentMode:h,mode:d}=t||{};e=e||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=s||FTe,this._periodicFlush=o||0,this._periodicFlushTimer=void 0,this.sync=a||!1,this.writable=!0,this._fsync=f||!1,this.append=l||!1,this.mode=d,this.retryEAGAIN=c||(()=>!0),this.mkdir=u||!1;let p,m;if(h===UW)this._writingBuf=y0,this.write=WTe,this.flush=KTe,this.flushSync=JTe,this._actualWrite=XTe,p=()=>kt.writeSync(this.fd,this._writingBuf),m=()=>kt.write(this.fd,this._writingBuf,this.release);else if(h===void 0||h===BW)this._writingBuf="",this.write=zTe,this.flush=GTe,this.flushSync=YTe,this._actualWrite=QTe,p=()=>kt.writeSync(this.fd,this._writingBuf,"utf8"),m=()=>kt.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${BW}" and "${UW}", but passed ${h}`);if(typeof e=="number")this.fd=e,process.nextTick(()=>this.emit("ready"));else if(typeof e=="string")VW(e,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(y,_)=>{if(y){if((y.code==="EAGAIN"||y.code==="EBUSY")&&this.retryEAGAIN(y,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{i$(g0),this.release(void 0,0)}catch(b){this.release(b)}else setTimeout(m,g0);else this._writing=!1,this.emit("error",y);return}this.emit("write",_);let w=n$(this._writingBuf,this._len,_);if(this._len=w.len,this._writingBuf=w.writingBuf,this._writingBuf.length){if(!this.sync){m();return}try{do{let b=p(),E=n$(this._writingBuf,this._len,b);this._len=E.len,this._writingBuf=E.writingBuf}while(this._writingBuf.length)}catch(b){this.release(b);return}}this._fsync&&kt.fsyncSync(this.fd);let v=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):v>this.minLength?this._actualWrite():this._ending?v>0?this._actualWrite():(this._writing=!1,_0(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(HTe,this)):this.emit("drain"))},this.on("newListener",function(y){y==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function n$(t,e,r){return typeof t=="string"&&Buffer.byteLength(t)!==r&&(r=Buffer.from(t).subarray(0,r).toString().length),e=Math.max(e-r,0),t=t.slice(r),{writingBuf:t,len:e}}function HTe(t){t.listenerCount("drain")>0&&(t._asyncDrainScheduled=!1,t.emit("drain"))}LTe(vi,MTe);function HW(t,e){return t.length===0?y0:t.length===1?t[0]:Buffer.concat(t,e)}function zTe(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||r[r.length-1].length+t.length>this.maxWrite?r.push(""+t):r[r.length-1]+=t,this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function WTe(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs,n=this._lens;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||n[n.length-1]+t.length>this.maxWrite?(r.push([t]),n.push(t.length)):(r[r.length-1].push(t),n[n.length-1]+=t.length),this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function zW(t){this._flushPending=!0;let e=()=>{if(this._fsync)this._flushPending=!1,t();else try{kt.fsync(this.fd,n=>{this._flushPending=!1,t(n)})}catch(n){t(n)}this.off("error",r)},r=n=>{this._flushPending=!1,t(n),this.off("drain",e)};this.once("drain",e),this.once("error",r)}function GTe(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&zW.call(this,t),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function KTe(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&zW.call(this,t),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}vi.prototype.reopen=function(t){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(t)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(t&&(this.file=t),this._reopening=!0,this._writing)return;let e=this.fd;this.once("ready",()=>{e!==this.fd&&kt.close(e,r=>{if(r)return this.emit("error",r)})}),VW(this.file,this)};vi.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():_0(this)))};function YTe(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let t="";for(;this._bufs.length||t;){t.length<=0&&(t=this._bufs[0]);try{let e=kt.writeSync(this.fd,t,"utf8"),r=n$(t,this._len,e);t=r.writingBuf,this._len=r.len,t.length<=0&&this._bufs.shift()}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;i$(g0)}}try{kt.fsyncSync(this.fd)}catch{}}function JTe(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=y0);let t=y0;for(;this._bufs.length||t.length;){t.length<=0&&(t=HW(this._bufs[0],this._lens[0]));try{let e=kt.writeSync(this.fd,t);t=t.subarray(e),this._len=Math.max(this._len-e,0),t.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;i$(g0)}}}vi.prototype.destroy=function(){this.destroyed||_0(this)};function QTe(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let e=kt.writeSync(this.fd,this._writingBuf,"utf8");t(null,e)}catch(e){t(e)}else kt.write(this.fd,this._writingBuf,"utf8",t)}function XTe(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:HW(this._bufs.shift(),this._lens.shift()),this.sync)try{let e=kt.writeSync(this.fd,this._writingBuf);t(null,e)}catch(e){t(e)}else VTe&&(this._writingBuf=Buffer.from(this._writingBuf)),kt.write(this.fd,this._writingBuf,t)}function _0(t){if(t.fd===-1){t.once("ready",_0.bind(null,t));return}t._periodicFlushTimer!==void 0&&clearInterval(t._periodicFlushTimer),t.destroyed=!0,t._bufs=[],t._lens=[],DTe(typeof t.fd=="number",`sonic.fd must be a number, got ${typeof t.fd}`);try{kt.fsync(t.fd,e)}catch{}function e(){t.fd!==1&&t.fd!==2?kt.close(t.fd,r):r()}function r(n){if(n){t.emit("error",n);return}t._ending&&!t._writing&&t.emit("finish"),t.emit("close")}}vi.SonicBoom=vi;vi.default=vi;WW.exports=vi});var s$=g((stt,XW)=>{"use strict";var wi={exit:[],beforeExit:[]},KW={exit:tPe,beforeExit:rPe},Oc;function ZTe(){Oc===void 0&&(Oc=new FinalizationRegistry(nPe))}function ePe(t){wi[t].length>0||process.on(t,KW[t])}function YW(t){wi[t].length>0||(process.removeListener(t,KW[t]),wi.exit.length===0&&wi.beforeExit.length===0&&(Oc=void 0))}function tPe(){JW("exit")}function rPe(){JW("beforeExit")}function JW(t){for(let e of wi[t]){let r=e.deref(),n=e.fn;r!==void 0&&n(r,t)}wi[t]=[]}function nPe(t){for(let e of["exit","beforeExit"]){let r=wi[e].indexOf(t);wi[e].splice(r,r+1),YW(e)}}function QW(t,e,r){if(e===void 0)throw new Error("the object can't be undefined");ePe(t);let n=new WeakRef(e);n.fn=r,ZTe(),Oc.register(e,n),wi[t].push(n)}function iPe(t,e){QW("exit",t,e)}function sPe(t,e){QW("beforeExit",t,e)}function oPe(t){if(Oc!==void 0){Oc.unregister(t);for(let e of["exit","beforeExit"])wi[e]=wi[e].filter(r=>{let n=r.deref();return n&&n!==t}),YW(e)}}XW.exports={register:iPe,registerBeforeExit:sPe,unregister:oPe}});var ZW=g((ott,aPe)=>{aPe.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var t9=g((att,e9)=>{"use strict";function lPe(t,e,r,n,i){let s=Date.now()+n,o=Atomics.load(t,e);if(o===r){i(null,"ok");return}let a=o,l=u=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(t,e),o===a?l(u>=1e3?1e3:u*2):o===r?i(null,"ok"):i(null,"not-equal")},u)};l(1)}function uPe(t,e,r,n,i){let s=Date.now()+n,o=Atomics.load(t,e);if(o!==r){i(null,"ok");return}let a=l=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{o=Atomics.load(t,e),o!==r?i(null,"ok"):a(l>=1e3?1e3:l*2)},l)};a(1)}e9.exports={wait:lPe,waitDiff:uPe}});var n9=g((ltt,r9)=>{"use strict";r9.exports={WRITE_INDEX:4,READ_INDEX:8}});var l9=g((utt,a9)=>{"use strict";var{version:cPe}=ZW(),{EventEmitter:fPe}=A("events"),{Worker:dPe}=A("worker_threads"),{join:hPe}=A("path"),{pathToFileURL:pPe}=A("url"),{wait:mPe}=t9(),{WRITE_INDEX:en,READ_INDEX:cs}=n9(),gPe=A("buffer"),yPe=A("assert"),q=Symbol("kImpl"),_Pe=gPe.constants.MAX_STRING_LENGTH,Oh=class{constructor(e){this._value=e}deref(){return this._value}},v0=class{register(){}unregister(){}},bPe=process.env.NODE_V8_COVERAGE?v0:global.FinalizationRegistry||v0,vPe=process.env.NODE_V8_COVERAGE?Oh:global.WeakRef||Oh,i9=new bPe(t=>{t.exited||t.terminate()});function wPe(t,e){let{filename:r,workerData:n}=e,s=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||hPe(__dirname,"lib","worker.js"),o=new dPe(s,{...e.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:pPe(r).href,dataBuf:t[q].dataBuf,stateBuf:t[q].stateBuf,workerData:{$context:{threadStreamVersion:cPe},...n}}});return o.stream=new Oh(t),o.on("message",EPe),o.on("exit",o9),i9.register(t,o),o}function s9(t){yPe(!t[q].sync),t[q].needDrain&&(t[q].needDrain=!1,t.emit("drain"))}function b0(t){let e=Atomics.load(t[q].state,en),r=t[q].data.length-e;if(r>0){if(t[q].buf.length===0){t[q].flushing=!1,t[q].ending?c$(t):t[q].needDrain&&process.nextTick(s9,t);return}let n=t[q].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(t[q].buf=t[q].buf.slice(r),w0(t,n,b0.bind(null,t))):t.flush(()=>{if(!t.destroyed){for(Atomics.store(t[q].state,cs,0),Atomics.store(t[q].state,en,0);i>t[q].data.length;)r=r/2,n=t[q].buf.slice(0,r),i=Buffer.byteLength(n);t[q].buf=t[q].buf.slice(r),w0(t,n,b0.bind(null,t))}})}else if(r===0){if(e===0&&t[q].buf.length===0)return;t.flush(()=>{Atomics.store(t[q].state,cs,0),Atomics.store(t[q].state,en,0),b0(t)})}else fs(t,new Error("overwritten"))}function EPe(t){let e=this.stream.deref();if(e===void 0){this.exited=!0,this.terminate();return}switch(t.code){case"READY":this.stream=new vPe(e),e.flush(()=>{e[q].ready=!0,e.emit("ready")});break;case"ERROR":fs(e,t.err);break;case"EVENT":Array.isArray(t.args)?e.emit(t.name,...t.args):e.emit(t.name,t.args);break;case"WARNING":process.emitWarning(t.err);break;default:fs(e,new Error("this should not happen: "+t.code))}}function o9(t){let e=this.stream.deref();e!==void 0&&(i9.unregister(e),e.worker.exited=!0,e.worker.off("exit",o9),fs(e,t!==0?new Error("the worker thread exited"):null))}var a$=class extends fPe{constructor(e={}){if(super(),e.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[q]={},this[q].stateBuf=new SharedArrayBuffer(128),this[q].state=new Int32Array(this[q].stateBuf),this[q].dataBuf=new SharedArrayBuffer(e.bufferSize||4*1024*1024),this[q].data=Buffer.from(this[q].dataBuf),this[q].sync=e.sync||!1,this[q].ending=!1,this[q].ended=!1,this[q].needDrain=!1,this[q].destroyed=!1,this[q].flushing=!1,this[q].ready=!1,this[q].finished=!1,this[q].errored=null,this[q].closed=!1,this[q].buf="",this.worker=wPe(this,e),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(e){if(this[q].destroyed)return l$(this,new Error("the worker has exited")),!1;if(this[q].ending)return l$(this,new Error("the worker is ending")),!1;if(this[q].flushing&&this[q].buf.length+e.length>=_Pe)try{o$(this),this[q].flushing=!0}catch(r){return fs(this,r),!1}if(this[q].buf+=e,this[q].sync)try{return o$(this),!0}catch(r){return fs(this,r),!1}return this[q].flushing||(this[q].flushing=!0,setImmediate(b0,this)),this[q].needDrain=this[q].data.length-this[q].buf.length-Atomics.load(this[q].state,en)<=0,!this[q].needDrain}end(){this[q].destroyed||(this[q].ending=!0,c$(this))}flush(e){if(this[q].destroyed){typeof e=="function"&&process.nextTick(e,new Error("the worker has exited"));return}let r=Atomics.load(this[q].state,en);mPe(this[q].state,cs,r,1/0,(n,i)=>{if(n){fs(this,n),process.nextTick(e,n);return}if(i==="not-equal"){this.flush(e);return}process.nextTick(e)})}flushSync(){this[q].destroyed||(o$(this),u$(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[q].ready}get destroyed(){return this[q].destroyed}get closed(){return this[q].closed}get writable(){return!this[q].destroyed&&!this[q].ending}get writableEnded(){return this[q].ending}get writableFinished(){return this[q].finished}get writableNeedDrain(){return this[q].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[q].errored}};function l$(t,e){setImmediate(()=>{t.emit("error",e)})}function fs(t,e){t[q].destroyed||(t[q].destroyed=!0,e&&(t[q].errored=e,l$(t,e)),t.worker.exited?setImmediate(()=>{t[q].closed=!0,t.emit("close")}):t.worker.terminate().catch(()=>{}).then(()=>{t[q].closed=!0,t.emit("close")}))}function w0(t,e,r){let n=Atomics.load(t[q].state,en),i=Buffer.byteLength(e);return t[q].data.write(e,n),Atomics.store(t[q].state,en,n+i),Atomics.notify(t[q].state,en),r(),!0}function c$(t){if(!(t[q].ended||!t[q].ending||t[q].flushing)){t[q].ended=!0;try{t.flushSync();let e=Atomics.load(t[q].state,cs);Atomics.store(t[q].state,en,-1),Atomics.notify(t[q].state,en);let r=0;for(;e!==-1;){if(Atomics.wait(t[q].state,cs,e,1e3),e=Atomics.load(t[q].state,cs),e===-2){fs(t,new Error("end() failed"));return}if(++r===10){fs(t,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{t[q].finished=!0,t.emit("finish")})}catch(e){fs(t,e)}}}function o$(t){let e=()=>{t[q].ending?c$(t):t[q].needDrain&&process.nextTick(s9,t)};for(t[q].flushing=!1;t[q].buf.length!==0;){let r=Atomics.load(t[q].state,en),n=t[q].data.length-r;if(n===0){u$(t),Atomics.store(t[q].state,cs,0),Atomics.store(t[q].state,en,0);continue}else if(n<0)throw new Error("overwritten");let i=t[q].buf.slice(0,n),s=Buffer.byteLength(i);if(s<=n)t[q].buf=t[q].buf.slice(n),w0(t,i,e);else{for(u$(t),Atomics.store(t[q].state,cs,0),Atomics.store(t[q].state,en,0);s>t[q].buf.length;)n=n/2,i=t[q].buf.slice(0,n),s=Buffer.byteLength(i);t[q].buf=t[q].buf.slice(n),w0(t,i,e)}}}function u$(t){if(t[q].flushing)throw new Error("unable to flush while flushing");let e=Atomics.load(t[q].state,en),r=0;for(;;){let n=Atomics.load(t[q].state,cs);if(n===-2)throw Error("_flushSync failed");if(n!==e)Atomics.wait(t[q].state,cs,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}a9.exports=a$});var h$=g((ctt,u9)=>{"use strict";var{createRequire:SPe}=A("module"),RPe=GP(),{join:f$,isAbsolute:TPe,sep:PPe}=A("node:path"),$Pe=r$(),d$=s$(),OPe=l9();function IPe(t){d$.register(t,NPe),d$.registerBeforeExit(t,CPe),t.on("close",function(){d$.unregister(t)})}function APe(t,e,r,n){let i=new OPe({filename:t,workerData:e,workerOpts:r,sync:n});i.on("ready",s),i.on("close",function(){process.removeListener("exit",o)}),process.on("exit",o);function s(){process.removeListener("exit",o),i.unref(),r.autoEnd!==!1&&IPe(i)}function o(){i.closed||(i.flushSync(),$Pe(100),i.end())}return i}function NPe(t){t.ref(),t.flushSync(),t.end(),t.once("close",function(){t.unref()})}function CPe(t){t.flushSync()}function kPe(t){let{pipeline:e,targets:r,levels:n,dedupe:i,worker:s={},caller:o=RPe(),sync:a=!1}=t,l={...t.options},u=typeof o=="string"?[o]:o,c="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},f=t.target;if(f&&r)throw new Error("only one of target or targets can be specified");return r?(f=c["pino-worker"]||f$(__dirname,"worker.js"),l.targets=r.filter(d=>d.target).map(d=>({...d,target:h(d.target)})),l.pipelines=r.filter(d=>d.pipeline).map(d=>d.pipeline.map(p=>({...p,level:d.level,target:h(p.target)})))):e&&(f=c["pino-worker"]||f$(__dirname,"worker.js"),l.pipelines=[e.map(d=>({...d,target:h(d.target)}))]),n&&(l.levels=n),i&&(l.dedupe=i),l.pinoWillSendConfig=!0,APe(h(f),l,s,a);function h(d){if(d=c[d]||d,TPe(d)||d.indexOf("file://")===0)return d;if(d==="pino/file")return f$(__dirname,"..","file.js");let p;for(let m of u)try{let y=m==="node:repl"?process.cwd()+PPe:m;p=SPe(y).resolve(d);break}catch{continue}if(!p)throw new Error(`unable to determine transport target for "${d}"`);return p}}u9.exports=kPe});var R0=g((ftt,v9)=>{"use strict";var c9=DW(),{mapHttpRequest:qPe,mapHttpResponse:xPe}=WP(),m$=GW(),f9=s$(),{lsCacheSym:jPe,chindingsSym:p9,writeSym:d9,serializersSym:m9,formatOptsSym:h9,endSym:MPe,stringifiersSym:g9,stringifySym:y9,stringifySafeSym:g$,wildcardFirstSym:_9,nestedKeySym:LPe,formattersSym:b9,messageKeySym:DPe,errorKeySym:FPe,nestedKeyStrSym:UPe,msgPrefixSym:E0}=$c(),{isMainThread:BPe}=A("worker_threads"),VPe=h$();function Ic(){}function HPe(t,e){if(!e)return r;return function(...i){e.call(this,i,r,t)};function r(n,...i){if(typeof n=="object"){let s=n;n!==null&&(n.method&&n.headers&&n.socket?n=qPe(n):typeof n.setHeader=="function"&&(n=xPe(n)));let o;s===null&&i.length===0?o=[null]:(s=i.shift(),o=i),typeof this[E0]=="string"&&s!==void 0&&s!==null&&(s=this[E0]+s),this[d9](n,c9(s,o,this[h9]),t)}else{let s=n===void 0?i.shift():n;typeof this[E0]=="string"&&s!==void 0&&s!==null&&(s=this[E0]+s),this[d9](null,c9(s,i,this[h9]),t)}}}function p$(t){let e="",r=0,n=!1,i=255,s=t.length;if(s>100)return JSON.stringify(t);for(var o=0;o<s&&i>=32;o++)i=t.charCodeAt(o),(i===34||i===92)&&(e+=t.slice(r,o)+"\\",r=o,n=!0);return n?e+=t.slice(r):e=t,i<32?JSON.stringify(t):'"'+e+'"'}function zPe(t,e,r,n){let i=this[y9],s=this[g$],o=this[g9],a=this[MPe],l=this[p9],u=this[m9],c=this[b9],f=this[DPe],h=this[FPe],d=this[jPe][r]+n;d=d+l;let p;c.log&&(t=c.log(t));let m=o[_9],y="";for(let w in t)if(p=t[w],Object.prototype.hasOwnProperty.call(t,w)&&p!==void 0){u[w]?p=u[w](p):w===h&&u.err&&(p=u.err(p));let v=o[w]||m;switch(typeof p){case"undefined":case"function":continue;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":v&&(p=v(p));break;case"string":p=(v||p$)(p);break;default:p=(v||i)(p,s)}if(p===void 0)continue;let b=p$(w);y+=","+b+":"+p}let _="";if(e!==void 0){p=u[f]?u[f](e):e;let w=o[f]||m;switch(typeof p){case"function":break;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":w&&(p=w(p)),_=',"'+f+'":'+p;break;case"string":p=(w||p$)(p),_=',"'+f+'":'+p;break;default:p=(w||i)(p,s),_=',"'+f+'":'+p}}return this[LPe]&&y?d+this[UPe]+y.slice(1)+"}"+_+a:d+y+_+a}function WPe(t,e){let r,n=t[p9],i=t[y9],s=t[g$],o=t[g9],a=o[_9],l=t[m9],u=t[b9].bindings;e=u(e);for(let c in e)if(r=e[c],(c!=="level"&&c!=="serializers"&&c!=="formatters"&&c!=="customLevels"&&e.hasOwnProperty(c)&&r!==void 0)===!0){if(r=l[c]?l[c](r):r,r=(o[c]||a||i)(r,s),r===void 0)continue;n+=',"'+c+'":'+r}return n}function GPe(t){return t.write!==t.constructor.prototype.write}var KPe=process.env.NODE_V8_COVERAGE||process.env.V8_COVERAGE;function S0(t){let e=new m$(t);return e.on("error",r),!KPe&&!t.sync&&BPe&&(f9.register(e,YPe),e.on("close",function(){f9.unregister(e)})),e;function r(n){if(n.code==="EPIPE"){e.write=Ic,e.end=Ic,e.flushSync=Ic,e.destroy=Ic;return}e.removeListener("error",r),e.emit("error",n)}}function YPe(t,e){t.destroyed||(e==="beforeExit"?(t.flush(),t.on("drain",function(){t.end()})):t.flushSync())}function JPe(t){return function(r,n,i={},s){if(typeof i=="string")s=S0({dest:i}),i={};else if(typeof s=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");s=S0({dest:s})}else if(i instanceof m$||i.writable||i._writableState)s=i,i={};else if(i.transport){if(i.transport instanceof m$||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let l;i.customLevels&&(l=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),s=VPe({caller:n,...i.transport,levels:l})}if(i=Object.assign({},t,i),i.serializers=Object.assign({},t.serializers,i.serializers),i.formatters=Object.assign({},t.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=i;return o===!1&&(i.level="silent"),a||(i.onChild=Ic),s||(GPe(process.stdout)?s=process.stdout:s=S0({fd:process.stdout.fd||1})),{opts:i,stream:s}}}function QPe(t,e){try{return JSON.stringify(t)}catch{try{return(e||this[g$])(t)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function XPe(t,e,r){return{level:t,bindings:e,log:r}}function ZPe(t){let e=Number(t);return typeof t=="string"&&Number.isFinite(e)?e:t===void 0?1:t}v9.exports={noop:Ic,buildSafeSonicBoom:S0,asChindings:WPe,asJson:zPe,genLog:HPe,createArgsNormalizer:JPe,stringify:QPe,buildFormatters:XPe,normalizeDestFileDescriptor:ZPe}});var T0=g((dtt,w9)=>{"use strict";var e$e={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},t$e={ASC:"ASC",DESC:"DESC"};w9.exports={DEFAULT_LEVELS:e$e,SORTING_ORDER:t$e}});var b$=g((htt,T9)=>{"use strict";var{lsCacheSym:r$e,levelValSym:y$,useOnlyCustomLevelsSym:n$e,streamSym:i$e,formattersSym:s$e,hooksSym:o$e,levelCompSym:E9}=$c(),{noop:a$e,genLog:Il}=R0(),{DEFAULT_LEVELS:ds,SORTING_ORDER:S9}=T0(),R9={fatal:t=>{let e=Il(ds.fatal,t);return function(...r){let n=this[i$e];if(e.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:t=>Il(ds.error,t),warn:t=>Il(ds.warn,t),info:t=>Il(ds.info,t),debug:t=>Il(ds.debug,t),trace:t=>Il(ds.trace,t)},_$=Object.keys(ds).reduce((t,e)=>(t[ds[e]]=e,t),{}),l$e=Object.keys(_$).reduce((t,e)=>(t[e]='{"level":'+Number(e),t),{});function u$e(t){let e=t[s$e].level,{labels:r}=t.levels,n={};for(let i in r){let s=e(r[i],Number(i));n[i]=JSON.stringify(s).slice(0,-1)}return t[r$e]=n,t}function c$e(t,e){if(e)return!1;switch(t){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function f$e(t){let{labels:e,values:r}=this.levels;if(typeof t=="number"){if(e[t]===void 0)throw Error("unknown level value"+t);t=e[t]}if(r[t]===void 0)throw Error("unknown level "+t);let n=this[y$],i=this[y$]=r[t],s=this[n$e],o=this[E9],a=this[o$e].logMethod;for(let l in r){if(o(r[l],i)===!1){this[l]=a$e;continue}this[l]=c$e(l,s)?R9[l](a):Il(r[l],a)}this.emit("level-change",t,i,e[n],n,this)}function d$e(t){let{levels:e,levelVal:r}=this;return e&&e.labels?e.labels[r]:""}function h$e(t){let{values:e}=this.levels,r=e[t];return r!==void 0&&this[E9](r,this[y$])}function p$e(t,e,r){return t===S9.DESC?e<=r:e>=r}function m$e(t){return typeof t=="string"?p$e.bind(null,t):t}function g$e(t=null,e=!1){let r=t?Object.keys(t).reduce((s,o)=>(s[t[o]]=o,s),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),e?null:_$,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),e?null:ds,t);return{labels:n,values:i}}function y$e(t,e,r){if(typeof t=="number"){if(![].concat(Object.keys(e||{}).map(s=>e[s]),r?[]:Object.keys(_$).map(s=>+s),1/0).includes(t))throw Error(`default level:${t} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:ds,e);if(!(t in n))throw Error(`default level:${t} must be included in custom levels`)}function _$e(t,e){let{labels:r,values:n}=t;for(let i in e){if(i in n)throw Error("levels cannot be overridden");if(e[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}function b$e(t){if(typeof t!="function"&&!(typeof t=="string"&&Object.values(S9).includes(t)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}T9.exports={initialLsCache:l$e,genLsCache:u$e,levelMethods:R9,getLevel:d$e,setLevel:f$e,isLevelEnabled:h$e,mappings:g$e,assertNoLevelCollisions:_$e,assertDefaultLevelFound:y$e,genLevelComparison:m$e,assertLevelComparison:b$e}});var v$=g((ptt,P9)=>{"use strict";P9.exports={version:"9.6.0"}});var M9=g((gtt,j9)=>{"use strict";var{EventEmitter:v$e}=A("node:events"),{lsCacheSym:w$e,levelValSym:E$e,setLevelSym:E$,getLevelSym:$9,chindingsSym:S$,parsedChindingsSym:S$e,mixinSym:R$e,asJsonSym:C9,writeSym:T$e,mixinMergeStrategySym:P$e,timeSym:$$e,timeSliceIndexSym:O$e,streamSym:k9,serializersSym:Al,formattersSym:w$,errorKeySym:I$e,messageKeySym:A$e,useOnlyCustomLevelsSym:N$e,needsMetadataGsym:C$e,redactFmtSym:k$e,stringifySym:q$e,formatOptsSym:x$e,stringifiersSym:j$e,msgPrefixSym:O9,hooksSym:M$e}=$c(),{getLevel:L$e,setLevel:D$e,isLevelEnabled:F$e,mappings:U$e,initialLsCache:B$e,genLsCache:V$e,assertNoLevelCollisions:H$e}=b$(),{asChindings:q9,asJson:z$e,buildFormatters:I9,stringify:A9}=R0(),{version:W$e}=v$(),G$e=e$(),K$e=class{},x9={constructor:K$e,child:Y$e,bindings:J$e,setBindings:Q$e,flush:tOe,isLevelEnabled:F$e,version:W$e,get level(){return this[$9]()},set level(t){this[E$](t)},get levelVal(){return this[E$e]},set levelVal(t){throw Error("levelVal is read-only")},[w$e]:B$e,[T$e]:Z$e,[C9]:z$e,[$9]:L$e,[E$]:D$e};Object.setPrototypeOf(x9,v$e.prototype);j9.exports=function(){return Object.create(x9)};var N9=t=>t;function Y$e(t,e){if(!t)throw Error("missing bindings for child Pino");e=e||{};let r=this[Al],n=this[w$],i=Object.create(this);if(e.hasOwnProperty("serializers")===!0){i[Al]=Object.create(null);for(let c in r)i[Al][c]=r[c];let l=Object.getOwnPropertySymbols(r);for(var s=0;s<l.length;s++){let c=l[s];i[Al][c]=r[c]}for(let c in e.serializers)i[Al][c]=e.serializers[c];let u=Object.getOwnPropertySymbols(e.serializers);for(var o=0;o<u.length;o++){let c=u[o];i[Al][c]=e.serializers[c]}}else i[Al]=r;if(e.hasOwnProperty("formatters")){let{level:l,bindings:u,log:c}=e.formatters;i[w$]=I9(l||n.level,u||N9,c||n.log)}else i[w$]=I9(n.level,N9,n.log);if(e.hasOwnProperty("customLevels")===!0&&(H$e(this.levels,e.customLevels),i.levels=U$e(e.customLevels,i[N$e]),V$e(i)),typeof e.redact=="object"&&e.redact!==null||Array.isArray(e.redact)){i.redact=e.redact;let l=G$e(i.redact,A9),u={stringify:l[k$e]};i[q$e]=A9,i[j$e]=l,i[x$e]=u}typeof e.msgPrefix=="string"&&(i[O9]=(this[O9]||"")+e.msgPrefix),i[S$]=q9(i,t);let a=e.level||this.level;return i[E$](a),this.onChild(i),i}function J$e(){let e=`{${this[S$].substr(1)}}`,r=JSON.parse(e);return delete r.pid,delete r.hostname,r}function Q$e(t){let e=q9(this,t);this[S$]=e,delete this[S$e]}function X$e(t,e){return Object.assign(e,t)}function Z$e(t,e,r){let n=this[$$e](),i=this[R$e],s=this[I$e],o=this[A$e],a=this[P$e]||X$e,l,u=this[M$e].streamWrite;t==null?l={}:t instanceof Error?(l={[s]:t},e===void 0&&(e=t.message)):(l=t,e===void 0&&t[o]===void 0&&t[s]&&(e=t[s].message)),i&&(l=a(l,i(l,r,this)));let c=this[C9](l,e,r,n),f=this[k9];f[C$e]===!0&&(f.lastLevel=r,f.lastObj=l,f.lastMsg=e,f.lastTime=n.slice(this[O$e]),f.lastLogger=this),f.write(u?u(c):c)}function eOe(){}function tOe(t){if(t!=null&&typeof t!="function")throw Error("callback must be a function");let e=this[k9];typeof e.flush=="function"?e.flush(t||eOe):t&&t()}});var F9=g((ytt,D9)=>{"use strict";var R$=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:L9}=T0(),rOe=L9.info;function nOe(t,e){let r=0;t=t||[],e=e||{dedupe:!1};let n=Object.create(L9);n.silent=1/0,e.levels&&typeof e.levels=="object"&&Object.keys(e.levels).forEach(f=>{n[f]=e.levels[f]});let i={write:s,add:l,emit:o,flushSync:a,end:u,minLevel:0,streams:[],clone:c,[R$]:!0,streamLevels:n};return Array.isArray(t)?t.forEach(l,i):l.call(i,t),t=null,i;function s(f){let h,d=this.lastLevel,{streams:p}=this,m=0,y;for(let _=sOe(p.length,e.dedupe);aOe(_,p.length,e.dedupe);_=oOe(_,e.dedupe))if(h=p[_],h.level<=d){if(m!==0&&m!==h.level)break;if(y=h.stream,y[R$]){let{lastTime:w,lastMsg:v,lastObj:b,lastLogger:E}=this;y.lastLevel=d,y.lastTime=w,y.lastMsg=v,y.lastObj=b,y.lastLogger=E}y.write(f),e.dedupe&&(m=h.level)}else if(!e.dedupe)break}function o(...f){for(let{stream:h}of this.streams)typeof h.emit=="function"&&h.emit(...f)}function a(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync()}function l(f){if(!f)return i;let h=typeof f.write=="function"||f.stream,d=f.write?f:f.stream;if(!h)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:p,streamLevels:m}=this,y;typeof f.levelVal=="number"?y=f.levelVal:typeof f.level=="string"?y=m[f.level]:typeof f.level=="number"?y=f.level:y=rOe;let _={stream:d,level:y,levelVal:void 0,id:r++};return p.unshift(_),p.sort(iOe),this.minLevel=p[0].level,i}function u(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync(),f.end()}function c(f){let h=new Array(this.streams.length);for(let d=0;d<h.length;d++)h[d]={level:f,stream:this.streams[d].stream};return{write:s,add:l,minLevel:f,streams:h,clone:c,emit:o,flushSync:a,[R$]:!0}}}function iOe(t,e){return t.level-e.level}function sOe(t,e){return e?t-1:0}function oOe(t,e){return e?t-1:t+1}function aOe(t,e,r){return r?t>=0:t<e}D9.exports=nOe});var e8=g((_tt,Fn)=>{"use strict";var lOe=A("node:os"),K9=WP(),uOe=GP(),cOe=e$(),Y9=MW(),fOe=M9(),J9=$c(),{configure:dOe}=$u(),{assertDefaultLevelFound:hOe,mappings:Q9,genLsCache:pOe,genLevelComparison:mOe,assertLevelComparison:gOe}=b$(),{DEFAULT_LEVELS:X9,SORTING_ORDER:yOe}=T0(),{createArgsNormalizer:_Oe,asChindings:bOe,buildSafeSonicBoom:U9,buildFormatters:vOe,stringify:T$,normalizeDestFileDescriptor:B9,noop:wOe}=R0(),{version:EOe}=v$(),{chindingsSym:V9,redactFmtSym:SOe,serializersSym:H9,timeSym:ROe,timeSliceIndexSym:TOe,streamSym:POe,stringifySym:z9,stringifySafeSym:P$,stringifiersSym:W9,setLevelSym:$Oe,endSym:OOe,formatOptsSym:IOe,messageKeySym:AOe,errorKeySym:NOe,nestedKeySym:COe,mixinSym:kOe,levelCompSym:qOe,useOnlyCustomLevelsSym:xOe,formattersSym:G9,hooksSym:jOe,nestedKeyStrSym:MOe,mixinMergeStrategySym:LOe,msgPrefixSym:DOe}=J9,{epochTime:Z9,nullTime:FOe}=Y9,{pid:UOe}=process,BOe=lOe.hostname(),VOe=K9.err,HOe={level:"info",levelComparison:yOe.ASC,levels:X9,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:UOe,hostname:BOe},serializers:Object.assign(Object.create(null),{err:VOe}),formatters:Object.assign(Object.create(null),{bindings(t){return t},level(t,e){return{level:e}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:Z9,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},zOe=_Oe(HOe),WOe=Object.assign(Object.create(null),K9);function $$(...t){let e={},{opts:r,stream:n}=zOe(e,uOe(),...t);r.level&&typeof r.level=="string"&&X9[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:i,crlf:s,serializers:o,timestamp:a,messageKey:l,errorKey:u,nestedKey:c,base:f,name:h,level:d,customLevels:p,levelComparison:m,mixin:y,mixinMergeStrategy:_,useOnlyCustomLevels:w,formatters:v,hooks:b,depthLimit:E,edgeLimit:R,onChild:S,msgPrefix:P}=r,T=dOe({maximumDepth:E,maximumBreadth:R}),O=vOe(v.level,v.bindings,v.log),j=T$.bind({[P$]:T}),N=i?cOe(i,j):{},C=i?{stringify:N[SOe]}:{stringify:j},z="}"+(s?`\r
`:`
`),ge=bOe.bind(null,{[V9]:"",[H9]:o,[W9]:N,[z9]:T$,[P$]:T,[G9]:O}),$="";f!==null&&(h===void 0?$=ge(f):$=ge(Object.assign({},f,{name:h})));let k=a instanceof Function?a:a?Z9:FOe,ae=k().indexOf(":")+1;if(w&&!p)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(y&&typeof y!="function")throw Error(`Unknown mixin type "${typeof y}" - expected "function"`);if(P&&typeof P!="string")throw Error(`Unknown msgPrefix type "${typeof P}" - expected "string"`);hOe(d,p,w);let U=Q9(p,w);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:U,messageKey:l,errorKey:u}}),gOe(m);let W=mOe(m);return Object.assign(e,{levels:U,[qOe]:W,[xOe]:w,[POe]:n,[ROe]:k,[TOe]:ae,[z9]:T$,[P$]:T,[W9]:N,[OOe]:z,[IOe]:C,[AOe]:l,[NOe]:u,[COe]:c,[MOe]:c?`,${JSON.stringify(c)}:{`:"",[H9]:o,[kOe]:y,[LOe]:_,[V9]:$,[G9]:O,[jOe]:b,silent:wOe,onChild:S,[DOe]:P}),Object.setPrototypeOf(e,fOe()),pOe(e),e[$Oe](d),e}Fn.exports=$$;Fn.exports.destination=(t=process.stdout.fd)=>typeof t=="object"?(t.dest=B9(t.dest||process.stdout.fd),U9(t)):U9({dest:B9(t),minLength:0});Fn.exports.transport=h$();Fn.exports.multistream=F9();Fn.exports.levels=Q9();Fn.exports.stdSerializers=WOe;Fn.exports.stdTimeFunctions=Object.assign({},Y9);Fn.exports.symbols=J9;Fn.exports.version=EOe;Fn.exports.default=$$;Fn.exports.pino=$$});var n8=g((btt,r8)=>{"use strict";var P0=e8(),{serializersSym:t8}=P0.symbols,{FST_ERR_LOG_INVALID_DESTINATION:GOe}=ur();function KOe(t){if(t.stream&&t.file)throw new GOe;t.file&&(t.stream=P0.destination(t.file),delete t.file);let e=t.logger,r=t.genReqId,n=null;return e?(t.logger=void 0,t.genReqId=void 0,e[t8]&&(t.serializers=Object.assign({},t.serializers,e[t8])),n=e.child({},t),t.logger=e,t.genReqId=r):n=P0(t,t.stream),n}var YOe={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],host:e.host,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:P0.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};r8.exports={serializers:YOe,createPinoLogger:KOe}});var Ih=g((vtt,s8)=>{"use strict";var{FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:JOe,FST_ERR_LOG_INVALID_LOGGER_CONFIG:QOe,FST_ERR_LOG_INVALID_LOGGER_INSTANCE:XOe,FST_ERR_LOG_INVALID_LOGGER:ZOe}=ur();function eIe(t,e,r,n,i){let s={[t.requestIdLogLabel]:n},o=t.childLoggerFactory.call(t.server,e,s,i||{},r);return t.childLoggerFactory!==i8&&$0(o,!0),o}function i8(t,e,r){return t.child(e,r)}function $0(t,e){let r=["info","error","debug","fatal","warn","trace","child"],n=t?r.filter(i=>!t[i]||typeof t[i]!="function"):r;if(n.length){if(n.length===r.length&&!e)return!1;throw ZOe(n.join(","))}else return!0}function tIe(t){if(t.logger&&t.loggerInstance)throw new JOe;if(!t.loggerInstance&&!t.logger){let o=Gz();return o.child=()=>o,{logger:o,hasLogger:!1}}let{createPinoLogger:e,serializers:r}=n8();if($0(t.loggerInstance))return{logger:e({logger:t.loggerInstance,serializers:Object.assign({},r,t.loggerInstance.serializers)}),hasLogger:!0};if($0(t.logger))throw QOe();if(t.loggerInstance)throw XOe();let n={};return Object.prototype.toString.call(t.logger)==="[object Object]"&&Reflect.ownKeys(t.logger).forEach(s=>{Object.defineProperty(n,s,{value:t.logger[s],writable:!0,enumerable:!0,configurable:!0})}),n.level=n.level||"info",n.serializers=Object.assign({},r,n.serializers),t.logger=n,{logger:e(t.logger),hasLogger:!0}}function rIe(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}s8.exports={createChildLogger:eIe,defaultChildLoggerFactory:i8,createLogger:tIe,validateLogger:$0,now:rIe}});var Ah=g((wtt,c8)=>{"use strict";var nIe=Zd()({circles:!1,proto:!0}),{kSchemaVisited:o8,kSchemaResponse:iIe}=Zt(),O$=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:sIe,FST_ERR_SCH_ALREADY_PRESENT:oIe,FST_ERR_SCH_DUPLICATE:aIe,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:a8}=ur(),u8=["params","body","querystring","query","headers"];function O0(t){this.store=t||{}}O0.prototype.add=function(t){let e=nIe(t.isFluentSchema||t.isFluentJSONSchema||t[O$]?t.valueOf():t),r=e.$id;if(!r)throw new sIe;if(this.store[r])throw new oIe(r);this.store[r]=e};O0.prototype.getSchemas=function(){return Object.assign({},this.store)};O0.prototype.getSchema=function(t){return this.store[t]};function l8(t){return typeof t=="object"&&Object.getPrototypeOf(t)!==Object.prototype}function lIe(t,e){if(t[o8])return t;if(t.query){if(t.querystring)throw new aIe("querystring");t.querystring=t.query}uIe(t);for(let r of u8){let n=t[r];if(n&&!l8(n)&&r==="body"&&n.content){let i=n.content,s=Object.keys(i);for(let o=0;o<s.length;o++){let a=s[o];if(!i[a].schema)throw new a8(a)}continue}}if(t.response){let r=Object.keys(t.response);for(let n of r){if(l8(t.response[n]))continue;let i=t.response[n].content;if(i){let s=Object.keys(i);for(let o=0;o<s.length;o++){let a=s[o];if(!i[a].schema)throw new a8(a)}}}}return t[o8]=!0,t}function uIe(t){for(let e of u8)t[e]&&(t[e].isFluentSchema||t[e][O$])&&(t[e]=t[e].valueOf());if(t.response){let e=Object.keys(t.response);for(let r of e)(t.response[r].isFluentSchema||t.response[r][O$])&&(t.response[r]=t.response[r].valueOf())}}function cIe(t,e,r){let n=t[iIe];if(!n)return!1;if(n[e]){if(n[e].constructor===Object&&r){let s=r.split(";",1)[0];return n[e][s]?n[e][s]:n[e]["*/*"]?n[e]["*/*"]:!1}return n[e]}let i=(e+"")[0]+"xx";if(n[i]){if(n[i].constructor===Object&&r){let s=r.split(";",1)[0];return n[i][s]?n[i][s]:n[i]["*/*"]?n[i]["*/*"]:!1}return n[i]}if(n.default){if(n.default.constructor===Object&&r){let s=r.split(";",1)[0];return n.default[s]?n.default[s]:n.default["*/*"]?n.default["*/*"]:!1}return n.default}return!1}c8.exports={buildSchemas(t){return new O0(t)},getSchemaSerializer:cIe,normalizeSchema:lIe}});var I0=g((Ett,d8)=>{"use strict";var fIe=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;d8.exports=class f8{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=e}asInteger(e){if(Number.isInteger(e))return""+e;if(typeof e=="bigint")return e.toString();let r=this.parseInteger(e);if(r===1/0||r===-1/0||r!==r)throw new Error(`The value "${e}" cannot be converted to an integer.`);return""+r}asNumber(e){let r=Number(e);if(r!==r)throw new Error(`The value "${e}" cannot be converted to a number.`);return r===1/0||r===-1/0?"null":""+r}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a time.`)}asString(e){let r=e.length;if(r<42){let n="",i=-1,s=255;for(let o=0;o<r;o++)if(s=e.charCodeAt(o),s===34||s===92)i===-1&&(i=0),n+=e.slice(i,o)+"\\",i=o;else if(s<32||s>=55296&&s<=57343)return JSON.stringify(e);return i===-1&&'"'+e+'"'||'"'+n+e.slice(i)+'"'}else return r<5e3&&fIe.test(e)===!1?'"'+e+'"':JSON.stringify(e)}asUnsafeString(e){return'"'+e+'"'}getState(){return this._options}static restoreFromState(e){return new f8(e)}}});var p8=g((Stt,h8)=>{"use strict";var dIe=I0(),hIe={mode:"standalone"},pIe=dIe.restoreFromState(hIe),mIe=null;h8.exports=function(e,r){let n="{",i="}",s="[",o="]",a=",",l=":",u='"',c=n+i,f=s+o,h=u+u,d="null";function p(y){let _=y&&typeof y.toJSON=="function"?y.toJSON():y;if(_===null)return c;let w,v=n,b=!1;return w=_.statusCode,w!==void 0&&(!b&&(b=!0)||(v+=a),v+='"statusCode":',v+=r.asNumber(w)),w=_.code,w!==void 0&&(!b&&(b=!0)||(v+=a),v+='"code":',typeof w!="string"?w===null?v+=h:w instanceof Date?v+=u+w.toISOString()+u:w instanceof RegExp?v+=r.asString(w.source):v+=r.asString(w.toString()):v+=r.asString(w)),w=_.error,w!==void 0&&(!b&&(b=!0)||(v+=a),v+='"error":',typeof w!="string"?w===null?v+=h:w instanceof Date?v+=u+w.toISOString()+u:w instanceof RegExp?v+=r.asString(w.source):v+=r.asString(w.toString()):v+=r.asString(w)),w=_.message,w!==void 0&&(!b&&(b=!0)||(v+=a),v+='"message":',typeof w!="string"?w===null?v+=h:w instanceof Date?v+=u+w.toISOString()+u:w instanceof RegExp?v+=r.asString(w.source):v+=r.asString(w.toString()):v+=r.asString(w)),v+i}return p}(mIe,pIe)});var Nh=g((Rtt,_8)=>{"use strict";var m8=A("node:http").STATUS_CODES,gIe=CP(),{kReplyHeaders:Nl,kReplyNextErrorHandler:A0,kReplyIsRunningOnErrorHook:yIe,kReplyHasStatusCode:_Ie,kRouteContext:y8,kDisableRequestLogging:N0}=Zt(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:bIe,FST_ERR_FAILED_ERROR_SERIALIZATION:vIe}=ur(),{getSchemaSerializer:wIe}=Ah(),I$=p8(),EIe={func:RIe,toJSON(){return this.func.name.toString()+"()"}};function SIe(t,e,r){t[yIe]=!1;let n=t[y8];if(t[A0]===!1){g8(e,t,function(o,a){try{o.raw.writeHead(o.raw.statusCode,o[Nl])}catch(l){o.log[N0]||o.log.warn({req:o.request,res:o,err:l},l&&l.message),o.raw.writeHead(o.raw.statusCode)}o.raw.end(a)});return}let i=t[A0]||n.errorHandler;t[A0]=Object.getPrototypeOf(i),delete t[Nl]["content-type"],delete t[Nl]["content-length"];let s=i.func;if(!s){t[A0]=!1,g8(e,t,r);return}try{let o=s(e,t.request,t);o!==void 0&&(o!==null&&typeof o.then=="function"?gIe(o,t):t.send(o))}catch(o){t.send(o)}}function RIe(t,e,r){if(PIe(t,r),!r[_Ie]||r.statusCode===200){let n=t.statusCode||t.status;r.code(n>=400?n:500)}r.statusCode<500?r.log[N0]||r.log.info({res:r,err:t},t&&t.message):r.log[N0]||r.log.error({req:e,res:r,err:t},t&&t.message),r.send(t)}function g8(t,e,r){let n=e.raw,i=e.statusCode;e[Nl]["content-type"]=e[Nl]["content-type"]??"application/json; charset=utf-8";let s;try{let o=wIe(e[y8],i,e[Nl]["content-type"]);s=o===!1?I$({error:m8[i+""],code:t.code,message:t.message,statusCode:i}):o(Object.create(t,{error:{value:m8[i+""]},message:{value:t.message},statusCode:{value:i}}))}catch(o){e.log[N0]||e.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),e.code(500),s=I$(new vIe(o.message,t.message))}typeof s!="string"&&!Buffer.isBuffer(s)&&(s=I$(new bIe(typeof s))),e[Nl]["content-length"]=""+Buffer.byteLength(s),r(e,s)}function TIe(t=EIe,e){if(!e)return t;let r=Object.create(t);return r.func=e,r}function PIe(t,e){let r=e.raw,n=r.statusCode;n=n>=400?n:500,t!=null&&(t.headers!==void 0&&e.headers(t.headers),t.status>=400?n=t.status:t.statusCode>=400&&(n=t.statusCode)),r.statusCode=n}_8.exports={buildErrorHandler:TIe,handleError:SIe}});var M0=g((Ttt,j0)=>{"use strict";var k$=A("node:stream").finished,$Ie=A("node:stream").Readable,{kFourOhFourContext:b8,kReplyErrorHandlerCalled:P8,kReplyHijacked:x$,kReplyStartTime:Ch,kReplyEndTime:j$,kReplySerializer:Gs,kReplySerializerDefault:k0,kReplyIsError:q0,kReplyHeaders:lt,kReplyTrailers:er,kReplyHasStatusCode:M$,kReplyIsRunningOnErrorHook:L$,kReplyNextErrorHandler:OIe,kDisableRequestLogging:$8,kSchemaResponse:x0,kReplyCacheSerializeFns:ra,kSchemaController:A$,kOptions:IIe,kRouteContext:Oe}=Zt(),{onSendHookRunner:O8,onResponseHookRunner:AIe,preHandlerHookRunner:NIe,preSerializationHookRunner:CIe}=ea(),v8=jP()[Symbol.for("internals")],kIe=Ih(),q$=kIe.now,{handleError:w8}=Nh(),{getSchemaSerializer:qIe}=Ah(),N$={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:xIe,FST_ERR_REP_RESPONSE_BODY_CONSUMED:jIe,FST_ERR_REP_READABLE_STREAM_LOCKED:MIe,FST_ERR_REP_ALREADY_SENT:LIe,FST_ERR_SEND_INSIDE_ONERR:DIe,FST_ERR_BAD_STATUS_CODE:FIe,FST_ERR_BAD_TRAILER_NAME:UIe,FST_ERR_BAD_TRAILER_VALUE:BIe,FST_ERR_MISSING_SERIALIZATION_FN:VIe,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:HIe}=ur(),I8=Object.prototype.toString;function nt(t,e,r){this.raw=t,this[Gs]=null,this[P8]=!1,this[q0]=!1,this[L$]=!1,this.request=e,this[lt]={},this[er]=null,this[M$]=!1,this[Ch]=void 0,this.log=r}nt.props=[];Object.defineProperties(nt.prototype,{[Oe]:{get(){return this.request[Oe]}},elapsedTime:{get(){return this[Ch]===void 0?0:(this[j$]||q$())-this[Ch]}},server:{get(){return this.request[Oe].server}},sent:{enumerable:!0,get(){return(this[x$]||this.raw.writableEnded)===!0}},statusCode:{get(){return this.raw.statusCode},set(t){this.code(t)}},routeOptions:{get(){return this.request.routeOptions}}});nt.prototype.writeEarlyHints=function(t,e){return this.raw.writeEarlyHints(t,e),this};nt.prototype.hijack=function(){return this[x$]=!0,this};nt.prototype.send=function(t){if(this[L$]===!0)throw new DIe;if(this.sent)return this.log.warn({err:new LIe(this.request.url,this.request.method)}),this;if(t instanceof Error||this[q0]===!0)return this[q0]=!1,kh(this,t,Cl),this;if(t===void 0)return Cl(this,t),this;let e=this.getHeader("content-type"),r=e!==void 0;if(t!==null){if(typeof t.pipe=="function"||typeof t.getReader=="function"||I8.call(t)==="[object Response]")return Cl(this,t),this;if(t?.buffer instanceof ArrayBuffer){r===!1&&(this[lt]["content-type"]=N$.OCTET);let n=Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength);return Cl(this,n),this}if(r===!1&&typeof t=="string")return this[lt]["content-type"]=N$.PLAIN,Cl(this,t),this}if(this[Gs]!==null){if(typeof t!="string")return E8(this,t),this;t=this[Gs](t)}else if(r===!1||e.indexOf("json")>-1){if(r===!1)this[lt]["content-type"]=N$.JSON;else if(e.indexOf("charset")===-1){let n=e.trim();n.endsWith(";")?this[lt]["content-type"]=`${n} charset=utf-8`:this[lt]["content-type"]=`${n}; charset=utf-8`}if(typeof t!="string")return E8(this,t),this}return Cl(this,t),this};nt.prototype.getHeader=function(t){t=t.toLowerCase();let e=this.raw,r=this[lt][t];return r===void 0&&e.hasHeader(t)&&(r=e.getHeader(t)),r};nt.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[lt]}};nt.prototype.hasHeader=function(t){return t=t.toLowerCase(),this[lt][t]!==void 0||this.raw.hasHeader(t)};nt.prototype.removeHeader=function(t){return delete this[lt][t.toLowerCase()],this};nt.prototype.header=function(t,e=""){return t=t.toLowerCase(),this[lt][t]&&t==="set-cookie"?(typeof this[lt][t]=="string"&&(this[lt][t]=[this[lt][t]]),Array.isArray(e)?Array.prototype.push.apply(this[lt][t],e):this[lt][t].push(e)):this[lt][t]=e,this};nt.prototype.headers=function(t){let e=Object.keys(t);for(let r=0;r!==e.length;++r){let n=e[r];this.header(n,t[n])}return this};var zIe=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);nt.prototype.trailer=function(t,e){if(t=t.toLowerCase(),zIe.has(t))throw new UIe(t);if(typeof e!="function")throw new BIe(t,typeof e);return this[er]===null&&(this[er]={}),this[er][t]=e,this};nt.prototype.hasTrailer=function(t){return this[er]?.[t.toLowerCase()]!==void 0};nt.prototype.removeTrailer=function(t){return this[er]===null?this:(this[er][t.toLowerCase()]=void 0,this)};nt.prototype.code=function(t){let e=Number(t);if(isNaN(e)||e<100||e>599)throw new FIe(t||String(t));return this.raw.statusCode=e,this[M$]=!0,this};nt.prototype.status=nt.prototype.code;nt.prototype.getSerializationFunction=function(t,e){let r;return typeof t=="string"||typeof t=="number"?typeof e=="string"?r=this[Oe][x0]?.[t]?.[e]:r=this[Oe][x0]?.[t]:typeof t=="object"&&(r=this[Oe][ra]?.get(t)),r};nt.prototype.compileSerializationSchema=function(t,e=null,r=null){let{request:n}=this,{method:i,url:s}=n;if(this[Oe][ra]?.has(t))return this[Oe][ra].get(t);let a=(this[Oe].serializerCompiler||this.server[A$].serializerCompiler||this.server[A$].setupSerializer(this.server[IIe])||this.server[A$].serializerCompiler)({schema:t,method:i,url:s,httpStatus:e,contentType:r});return this[Oe][ra]==null&&(this[Oe][ra]=new WeakMap),this[Oe][ra].set(t,a),a};nt.prototype.serializeInput=function(t,e,r,n){let i=r,s;if(r=typeof e=="string"||typeof e=="number"?e:r,n=r&&i!==r?i:n,r!=null){if(n!=null?s=this[Oe][x0]?.[r]?.[n]:s=this[Oe][x0]?.[r],s==null)throw n?new HIe(r,n):new VIe(r)}else this[Oe][ra]?.has(e)?s=this[Oe][ra].get(e):s=this.compileSerializationSchema(e,r,n);return s(t)};nt.prototype.serialize=function(t){return this[Gs]!==null?this[Gs](t):this[Oe]&&this[Oe][k0]?this[Oe][k0](t,this.raw.statusCode):C8(this[Oe],t,this.raw.statusCode)};nt.prototype.serializer=function(t){return this[Gs]=t,this};nt.prototype.type=function(t){return this[lt]["content-type"]=t,this};nt.prototype.redirect=function(t,e){return e||(e=this[M$]?this.raw.statusCode:302),this.header("location",t).code(e).send()};nt.prototype.callNotFound=function(){return XIe(this),this};nt.prototype.then=function(t,e){if(this.sent){t();return}k$(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?e?e(r):this.log&&this.log.warn("unhandled rejection on reply.then"):t()})};function E8(t,e){t[Oe].preSerialization!==null?CIe(t[Oe].preSerialization,t.request,t,e,S8):S8(null,t.request,t,e)}function S8(t,e,r,n){if(t!=null){kh(r,t);return}try{r[Gs]!==null?n=r[Gs](n):r[Oe]&&r[Oe][k0]?n=r[Oe][k0](n,r.raw.statusCode):n=C8(r[Oe],n,r.raw.statusCode,r[lt]["content-type"])}catch(i){WIe(i,r),kh(r,i);return}Cl(r,n)}function WIe(t,e){t.serialization=e[Oe].config}function Cl(t,e){t[Oe].onSend!==null?O8(t[Oe].onSend,t.request,t,e,GIe):A8(t,e)}function GIe(t,e,r,n){t!=null?kh(r,t):A8(r,n)}function C$(t,e){let r=t.raw;try{r.writeHead(e,t[lt])}catch(n){throw n.code==="ERR_HTTP_HEADERS_SENT"&&t.log.warn(`Reply was already sent, did you forget to "return reply" in the "${t.request.raw.url}" (${t.request.raw.method}) route?`),n}}function A8(t,e){let r=t.raw,n=t.request;if(t[er]!==null){let s=Object.keys(t[er]),o="";for(let a of s)typeof t[er][a]=="function"&&(o+=" ",o+=a);t.header("Transfer-Encoding","chunked"),t.header("Trailer",o.trim())}if(I8.call(e)==="[object Response]"){if(typeof e.status=="number"&&t.code(e.status),typeof e.headers=="object"&&typeof e.headers.forEach=="function")for(let[s,o]of e.headers)t.header(s,o);if(e.body!==null&&e.bodyUsed)throw new jIe;e=e.body}let i=r.statusCode;if(e==null){i>=200&&i!==204&&i!==304&&n.method!=="HEAD"&&t[er]===null&&(t[lt]["content-length"]="0"),C$(t,i),C0(e,r,t);return}if(i>=100&&i<200||i===204){t.removeHeader("content-type"),t.removeHeader("content-length"),C$(t,i),C0(void 0,r,t),typeof e.resume=="function"&&(e.on("error",k8),e.resume());return}if(typeof e.pipe=="function"){N8(e,r,t);return}if(typeof e.getReader=="function"){KIe(e,r,t);return}if(typeof e!="string"&&!Buffer.isBuffer(e))throw new xIe(typeof e);if(t[er]===null){let s=t[lt]["content-length"];(!s||n.raw.method!=="HEAD"&&Number(s)!==Buffer.byteLength(e))&&(t[lt]["content-length"]=""+Buffer.byteLength(e))}C$(t,i),r.write(e),C0(e,r,t)}function R8(t,e,r){e.code==="ERR_STREAM_PREMATURE_CLOSE"?t[$8]||t.info({res:r},"stream closed prematurely"):t.warn({err:e},"response terminated with an error with headers already sent")}function KIe(t,e,r){if(t.locked)throw MIe();let n=$Ie.fromWeb(t);N8(n,e,r)}function N8(t,e,r){let n=!0,i=!1;if(YIe(t,e,r),k$(t,{readable:!0,writable:!1},function(s){n=!1,s!=null&&(e.headersSent||r.request.raw.aborted===!0?(i||(i=!0,R8(r.log,s,r)),e.destroy()):kh(r,s))}),k$(e,function(s){n&&(s!=null&&e.headersSent&&!i&&(i=!0,R8(r.log,s,e)),typeof t.destroy=="function"?t.destroy():typeof t.close=="function"?t.close(k8):typeof t.abort=="function"?t.abort():r.log.warn("stream payload does not end properly"))}),e.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let s in r[lt])e.setHeader(s,r[lt][s]);t.pipe(e)}function C0(t,e,r){if(r[er]===null){e.end(null,null,null);return}let n=Object.keys(r[er]),i={},s=0,o=!0;function a(){s===0&&(e.addTrailers(i),e.end(null,null,null))}for(let l of n){let u=function(f,h){s++,f?r.log.debug(f):i[l]=h,process.nextTick(a)};if(typeof r[er][l]!="function")continue;o=!1,s--;let c=r[er][l](r,t,u);typeof c=="object"&&typeof c.then=="function"&&c.then(f=>u(null,f),u)}o&&e.end(null,null,null)}function YIe(t,e,r){r[er]!==null&&t.on("end",()=>C0(null,e,r))}function kh(t,e,r){t[Oe].onError!==null&&!t[OIe]?(t[L$]=!0,O8(t[Oe].onError,t.request,t,e,()=>w8(t,e,r))):w8(t,e,r)}function JIe(t){t[Ch]=q$();let e=r=>{t[j$]=q$(),t.raw.removeListener("finish",e),t.raw.removeListener("error",e);let n=t[Oe];n&&n.onResponse!==null?AIe(n.onResponse,t.request,t,T8):T8(r,t.request,t)};t.raw.on("finish",e),t.raw.on("error",e)}function T8(t,e,r){if(r.log[$8])return;let n=r.elapsedTime;if(t!=null){r.log.error({res:r,err:t,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function QIe(t){let e=t.props.slice();function r(n,i,s){this.raw=n,this[q0]=!1,this[P8]=!1,this[x$]=!1,this[Gs]=null,this.request=i,this[lt]={},this[er]=null,this[Ch]=void 0,this[j$]=void 0,this.log=s;let o;for(let a=0;a<e.length;a++)o=e[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.parent=t,r.props=e,r}function XIe(t){if(t[Oe][b8]===null){t.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),t.code(404).send("404 Not Found");return}t.request[Oe]=t[Oe][b8],t[Oe].preHandler!==null?NIe(t[Oe].preHandler,t.request,t,v8.preHandlerCallback):v8.preHandlerCallback(null,t.request,t)}function C8(t,e,r,n){let i=qIe(t,r,n);return i?i(e):JSON.stringify(e)}function k8(){}j0.exports=nt;j0.exports.buildReply=QIe;j0.exports.setupResponseListeners=JIe});var q8=g((Ptt,L0)=>{"use strict";function D$(t){if(!t)throw new TypeError("argument req is required");let e=t.headers["x-forwarded-for"],r=t.socket.remoteAddress;if(!e||typeof e!="string")return[r];if(e.indexOf(",")===-1){let n=e.trim();return n.length?[r,n]:[r]}else return ZIe(e,r)}function ZIe(t,e){let r=[e],n=t.length,i=n,s,o;for(o=n-1;o>=0;--o)s=t[o],s===" "?i===n&&(i=n=o):s===","?(i!==n&&r.push(t.slice(i,n)),i=n=o):i=o;return i!==n&&r.push(t.substring(i,n)),r}L0.exports=D$;L0.exports.default=D$;L0.exports.forwarded=D$});var j8=g((x8,D0)=>{"use strict";(function(t){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},n=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${e}\\.${e}\\.${e}\\.${e}(${s})?$`,"i")};function l(d,p){if(d.indexOf("::")!==d.lastIndexOf("::"))return null;let m=0,y=-1,_=(d.match(a.zoneIndex)||[])[0],w,v;for(_&&(_=_.substring(1),d=d.replace(/%.+$/,""));(y=d.indexOf(":",y+1))>=0;)m++;if(d.substr(0,2)==="::"&&m--,d.substr(-2,2)==="::"&&m--,m>p)return null;for(v=p-m,w=":";v--;)w+="0:";return d=d.replace("::",w),d[0]===":"&&(d=d.slice(1)),d[d.length-1]===":"&&(d=d.slice(0,-1)),p=function(){let b=d.split(":"),E=[];for(let R=0;R<b.length;R++)E.push(parseInt(b[R],16));return E}(),{parts:p,zoneId:_}}function u(d,p,m,y){if(d.length!==p.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let _=0,w;for(;y>0;){if(w=m-y,w<0&&(w=0),d[_]>>w!==p[_]>>w)return!1;y-=m,_+=1}return!0}function c(d){if(i.test(d))return parseInt(d,16);if(d[0]==="0"&&!isNaN(parseInt(d[1],10))){if(n.test(d))return parseInt(d,8);throw new Error(`ipaddr: cannot parse ${d} as octal`)}return parseInt(d,10)}function f(d,p){for(;d.length<p;)d=`0${d}`;return d}let h={};h.IPv4=function(){function d(p){if(p.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let m,y;for(m=0;m<p.length;m++)if(y=p[m],!(0<=y&&y<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=p}return d.prototype.SpecialRanges={unspecified:[[new d([0,0,0,0]),8]],broadcast:[[new d([255,255,255,255]),32]],multicast:[[new d([224,0,0,0]),4]],linkLocal:[[new d([169,254,0,0]),16]],loopback:[[new d([127,0,0,0]),8]],carrierGradeNat:[[new d([100,64,0,0]),10]],private:[[new d([10,0,0,0]),8],[new d([172,16,0,0]),12],[new d([192,168,0,0]),16]],reserved:[[new d([192,0,0,0]),24],[new d([192,0,2,0]),24],[new d([192,88,99,0]),24],[new d([198,18,0,0]),15],[new d([198,51,100,0]),24],[new d([203,0,113,0]),24],[new d([240,0,0,0]),4]],as112:[[new d([192,175,48,0]),24],[new d([192,31,196,0]),24]],amt:[[new d([192,52,193,0]),24]]},d.prototype.kind=function(){return"ipv4"},d.prototype.match=function(p,m){let y;if(m===void 0&&(y=p,p=y[0],m=y[1]),p.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return u(this.octets,p.octets,8,m)},d.prototype.prefixLengthFromSubnetMask=function(){let p=0,m=!1,y={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},_,w,v;for(_=3;_>=0;_-=1)if(w=this.octets[_],w in y){if(v=y[w],m&&v!==0)return null;v!==8&&(m=!0),p+=v}else return null;return 32-p},d.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},d.prototype.toByteArray=function(){return this.octets.slice(0)},d.prototype.toIPv4MappedAddress=function(){return h.IPv6.parse(`::ffff:${this.toString()}`)},d.prototype.toNormalizedString=function(){return this.toString()},d.prototype.toString=function(){return this.octets.join(".")},d}(),h.IPv4.broadcastAddressFromCIDR=function(d){try{let p=this.parseCIDR(d),m=p[0].toByteArray(),y=this.subnetMaskFromPrefixLength(p[1]).toByteArray(),_=[],w=0;for(;w<4;)_.push(parseInt(m[w],10)|parseInt(y[w],10)^255),w++;return new this(_)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.isIPv4=function(d){return this.parser(d)!==null},h.IPv4.isValid=function(d){try{return new this(this.parser(d)),!0}catch{return!1}},h.IPv4.isValidCIDR=function(d){try{return this.parseCIDR(d),!0}catch{return!1}},h.IPv4.isValidFourPartDecimal=function(d){return!!(h.IPv4.isValid(d)&&d.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},h.IPv4.networkAddressFromCIDR=function(d){let p,m,y,_,w;try{for(p=this.parseCIDR(d),y=p[0].toByteArray(),w=this.subnetMaskFromPrefixLength(p[1]).toByteArray(),_=[],m=0;m<4;)_.push(parseInt(y[m],10)&parseInt(w[m],10)),m++;return new this(_)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.parse=function(d){let p=this.parser(d);if(p===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(p)},h.IPv4.parseCIDR=function(d){let p;if(p=d.match(/^(.+)\/(\d+)$/)){let m=parseInt(p[2]);if(m>=0&&m<=32){let y=[this.parse(p[1]),m];return Object.defineProperty(y,"toString",{value:function(){return this.join("/")}}),y}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},h.IPv4.parser=function(d){let p,m,y;if(p=d.match(r.fourOctet))return function(){let _=p.slice(1,6),w=[];for(let v=0;v<_.length;v++)m=_[v],w.push(c(m));return w}();if(p=d.match(r.longValue)){if(y=c(p[1]),y>4294967295||y<0)throw new Error("ipaddr: address outside defined range");return function(){let _=[],w;for(w=0;w<=24;w+=8)_.push(y>>w&255);return _}().reverse()}else return(p=d.match(r.twoOctet))?function(){let _=p.slice(1,4),w=[];if(y=c(_[1]),y>16777215||y<0)throw new Error("ipaddr: address outside defined range");return w.push(c(_[0])),w.push(y>>16&255),w.push(y>>8&255),w.push(y&255),w}():(p=d.match(r.threeOctet))?function(){let _=p.slice(1,5),w=[];if(y=c(_[2]),y>65535||y<0)throw new Error("ipaddr: address outside defined range");return w.push(c(_[0])),w.push(c(_[1])),w.push(y>>8&255),w.push(y&255),w}():null},h.IPv4.subnetMaskFromPrefixLength=function(d){if(d=parseInt(d),d<0||d>32)throw new Error("ipaddr: invalid IPv4 prefix length");let p=[0,0,0,0],m=0,y=Math.floor(d/8);for(;m<y;)p[m]=255,m++;return y<4&&(p[y]=Math.pow(2,d%8)-1<<8-d%8),new this(p)},h.IPv6=function(){function d(p,m){let y,_;if(p.length===16)for(this.parts=[],y=0;y<=14;y+=2)this.parts.push(p[y]<<8|p[y+1]);else if(p.length===8)this.parts=p;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(y=0;y<this.parts.length;y++)if(_=this.parts[y],!(0<=_&&_<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");m&&(this.zoneId=m)}return d.prototype.SpecialRanges={unspecified:[new d([0,0,0,0,0,0,0,0]),128],linkLocal:[new d([65152,0,0,0,0,0,0,0]),10],multicast:[new d([65280,0,0,0,0,0,0,0]),8],loopback:[new d([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new d([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new d([0,0,0,0,0,65535,0,0]),96],discard:[new d([256,0,0,0,0,0,0,0]),64],rfc6145:[new d([0,0,0,0,65535,0,0,0]),96],rfc6052:[new d([100,65435,0,0,0,0,0,0]),96],"6to4":[new d([8194,0,0,0,0,0,0,0]),16],teredo:[new d([8193,0,0,0,0,0,0,0]),32],benchmarking:[new d([8193,2,0,0,0,0,0,0]),48],amt:[new d([8193,3,0,0,0,0,0,0]),32],as112v6:[[new d([8193,4,274,0,0,0,0,0]),48],[new d([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new d([8193,16,0,0,0,0,0,0]),28],orchid2:[new d([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new d([8193,48,0,0,0,0,0,0]),28],reserved:[[new d([8193,0,0,0,0,0,0,0]),23],[new d([8193,3512,0,0,0,0,0,0]),32]]},d.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},d.prototype.kind=function(){return"ipv6"},d.prototype.match=function(p,m){let y;if(m===void 0&&(y=p,p=y[0],m=y[1]),p.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return u(this.parts,p.parts,16,m)},d.prototype.prefixLengthFromSubnetMask=function(){let p=0,m=!1,y={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},_,w;for(let v=7;v>=0;v-=1)if(_=this.parts[v],_ in y){if(w=y[_],m&&w!==0)return null;w!==16&&(m=!0),p+=w}else return null;return 128-p},d.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},d.prototype.toByteArray=function(){let p,m=[],y=this.parts;for(let _=0;_<y.length;_++)p=y[_],m.push(p>>8),m.push(p&255);return m},d.prototype.toFixedLengthString=function(){let p=function(){let y=[];for(let _=0;_<this.parts.length;_++)y.push(f(this.parts[_].toString(16),4));return y}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),p+m},d.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let p=this.parts.slice(-2),m=p[0],y=p[1];return new h.IPv4([m>>8,m&255,y>>8,y&255])},d.prototype.toNormalizedString=function(){let p=function(){let y=[];for(let _=0;_<this.parts.length;_++)y.push(this.parts[_].toString(16));return y}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),p+m},d.prototype.toRFC5952String=function(){let p=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString(),y=0,_=-1,w;for(;w=p.exec(m);)w[0].length>_&&(y=w.index,_=w[0].length);return _<0?m:`${m.substring(0,y)}::${m.substring(y+_)}`},d.prototype.toString=function(){return this.toRFC5952String()},d}(),h.IPv6.broadcastAddressFromCIDR=function(d){try{let p=this.parseCIDR(d),m=p[0].toByteArray(),y=this.subnetMaskFromPrefixLength(p[1]).toByteArray(),_=[],w=0;for(;w<16;)_.push(parseInt(m[w],10)|parseInt(y[w],10)^255),w++;return new this(_)}catch(p){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${p})`)}},h.IPv6.isIPv6=function(d){return this.parser(d)!==null},h.IPv6.isValid=function(d){if(typeof d=="string"&&d.indexOf(":")===-1)return!1;try{let p=this.parser(d);return new this(p.parts,p.zoneId),!0}catch{return!1}},h.IPv6.isValidCIDR=function(d){if(typeof d=="string"&&d.indexOf(":")===-1)return!1;try{return this.parseCIDR(d),!0}catch{return!1}},h.IPv6.networkAddressFromCIDR=function(d){let p,m,y,_,w;try{for(p=this.parseCIDR(d),y=p[0].toByteArray(),w=this.subnetMaskFromPrefixLength(p[1]).toByteArray(),_=[],m=0;m<16;)_.push(parseInt(y[m],10)&parseInt(w[m],10)),m++;return new this(_)}catch(v){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${v})`)}},h.IPv6.parse=function(d){let p=this.parser(d);if(p.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(p.parts,p.zoneId)},h.IPv6.parseCIDR=function(d){let p,m,y;if((m=d.match(/^(.+)\/(\d+)$/))&&(p=parseInt(m[2]),p>=0&&p<=128))return y=[this.parse(m[1]),p],Object.defineProperty(y,"toString",{value:function(){return this.join("/")}}),y;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},h.IPv6.parser=function(d){let p,m,y,_,w,v;if(y=d.match(a.deprecatedTransitional))return this.parser(`::ffff:${y[1]}`);if(a.native.test(d))return l(d,8);if((y=d.match(a.transitional))&&(v=y[6]||"",p=y[1],y[1].endsWith("::")||(p=p.slice(0,-1)),p=l(p+v,6),p.parts)){for(w=[parseInt(y[2]),parseInt(y[3]),parseInt(y[4]),parseInt(y[5])],m=0;m<w.length;m++)if(_=w[m],!(0<=_&&_<=255))return null;return p.parts.push(w[0]<<8|w[1]),p.parts.push(w[2]<<8|w[3]),{parts:p.parts,zoneId:p.zoneId}}return null},h.IPv6.subnetMaskFromPrefixLength=function(d){if(d=parseInt(d),d<0||d>128)throw new Error("ipaddr: invalid IPv6 prefix length");let p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,y=Math.floor(d/8);for(;m<y;)p[m]=255,m++;return y<16&&(p[y]=Math.pow(2,d%8)-1<<8-d%8),new this(p)},h.fromByteArray=function(d){let p=d.length;if(p===4)return new h.IPv4(d);if(p===16)return new h.IPv6(d);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},h.isValid=function(d){return h.IPv6.isValid(d)||h.IPv4.isValid(d)},h.isValidCIDR=function(d){return h.IPv6.isValidCIDR(d)||h.IPv4.isValidCIDR(d)},h.parse=function(d){if(h.IPv6.isValid(d))return h.IPv6.parse(d);if(h.IPv4.isValid(d))return h.IPv4.parse(d);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},h.parseCIDR=function(d){try{return h.IPv6.parseCIDR(d)}catch{try{return h.IPv4.parseCIDR(d)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},h.process=function(d){let p=this.parse(d);return p.kind()==="ipv6"&&p.isIPv4MappedAddress()?p.toIPv4Address():p},h.subnetMatch=function(d,p,m){let y,_,w,v;m==null&&(m="unicast");for(_ in p)if(Object.prototype.hasOwnProperty.call(p,_)){for(w=p[_],w[0]&&!(w[0]instanceof Array)&&(w=[w]),y=0;y<w.length;y++)if(v=w[y],d.kind()===v[0].kind()&&d.match.apply(d,v))return _}return m},typeof D0<"u"&&D0.exports?D0.exports=h:t.ipaddr=h})(x8)});var U8=g(($tt,Ac)=>{"use strict";Ac.exports=F$;Ac.exports.default=F$;Ac.exports.proxyaddr=F$;Ac.exports.all=D8;Ac.exports.compile=F8;var eAe=q8(),L8=j8(),tAe=/^\d+$/u,F0=L8.isValid,U0=L8.parse,M8={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function D8(t,e){let r=eAe(t);if(!e)return r;typeof e!="function"&&(e=F8(e));for(var n=0;n<r.length-1;n++)e(r[n],n)||(r.length=n+1);return r}function F8(t){if(!t)throw new TypeError("argument is required");let e;if(typeof t=="string")e=[t];else if(Array.isArray(t))e=t.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<e.length;r++)t=e[r],Object.prototype.hasOwnProperty.call(M8,t)&&(t=M8[t],e.splice.apply(e,[r,1].concat(t)),r+=t.length-1);return nAe(rAe(e))}function rAe(t){let e=new Array(t.length);for(var r=0;r<t.length;r++)e[r]=iAe(t[r]);return e}function nAe(t){let e=t.length;return e===0?oAe:e===1?lAe(t[0]):aAe(t)}function iAe(t){let e=t.lastIndexOf("/"),r=e!==-1?t.substring(0,e):t;if(!F0(r))throw new TypeError("invalid IP address: "+r);let n=U0(r);e===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());let i=n.kind()==="ipv6"?128:32,s=e!==-1?t.substring(e+1,t.length):null;if(s===null?s=i:tAe.test(s)?s=parseInt(s,10):n.kind()==="ipv4"&&F0(s)?s=sAe(s):s=null,s<=0||s>i)throw new TypeError("invalid range on address: "+t);return[n,s]}function sAe(t){let e=U0(t);return e.kind()==="ipv4"?e.prefixLengthFromSubnetMask():null}function F$(t,e){if(!t)throw new TypeError("req argument is required");if(!e)throw new TypeError("trust argument is required");let r=D8(t,e);return r[r.length-1]}function oAe(){return!1}function aAe(t){return function(r){if(!F0(r))return!1;let n=U0(r),i,s=n.kind();for(var o=0;o<t.length;o++){let a=t[o],l=a[0],u=l.kind(),c=a[1],f=n;if(s!==u){if(u==="ipv4"&&!n.isIPv4MappedAddress())continue;i||(i=u==="ipv4"?n.toIPv4Address():n.toIPv4MappedAddress()),f=i}if(f.match(l,c))return!0}return!1}}function lAe(t){let e=t[0],r=e.kind(),n=r==="ipv4",i=t[1];return function(o){if(!F0(o))return!1;let a=U0(o);if(a.kind()!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(e,i)}}});var V0=g((Ott,H$)=>{"use strict";var B0=U8(),{kHasBeenDecorated:uAe,kSchemaBody:cAe,kSchemaHeaders:fAe,kSchemaParams:dAe,kSchemaQuerystring:B8,kSchemaController:U$,kOptions:hAe,kRequestCacheValidateFns:na,kRouteContext:Er,kRequestOriginalUrl:B$}=Zt(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:pAe}=ur(),V8={body:cAe,headers:fAe,params:dAe,querystring:B8,query:B8};function V$(t,e,r,n,i,s){this.id=t,this[Er]=s,this.params=e,this.raw=r,this.query=n,this.log=i,this.body=void 0}V$.props=[];function mAe(t){if(typeof t=="function")return t;if(t===!0)return null;if(typeof t=="number")return function(e,r){return r<t};if(typeof t=="string"){let e=t.split(",").map(r=>r.trim());return B0.compile(e)}return B0.compile(t)}function gAe(t,e){return e?yAe(t,e):z8(t)}function z8(t){let e=t.props.slice();function r(n,i,s,o,a,l){this.id=n,this[Er]=l,this.params=i,this.raw=s,this.query=o,this.log=a,this.body=void 0;let u;for(let c=0;c<e.length;c++)u=e[c],this[u.key]=u.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.props=e,r.parent=t,r}function H8(t){let e=t.lastIndexOf(",");return e===-1?t.trim():t.slice(e+1).trim()}function yAe(t,e){let r=z8(t),n=mAe(e);return r[uAe]=!0,Object.defineProperties(r.prototype,{ip:{get(){let i=B0.all(this.raw,n);return i[i.length-1]}},ips:{get(){return B0.all(this.raw,n)}},host:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?H8(this.headers["x-forwarded-host"]):this.headers.host??this.headers[":authority"]??""}},protocol:{get(){if(this.headers["x-forwarded-proto"])return H8(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}Object.defineProperties(V$.prototype,{server:{get(){return this[Er].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[B$]||(this[B$]=this.raw.originalUrl||this.raw.url),this[B$]}},method:{get(){return this.raw.method}},routeOptions:{get(){let t=this[Er],e=t._parserOptions.limit,r=t.server.initialConfig.bodyLimit,n=t.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,i={method:t.config?.method,url:t.config?.url,bodyLimit:e||r,attachValidation:t.attachValidation,logLevel:t.logLevel,exposeHeadRoute:t.exposeHeadRoute,prefixTrailingSlash:t.prefixTrailingSlash,handler:t.handler,version:n};return Object.defineProperties(i,{config:{get:()=>t.config},schema:{get:()=>t.schema}}),Object.freeze(i)}},is404:{get(){return this[Er].config?.url===void 0}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},host:{get(){return this.raw.headers.host??this.raw.headers[":authority"]??""}},hostname:{get(){return this.host.split(":",1)[0]}},port:{get(){let t=parseInt(this.host.split(":").slice(-1)[0]);if(!isNaN(t))return t;let e=this.headers.host??this.headers[":authority"]??"",r=parseInt(e.split(":").slice(-1)[0]);return isNaN(r)?null:r}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(t){this.additionalHeaders=t}},getValidationFunction:{value:function(t){if(typeof t=="string"){let e=V8[t];return this[Er][e]}else if(typeof t=="object")return this[Er][na]?.get(t)}},compileValidationSchema:{value:function(t,e=null){let{method:r,url:n}=this;if(this[Er][na]?.has(t))return this[Er][na].get(t);let s=(this[Er].validatorCompiler||this.server[U$].validatorCompiler||this.server[U$].setupValidator(this.server[hAe])||this.server[U$].validatorCompiler)({schema:t,method:r,url:n,httpPart:e});return this[Er][na]==null&&(this[Er][na]=new WeakMap),this[Er][na].set(t,s),s}},validateInput:{value:function(t,e,r){r=typeof e=="string"?e:r;let n=r!=null&&typeof r=="string"&&V8[r],i;if(n&&(i=this[Er][n]),i==null&&(e==null||typeof e!="object"||Array.isArray(e)))throw new pAe(r);return i==null&&(this[Er][na]?.has(e)?i=this[Er][na].get(e):i=this.compileValidationSchema(e,r)),i(t)}}});H$.exports=V$;H$.exports.buildRequest=gAe});var H0=g((Itt,W8)=>{"use strict";var{kFourOhFourContext:_Ae,kReplySerializerDefault:bAe,kSchemaErrorFormatter:vAe,kErrorHandler:wAe,kChildLoggerFactory:EAe,kOptions:SAe,kReply:RAe,kRequest:TAe,kBodyLimit:PAe,kLogLevel:$Ae,kContentTypeParser:OAe,kRouteByFastify:IAe,kRequestCacheValidateFns:AAe,kReplyCacheSerializeFns:NAe}=Zt();function CAe({schema:t,handler:e,config:r,requestIdLogLabel:n,childLoggerFactory:i,errorHandler:s,bodyLimit:o,logLevel:a,logSerializers:l,attachValidation:u,validatorCompiler:c,serializerCompiler:f,replySerializer:h,schemaErrorFormatter:d,exposeHeadRoute:p,prefixTrailingSlash:m,server:y,isFastify:_}){this.schema=t,this.handler=e,this.Reply=y[RAe],this.Request=y[TAe],this.contentTypeParser=y[OAe],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=s||y[wAe],this.requestIdLogLabel=n||y[SAe].requestIdLogLabel,this.childLoggerFactory=i||y[EAe],this._middie=null,this._parserOptions={limit:o||y[PAe]},this.exposeHeadRoute=p,this.prefixTrailingSlash=m,this.logLevel=a||y[$Ae],this.logSerializers=l,this[_Ae]=null,this.attachValidation=u,this[bAe]=h,this.schemaErrorFormatter=d||y[vAe]||kAe,this[IAe]=_,this[AAe]=null,this[NAe]=null,this.validatorCompiler=c||null,this.serializerCompiler=f||null,this.server=y}function kAe(t,e){let r="",n=", ";for(let i=0;i!==t.length;++i){let s=t[i];r+=e+(s.instancePath||"")+" "+s.message+n}return new Error(r.slice(0,-n.length))}W8.exports=CAe});var Y$=g((Att,J8)=>{"use strict";var{kReply:z$,kRequest:W$,kState:qAe,kHasBeenDecorated:xAe}=Zt(),{FST_ERR_DEC_ALREADY_PRESENT:G8,FST_ERR_DEC_MISSING_DEPENDENCY:jAe,FST_ERR_DEC_AFTER_START:MAe,FST_ERR_DEC_REFERENCE_TYPE:LAe,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:DAe}=ur();function FAe(t,e,r,n){if(Object.hasOwn(t,e))throw new G8(e);G$(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(t,e,{get:r.getter,set:r.setter}):t[e]=r}function K8(t,e,r,n){let i=t.prototype;if(Object.hasOwn(i,e)||W0(t,e))throw new G8(e);t[xAe]=!0,G$(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(i,e,{get:r.getter,set:r.setter}):typeof r=="function"?i[e]=r:t.props.push({key:e,value:r})}function Y8(t,e){if(typeof e=="object"&&e&&!(typeof e.getter=="function"||typeof e.setter=="function"))throw new LAe(t,typeof e)}function UAe(t,e,r){return K$(this,t),FAe(this,t,e,r),this}function z0(t,e){return e?e in t||t.prototype&&e in t.prototype||W0(t,e):t in this}function W0(t,e){return t.props?t.props.find(({key:r})=>r===e):!1}function BAe(t){return t&&W0(this[W$],t)?!0:z0(this[W$].prototype,t)}function VAe(t){return t&&W0(this[z$],t)?!0:z0(this[z$].prototype,t)}function G$(t,e,r){if(r!=null){if(!Array.isArray(r))throw new DAe(e);for(let n=0;n!==r.length;++n)if(!z0(t,r[n]))throw new jAe(r[n])}}function HAe(t,e,r){return K$(this,t),Y8(t,e),K8(this[z$],t,e,r),this}function zAe(t,e,r){return K$(this,t),Y8(t,e),K8(this[W$],t,e,r),this}function K$(t,e){if(t[qAe].started)throw new MAe(e)}J8.exports={add:UAe,exist:z0,existRequest:BAe,existReply:VAe,dependencies:G$,decorateReply:HAe,decorateRequest:zAe}});var X8=g(hs=>{"use strict";var J$=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let i=this.items.get(e);i.value=r,i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},Q$=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,i=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,i!==null&&(i.next=n),n!==null&&(n.prev=i),this.last=e}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let i=this.items.get(e);i.value=r,i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==i&&this.bumpLru(i);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},qh=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}bumpLru(e){if(this.last===e)return;let r=this.last,n=e.next,i=e.prev;this.first===e&&(this.first=n),e.next=null,e.prev=r,r.next=e,i!==null&&(i.next=n),n!==null&&(n.prev=i),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let i=this.items[e];i.value=r,i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==i&&this.bumpLru(i);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}},G0=class{constructor(){this.records={}}initForCache(e,r){this.records[e]={[r]:{cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}}resetForCache(e){for(let r of Object.keys(this.records[e]))this.records[e][r]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}getStatistics(){return this.records}};function Q8(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}var X$=class{constructor(e,r,n){this.cacheId=e,this.statisticTtlInHours=r,this.collectionStart=new Date,this.currentTimeStamp=Q8(this.collectionStart),this.records=n||new G0,this.records.initForCache(this.cacheId,this.currentTimeStamp)}get currentRecord(){return this.records.records[this.cacheId][this.currentTimeStamp]||(this.records.records[this.cacheId][this.currentTimeStamp]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,sets:0,invalidateOne:0,invalidateAll:0}),this.records.records[this.cacheId][this.currentTimeStamp]}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.currentRecord.hits++}addFalsyHit(){this.archiveIfNeeded(),this.currentRecord.falsyHits++}addEmptyHit(){this.archiveIfNeeded(),this.currentRecord.emptyHits++}addMiss(){this.archiveIfNeeded(),this.currentRecord.misses++}addEviction(){this.archiveIfNeeded(),this.currentRecord.evictions++}setCacheSize(e){this.archiveIfNeeded(),this.currentRecord.cacheSize=e}addExpiration(){this.archiveIfNeeded(),this.currentRecord.expirations++}addSet(){this.archiveIfNeeded(),this.currentRecord.sets++}addInvalidateOne(){this.archiveIfNeeded(),this.currentRecord.invalidateOne++}addInvalidateAll(){this.archiveIfNeeded(),this.currentRecord.invalidateAll++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){this.hoursPassed()>=this.statisticTtlInHours&&(this.collectionStart=new Date,this.currentTimeStamp=Q8(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp))}},K0=class extends qh{constructor(e,r,n,i,s){if(super(e||1e3,r||0),!n)throw new Error("Cache id is mandatory");this.hitStatistics=new X$(n,s!==void 0?s:24,i)}getStatistics(){return this.hitStatistics.getStatistics()}set(e,r){super.set(e,r),this.hitStatistics.addSet(),this.hitStatistics.setCacheSize(this.size)}evict(){super.evict(),this.hitStatistics.addEviction(),this.hitStatistics.setCacheSize(this.size)}delete(e,r=!1){super.delete(e),r||this.hitStatistics.addInvalidateOne(),this.hitStatistics.setCacheSize(this.size)}clear(){super.clear(),this.hitStatistics.addInvalidateAll(),this.hitStatistics.setCacheSize(this.size)}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e,!0),this.hitStatistics.addExpiration();return}return this.bumpLru(r),r.value||this.hitStatistics.addFalsyHit(),(r.value===void 0||r.value===null||r.value==="")&&this.hitStatistics.addEmptyHit(),this.hitStatistics.addHit(),r.value}this.hitStatistics.addMiss()}},Y0=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var n=0;n<e.length;n++)r.push(this.get(e[n]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let i=this.items[e];i.value=r,i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};hs.Fifo=Y0;hs.FifoMap=J$;hs.FifoObject=Y0;hs.HitStatisticsRecord=G0;hs.Lru=qh;hs.LruHitStatistics=K0;hs.LruMap=Q$;hs.LruObject=qh;hs.LruObjectHitStatistics=K0});var n6=g((Ctt,Nc)=>{"use strict";var WAe=typeof Buffer<"u",Z8=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,e6=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function t6(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),WAe&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let i=r&&r.protoAction||"error",s=r&&r.constructorAction||"error";if(i==="ignore"&&s==="ignore")return n;if(i!=="ignore"&&s!=="ignore"){if(Z8.test(t)===!1&&e6.test(t)===!1)return n}else if(i!=="ignore"&&s==="ignore"){if(Z8.test(t)===!1)return n}else if(e6.test(t)===!1)return n;return r6(n,{protoAction:i,constructorAction:s,safe:r&&r.safe})}function r6(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let i=[t];for(;i.length;){let s=i;i=[];for(let o of s){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let l=o[a];l&&typeof l=="object"&&i.push(l)}}}return t}function Z$(t,e,r){let{stackTraceLimit:n}=Error;Error.stackTraceLimit=0;try{return t6(t,e,r)}finally{Error.stackTraceLimit=n}}function GAe(t,e){let{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return t6(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}Nc.exports=Z$;Nc.exports.default=Z$;Nc.exports.parse=Z$;Nc.exports.safeParse=GAe;Nc.exports.scan=r6});var sO=g((ktt,jh)=>{"use strict";var{AsyncResource:KAe}=A("node:async_hooks"),{FifoMap:s6}=X8(),YAe=n6(),{kDefaultJsonParse:xh,kContentTypeParser:Cc,kBodyLimit:JAe,kRequestPayloadStream:o6,kState:tO,kTestInternals:QAe,kReplyIsError:a6,kRouteContext:XAe}=Zt(),{FST_ERR_CTP_INVALID_TYPE:rO,FST_ERR_CTP_EMPTY_TYPE:ZAe,FST_ERR_CTP_ALREADY_PRESENT:eNe,FST_ERR_CTP_INVALID_HANDLER:tNe,FST_ERR_CTP_INVALID_PARSE_TYPE:rNe,FST_ERR_CTP_BODY_TOO_LARGE:i6,FST_ERR_CTP_INVALID_MEDIA_TYPE:nNe,FST_ERR_CTP_INVALID_CONTENT_LENGTH:iNe,FST_ERR_CTP_EMPTY_JSON_BODY:sNe,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:nO}=ur(),{FSTSEC001:oNe}=OP();function Ks(t,e,r){this[xh]=u6(e,r),this.customParsers=new Map,this.customParsers.set("application/json",new eO(!0,!1,t,this[xh])),this.customParsers.set("text/plain",new eO(!0,!1,t,iO)),this.parserList=["application/json","text/plain"],this.parserRegExpList=[],this.cache=new s6(100)}Ks.prototype.add=function(t,e,r){let n=typeof t=="string";if(n){if(t=t.trim().toLowerCase(),t.length===0)throw new ZAe}else if(!(t instanceof RegExp))throw new rO;if(typeof r!="function")throw new tNe;if(this.existingParser(t))throw new eNe(t);if(e.parseAs!==void 0&&e.parseAs!=="string"&&e.parseAs!=="buffer")throw new rNe(e.parseAs);let i=new eO(e.parseAs==="string",e.parseAs==="buffer",e.bodyLimit,r);t==="*"?this.customParsers.set("",i):n?(this.parserList.unshift(t),this.customParsers.set(t,i)):(dNe(t),this.parserRegExpList.unshift(t),this.customParsers.set(t.toString(),i))};Ks.prototype.hasParser=function(t){if(typeof t=="string")t=t.trim().toLowerCase();else{if(!(t instanceof RegExp))throw new rO;t=t.toString()}return this.customParsers.has(t)};Ks.prototype.existingParser=function(t){return t==="application/json"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==this[xh]:t==="text/plain"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==iO:this.hasParser(t)};Ks.prototype.getParser=function(t){let e=this.customParsers.get(t);if(e!==void 0||(e=this.cache.get(t),e!==void 0))return e;let r=t.toLowerCase();for(let n=0;n!==this.parserList.length;++n){let i=this.parserList[n];if(r.slice(0,i.length)===i&&(r.length===i.length||r.charCodeAt(i.length)===59||r.charCodeAt(i.length)===32))return e=this.customParsers.get(i),this.cache.set(t,e),e}for(let n=0;n!==this.parserRegExpList.length;++n){let i=this.parserRegExpList[n];if(i.test(t))return e=this.customParsers.get(i.toString()),this.cache.set(t,e),e}return this.customParsers.get("")};Ks.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new s6(100)};Ks.prototype.remove=function(t){let e;if(typeof t=="string")t=t.trim().toLowerCase(),e=this.parserList;else{if(!(t instanceof RegExp))throw new rO;t=t.toString(),e=this.parserRegExpList}let r=this.customParsers.delete(t),n=e.findIndex(i=>i.toString()===t);return n>-1&&e.splice(n,1),r||n>-1};Ks.prototype.run=function(t,e,r,n){let i=this.getParser(t);if(i===void 0){r.is404?e(r,n):n.send(new nNe(t||void 0));return}let s=new KAe("content-type-parser:run",r);if(i.asString===!0||i.asBuffer===!0)l6(r,n,n[XAe]._parserOptions,i,o);else{let a=i.fn(r,r[o6],o);typeof a?.then=="function"&&a.then(l=>o(null,l),o)}function o(a,l){s.runInAsyncScope(()=>{s.emitDestroy(),a?(n[a6]=!0,n.send(a)):(r.body=l,e(r,n))})}};function l6(t,e,r,n,i){let s=n.asString,o=r.limit===null?n.bodyLimit:r.limit,a=Number(t.headers["content-length"]);if(a>o){e.header("connection","close"),e.send(new i6);return}let l=0,u=s===!0?"":[],c=t[o6]||t.raw;s===!0&&c.setEncoding("utf8"),c.on("data",f),c.on("end",h),c.on("error",h),c.resume();function f(d){l+=d.length;let{receivedEncodedLength:p=0}=c;if(l>o||p>o){c.removeListener("data",f),c.removeListener("end",h),c.removeListener("error",h),e.send(new i6);return}s===!0?u+=d:u.push(d)}function h(d){if(c.removeListener("data",f),c.removeListener("end",h),c.removeListener("error",h),d!==void 0){typeof d.statusCode=="number"&&d.statusCode>=400||(d.statusCode=400),e[a6]=!0,e.code(d.statusCode).send(d);return}if(s===!0&&(l=Buffer.byteLength(u)),!Number.isNaN(a)&&(c.receivedEncodedLength||l)!==a){e.header("connection","close"),e.send(new iNe);return}s===!1&&(u=Buffer.concat(u));let p=n.fn(t,u,i);p&&typeof p.then=="function"&&p.then(m=>i(null,m),i)}}function u6(t,e){return r;function r(n,i,s){if(i===""||i==null||Buffer.isBuffer(i)&&i.length===0)return s(new sNe,void 0);let o;try{o=YAe.parse(i,{protoAction:t,constructorAction:e})}catch(a){return a.statusCode=400,s(a,void 0)}s(null,o)}}function iO(t,e,r){r(null,e)}function eO(t,e,r,n){this.asString=t,this.asBuffer=e,this.bodyLimit=r,this.fn=n}function aNe(t){let e=new Ks;return e[xh]=t[xh],e.customParsers=new Map(t.customParsers.entries()),e.parserList=t.parserList.slice(),e.parserRegExpList=t.parserRegExpList.slice(),e}function lNe(t,e,r){if(this[tO].started)throw new nO("addContentTypeParser");return typeof e=="function"&&(r=e,e={}),e||(e={}),e.bodyLimit||(e.bodyLimit=this[JAe]),Array.isArray(t)?t.forEach(n=>this[Cc].add(n,e,r)):this[Cc].add(t,e,r),this}function uNe(t){return this[Cc].hasParser(t)}function cNe(t){if(this[tO].started)throw new nO("removeContentTypeParser");if(Array.isArray(t))for(let e of t)this[Cc].remove(e);else this[Cc].remove(t)}function fNe(){if(this[tO].started)throw new nO("removeAllContentTypeParsers");this[Cc].removeAll()}function dNe(t){t.source[0]!=="^"&&t.source.includes(";?")===!1&&oNe(t.source)}jh.exports=Ks;jh.exports.helpers={buildContentTypeParser:aNe,addContentTypeParser:lNe,hasContentTypeParser:uNe,removeContentTypeParser:cNe,removeAllContentTypeParsers:fNe};jh.exports.defaultParsers={getDefaultJsonParser:u6,defaultTextParser:iO};jh.exports[QAe]={rawBody:l6}});var J0=g(d6=>{"use strict";var c6=Object.prototype.hasOwnProperty;function f6(t,e,r){for(r of t.keys())if(Mh(r,e))return r}function Mh(t,e){var r,n,i;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&Mh(t[n],e[n]););return n===-1}if(r===Set){if(t.size!==e.size)return!1;for(n of t)if(i=n,i&&typeof i=="object"&&(i=f6(e,i),!i)||!e.has(i))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(n of t)if(i=n[0],i&&typeof i=="object"&&(i=f6(e,i),!i)||!Mh(n[1],e.get(i)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(c6.call(t,r)&&++n&&!c6.call(e,r)||!(r in e)||!Mh(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}d6.dequal=Mh});var g6=g((xtt,m6)=>{"use strict";var{dequal:h6}=J0(),hNe=Symbol.for("json-schema-ref"),oO=class{#n;#o;#d;#h;#T;constructor(e={}){this.#n={},this.#o={},this.#d=e.insertRefSymbol??!1,this.#h=e.allowEqualDuplicates??!0,this.#T=e.cloneSchemaWithoutRefs??!1}addSchema(e,r,n=!0){n&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#s(e,r));let i=e.$id;i!==void 0&&typeof i=="string"&&(i.charAt(0)==="#"?this.#t(e,r,i):(this.#s(e,i),r=i));let s=e.$ref;if(s!==void 0&&typeof s=="string"){let{refSchemaId:o,refJsonPointer:a}=this.#P(s,r);this.#n[r].refs.push({schemaId:o,jsonPointer:a})}for(let o in e)typeof e[o]=="object"&&e[o]!==null&&this.addSchema(e[o],r,!1)}getSchema(e,r="#"){let n=this.#n[e];if(n===void 0)throw new Error(`Cannot resolve ref "${e}${r}". Schema with id "${e}" is not found.`);return n.anchors[r]!==void 0?n.anchors[r]:p6(n.schema,r)}hasSchema(e){return this.#n[e]!==void 0}getSchemaRefs(e){let r=this.#n[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);return r.refs}getSchemaDependencies(e,r={}){let n=this.#n[e];for(let i of n.refs){let s=i.schemaId;s===e||r[s]!==void 0||(r[s]=this.getSchema(s),this.getSchemaDependencies(s,r))}return r}derefSchema(e){if(this.#o[e]!==void 0)return;let r=this.#n[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);!this.#T&&r.refs.length===0&&(this.#o[e]={schema:r.schema,anchors:r.anchors});let n=[];this.#i(r.schema,e,!0,n);let i=this.getSchemaDependencies(e);for(let s in i){let o=i[s];this.#i(o,s,!0,n)}for(let s of n){let{refSchemaId:o,refJsonPointer:a}=this.#P(s.ref,s.sourceSchemaId),l=this.getDerefSchema(o,a);if(l===null)throw new Error(`Cannot resolve ref "${s.ref}". Ref "${a}" is not found in schema "${o}".`);s.targetSchema=l,s.targetSchemaId=o}for(let s of n)this.#p(s,n)}getDerefSchema(e,r="#"){let n=this.#o[e];return n===void 0&&(this.derefSchema(e),n=this.#o[e]),n.anchors[r]!==void 0?n.anchors[r]:p6(n.schema,r)}#P(e,r){let n=e.indexOf("#");return n===-1?{refSchemaId:e,refJsonPointer:"#"}:n===0?{refSchemaId:r,refJsonPointer:e}:{refSchemaId:e.slice(0,n),refJsonPointer:e.slice(n)}}#i(e,r,n,i=[]){let s=Array.isArray(e)?[...e]:{...e};n&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#e(s,r));let o=s.$id;o!==void 0&&typeof o=="string"&&(o.charAt(0)==="#"?this.#u(s,r,o):(this.#e(s,o),r=o)),s.$ref!==void 0&&i.push({ref:s.$ref,sourceSchemaId:r,sourceSchema:s});for(let a in s){let l=s[a];typeof l=="object"&&l!==null&&(s[a]=this.#i(l,r,!1,i))}return s}#p(e,r){let{sourceSchema:n,targetSchema:i}=e;if(n.$ref){if(this.#d&&(n[hNe]=n.$ref),delete n.$ref,i.$ref){let s=r.find(o=>o.sourceSchema===i);this.#p(s,r)}for(let s in i)if(s!=="$id"){if(n[s]!==void 0){if(h6(n[s],i[s]))continue;throw new Error(`Cannot resolve ref "${e.ref}". Property "${s}" already exists in schema "${e.sourceSchemaId}".`)}n[s]=i[s]}e.isResolved=!0}}#s(e,r){let n=this.#n[r];if(n!==void 0){if(this.#h&&h6(e,n.schema))return;throw new Error(`There is already another schema with id "${r}".`)}this.#n[r]={schema:e,anchors:{},refs:[]}}#t(e,r,n){let{anchors:i}=this.#n[r];if(i[n]!==void 0)throw new Error(`There is already another anchor "${n}" in schema "${r}".`);i[n]=e}#e(e,r){this.#o[r]===void 0&&(this.#o[r]={schema:e,anchors:{}})}#u(e,r,n){let{anchors:i}=this.#o[r];i[n]=e}};function p6(t,e){let r=e.split("/"),n=t;for(let i of r)if(!(i===""||i==="#")){if(typeof n!="object"||n===null)return null;n=n[i]}return n??null}m6.exports={RefResolver:oO}});var Fh=g(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.regexpCode=He.getEsmExportName=He.getProperty=He.safeStringify=He.stringify=He.strConcat=He.addCodeArg=He.str=He._=He.nil=He._Code=He.Name=He.IDENTIFIER=He._CodeOrName=void 0;var Lh=class{};He._CodeOrName=Lh;He.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var kl=class extends Lh{constructor(e){if(super(),!He.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};He.Name=kl;var Un=class extends Lh{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof kl&&(r[n.str]=(r[n.str]||0)+1),r),{})}};He._Code=Un;He.nil=new Un("");function y6(t,...e){let r=[t[0]],n=0;for(;n<e.length;)lO(r,e[n]),r.push(t[++n]);return new Un(r)}He._=y6;var aO=new Un("+");function _6(t,...e){let r=[Dh(t[0])],n=0;for(;n<e.length;)r.push(aO),lO(r,e[n]),r.push(aO,Dh(t[++n]));return pNe(r),new Un(r)}He.str=_6;function lO(t,e){e instanceof Un?t.push(...e._items):e instanceof kl?t.push(e):t.push(yNe(e))}He.addCodeArg=lO;function pNe(t){let e=1;for(;e<t.length-1;){if(t[e]===aO){let r=mNe(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function mNe(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof kl||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof kl))return`"${t}${e.slice(1)}`}function gNe(t,e){return e.emptyStr()?t:t.emptyStr()?e:_6`${t}${e}`}He.strConcat=gNe;function yNe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Dh(Array.isArray(t)?t.join(","):t)}function _Ne(t){return new Un(Dh(t))}He.stringify=_Ne;function Dh(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}He.safeStringify=Dh;function bNe(t){return typeof t=="string"&&He.IDENTIFIER.test(t)?new Un(`.${t}`):y6`[${t}]`}He.getProperty=bNe;function vNe(t){if(typeof t=="string"&&He.IDENTIFIER.test(t))return new Un(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}He.getEsmExportName=vNe;function wNe(t){return new Un(t.toString())}He.regexpCode=wNe});var fO=g(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.ValueScope=rn.ValueScopeName=rn.Scope=rn.varKinds=rn.UsedValueState=void 0;var tn=Fh(),uO=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Q0;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Q0||(rn.UsedValueState=Q0={}));rn.varKinds={const:new tn.Name("const"),let:new tn.Name("let"),var:new tn.Name("var")};var X0=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof tn.Name?e:this.name(e)}name(e){return new tn.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};rn.Scope=X0;var Z0=class extends tn.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,tn._)`.${new tn.Name(r)}[${n}]`}};rn.ValueScopeName=Z0;var ENe=(0,tn._)`\n`,cO=class extends X0{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?ENe:tn.nil}}get(){return this._scope}name(e){return new Z0(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(e),{prefix:s}=i,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[s];if(a){let c=a.get(o);if(c)return c}else a=this._values[s]=new Map;a.set(o,i);let l=this._scope[s]||(this._scope[s]=[]),u=l.length;return l[u]=r.ref,i.setValue(r,{property:s,itemIndex:u}),i}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,tn._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(e,r,n={},i){let s=tn.nil;for(let o in e){let a=e[o];if(!a)continue;let l=n[o]=n[o]||new Map;a.forEach(u=>{if(l.has(u))return;l.set(u,Q0.Started);let c=r(u);if(c){let f=this.opts.es5?rn.varKinds.var:rn.varKinds.const;s=(0,tn._)`${s}${f} ${u} = ${c};${this.opts._n}`}else if(c=i?.(u))s=(0,tn._)`${s}${c}${this.opts._n}`;else throw new uO(u);l.set(u,Q0.Completed)})}return s}};rn.ValueScope=cO});var Ee=g(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.or=ye.and=ye.not=ye.CodeGen=ye.operators=ye.varKinds=ye.ValueScopeName=ye.ValueScope=ye.Scope=ye.Name=ye.regexpCode=ye.stringify=ye.getProperty=ye.nil=ye.strConcat=ye.str=ye._=void 0;var je=Fh(),Ei=fO(),ia=Fh();Object.defineProperty(ye,"_",{enumerable:!0,get:function(){return ia._}});Object.defineProperty(ye,"str",{enumerable:!0,get:function(){return ia.str}});Object.defineProperty(ye,"strConcat",{enumerable:!0,get:function(){return ia.strConcat}});Object.defineProperty(ye,"nil",{enumerable:!0,get:function(){return ia.nil}});Object.defineProperty(ye,"getProperty",{enumerable:!0,get:function(){return ia.getProperty}});Object.defineProperty(ye,"stringify",{enumerable:!0,get:function(){return ia.stringify}});Object.defineProperty(ye,"regexpCode",{enumerable:!0,get:function(){return ia.regexpCode}});Object.defineProperty(ye,"Name",{enumerable:!0,get:function(){return ia.Name}});var nb=fO();Object.defineProperty(ye,"Scope",{enumerable:!0,get:function(){return nb.Scope}});Object.defineProperty(ye,"ValueScope",{enumerable:!0,get:function(){return nb.ValueScope}});Object.defineProperty(ye,"ValueScopeName",{enumerable:!0,get:function(){return nb.ValueScopeName}});Object.defineProperty(ye,"varKinds",{enumerable:!0,get:function(){return nb.varKinds}});ye.operators={GT:new je._Code(">"),GTE:new je._Code(">="),LT:new je._Code("<"),LTE:new je._Code("<="),EQ:new je._Code("==="),NEQ:new je._Code("!=="),NOT:new je._Code("!"),OR:new je._Code("||"),AND:new je._Code("&&"),ADD:new je._Code("+")};var Ys=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},dO=class extends Ys{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Ei.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=qc(this.rhs,e,r)),this}get names(){return this.rhs instanceof je._CodeOrName?this.rhs.names:{}}},eb=class extends Ys{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof je.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=qc(this.rhs,e,r),this}get names(){let e=this.lhs instanceof je.Name?{}:{...this.lhs.names};return rb(e,this.rhs)}},hO=class extends eb{constructor(e,r,n,i){super(e,n,i),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},pO=class extends Ys{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},mO=class extends Ys{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},gO=class extends Ys{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},yO=class extends Ys{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=qc(this.code,e,r),this}get names(){return this.code instanceof je._CodeOrName?this.code.names:{}}},Uh=class extends Ys{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,i=n.length;for(;i--;){let s=n[i];s.optimizeNames(e,r)||(SNe(e,s.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>jl(e,r.names),{})}},Js=class extends Uh{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},_O=class extends Uh{},kc=class extends Js{};kc.kind="else";var ql=class t extends Js{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new kc(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(b6(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=qc(this.condition,e,r),this}get names(){let e=super.names;return rb(e,this.condition),this.else&&jl(e,this.else.names),e}};ql.kind="if";var xl=class extends Js{};xl.kind="for";var bO=class extends xl{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=qc(this.iteration,e,r),this}get names(){return jl(super.names,this.iteration.names)}},vO=class extends xl{constructor(e,r,n,i){super(),this.varKind=e,this.name=r,this.from=n,this.to=i}render(e){let r=e.es5?Ei.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return`for(${r} ${n}=${i}; ${n}<${s}; ${n}++)`+super.render(e)}get names(){let e=rb(super.names,this.from);return rb(e,this.to)}},tb=class extends xl{constructor(e,r,n,i){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=qc(this.iterable,e,r),this}get names(){return jl(super.names,this.iterable.names)}},Bh=class extends Js{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Bh.kind="func";var Vh=class extends Uh{render(e){return"return "+super.render(e)}};Vh.kind="return";var wO=class extends Js{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,i;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(i=this.finally)===null||i===void 0||i.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&jl(e,this.catch.names),this.finally&&jl(e,this.finally.names),e}},Hh=class extends Js{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Hh.kind="catch";var zh=class extends Js{render(e){return"finally"+super.render(e)}};zh.kind="finally";var EO=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Ei.Scope({parent:e}),this._nodes=[new _O]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,i){let s=this._scope.toName(r);return n!==void 0&&i&&(this._constants[s.str]=n),this._leafNode(new dO(e,s,n)),s}const(e,r,n){return this._def(Ei.varKinds.const,e,r,n)}let(e,r,n){return this._def(Ei.varKinds.let,e,r,n)}var(e,r,n){return this._def(Ei.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new eb(e,r,n))}add(e,r){return this._leafNode(new hO(e,ye.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==je.nil&&this._leafNode(new yO(e)),this}object(...e){let r=["{"];for(let[n,i]of e)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,je.addCodeArg)(r,i));return r.push("}"),new je._Code(r)}if(e,r,n){if(this._blockNode(new ql(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new ql(e))}else(){return this._elseNode(new kc)}endIf(){return this._endBlockNode(ql,kc)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new bO(e),r)}forRange(e,r,n,i,s=this.opts.es5?Ei.varKinds.var:Ei.varKinds.let){let o=this._scope.toName(e);return this._for(new vO(s,o,r,n),()=>i(o))}forOf(e,r,n,i=Ei.varKinds.const){let s=this._scope.toName(e);if(this.opts.es5){let o=r instanceof je.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,je._)`${o}.length`,a=>{this.var(s,(0,je._)`${o}[${a}]`),n(s)})}return this._for(new tb("of",i,s,r),()=>n(s))}forIn(e,r,n,i=this.opts.es5?Ei.varKinds.var:Ei.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,je._)`Object.keys(${r})`,n);let s=this._scope.toName(e);return this._for(new tb("in",i,s,r),()=>n(s))}endFor(){return this._endBlockNode(xl)}label(e){return this._leafNode(new pO(e))}break(e){return this._leafNode(new mO(e))}return(e){let r=new Vh;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Vh)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new wO;if(this._blockNode(i),this.code(e),r){let s=this.name("e");this._currNode=i.catch=new Hh(s),r(s)}return n&&(this._currNode=i.finally=new zh,this.code(n)),this._endBlockNode(Hh,zh)}throw(e){return this._leafNode(new gO(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=je.nil,n,i){return this._blockNode(new Bh(e,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(Bh)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof ql))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ye.CodeGen=EO;function jl(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function rb(t,e){return e instanceof je._CodeOrName?jl(t,e.names):t}function qc(t,e,r){if(t instanceof je.Name)return n(t);if(!i(t))return t;return new je._Code(t._items.reduce((s,o)=>(o instanceof je.Name&&(o=n(o)),o instanceof je._Code?s.push(...o._items):s.push(o),s),[]));function n(s){let o=r[s.str];return o===void 0||e[s.str]!==1?s:(delete e[s.str],o)}function i(s){return s instanceof je._Code&&s._items.some(o=>o instanceof je.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function SNe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function b6(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,je._)`!${SO(t)}`}ye.not=b6;var RNe=v6(ye.operators.AND);function TNe(...t){return t.reduce(RNe)}ye.and=TNe;var PNe=v6(ye.operators.OR);function $Ne(...t){return t.reduce(PNe)}ye.or=$Ne;function v6(t){return(e,r)=>e===je.nil?r:r===je.nil?e:(0,je._)`${SO(e)} ${t} ${SO(r)}`}function SO(t){return t instanceof je.Name?t:(0,je._)`(${t})`}});var ze=g(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.checkStrictMode=Se.getErrorPath=Se.Type=Se.useFunc=Se.setEvaluated=Se.evaluatedPropsToName=Se.mergeEvaluated=Se.eachItem=Se.unescapeJsonPointer=Se.escapeJsonPointer=Se.escapeFragment=Se.unescapeFragment=Se.schemaRefOrVal=Se.schemaHasRulesButRef=Se.schemaHasRules=Se.checkUnknownRules=Se.alwaysValidSchema=Se.toHash=void 0;var it=Ee(),ONe=Fh();function INe(t){let e={};for(let r of t)e[r]=!0;return e}Se.toHash=INe;function ANe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(S6(t,e),!R6(e,t.self.RULES.all))}Se.alwaysValidSchema=ANe;function S6(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let i=n.RULES.keywords;for(let s in e)i[s]||$6(t,`unknown keyword: "${s}"`)}Se.checkUnknownRules=S6;function R6(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Se.schemaHasRules=R6;function NNe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Se.schemaHasRulesButRef=NNe;function CNe({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,it._)`${r}`}return(0,it._)`${t}${e}${(0,it.getProperty)(n)}`}Se.schemaRefOrVal=CNe;function kNe(t){return T6(decodeURIComponent(t))}Se.unescapeFragment=kNe;function qNe(t){return encodeURIComponent(TO(t))}Se.escapeFragment=qNe;function TO(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Se.escapeJsonPointer=TO;function T6(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Se.unescapeJsonPointer=T6;function xNe(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Se.eachItem=xNe;function w6({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,s,o,a)=>{let l=o===void 0?s:o instanceof it.Name?(s instanceof it.Name?t(i,s,o):e(i,s,o),o):s instanceof it.Name?(e(i,o,s),s):r(s,o);return a===it.Name&&!(l instanceof it.Name)?n(i,l):l}}Se.mergeEvaluated={props:w6({mergeNames:(t,e,r)=>t.if((0,it._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,it._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,it._)`${r} || {}`).code((0,it._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,it._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,it._)`${r} || {}`),PO(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:P6}),items:w6({mergeNames:(t,e,r)=>t.if((0,it._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,it._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,it._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,it._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function P6(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,it._)`{}`);return e!==void 0&&PO(t,r,e),r}Se.evaluatedPropsToName=P6;function PO(t,e,r){Object.keys(r).forEach(n=>t.assign((0,it._)`${e}${(0,it.getProperty)(n)}`,!0))}Se.setEvaluated=PO;var E6={};function jNe(t,e){return t.scopeValue("func",{ref:e,code:E6[e.code]||(E6[e.code]=new ONe._Code(e.code))})}Se.useFunc=jNe;var RO;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(RO||(Se.Type=RO={}));function MNe(t,e,r){if(t instanceof it.Name){let n=e===RO.Num;return r?n?(0,it._)`"[" + ${t} + "]"`:(0,it._)`"['" + ${t} + "']"`:n?(0,it._)`"/" + ${t}`:(0,it._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,it.getProperty)(t).toString():"/"+TO(t)}Se.getErrorPath=MNe;function $6(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Se.checkStrictMode=$6});var Qs=g($O=>{"use strict";Object.defineProperty($O,"__esModule",{value:!0});var Sr=Ee(),LNe={data:new Sr.Name("data"),valCxt:new Sr.Name("valCxt"),instancePath:new Sr.Name("instancePath"),parentData:new Sr.Name("parentData"),parentDataProperty:new Sr.Name("parentDataProperty"),rootData:new Sr.Name("rootData"),dynamicAnchors:new Sr.Name("dynamicAnchors"),vErrors:new Sr.Name("vErrors"),errors:new Sr.Name("errors"),this:new Sr.Name("this"),self:new Sr.Name("self"),scope:new Sr.Name("scope"),json:new Sr.Name("json"),jsonPos:new Sr.Name("jsonPos"),jsonLen:new Sr.Name("jsonLen"),jsonPart:new Sr.Name("jsonPart")};$O.default=LNe});var Wh=g(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.extendErrors=Rr.resetErrorsCount=Rr.reportExtraError=Rr.reportError=Rr.keyword$DataError=Rr.keywordError=void 0;var De=Ee(),ib=ze(),Fr=Qs();Rr.keywordError={message:({keyword:t})=>(0,De.str)`must pass "${t}" keyword validation`};Rr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,De.str)`"${t}" keyword must be ${e} ($data)`:(0,De.str)`"${t}" keyword is invalid ($data)`};function DNe(t,e=Rr.keywordError,r,n){let{it:i}=t,{gen:s,compositeRule:o,allErrors:a}=i,l=A6(t,e,r);n??(o||a)?O6(s,l):I6(i,(0,De._)`[${l}]`)}Rr.reportError=DNe;function FNe(t,e=Rr.keywordError,r){let{it:n}=t,{gen:i,compositeRule:s,allErrors:o}=n,a=A6(t,e,r);O6(i,a),s||o||I6(n,Fr.default.vErrors)}Rr.reportExtraError=FNe;function UNe(t,e){t.assign(Fr.default.errors,e),t.if((0,De._)`${Fr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,De._)`${Fr.default.vErrors}.length`,e),()=>t.assign(Fr.default.vErrors,null)))}Rr.resetErrorsCount=UNe;function BNe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:i,it:s}){if(i===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",i,Fr.default.errors,a=>{t.const(o,(0,De._)`${Fr.default.vErrors}[${a}]`),t.if((0,De._)`${o}.instancePath === undefined`,()=>t.assign((0,De._)`${o}.instancePath`,(0,De.strConcat)(Fr.default.instancePath,s.errorPath))),t.assign((0,De._)`${o}.schemaPath`,(0,De.str)`${s.errSchemaPath}/${e}`),s.opts.verbose&&(t.assign((0,De._)`${o}.schema`,r),t.assign((0,De._)`${o}.data`,n))})}Rr.extendErrors=BNe;function O6(t,e){let r=t.const("err",e);t.if((0,De._)`${Fr.default.vErrors} === null`,()=>t.assign(Fr.default.vErrors,(0,De._)`[${r}]`),(0,De._)`${Fr.default.vErrors}.push(${r})`),t.code((0,De._)`${Fr.default.errors}++`)}function I6(t,e){let{gen:r,validateName:n,schemaEnv:i}=t;i.$async?r.throw((0,De._)`new ${t.ValidationError}(${e})`):(r.assign((0,De._)`${n}.errors`,e),r.return(!1))}var Ml={keyword:new De.Name("keyword"),schemaPath:new De.Name("schemaPath"),params:new De.Name("params"),propertyName:new De.Name("propertyName"),message:new De.Name("message"),schema:new De.Name("schema"),parentSchema:new De.Name("parentSchema")};function A6(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,De._)`{}`:VNe(t,e,r)}function VNe(t,e,r={}){let{gen:n,it:i}=t,s=[HNe(i,r),zNe(t,r)];return WNe(t,e,s),n.object(...s)}function HNe({errorPath:t},{instancePath:e}){let r=e?(0,De.str)`${t}${(0,ib.getErrorPath)(e,ib.Type.Str)}`:t;return[Fr.default.instancePath,(0,De.strConcat)(Fr.default.instancePath,r)]}function zNe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let i=n?e:(0,De.str)`${e}/${t}`;return r&&(i=(0,De.str)`${i}${(0,ib.getErrorPath)(r,ib.Type.Str)}`),[Ml.schemaPath,i]}function WNe(t,{params:e,message:r},n){let{keyword:i,data:s,schemaValue:o,it:a}=t,{opts:l,propertyName:u,topSchemaRef:c,schemaPath:f}=a;n.push([Ml.keyword,i],[Ml.params,typeof e=="function"?e(t):e||(0,De._)`{}`]),l.messages&&n.push([Ml.message,typeof r=="function"?r(t):r]),l.verbose&&n.push([Ml.schema,o],[Ml.parentSchema,(0,De._)`${c}${f}`],[Fr.default.data,s]),u&&n.push([Ml.propertyName,u])}});var C6=g(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.boolOrEmptySchema=xc.topBoolOrEmptySchema=void 0;var GNe=Wh(),KNe=Ee(),YNe=Qs(),JNe={message:"boolean schema is false"};function QNe(t){let{gen:e,schema:r,validateName:n}=t;r===!1?N6(t,!1):typeof r=="object"&&r.$async===!0?e.return(YNe.default.data):(e.assign((0,KNe._)`${n}.errors`,null),e.return(!0))}xc.topBoolOrEmptySchema=QNe;function XNe(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),N6(t)):r.var(e,!0)}xc.boolOrEmptySchema=XNe;function N6(t,e){let{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,GNe.reportError)(i,JNe,void 0,e)}});var OO=g(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.getRules=jc.isJSONType=void 0;var ZNe=["string","number","integer","boolean","null","object","array"],eCe=new Set(ZNe);function tCe(t){return typeof t=="string"&&eCe.has(t)}jc.isJSONType=tCe;function rCe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}jc.getRules=rCe});var IO=g(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.shouldUseRule=sa.shouldUseGroup=sa.schemaHasRulesForType=void 0;function nCe({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&k6(t,n)}sa.schemaHasRulesForType=nCe;function k6(t,e){return e.rules.some(r=>q6(t,r))}sa.shouldUseGroup=k6;function q6(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}sa.shouldUseRule=q6});var Gh=g(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.reportTypeError=Tr.checkDataTypes=Tr.checkDataType=Tr.coerceAndCheckDataType=Tr.getJSONTypes=Tr.getSchemaTypes=Tr.DataType=void 0;var iCe=OO(),sCe=IO(),oCe=Wh(),ce=Ee(),x6=ze(),Mc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Mc||(Tr.DataType=Mc={}));function aCe(t){let e=j6(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Tr.getSchemaTypes=aCe;function j6(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(iCe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Tr.getJSONTypes=j6;function lCe(t,e){let{gen:r,data:n,opts:i}=t,s=uCe(e,i.coerceTypes),o=e.length>0&&!(s.length===0&&e.length===1&&(0,sCe.schemaHasRulesForType)(t,e[0]));if(o){let a=NO(e,n,i.strictNumbers,Mc.Wrong);r.if(a,()=>{s.length?cCe(t,e,s):CO(t)})}return o}Tr.coerceAndCheckDataType=lCe;var M6=new Set(["string","number","integer","boolean","null"]);function uCe(t,e){return e?t.filter(r=>M6.has(r)||e==="array"&&r==="array"):[]}function cCe(t,e,r){let{gen:n,data:i,opts:s}=t,o=n.let("dataType",(0,ce._)`typeof ${i}`),a=n.let("coerced",(0,ce._)`undefined`);s.coerceTypes==="array"&&n.if((0,ce._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,ce._)`${i}[0]`).assign(o,(0,ce._)`typeof ${i}`).if(NO(e,i,s.strictNumbers),()=>n.assign(a,i))),n.if((0,ce._)`${a} !== undefined`);for(let u of r)(M6.has(u)||u==="array"&&s.coerceTypes==="array")&&l(u);n.else(),CO(t),n.endIf(),n.if((0,ce._)`${a} !== undefined`,()=>{n.assign(i,a),fCe(t,a)});function l(u){switch(u){case"string":n.elseIf((0,ce._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ce._)`"" + ${i}`).elseIf((0,ce._)`${i} === null`).assign(a,(0,ce._)`""`);return;case"number":n.elseIf((0,ce._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,ce._)`+${i}`);return;case"integer":n.elseIf((0,ce._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,ce._)`+${i}`);return;case"boolean":n.elseIf((0,ce._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,ce._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ce._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ce._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,ce._)`[${i}]`)}}}function fCe({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,ce._)`${e} !== undefined`,()=>t.assign((0,ce._)`${e}[${r}]`,n))}function AO(t,e,r,n=Mc.Correct){let i=n===Mc.Correct?ce.operators.EQ:ce.operators.NEQ,s;switch(t){case"null":return(0,ce._)`${e} ${i} null`;case"array":s=(0,ce._)`Array.isArray(${e})`;break;case"object":s=(0,ce._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=o((0,ce._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=o();break;default:return(0,ce._)`typeof ${e} ${i} ${t}`}return n===Mc.Correct?s:(0,ce.not)(s);function o(a=ce.nil){return(0,ce.and)((0,ce._)`typeof ${e} == "number"`,a,r?(0,ce._)`isFinite(${e})`:ce.nil)}}Tr.checkDataType=AO;function NO(t,e,r,n){if(t.length===1)return AO(t[0],e,r,n);let i,s=(0,x6.toHash)(t);if(s.array&&s.object){let o=(0,ce._)`typeof ${e} != "object"`;i=s.null?o:(0,ce._)`!${e} || ${o}`,delete s.null,delete s.array,delete s.object}else i=ce.nil;s.number&&delete s.integer;for(let o in s)i=(0,ce.and)(i,AO(o,e,r,n));return i}Tr.checkDataTypes=NO;var dCe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,ce._)`{type: ${t}}`:(0,ce._)`{type: ${e}}`};function CO(t){let e=hCe(t);(0,oCe.reportError)(e,dCe)}Tr.reportTypeError=CO;function hCe(t){let{gen:e,data:r,schema:n}=t,i=(0,x6.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}});var D6=g(sb=>{"use strict";Object.defineProperty(sb,"__esModule",{value:!0});sb.assignDefaults=void 0;var Lc=Ee(),pCe=ze();function mCe(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let i in r)L6(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,s)=>L6(t,s,i.default))}sb.assignDefaults=mCe;function L6(t,e,r){let{gen:n,compositeRule:i,data:s,opts:o}=t;if(r===void 0)return;let a=(0,Lc._)`${s}${(0,Lc.getProperty)(e)}`;if(i){(0,pCe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let l=(0,Lc._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,Lc._)`${l} || ${a} === null || ${a} === ""`),n.if(l,(0,Lc._)`${a} = ${(0,Lc.stringify)(r)}`)}});var Bn=g(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.validateUnion=Ze.validateArray=Ze.usePattern=Ze.callValidateCode=Ze.schemaProperties=Ze.allSchemaProperties=Ze.noPropertyInData=Ze.propertyInData=Ze.isOwnProperty=Ze.hasPropFunc=Ze.reportMissingProp=Ze.checkMissingProp=Ze.checkReportMissingProp=void 0;var ht=Ee(),kO=ze(),oa=Qs(),gCe=ze();function yCe(t,e){let{gen:r,data:n,it:i}=t;r.if(xO(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,ht._)`${e}`},!0),t.error()})}Ze.checkReportMissingProp=yCe;function _Ce({gen:t,data:e,it:{opts:r}},n,i){return(0,ht.or)(...n.map(s=>(0,ht.and)(xO(t,e,s,r.ownProperties),(0,ht._)`${i} = ${s}`)))}Ze.checkMissingProp=_Ce;function bCe(t,e){t.setParams({missingProperty:e},!0),t.error()}Ze.reportMissingProp=bCe;function F6(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ht._)`Object.prototype.hasOwnProperty`})}Ze.hasPropFunc=F6;function qO(t,e,r){return(0,ht._)`${F6(t)}.call(${e}, ${r})`}Ze.isOwnProperty=qO;function vCe(t,e,r,n){let i=(0,ht._)`${e}${(0,ht.getProperty)(r)} !== undefined`;return n?(0,ht._)`${i} && ${qO(t,e,r)}`:i}Ze.propertyInData=vCe;function xO(t,e,r,n){let i=(0,ht._)`${e}${(0,ht.getProperty)(r)} === undefined`;return n?(0,ht.or)(i,(0,ht.not)(qO(t,e,r))):i}Ze.noPropertyInData=xO;function U6(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ze.allSchemaProperties=U6;function wCe(t,e){return U6(e).filter(r=>!(0,kO.alwaysValidSchema)(t,e[r]))}Ze.schemaProperties=wCe;function ECe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:o},a,l,u){let c=u?(0,ht._)`${t}, ${e}, ${n}${i}`:e,f=[[oa.default.instancePath,(0,ht.strConcat)(oa.default.instancePath,s)],[oa.default.parentData,o.parentData],[oa.default.parentDataProperty,o.parentDataProperty],[oa.default.rootData,oa.default.rootData]];o.opts.dynamicRef&&f.push([oa.default.dynamicAnchors,oa.default.dynamicAnchors]);let h=(0,ht._)`${c}, ${r.object(...f)}`;return l!==ht.nil?(0,ht._)`${a}.call(${l}, ${h})`:(0,ht._)`${a}(${h})`}Ze.callValidateCode=ECe;var SCe=(0,ht._)`new RegExp`;function RCe({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,s=i(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ht._)`${i.code==="new RegExp"?SCe:(0,gCe.useFunc)(t,i)}(${r}, ${n})`})}Ze.usePattern=RCe;function TCe(t){let{gen:e,data:r,keyword:n,it:i}=t,s=e.name("valid");if(i.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(s,!0),o(()=>e.break()),s;function o(a){let l=e.const("len",(0,ht._)`${r}.length`);e.forRange("i",0,l,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:kO.Type.Num},s),e.if((0,ht.not)(s),a)})}}Ze.validateArray=TCe;function PCe(t){let{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,kO.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((l,u)=>{let c=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);e.assign(o,(0,ht._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,ht.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Ze.validateUnion=PCe});var H6=g(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.validateKeywordUsage=ps.validSchemaType=ps.funcKeywordCode=ps.macroKeywordCode=void 0;var Ur=Ee(),Ll=Qs(),$Ce=Bn(),OCe=Wh();function ICe(t,e){let{gen:r,keyword:n,schema:i,parentSchema:s,it:o}=t,a=e.macro.call(o.self,i,s,o),l=V6(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let u=r.name("valid");t.subschema({schema:a,schemaPath:Ur.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}ps.macroKeywordCode=ICe;function ACe(t,e){var r;let{gen:n,keyword:i,schema:s,parentSchema:o,$data:a,it:l}=t;CCe(l,e);let u=!a&&e.compile?e.compile.call(l.self,s,o,l):e.validate,c=V6(n,i,u),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&B6(t),y(()=>t.error());else{let _=e.async?d():p();e.modifying&&B6(t),y(()=>NCe(t,_))}}function d(){let _=n.let("ruleErrs",null);return n.try(()=>m((0,Ur._)`await `),w=>n.assign(f,!1).if((0,Ur._)`${w} instanceof ${l.ValidationError}`,()=>n.assign(_,(0,Ur._)`${w}.errors`),()=>n.throw(w))),_}function p(){let _=(0,Ur._)`${c}.errors`;return n.assign(_,null),m(Ur.nil),_}function m(_=e.async?(0,Ur._)`await `:Ur.nil){let w=l.opts.passContext?Ll.default.this:Ll.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,Ur._)`${_}${(0,$Ce.callValidateCode)(t,c,w,v)}`,e.modifying)}function y(_){var w;n.if((0,Ur.not)((w=e.valid)!==null&&w!==void 0?w:f),_)}}ps.funcKeywordCode=ACe;function B6(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Ur._)`${n.parentData}[${n.parentDataProperty}]`))}function NCe(t,e){let{gen:r}=t;r.if((0,Ur._)`Array.isArray(${e})`,()=>{r.assign(Ll.default.vErrors,(0,Ur._)`${Ll.default.vErrors} === null ? ${e} : ${Ll.default.vErrors}.concat(${e})`).assign(Ll.default.errors,(0,Ur._)`${Ll.default.vErrors}.length`),(0,OCe.extendErrors)(t)},()=>t.error())}function CCe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function V6(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Ur.stringify)(r)})}function kCe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}ps.validSchemaType=kCe;function qCe({schema:t,opts:e,self:r,errSchemaPath:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");let o=i.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[s])){let l=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}ps.validateKeywordUsage=qCe});var W6=g(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.extendSubschemaMode=aa.extendSubschemaData=aa.getSubschema=void 0;var ms=Ee(),z6=ze();function xCe(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,ms._)`${t.schemaPath}${(0,ms.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,ms._)`${t.schemaPath}${(0,ms.getProperty)(e)}${(0,ms.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,z6.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}aa.getSubschema=xCe;function jCe(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:u,dataPathArr:c,opts:f}=e,h=a.let("data",(0,ms._)`${e.data}${(0,ms.getProperty)(r)}`,!0);l(h),t.errorPath=(0,ms.str)`${u}${(0,z6.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,ms._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(i!==void 0){let u=i instanceof ms.Name?i:a.let("data",i,!0);l(u),o!==void 0&&(t.propertyName=o)}s&&(t.dataTypes=s);function l(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}aa.extendSubschemaData=jCe;function MCe(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=r}aa.extendSubschemaMode=MCe});var Xs=g((Jtt,G6)=>{"use strict";G6.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var Y6=g((Qtt,K6)=>{"use strict";var la=K6.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};ob(e,n,i,t,"",t)};la.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};la.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};la.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};la.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ob(t,e,r,n,i,s,o,a,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,s,o,a,l,u);for(var c in n){var f=n[c];if(Array.isArray(f)){if(c in la.arrayKeywords)for(var h=0;h<f.length;h++)ob(t,e,r,f[h],i+"/"+c+"/"+h,s,i,c,n,h)}else if(c in la.propsKeywords){if(f&&typeof f=="object")for(var d in f)ob(t,e,r,f[d],i+"/"+c+"/"+LCe(d),s,i,c,n,d)}else(c in la.keywords||t.allKeys&&!(c in la.skipKeywords))&&ob(t,e,r,f,i+"/"+c,s,i,c,n)}r(n,i,s,o,a,l,u)}}function LCe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Kh=g(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.getSchemaRefs=nn.resolveUrl=nn.normalizeId=nn._getFullPath=nn.getFullPath=nn.inlineRef=void 0;var DCe=ze(),FCe=Xs(),UCe=Y6(),BCe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function VCe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!jO(t):e?J6(t)<=e:!1}nn.inlineRef=VCe;var HCe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function jO(t){for(let e in t){if(HCe.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(jO)||typeof r=="object"&&jO(r))return!0}return!1}function J6(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!BCe.has(r)&&(typeof t[r]=="object"&&(0,DCe.eachItem)(t[r],n=>e+=J6(n)),e===1/0))return 1/0}return e}function Q6(t,e="",r){r!==!1&&(e=Dc(e));let n=t.parse(e);return X6(t,n)}nn.getFullPath=Q6;function X6(t,e){return t.serialize(e).split("#")[0]+"#"}nn._getFullPath=X6;var zCe=/#\/?$/;function Dc(t){return t?t.replace(zCe,""):""}nn.normalizeId=Dc;function WCe(t,e,r){return r=Dc(r),t.resolve(e,r)}nn.resolveUrl=WCe;var GCe=/^[a-z_][-a-z0-9._]*$/i;function KCe(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=Dc(t[r]||e),s={"":i},o=Q6(n,i,!1),a={},l=new Set;return UCe(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,y=s[p];typeof f[r]=="string"&&(y=_.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),s[h]=y;function _(v){let b=this.opts.uriResolver.resolve;if(v=Dc(y?b(y,v):v),l.has(v))throw c(v);l.add(v);let E=this.refs[v];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?u(f,E.schema,v):v!==Dc(m)&&(v[0]==="#"?(u(f,a[v],v),a[v]=f):this.refs[v]=m),v}function w(v){if(typeof v=="string"){if(!GCe.test(v))throw new Error(`invalid anchor "${v}"`);_.call(this,`#${v}`)}}}),a;function u(f,h,d){if(h!==void 0&&!FCe(f,h))throw c(d)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}nn.getSchemaRefs=KCe});var Qh=g(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.getData=ua.KeywordCxt=ua.validateFunctionCode=void 0;var nG=C6(),Z6=Gh(),LO=IO(),ab=Gh(),YCe=D6(),Jh=H6(),MO=W6(),Y=Ee(),ne=Qs(),JCe=Kh(),Zs=ze(),Yh=Wh();function QCe(t){if(oG(t)&&(aG(t),sG(t))){eke(t);return}iG(t,()=>(0,nG.topBoolOrEmptySchema)(t))}ua.validateFunctionCode=QCe;function iG({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},s){i.code.es5?t.func(e,(0,Y._)`${ne.default.data}, ${ne.default.valCxt}`,n.$async,()=>{t.code((0,Y._)`"use strict"; ${eG(r,i)}`),ZCe(t,i),t.code(s)}):t.func(e,(0,Y._)`${ne.default.data}, ${XCe(i)}`,n.$async,()=>t.code(eG(r,i)).code(s))}function XCe(t){return(0,Y._)`{${ne.default.instancePath}="", ${ne.default.parentData}, ${ne.default.parentDataProperty}, ${ne.default.rootData}=${ne.default.data}${t.dynamicRef?(0,Y._)`, ${ne.default.dynamicAnchors}={}`:Y.nil}}={}`}function ZCe(t,e){t.if(ne.default.valCxt,()=>{t.var(ne.default.instancePath,(0,Y._)`${ne.default.valCxt}.${ne.default.instancePath}`),t.var(ne.default.parentData,(0,Y._)`${ne.default.valCxt}.${ne.default.parentData}`),t.var(ne.default.parentDataProperty,(0,Y._)`${ne.default.valCxt}.${ne.default.parentDataProperty}`),t.var(ne.default.rootData,(0,Y._)`${ne.default.valCxt}.${ne.default.rootData}`),e.dynamicRef&&t.var(ne.default.dynamicAnchors,(0,Y._)`${ne.default.valCxt}.${ne.default.dynamicAnchors}`)},()=>{t.var(ne.default.instancePath,(0,Y._)`""`),t.var(ne.default.parentData,(0,Y._)`undefined`),t.var(ne.default.parentDataProperty,(0,Y._)`undefined`),t.var(ne.default.rootData,ne.default.data),e.dynamicRef&&t.var(ne.default.dynamicAnchors,(0,Y._)`{}`)})}function eke(t){let{schema:e,opts:r,gen:n}=t;iG(t,()=>{r.$comment&&e.$comment&&uG(t),ske(t),n.let(ne.default.vErrors,null),n.let(ne.default.errors,0),r.unevaluated&&tke(t),lG(t),lke(t)})}function tke(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Y._)`${r}.evaluated`),e.if((0,Y._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Y._)`${t.evaluated}.props`,(0,Y._)`undefined`)),e.if((0,Y._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Y._)`${t.evaluated}.items`,(0,Y._)`undefined`))}function eG(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Y._)`/*# sourceURL=${r} */`:Y.nil}function rke(t,e){if(oG(t)&&(aG(t),sG(t))){nke(t,e);return}(0,nG.boolOrEmptySchema)(t,e)}function sG({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function oG(t){return typeof t.schema!="boolean"}function nke(t,e){let{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&uG(t),oke(t),ake(t);let s=n.const("_errs",ne.default.errors);lG(t,s),n.var(e,(0,Y._)`${s} === ${ne.default.errors}`)}function aG(t){(0,Zs.checkUnknownRules)(t),ike(t)}function lG(t,e){if(t.opts.jtd)return tG(t,[],!1,e);let r=(0,Z6.getSchemaTypes)(t.schema),n=(0,Z6.coerceAndCheckDataType)(t,r);tG(t,r,!n,e)}function ike(t){let{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Zs.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function ske(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Zs.checkStrictMode)(t,"default is ignored in the schema root")}function oke(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,JCe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function ake(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function uG({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){let s=r.$comment;if(i.$comment===!0)t.code((0,Y._)`${ne.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){let o=(0,Y.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Y._)`${ne.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function lke(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=t;r.$async?e.if((0,Y._)`${ne.default.errors} === 0`,()=>e.return(ne.default.data),()=>e.throw((0,Y._)`new ${i}(${ne.default.vErrors})`)):(e.assign((0,Y._)`${n}.errors`,ne.default.vErrors),s.unevaluated&&uke(t),e.return((0,Y._)`${ne.default.errors} === 0`))}function uke({gen:t,evaluated:e,props:r,items:n}){r instanceof Y.Name&&t.assign((0,Y._)`${e}.props`,r),n instanceof Y.Name&&t.assign((0,Y._)`${e}.items`,n)}function tG(t,e,r,n){let{gen:i,schema:s,data:o,allErrors:a,opts:l,self:u}=t,{RULES:c}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,Zs.schemaHasRulesButRef)(s,c))){i.block(()=>fG(t,"$ref",c.all.$ref.definition));return}l.jtd||cke(t,e),i.block(()=>{for(let h of c.rules)f(h);f(c.post)});function f(h){(0,LO.shouldUseGroup)(s,h)&&(h.type?(i.if((0,ab.checkDataType)(h.type,o,l.strictNumbers)),rG(t,h),e.length===1&&e[0]===h.type&&r&&(i.else(),(0,ab.reportTypeError)(t)),i.endIf()):rG(t,h),a||i.if((0,Y._)`${ne.default.errors} === ${n||0}`))}}function rG(t,e){let{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,YCe.assignDefaults)(t,e.type),r.block(()=>{for(let s of e.rules)(0,LO.shouldUseRule)(n,s)&&fG(t,s.keyword,s.definition,e.type)})}function cke(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(fke(t,e),t.opts.allowUnionTypes||dke(t,e),hke(t,t.dataTypes))}function fke(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{cG(t.dataTypes,r)||DO(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),mke(t,e)}}function dke(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&DO(t,"use allowUnionTypes to allow union type keyword")}function hke(t,e){let r=t.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,LO.shouldUseRule)(t.schema,i)){let{type:s}=i.definition;s.length&&!s.some(o=>pke(e,o))&&DO(t,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function pke(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function cG(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function mke(t,e){let r=[];for(let n of t.dataTypes)cG(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function DO(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Zs.checkStrictMode)(t,e,t.opts.strictTypes)}var lb=class{constructor(e,r,n){if((0,Jh.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Zs.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",dG(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Jh.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ne.default.errors))}result(e,r,n){this.failResult((0,Y.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Y.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Y._)`${r} !== undefined && (${(0,Y.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Yh.reportExtraError:Yh.reportError)(this,this.def.error,r)}$dataError(){(0,Yh.reportError)(this,this.def.$dataError||Yh.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Yh.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Y.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Y.nil,r=Y.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:s,def:o}=this;n.if((0,Y.or)((0,Y._)`${i} === undefined`,r)),e!==Y.nil&&n.assign(e,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Y.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:i,it:s}=this;return(0,Y.or)(o(),a());function o(){if(n.length){if(!(r instanceof Y.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,Y._)`${(0,ab.checkDataTypes)(l,r,s.opts.strictNumbers,ab.DataType.Wrong)}`}return Y.nil}function a(){if(i.validateSchema){let l=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,Y._)`!${l}(${r})`}return Y.nil}}subschema(e,r){let n=(0,MO.getSubschema)(this.it,e);(0,MO.extendSubschemaData)(n,this.it,e),(0,MO.extendSubschemaMode)(n,e);let i={...this.it,...n,items:void 0,props:void 0};return rke(i,r),i}mergeEvaluated(e,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Zs.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Zs.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,Y.Name)),!0}};ua.KeywordCxt=lb;function fG(t,e,r,n){let i=new lb(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,Jh.funcKeywordCode)(i,r):"macro"in r?(0,Jh.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,Jh.funcKeywordCode)(i,r)}var gke=/^\/(?:[^~]|~0|~1)*$/,yke=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function dG(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,s;if(t==="")return ne.default.rootData;if(t[0]==="/"){if(!gke.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,s=ne.default.rootData}else{let u=yke.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);let c=+u[1];if(i=u[2],i==="#"){if(c>=e)throw new Error(l("property/index",c));return n[e-c]}if(c>e)throw new Error(l("data",c));if(s=r[e-c],!i)return s}let o=s,a=i.split("/");for(let u of a)u&&(s=(0,Y._)`${s}${(0,Y.getProperty)((0,Zs.unescapeJsonPointer)(u))}`,o=(0,Y._)`${o} && ${s}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${e}`}}ua.getData=dG});var ub=g(UO=>{"use strict";Object.defineProperty(UO,"__esModule",{value:!0});var FO=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};UO.default=FO});var Xh=g(HO=>{"use strict";Object.defineProperty(HO,"__esModule",{value:!0});var BO=Kh(),VO=class extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,BO.resolveUrl)(e,r,n),this.missingSchema=(0,BO.normalizeId)((0,BO.getFullPath)(e,this.missingRef))}};HO.default=VO});var fb=g(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.resolveSchema=Vn.getCompilingSchema=Vn.resolveRef=Vn.compileSchema=Vn.SchemaEnv=void 0;var Si=Ee(),_ke=ub(),Dl=Qs(),Ri=Kh(),hG=ze(),bke=Qh(),Fc=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Ri.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Vn.SchemaEnv=Fc;function WO(t){let e=pG.call(this,t);if(e)return e;let r=(0,Ri.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Si.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a;t.$async&&(a=o.scopeValue("Error",{ref:_ke.default,code:(0,Si._)`require("ajv/dist/runtime/validation_error").default`}));let l=o.scopeName("validate");t.validateName=l;let u={gen:o,allErrors:this.opts.allErrors,data:Dl.default.data,parentData:Dl.default.parentData,parentDataProperty:Dl.default.parentDataProperty,dataNames:[Dl.default.data],dataPathArr:[Si.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Si.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Si.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Si._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(t),(0,bke.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);let f=o.toString();c=`${o.scopeRefs(Dl.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));let d=new Function(`${Dl.default.self}`,`${Dl.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=u;d.evaluated={props:p instanceof Si.Name?void 0:p,items:m instanceof Si.Name?void 0:m,dynamicProps:p instanceof Si.Name,dynamicItems:m instanceof Si.Name},d.source&&(d.source.evaluated=(0,Si.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}Vn.compileSchema=WO;function vke(t,e,r){var n;r=(0,Ri.resolveUrl)(this.opts.uriResolver,e,r);let i=t.refs[r];if(i)return i;let s=Ske.call(this,t,r);if(s===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(s=new Fc({schema:o,schemaId:a,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=wke.call(this,s)}Vn.resolveRef=vke;function wke(t){return(0,Ri.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:WO.call(this,t)}function pG(t){for(let e of this._compilations)if(Eke(e,t))return e}Vn.getCompilingSchema=pG;function Eke(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Ske(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||cb.call(this,t,e)}function cb(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Ri._getFullPath)(this.opts.uriResolver,r),i=(0,Ri.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return zO.call(this,r,t);let s=(0,Ri.normalizeId)(n),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){let a=cb.call(this,t,o);return typeof a?.schema!="object"?void 0:zO.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||WO.call(this,o),s===(0,Ri.normalizeId)(e)){let{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(i=(0,Ri.resolveUrl)(this.opts.uriResolver,i,u)),new Fc({schema:a,schemaId:l,root:t,baseId:i})}return zO.call(this,r,o)}}Vn.resolveSchema=cb;var Rke=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function zO(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,hG.unescapeFragment)(a)];if(l===void 0)return;r=l;let u=typeof r=="object"&&r[this.opts.schemaId];!Rke.has(a)&&u&&(e=(0,Ri.resolveUrl)(this.opts.uriResolver,e,u))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,hG.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Ri.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=cb.call(this,n,a)}let{schemaId:o}=this.opts;if(s=s||new Fc({schema:r,schemaId:o,root:n,baseId:e}),s.schema!==s.root.schema)return s}});var mG=g((nrt,Tke)=>{Tke.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var yG=g((irt,gG)=>{"use strict";var Pke={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};gG.exports={HEX:Pke}});var TG=g((srt,RG)=>{"use strict";var{HEX:$ke}=yG(),Oke=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function wG(t){if(SG(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(Oke)||[],[r]=e;return r?{host:Ake(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function GO(t,e=!1){let r="",n=!0;for(let i of t){if($ke[i]===void 0)return;i!=="0"&&n===!0&&(n=!1),n||(r+=i)}return e&&r.length===0&&(r="0"),r}function Ike(t){let e=0,r={error:!1,address:"",zone:""},n=[],i=[],s=!1,o=!1,a=!1;function l(){if(i.length){if(s===!1){let u=GO(i);if(u!==void 0)n.push(u);else return r.error=!0,!1}i.length=0}return!0}for(let u=0;u<t.length;u++){let c=t[u];if(!(c==="["||c==="]"))if(c===":"){if(o===!0&&(a=!0),!l())break;if(e++,n.push(":"),e>7){r.error=!0;break}u-1>=0&&t[u-1]===":"&&(o=!0);continue}else if(c==="%"){if(!l())break;s=!0}else{i.push(c);continue}}return i.length&&(s?r.zone=i.join(""):a?n.push(i.join("")):n.push(GO(i))),r.address=n.join(""),r}function EG(t){if(SG(t,":")<2)return{host:t,isIPV6:!1};let e=Ike(t);if(e.error)return{host:t,isIPV6:!1};{let r=e.address,n=e.address;return e.zone&&(r+="%"+e.zone,n+="%25"+e.zone),{host:r,escapedHost:n,isIPV6:!0}}}function Ake(t,e){let r="",n=!0,i=t.length;for(let s=0;s<i;s++){let o=t[s];o==="0"&&n?(s+1<=i&&t[s+1]===e||s+1===i)&&(r+=o,n=!1):(o===e?n=!0:n=!1,r+=o)}return r}function SG(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}var _G=/^\.\.?\//u,bG=/^\/\.(?:\/|$)/u,vG=/^\/\.\.(?:\/|$)/u,Nke=/^\/?(?:.|\n)*?(?=\/|$)/u;function Cke(t){let e=[];for(;t.length;)if(t.match(_G))t=t.replace(_G,"");else if(t.match(bG))t=t.replace(bG,"/");else if(t.match(vG))t=t.replace(vG,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(Nke);if(r){let n=r[0];t=t.slice(n.length),e.push(n)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function kke(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function qke(t){let e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let r=unescape(t.host),n=wG(r);if(n.isIPV4)r=n.host;else{let i=EG(n.host);i.isIPV6===!0?r=`[${i.escapedHost}]`:r=t.host}e.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}RG.exports={recomposeAuthority:qke,normalizeComponentEncoding:kke,removeDotSegments:Cke,normalizeIPv4:wG,normalizeIPv6:EG,stringArrayToHexStripped:GO}});var NG=g((ort,AG)=>{"use strict";var xke=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,jke=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function PG(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function $G(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function OG(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function Mke(t){return t.secure=PG(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function Lke(t){if((t.port===(PG(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function Dke(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(jke);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let i=`${n}:${e.nid||t.nid}`,s=KO[i];t.path=void 0,s&&(t=s.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function Fke(t,e){let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),i=`${r}:${e.nid||n}`,s=KO[i];s&&(t=s.serialize(t,e));let o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function Uke(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!xke.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Bke(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var IG={scheme:"http",domainHost:!0,parse:$G,serialize:OG},Vke={scheme:"https",domainHost:IG.domainHost,parse:$G,serialize:OG},db={scheme:"ws",domainHost:!0,parse:Mke,serialize:Lke},Hke={scheme:"wss",domainHost:db.domainHost,parse:db.parse,serialize:db.serialize},zke={scheme:"urn",parse:Dke,serialize:Fke,skipNormalize:!0},Wke={scheme:"urn:uuid",parse:Uke,serialize:Bke,skipNormalize:!0},KO={http:IG,https:Vke,ws:db,wss:Hke,urn:zke,"urn:uuid":Wke};AG.exports=KO});var Uc=g((art,pb)=>{"use strict";var{normalizeIPv6:Gke,normalizeIPv4:Kke,removeDotSegments:Zh,recomposeAuthority:Yke,normalizeComponentEncoding:hb}=TG(),YO=NG();function Jke(t,e){return typeof t=="string"?t=gs(eo(t,e),e):typeof t=="object"&&(t=eo(gs(t,e),e)),t}function Qke(t,e,r){let n=Object.assign({scheme:"null"},r),i=CG(eo(t,n),eo(e,n),n,!0);return gs(i,{...n,skipEscape:!0})}function CG(t,e,r,n){let i={};return n||(t=eo(gs(t,r),r),e=eo(gs(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=Zh(e.path||""),i.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=Zh(e.path||""),i.query=e.query):(e.path?(e.path.charAt(0)==="/"?i.path=Zh(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?i.path="/"+e.path:t.path?i.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:i.path=e.path,i.path=Zh(i.path)),i.query=e.query):(i.path=t.path,e.query!==void 0?i.query=e.query:i.query=t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=e.fragment,i}function Xke(t,e,r){return typeof t=="string"?(t=unescape(t),t=gs(hb(eo(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=gs(hb(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=gs(hb(eo(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=gs(hb(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function gs(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),i=[],s=YO[(n.scheme||r.scheme||"").toLowerCase()];s&&s.serialize&&s.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&i.push(r.scheme,":");let o=Yke(r);if(o!==void 0&&(n.reference!=="suffix"&&i.push("//"),i.push(o),r.path&&r.path.charAt(0)!=="/"&&i.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!s||!s.absolutePath)&&(a=Zh(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),i.push(a)}return r.query!==void 0&&i.push("?",r.query),r.fragment!==void 0&&i.push("#",r.fragment),i.join("")}var Zke=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function eqe(t){let e=0;for(let r=0,n=t.length;r<n;++r)if(e=t.charCodeAt(r),e>126||Zke[e])return!0;return!1}var tqe=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function eo(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=t.indexOf("%")!==-1,s=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let o=t.match(tqe);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host){let l=Kke(n.host);if(l.isIPV4===!1){let u=Gke(l.host);n.host=u.host.toLowerCase(),s=u.isIPV6}else n.host=l.host,s=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let a=YO[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&s===!1&&eqe(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(l){n.error=n.error||"Host's domain name can not be converted to ASCII: "+l}(!a||a&&!a.skipNormalize)&&(i&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),i&&n.host!==void 0&&(n.host=unescape(n.host)),n.path&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var JO={SCHEMES:YO,normalize:Jke,resolve:Qke,resolveComponents:CG,equal:Xke,serialize:gs,parse:eo};pb.exports=JO;pb.exports.default=JO;pb.exports.fastUri=JO});var qG=g(QO=>{"use strict";Object.defineProperty(QO,"__esModule",{value:!0});var kG=Uc();kG.code='require("ajv/dist/runtime/uri").default';QO.default=kG});var BG=g(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.CodeGen=cr.Name=cr.nil=cr.stringify=cr.str=cr._=cr.KeywordCxt=void 0;var rqe=Qh();Object.defineProperty(cr,"KeywordCxt",{enumerable:!0,get:function(){return rqe.KeywordCxt}});var Bc=Ee();Object.defineProperty(cr,"_",{enumerable:!0,get:function(){return Bc._}});Object.defineProperty(cr,"str",{enumerable:!0,get:function(){return Bc.str}});Object.defineProperty(cr,"stringify",{enumerable:!0,get:function(){return Bc.stringify}});Object.defineProperty(cr,"nil",{enumerable:!0,get:function(){return Bc.nil}});Object.defineProperty(cr,"Name",{enumerable:!0,get:function(){return Bc.Name}});Object.defineProperty(cr,"CodeGen",{enumerable:!0,get:function(){return Bc.CodeGen}});var nqe=ub(),DG=Xh(),iqe=OO(),ep=fb(),sqe=Ee(),tp=Kh(),mb=Gh(),ZO=ze(),xG=mG(),oqe=qG(),FG=(t,e)=>new RegExp(t,e);FG.code="new RegExp";var aqe=["removeAdditional","useDefaults","coerceTypes"],lqe=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),uqe={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},cqe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},jG=200;function fqe(t){var e,r,n,i,s,o,a,l,u,c,f,h,d,p,m,y,_,w,v,b,E,R,S,P,T;let O=t.strict,j=(e=t.code)===null||e===void 0?void 0:e.optimize,N=j===!0||j===void 0?1:j||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:FG,z=(i=t.uriResolver)!==null&&i!==void 0?i:oqe.default;return{strictSchema:(o=(s=t.strictSchema)!==null&&s!==void 0?s:O)!==null&&o!==void 0?o:!0,strictNumbers:(l=(a=t.strictNumbers)!==null&&a!==void 0?a:O)!==null&&l!==void 0?l:!0,strictTypes:(c=(u=t.strictTypes)!==null&&u!==void 0?u:O)!==null&&c!==void 0?c:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:O)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:O)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:jG,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:jG,meta:(_=t.meta)!==null&&_!==void 0?_:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(b=t.schemaId)!==null&&b!==void 0?b:"$id",addUsedSchema:(E=t.addUsedSchema)!==null&&E!==void 0?E:!0,validateSchema:(R=t.validateSchema)!==null&&R!==void 0?R:!0,validateFormats:(S=t.validateFormats)!==null&&S!==void 0?S:!0,unicodeRegExp:(P=t.unicodeRegExp)!==null&&P!==void 0?P:!0,int32range:(T=t.int32range)!==null&&T!==void 0?T:!0,uriResolver:z}}var rp=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...fqe(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new sqe.ValueScope({scope:{},prefixes:lqe,es5:r,lines:n}),this.logger=yqe(e.logger);let i=e.validateFormats;e.validateFormats=!1,this.RULES=(0,iqe.getRules)(),MG.call(this,uqe,e,"NOT SUPPORTED"),MG.call(this,cqe,e,"DEPRECATED","warn"),this._metaOpts=mqe.call(this),e.formats&&hqe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&pqe.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),dqe.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,i=xG;n==="id"&&(i={...xG},i.id=i.$id,delete i.$id),r&&e&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,e,r);async function i(c,f){await s.call(this,c.$schema);let h=this._addSchema(c,f);return h.validate||o.call(this,h)}async function s(c){c&&!this.getSchema(c)&&await i.call(this,{$ref:c},!0)}async function o(c){try{return this._compileSchemaEnv(c)}catch(f){if(!(f instanceof DG.default))throw f;return a.call(this,f),await l.call(this,f.missingSchema),o.call(this,c)}}function a({missingSchema:c,missingRef:f}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${f} cannot be resolved`)}async function l(c){let f=await u.call(this,c);this.refs[c]||await s.call(this,f.$schema),this.refs[c]||this.addSchema(f,c,r)}async function u(c){let f=this._loading[c];if(f)return f;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(e,r,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,i);return this}let s;if(typeof e=="object"){let{schemaId:o}=this.opts;if(s=e[o],s!==void 0&&typeof s!="string")throw new Error(`schema ${o} must be string`)}return r=(0,tp.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,i,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,e);if(!i&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return i}getSchema(e){let r;for(;typeof(r=LG.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,i=new ep.SchemaEnv({schema:{},schemaId:n});if(r=ep.resolveSchema.call(this,i,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=LG.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,tp.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(bqe.call(this,n,r),!r)return(0,ZO.eachItem)(n,s=>XO.call(this,s)),this;wqe.call(this,r);let i={...r,type:(0,mb.getJSONTypes)(r.type),schemaType:(0,mb.getJSONTypes)(r.schemaType)};return(0,ZO.eachItem)(n,i.type.length===0?s=>XO.call(this,s,i):s=>i.type.forEach(o=>XO.call(this,s,i,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let i=n.rules.findIndex(s=>s.keyword===e);i>=0&&n.rules.splice(i,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,s)=>i+r+s)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let i of r){let s=i.split("/").slice(1),o=e;for(let a of s)o=o[a];for(let a in n){let l=n[a];if(typeof l!="object")continue;let{$data:u}=l.definition,c=o[a];u&&c&&(o[a]=UG(c))}}return e}_removeAllSchemas(e,r){for(let n in e){let i=e[n];(!r||r.test(n))&&(typeof i=="string"?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,r,n,i=this.opts.validateSchema,s=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;n=(0,tp.normalizeId)(o||n);let u=tp.getSchemaRefs.call(this,e,n);return l=new ep.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:u}),this._cache.set(l.schema,l),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),i&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):ep.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{ep.compileSchema.call(this,e)}finally{this.opts=r}}};rp.ValidationError=nqe.default;rp.MissingRefError=DG.default;cr.default=rp;function MG(t,e,r,n="error"){for(let i in t){let s=i;s in e&&this.logger[n](`${r}: option ${i}. ${t[s]}`)}}function LG(t){return t=(0,tp.normalizeId)(t),this.schemas[t]||this.refs[t]}function dqe(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function hqe(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function pqe(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function mqe(){let t={...this.opts};for(let e of aqe)delete t[e];return t}var gqe={log(){},warn(){},error(){}};function yqe(t){if(t===!1)return gqe;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var _qe=/^[a-z_$][a-z0-9_$:-]*$/i;function bqe(t,e){let{RULES:r}=this;if((0,ZO.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!_qe.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function XO(t,e,r){var n;let i=e?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,o=i?s.post:s.rules.find(({type:l})=>l===r);if(o||(o={type:r,rules:[]},s.rules.push(o)),s.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,mb.getJSONTypes)(e.type),schemaType:(0,mb.getJSONTypes)(e.schemaType)}};e.before?vqe.call(this,o,a,e.before):o.rules.push(a),s.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function vqe(t,e,r){let n=t.rules.findIndex(i=>i.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function wqe(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=UG(e)),t.validateSchema=this.compile(e,!0))}var Eqe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function UG(t){return{anyOf:[t,Eqe]}}});var VG=g(eI=>{"use strict";Object.defineProperty(eI,"__esModule",{value:!0});var Sqe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};eI.default=Sqe});var GG=g(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.callRef=Fl.getValidate=void 0;var Rqe=Xh(),HG=Bn(),sn=Ee(),Vc=Qs(),zG=fb(),gb=ze(),Tqe={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:l}=n,{root:u}=s;if((r==="#"||r==="#/")&&i===u.baseId)return f();let c=zG.resolveRef.call(l,u,i,r);if(c===void 0)throw new Rqe.default(n.opts.uriResolver,i,r);if(c instanceof zG.SchemaEnv)return h(c);return d(c);function f(){if(s===u)return yb(t,o,s,s.$async);let p=e.scopeValue("root",{ref:u});return yb(t,(0,sn._)`${p}.validate`,u,u.$async)}function h(p){let m=WG(t,p);yb(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,sn.stringify)(p)}:{ref:p}),y=e.name("valid"),_=t.subschema({schema:p,dataTypes:[],schemaPath:sn.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(_),t.ok(y)}}};function WG(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,sn._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Fl.getValidate=WG;function yb(t,e,r,n){let{gen:i,it:s}=t,{allErrors:o,schemaEnv:a,opts:l}=s,u=l.passContext?Vc.default.this:sn.nil;n?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=i.let("valid");i.try(()=>{i.code((0,sn._)`await ${(0,HG.callValidateCode)(t,e,u)}`),d(e),o||i.assign(p,!0)},m=>{i.if((0,sn._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),h(m),o||i.assign(p,!1)}),t.ok(p)}function f(){t.result((0,HG.callValidateCode)(t,e,u),()=>d(e),()=>h(e))}function h(p){let m=(0,sn._)`${p}.errors`;i.assign(Vc.default.vErrors,(0,sn._)`${Vc.default.vErrors} === null ? ${m} : ${Vc.default.vErrors}.concat(${m})`),i.assign(Vc.default.errors,(0,sn._)`${Vc.default.vErrors}.length`)}function d(p){var m;if(!s.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(s.props=gb.mergeEvaluated.props(i,y.props,s.props));else{let _=i.var("props",(0,sn._)`${p}.evaluated.props`);s.props=gb.mergeEvaluated.props(i,_,s.props,sn.Name)}if(s.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(s.items=gb.mergeEvaluated.items(i,y.items,s.items));else{let _=i.var("items",(0,sn._)`${p}.evaluated.items`);s.items=gb.mergeEvaluated.items(i,_,s.items,sn.Name)}}}Fl.callRef=yb;Fl.default=Tqe});var KG=g(tI=>{"use strict";Object.defineProperty(tI,"__esModule",{value:!0});var Pqe=VG(),$qe=GG(),Oqe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Pqe.default,$qe.default];tI.default=Oqe});var YG=g(rI=>{"use strict";Object.defineProperty(rI,"__esModule",{value:!0});var _b=Ee(),ca=_b.operators,bb={maximum:{okStr:"<=",ok:ca.LTE,fail:ca.GT},minimum:{okStr:">=",ok:ca.GTE,fail:ca.LT},exclusiveMaximum:{okStr:"<",ok:ca.LT,fail:ca.GTE},exclusiveMinimum:{okStr:">",ok:ca.GT,fail:ca.LTE}},Iqe={message:({keyword:t,schemaCode:e})=>(0,_b.str)`must be ${bb[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,_b._)`{comparison: ${bb[t].okStr}, limit: ${e}}`},Aqe={keyword:Object.keys(bb),type:"number",schemaType:"number",$data:!0,error:Iqe,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,_b._)`${r} ${bb[e].fail} ${n} || isNaN(${r})`)}};rI.default=Aqe});var JG=g(nI=>{"use strict";Object.defineProperty(nI,"__esModule",{value:!0});var np=Ee(),Nqe={message:({schemaCode:t})=>(0,np.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,np._)`{multipleOf: ${t}}`},Cqe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Nqe,code(t){let{gen:e,data:r,schemaCode:n,it:i}=t,s=i.opts.multipleOfPrecision,o=e.let("res"),a=s?(0,np._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,np._)`${o} !== parseInt(${o})`;t.fail$data((0,np._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};nI.default=Cqe});var XG=g(iI=>{"use strict";Object.defineProperty(iI,"__esModule",{value:!0});function QG(t){let e=t.length,r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}iI.default=QG;QG.code='require("ajv/dist/runtime/ucs2length").default'});var ZG=g(sI=>{"use strict";Object.defineProperty(sI,"__esModule",{value:!0});var Ul=Ee(),kqe=ze(),qqe=XG(),xqe={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Ul.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Ul._)`{limit: ${t}}`},jqe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:xqe,code(t){let{keyword:e,data:r,schemaCode:n,it:i}=t,s=e==="maxLength"?Ul.operators.GT:Ul.operators.LT,o=i.opts.unicode===!1?(0,Ul._)`${r}.length`:(0,Ul._)`${(0,kqe.useFunc)(t.gen,qqe.default)}(${r})`;t.fail$data((0,Ul._)`${o} ${s} ${n}`)}};sI.default=jqe});var eK=g(oI=>{"use strict";Object.defineProperty(oI,"__esModule",{value:!0});var Mqe=Bn(),vb=Ee(),Lqe={message:({schemaCode:t})=>(0,vb.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,vb._)`{pattern: ${t}}`},Dqe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Lqe,code(t){let{data:e,$data:r,schema:n,schemaCode:i,it:s}=t,o=s.opts.unicodeRegExp?"u":"",a=r?(0,vb._)`(new RegExp(${i}, ${o}))`:(0,Mqe.usePattern)(t,n);t.fail$data((0,vb._)`!${a}.test(${e})`)}};oI.default=Dqe});var tK=g(aI=>{"use strict";Object.defineProperty(aI,"__esModule",{value:!0});var ip=Ee(),Fqe={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,ip.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,ip._)`{limit: ${t}}`},Uqe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Fqe,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?ip.operators.GT:ip.operators.LT;t.fail$data((0,ip._)`Object.keys(${r}).length ${i} ${n}`)}};aI.default=Uqe});var rK=g(lI=>{"use strict";Object.defineProperty(lI,"__esModule",{value:!0});var sp=Bn(),op=Ee(),Bqe=ze(),Vqe={message:({params:{missingProperty:t}})=>(0,op.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,op._)`{missingProperty: ${t}}`},Hqe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Vqe,code(t){let{gen:e,schema:r,schemaCode:n,data:i,$data:s,it:o}=t,{opts:a}=o;if(!s&&r.length===0)return;let l=r.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,_=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,Bqe.checkStrictMode)(o,_,o.opts.strictRequired)}}function u(){if(l||s)t.block$data(op.nil,f);else for(let d of r)(0,sp.checkReportMissingProp)(t,d)}function c(){let d=e.let("missing");if(l||s){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,sp.checkMissingProp)(t,r,d)),(0,sp.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,sp.noPropertyInData)(e,i,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,sp.propertyInData)(e,i,d,a.ownProperties)),e.if((0,op.not)(p),()=>{t.error(),e.break()})},op.nil)}}};lI.default=Hqe});var nK=g(uI=>{"use strict";Object.defineProperty(uI,"__esModule",{value:!0});var ap=Ee(),zqe={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,ap.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,ap._)`{limit: ${t}}`},Wqe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:zqe,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?ap.operators.GT:ap.operators.LT;t.fail$data((0,ap._)`${r}.length ${i} ${n}`)}};uI.default=Wqe});var lp=g(cI=>{"use strict";Object.defineProperty(cI,"__esModule",{value:!0});var iK=Xs();iK.code='require("ajv/dist/runtime/equal").default';cI.default=iK});var sK=g(dI=>{"use strict";Object.defineProperty(dI,"__esModule",{value:!0});var fI=Gh(),fr=Ee(),Gqe=ze(),Kqe=lp(),Yqe={message:({params:{i:t,j:e}})=>(0,fr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,fr._)`{i: ${t}, j: ${e}}`},Jqe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Yqe,code(t){let{gen:e,data:r,$data:n,schema:i,parentSchema:s,schemaCode:o,it:a}=t;if(!n&&!i)return;let l=e.let("valid"),u=s.items?(0,fI.getSchemaTypes)(s.items):[];t.block$data(l,c,(0,fr._)`${o} === false`),t.ok(l);function c(){let p=e.let("i",(0,fr._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(l,!0),e.if((0,fr._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return u.length>0&&!u.some(p=>p==="object"||p==="array")}function h(p,m){let y=e.name("item"),_=(0,fI.checkDataTypes)(u,y,a.opts.strictNumbers,fI.DataType.Wrong),w=e.const("indices",(0,fr._)`{}`);e.for((0,fr._)`;${p}--;`,()=>{e.let(y,(0,fr._)`${r}[${p}]`),e.if(_,(0,fr._)`continue`),u.length>1&&e.if((0,fr._)`typeof ${y} == "string"`,(0,fr._)`${y} += "_"`),e.if((0,fr._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,fr._)`${w}[${y}]`),t.error(),e.assign(l,!1).break()}).code((0,fr._)`${w}[${y}] = ${p}`)})}function d(p,m){let y=(0,Gqe.useFunc)(e,Kqe.default),_=e.name("outer");e.label(_).for((0,fr._)`;${p}--;`,()=>e.for((0,fr._)`${m} = ${p}; ${m}--;`,()=>e.if((0,fr._)`${y}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(l,!1).break(_)})))}}};dI.default=Jqe});var oK=g(pI=>{"use strict";Object.defineProperty(pI,"__esModule",{value:!0});var hI=Ee(),Qqe=ze(),Xqe=lp(),Zqe={message:"must be equal to constant",params:({schemaCode:t})=>(0,hI._)`{allowedValue: ${t}}`},exe={keyword:"const",$data:!0,error:Zqe,code(t){let{gen:e,data:r,$data:n,schemaCode:i,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,hI._)`!${(0,Qqe.useFunc)(e,Xqe.default)}(${r}, ${i})`):t.fail((0,hI._)`${s} !== ${r}`)}};pI.default=exe});var aK=g(mI=>{"use strict";Object.defineProperty(mI,"__esModule",{value:!0});var up=Ee(),txe=ze(),rxe=lp(),nxe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,up._)`{allowedValues: ${t}}`},ixe={keyword:"enum",schemaType:"array",$data:!0,error:nxe,code(t){let{gen:e,data:r,$data:n,schema:i,schemaCode:s,it:o}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=o.opts.loopEnum,l,u=()=>l??(l=(0,txe.useFunc)(e,rxe.default)),c;if(a||n)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let d=e.const("vSchema",s);c=(0,up.or)(...i.map((p,m)=>h(d,m)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",s,d=>e.if((0,up._)`${u()}(${r}, ${d})`,()=>e.assign(c,!0).break()))}function h(d,p){let m=i[p];return typeof m=="object"&&m!==null?(0,up._)`${u()}(${r}, ${d}[${p}])`:(0,up._)`${r} === ${m}`}}};mI.default=ixe});var lK=g(gI=>{"use strict";Object.defineProperty(gI,"__esModule",{value:!0});var sxe=YG(),oxe=JG(),axe=ZG(),lxe=eK(),uxe=tK(),cxe=rK(),fxe=nK(),dxe=sK(),hxe=oK(),pxe=aK(),mxe=[sxe.default,oxe.default,axe.default,lxe.default,uxe.default,cxe.default,fxe.default,dxe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},hxe.default,pxe.default];gI.default=mxe});var _I=g(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.validateAdditionalItems=void 0;var Bl=Ee(),yI=ze(),gxe={message:({params:{len:t}})=>(0,Bl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Bl._)`{limit: ${t}}`},yxe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:gxe,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,yI.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}uK(t,n)}};function uK(t,e){let{gen:r,schema:n,data:i,keyword:s,it:o}=t;o.items=!0;let a=r.const("len",(0,Bl._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Bl._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,yI.alwaysValidSchema)(o,n)){let u=r.var("valid",(0,Bl._)`${a} <= ${e.length}`);r.if((0,Bl.not)(u),()=>l(u)),t.ok(u)}function l(u){r.forRange("i",e.length,a,c=>{t.subschema({keyword:s,dataProp:c,dataPropType:yI.Type.Num},u),o.allErrors||r.if((0,Bl.not)(u),()=>r.break())})}}cp.validateAdditionalItems=uK;cp.default=yxe});var bI=g(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.validateTuple=void 0;var cK=Ee(),wb=ze(),_xe=Bn(),bxe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return fK(t,"additionalItems",e);r.items=!0,!(0,wb.alwaysValidSchema)(r,e)&&t.ok((0,_xe.validateArray)(t))}};function fK(t,e,r=t.schema){let{gen:n,parentSchema:i,data:s,keyword:o,it:a}=t;c(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=wb.mergeEvaluated.items(n,r.length,a.items));let l=n.name("valid"),u=n.const("len",(0,cK._)`${s}.length`);r.forEach((f,h)=>{(0,wb.alwaysValidSchema)(a,f)||(n.if((0,cK._)`${u} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},l)),t.ok(l))});function c(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let y=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,wb.checkStrictMode)(a,y,h.strictTuples)}}}fp.validateTuple=fK;fp.default=bxe});var dK=g(vI=>{"use strict";Object.defineProperty(vI,"__esModule",{value:!0});var vxe=bI(),wxe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,vxe.validateTuple)(t,"items")};vI.default=wxe});var pK=g(wI=>{"use strict";Object.defineProperty(wI,"__esModule",{value:!0});var hK=Ee(),Exe=ze(),Sxe=Bn(),Rxe=_I(),Txe={message:({params:{len:t}})=>(0,hK.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,hK._)`{limit: ${t}}`},Pxe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Txe,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,Exe.alwaysValidSchema)(n,e)&&(i?(0,Rxe.validateAdditionalItems)(t,i):t.ok((0,Sxe.validateArray)(t)))}};wI.default=Pxe});var mK=g(EI=>{"use strict";Object.defineProperty(EI,"__esModule",{value:!0});var Hn=Ee(),Eb=ze(),$xe={message:({params:{min:t,max:e}})=>e===void 0?(0,Hn.str)`must contain at least ${t} valid item(s)`:(0,Hn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Hn._)`{minContains: ${t}}`:(0,Hn._)`{minContains: ${t}, maxContains: ${e}}`},Oxe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:$xe,code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:s}=t,o,a,{minContains:l,maxContains:u}=n;s.opts.next?(o=l===void 0?1:l,a=u):o=1;let c=e.const("len",(0,Hn._)`${i}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Eb.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Eb.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Eb.alwaysValidSchema)(s,r)){let m=(0,Hn._)`${c} >= ${o}`;a!==void 0&&(m=(0,Hn._)`${m} && ${c} <= ${a}`),t.pass(m);return}s.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,Hn._)`${i}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),y=e.let("count",0);d(m,()=>e.if(m,()=>p(y)))}function d(m,y){e.forRange("i",0,c,_=>{t.subschema({keyword:"contains",dataProp:_,dataPropType:Eb.Type.Num,compositeRule:!0},m),y()})}function p(m){e.code((0,Hn._)`${m}++`),a===void 0?e.if((0,Hn._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,Hn._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,Hn._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};EI.default=Oxe});var _K=g(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.validateSchemaDeps=ys.validatePropertyDeps=ys.error=void 0;var SI=Ee(),Ixe=ze(),dp=Bn();ys.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,SI.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,SI._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Axe={keyword:"dependencies",type:"object",schemaType:"object",error:ys.error,code(t){let[e,r]=Nxe(t);gK(t,e),yK(t,r)}};function Nxe({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let i=Array.isArray(t[n])?e:r;i[n]=t[n]}return[e,r]}function gK(t,e=t.schema){let{gen:r,data:n,it:i}=t;if(Object.keys(e).length===0)return;let s=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let l=(0,dp.propertyInData)(r,n,o,i.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),i.allErrors?r.if(l,()=>{for(let u of a)(0,dp.checkReportMissingProp)(t,u)}):(r.if((0,SI._)`${l} && (${(0,dp.checkMissingProp)(t,a,s)})`),(0,dp.reportMissingProp)(t,s),r.else())}}ys.validatePropertyDeps=gK;function yK(t,e=t.schema){let{gen:r,data:n,keyword:i,it:s}=t,o=r.name("valid");for(let a in e)(0,Ixe.alwaysValidSchema)(s,e[a])||(r.if((0,dp.propertyInData)(r,n,a,s.opts.ownProperties),()=>{let l=t.subschema({keyword:i,schemaProp:a},o);t.mergeValidEvaluated(l,o)},()=>r.var(o,!0)),t.ok(o))}ys.validateSchemaDeps=yK;ys.default=Axe});var vK=g(RI=>{"use strict";Object.defineProperty(RI,"__esModule",{value:!0});var bK=Ee(),Cxe=ze(),kxe={message:"property name must be valid",params:({params:t})=>(0,bK._)`{propertyName: ${t.propertyName}}`},qxe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:kxe,code(t){let{gen:e,schema:r,data:n,it:i}=t;if((0,Cxe.alwaysValidSchema)(i,r))return;let s=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),e.if((0,bK.not)(s),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(s)}};RI.default=qxe});var PI=g(TI=>{"use strict";Object.defineProperty(TI,"__esModule",{value:!0});var Sb=Bn(),Ti=Ee(),xxe=Qs(),Rb=ze(),jxe={message:"must NOT have additional properties",params:({params:t})=>(0,Ti._)`{additionalProperty: ${t.additionalProperty}}`},Mxe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:jxe,code(t){let{gen:e,schema:r,parentSchema:n,data:i,errsCount:s,it:o}=t;if(!s)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,Rb.alwaysValidSchema)(o,r))return;let u=(0,Sb.allSchemaProperties)(n.properties),c=(0,Sb.allSchemaProperties)(n.patternProperties);f(),t.ok((0,Ti._)`${s} === ${xxe.default.errors}`);function f(){e.forIn("key",i,y=>{!u.length&&!c.length?p(y):e.if(h(y),()=>p(y))})}function h(y){let _;if(u.length>8){let w=(0,Rb.schemaRefOrVal)(o,n.properties,"properties");_=(0,Sb.isOwnProperty)(e,w,y)}else u.length?_=(0,Ti.or)(...u.map(w=>(0,Ti._)`${y} === ${w}`)):_=Ti.nil;return c.length&&(_=(0,Ti.or)(_,...c.map(w=>(0,Ti._)`${(0,Sb.usePattern)(t,w)}.test(${y})`))),(0,Ti.not)(_)}function d(y){e.code((0,Ti._)`delete ${i}[${y}]`)}function p(y){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){d(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Rb.alwaysValidSchema)(o,r)){let _=e.name("valid");l.removeAdditional==="failing"?(m(y,_,!1),e.if((0,Ti.not)(_),()=>{t.reset(),d(y)})):(m(y,_),a||e.if((0,Ti.not)(_),()=>e.break()))}}function m(y,_,w){let v={keyword:"additionalProperties",dataProp:y,dataPropType:Rb.Type.Str};w===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,_)}}};TI.default=Mxe});var SK=g(OI=>{"use strict";Object.defineProperty(OI,"__esModule",{value:!0});var Lxe=Qh(),wK=Bn(),$I=ze(),EK=PI(),Dxe={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&EK.default.code(new Lxe.KeywordCxt(s,EK.default,"additionalProperties"));let o=(0,wK.allSchemaProperties)(r);for(let f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=$I.mergeEvaluated.props(e,(0,$I.toHash)(o),s.props));let a=o.filter(f=>!(0,$I.alwaysValidSchema)(s,r[f]));if(a.length===0)return;let l=e.name("valid");for(let f of a)u(f)?c(f):(e.if((0,wK.propertyInData)(e,i,f,s.opts.ownProperties)),c(f),s.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function u(f){return s.opts.useDefaults&&!s.compositeRule&&r[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};OI.default=Dxe});var $K=g(II=>{"use strict";Object.defineProperty(II,"__esModule",{value:!0});var RK=Bn(),Tb=Ee(),TK=ze(),PK=ze(),Fxe={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:i,it:s}=t,{opts:o}=s,a=(0,RK.allSchemaProperties)(r),l=a.filter(m=>(0,TK.alwaysValidSchema)(s,r[m]));if(a.length===0||l.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;let u=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=e.name("valid");s.props!==!0&&!(s.props instanceof Tb.Name)&&(s.props=(0,PK.evaluatedPropsToName)(e,s.props));let{props:f}=s;h();function h(){for(let m of a)u&&d(m),s.allErrors?p(m):(e.var(c,!0),p(m),e.if(c))}function d(m){for(let y in u)new RegExp(m).test(y)&&(0,TK.checkStrictMode)(s,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,y=>{e.if((0,Tb._)`${(0,RK.usePattern)(t,m)}.test(${y})`,()=>{let _=l.includes(m);_||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:PK.Type.Str},c),s.opts.unevaluated&&f!==!0?e.assign((0,Tb._)`${f}[${y}]`,!0):!_&&!s.allErrors&&e.if((0,Tb.not)(c),()=>e.break())})})}}};II.default=Fxe});var OK=g(AI=>{"use strict";Object.defineProperty(AI,"__esModule",{value:!0});var Uxe=ze(),Bxe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Uxe.alwaysValidSchema)(n,r)){t.fail();return}let i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};AI.default=Bxe});var IK=g(NI=>{"use strict";Object.defineProperty(NI,"__esModule",{value:!0});var Vxe=Bn(),Hxe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Vxe.validateUnion,error:{message:"must match a schema in anyOf"}};NI.default=Hxe});var AK=g(CI=>{"use strict";Object.defineProperty(CI,"__esModule",{value:!0});var Pb=Ee(),zxe=ze(),Wxe={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Pb._)`{passingSchemas: ${t.passing}}`},Gxe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Wxe,code(t){let{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let s=r,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(o,()=>t.reset(),()=>t.error(!0));function u(){s.forEach((c,f)=>{let h;(0,zxe.alwaysValidSchema)(i,c)?e.var(l,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,Pb._)`${l} && ${o}`).assign(o,!1).assign(a,(0,Pb._)`[${a}, ${f}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,Pb.Name)})})}}};CI.default=Gxe});var NK=g(kI=>{"use strict";Object.defineProperty(kI,"__esModule",{value:!0});var Kxe=ze(),Yxe={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=e.name("valid");r.forEach((s,o)=>{if((0,Kxe.alwaysValidSchema)(n,s))return;let a=t.subschema({keyword:"allOf",schemaProp:o},i);t.ok(i),t.mergeEvaluated(a)})}};kI.default=Yxe});var qK=g(qI=>{"use strict";Object.defineProperty(qI,"__esModule",{value:!0});var $b=Ee(),kK=ze(),Jxe={message:({params:t})=>(0,$b.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,$b._)`{failingKeyword: ${t.ifClause}}`},Qxe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Jxe,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,kK.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=CK(n,"then"),s=CK(n,"else");if(!i&&!s)return;let o=e.let("valid",!0),a=e.name("_valid");if(l(),t.reset(),i&&s){let c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,u("then",c),u("else",c))}else i?e.if(a,u("then")):e.if((0,$b.not)(a),u("else"));t.pass(o,()=>t.error(!0));function l(){let c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function u(c,f){return()=>{let h=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,$b._)`${c}`):t.setParams({ifClause:c})}}}};function CK(t,e){let r=t.schema[e];return r!==void 0&&!(0,kK.alwaysValidSchema)(t,r)}qI.default=Qxe});var xK=g(xI=>{"use strict";Object.defineProperty(xI,"__esModule",{value:!0});var Xxe=ze(),Zxe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Xxe.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};xI.default=Zxe});var jK=g(jI=>{"use strict";Object.defineProperty(jI,"__esModule",{value:!0});var eje=_I(),tje=dK(),rje=bI(),nje=pK(),ije=mK(),sje=_K(),oje=vK(),aje=PI(),lje=SK(),uje=$K(),cje=OK(),fje=IK(),dje=AK(),hje=NK(),pje=qK(),mje=xK();function gje(t=!1){let e=[cje.default,fje.default,dje.default,hje.default,pje.default,mje.default,oje.default,aje.default,sje.default,lje.default,uje.default];return t?e.push(tje.default,nje.default):e.push(eje.default,rje.default),e.push(ije.default),e}jI.default=gje});var MK=g(MI=>{"use strict";Object.defineProperty(MI,"__esModule",{value:!0});var qt=Ee(),yje={message:({schemaCode:t})=>(0,qt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,qt._)`{format: ${t}}`},_je={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:yje,code(t,e){let{gen:r,data:n,$data:i,schema:s,schemaCode:o,it:a}=t,{opts:l,errSchemaPath:u,schemaEnv:c,self:f}=a;if(!l.validateFormats)return;i?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:l.code.formats}),m=r.const("fDef",(0,qt._)`${p}[${o}]`),y=r.let("fType"),_=r.let("format");r.if((0,qt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,qt._)`${m}.type || "string"`).assign(_,(0,qt._)`${m}.validate`),()=>r.assign(y,(0,qt._)`"string"`).assign(_,m)),t.fail$data((0,qt.or)(w(),v()));function w(){return l.strictSchema===!1?qt.nil:(0,qt._)`${o} && !${_}`}function v(){let b=c.$async?(0,qt._)`(${m}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,qt._)`${_}(${n})`,E=(0,qt._)`(typeof ${_} == "function" ? ${b} : ${_}.test(${n}))`;return(0,qt._)`${_} && ${_} !== true && ${y} === ${e} && !${E}`}}function d(){let p=f.formats[s];if(!p){w();return}if(p===!0)return;let[m,y,_]=v(p);m===e&&t.pass(b());function w(){if(l.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function v(E){let R=E instanceof RegExp?(0,qt.regexpCode)(E):l.code.formats?(0,qt._)`${l.code.formats}${(0,qt.getProperty)(s)}`:void 0,S=r.scopeValue("formats",{key:s,ref:E,code:R});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,qt._)`${S}.validate`]:["string",E,S]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,qt._)`await ${_}(${n})`}return typeof y=="function"?(0,qt._)`${_}(${n})`:(0,qt._)`${_}.test(${n})`}}}};MI.default=_je});var LK=g(LI=>{"use strict";Object.defineProperty(LI,"__esModule",{value:!0});var bje=MK(),vje=[bje.default];LI.default=vje});var DK=g(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.contentVocabulary=Hc.metadataVocabulary=void 0;Hc.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Hc.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var UK=g(DI=>{"use strict";Object.defineProperty(DI,"__esModule",{value:!0});var wje=KG(),Eje=lK(),Sje=jK(),Rje=LK(),FK=DK(),Tje=[wje.default,Eje.default,(0,Sje.default)(),Rje.default,FK.metadataVocabulary,FK.contentVocabulary];DI.default=Tje});var VK=g(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0});Ob.DiscrError=void 0;var BK;(function(t){t.Tag="tag",t.Mapping="mapping"})(BK||(Ob.DiscrError=BK={}))});var zK=g(UI=>{"use strict";Object.defineProperty(UI,"__esModule",{value:!0});var zc=Ee(),FI=VK(),HK=fb(),Pje=Xh(),$je=ze(),Oje={message:({params:{discrError:t,tagName:e}})=>t===FI.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,zc._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Ije={keyword:"discriminator",type:"object",schemaType:"object",error:Oje,code(t){let{gen:e,data:r,schema:n,parentSchema:i,it:s}=t,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),u=e.const("tag",(0,zc._)`${r}${(0,zc.getProperty)(a)}`);e.if((0,zc._)`typeof ${u} == "string"`,()=>c(),()=>t.error(!1,{discrError:FI.DiscrError.Tag,tag:u,tagName:a})),t.ok(l);function c(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,zc._)`${u} === ${p}`),e.assign(l,f(d[p]));e.else(),t.error(!1,{discrError:FI.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,zc.Name),p}function h(){var d;let p={},m=_(i),y=!0;for(let b=0;b<o.length;b++){let E=o[b];if(E?.$ref&&!(0,$je.schemaHasRulesButRef)(E,s.self.RULES)){let S=E.$ref;if(E=HK.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof HK.SchemaEnv&&(E=E.schema),E===void 0)throw new Pje.default(s.opts.uriResolver,s.baseId,S)}let R=(d=E?.properties)===null||d===void 0?void 0:d[a];if(typeof R!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||_(E)),w(R,b)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return p;function _({required:b}){return Array.isArray(b)&&b.includes(a)}function w(b,E){if(b.const)v(b.const,E);else if(b.enum)for(let R of b.enum)v(R,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(b,E){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=E}}}};UI.default=Ije});var WK=g((Yrt,Aje)=>{Aje.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var KK=g((pt,BI)=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.MissingRefError=pt.ValidationError=pt.CodeGen=pt.Name=pt.nil=pt.stringify=pt.str=pt._=pt.KeywordCxt=pt.Ajv=void 0;var Nje=BG(),Cje=UK(),kje=zK(),GK=WK(),qje=["/properties"],Ib="http://json-schema.org/draft-07/schema",Wc=class extends Nje.default{_addVocabularies(){super._addVocabularies(),Cje.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(kje.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(GK,qje):GK;this.addMetaSchema(e,Ib,!1),this.refs["http://json-schema.org/schema"]=Ib}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Ib)?Ib:void 0)}};pt.Ajv=Wc;BI.exports=pt=Wc;BI.exports.Ajv=Wc;Object.defineProperty(pt,"__esModule",{value:!0});pt.default=Wc;var xje=Qh();Object.defineProperty(pt,"KeywordCxt",{enumerable:!0,get:function(){return xje.KeywordCxt}});var Gc=Ee();Object.defineProperty(pt,"_",{enumerable:!0,get:function(){return Gc._}});Object.defineProperty(pt,"str",{enumerable:!0,get:function(){return Gc.str}});Object.defineProperty(pt,"stringify",{enumerable:!0,get:function(){return Gc.stringify}});Object.defineProperty(pt,"nil",{enumerable:!0,get:function(){return Gc.nil}});Object.defineProperty(pt,"Name",{enumerable:!0,get:function(){return Gc.Name}});Object.defineProperty(pt,"CodeGen",{enumerable:!0,get:function(){return Gc.CodeGen}});var jje=ub();Object.defineProperty(pt,"ValidationError",{enumerable:!0,get:function(){return jje.default}});var Mje=Xh();Object.defineProperty(pt,"MissingRefError",{enumerable:!0,get:function(){return Mje.default}})});var Ab=g(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.formatNames=bs.fastFormats=bs.fullFormats=void 0;function _s(t,e){return{validate:t,compare:e}}bs.fullFormats={date:_s(XK,WI),time:_s(HI(!0),GI),"date-time":_s(YK(!0),e7),"iso-time":_s(HI(),ZK),"iso-date-time":_s(YK(),t7),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Vje,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Jje,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Hje,int32:{type:"number",validate:Gje},int64:{type:"number",validate:Kje},float:{type:"number",validate:QK},double:{type:"number",validate:QK},password:!0,binary:!0};bs.fastFormats={...bs.fullFormats,date:_s(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,WI),time:_s(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,GI),"date-time":_s(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,e7),"iso-time":_s(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,ZK),"iso-date-time":_s(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,t7),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};bs.formatNames=Object.keys(bs.fullFormats);function Lje(t){return t%4===0&&(t%100!==0||t%400===0)}var Dje=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Fje=[0,31,28,31,30,31,30,31,31,30,31,30,31];function XK(t){let e=Dje.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&i<=(n===2&&Lje(r)?29:Fje[n])}function WI(t,e){if(t&&e)return t>e?1:t<e?-1:0}var VI=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function HI(t){return function(r){let n=VI.exec(r);if(!n)return!1;let i=+n[1],s=+n[2],o=+n[3],a=n[4],l=n[5]==="-"?-1:1,u=+(n[6]||0),c=+(n[7]||0);if(u>23||c>59||t&&!a)return!1;if(i<=23&&s<=59&&o<60)return!0;let f=s-c*l,h=i-u*l-(f<0?1:0);return(h===23||h===-1)&&(f===59||f===-1)&&o<61}}function GI(t,e){if(!(t&&e))return;let r=new Date("2020-01-01T"+t).valueOf(),n=new Date("2020-01-01T"+e).valueOf();if(r&&n)return r-n}function ZK(t,e){if(!(t&&e))return;let r=VI.exec(t),n=VI.exec(e);if(r&&n)return t=r[1]+r[2]+r[3],e=n[1]+n[2]+n[3],t>e?1:t<e?-1:0}var zI=/t|\s/i;function YK(t){let e=HI(t);return function(n){let i=n.split(zI);return i.length===2&&XK(i[0])&&e(i[1])}}function e7(t,e){if(!(t&&e))return;let r=new Date(t).valueOf(),n=new Date(e).valueOf();if(r&&n)return r-n}function t7(t,e){if(!(t&&e))return;let[r,n]=t.split(zI),[i,s]=e.split(zI),o=WI(r,i);if(o!==void 0)return o||GI(n,s)}var Uje=/\/|:/,Bje=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Vje(t){return Uje.test(t)&&Bje.test(t)}var JK=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Hje(t){return JK.lastIndex=0,JK.test(t)}var zje=-(2**31),Wje=2**31-1;function Gje(t){return Number.isInteger(t)&&t<=Wje&&t>=zje}function Kje(t){return Number.isInteger(t)}function QK(){return!0}var Yje=/[^\\]\\Z/;function Jje(t){if(Yje.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var mp=g(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.regexpCode=We.getEsmExportName=We.getProperty=We.safeStringify=We.stringify=We.strConcat=We.addCodeArg=We.str=We._=We.nil=We._Code=We.Name=We.IDENTIFIER=We._CodeOrName=void 0;var hp=class{};We._CodeOrName=hp;We.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Vl=class extends hp{constructor(e){if(super(),!We.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};We.Name=Vl;var zn=class extends hp{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Vl&&(r[n.str]=(r[n.str]||0)+1),r),{})}};We._Code=zn;We.nil=new zn("");function r7(t,...e){let r=[t[0]],n=0;for(;n<e.length;)YI(r,e[n]),r.push(t[++n]);return new zn(r)}We._=r7;var KI=new zn("+");function n7(t,...e){let r=[pp(t[0])],n=0;for(;n<e.length;)r.push(KI),YI(r,e[n]),r.push(KI,pp(t[++n]));return Qje(r),new zn(r)}We.str=n7;function YI(t,e){e instanceof zn?t.push(...e._items):e instanceof Vl?t.push(e):t.push(eMe(e))}We.addCodeArg=YI;function Qje(t){let e=1;for(;e<t.length-1;){if(t[e]===KI){let r=Xje(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Xje(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Vl||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Vl))return`"${t}${e.slice(1)}`}function Zje(t,e){return e.emptyStr()?t:t.emptyStr()?e:n7`${t}${e}`}We.strConcat=Zje;function eMe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:pp(Array.isArray(t)?t.join(","):t)}function tMe(t){return new zn(pp(t))}We.stringify=tMe;function pp(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}We.safeStringify=pp;function rMe(t){return typeof t=="string"&&We.IDENTIFIER.test(t)?new zn(`.${t}`):r7`[${t}]`}We.getProperty=rMe;function nMe(t){if(typeof t=="string"&&We.IDENTIFIER.test(t))return new zn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}We.getEsmExportName=nMe;function iMe(t){return new zn(t.toString())}We.regexpCode=iMe});var XI=g(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.ValueScope=an.ValueScopeName=an.Scope=an.varKinds=an.UsedValueState=void 0;var on=mp(),JI=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Nb;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Nb||(an.UsedValueState=Nb={}));an.varKinds={const:new on.Name("const"),let:new on.Name("let"),var:new on.Name("var")};var Cb=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof on.Name?e:this.name(e)}name(e){return new on.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};an.Scope=Cb;var kb=class extends on.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,on._)`.${new on.Name(r)}[${n}]`}};an.ValueScopeName=kb;var sMe=(0,on._)`\n`,QI=class extends Cb{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?sMe:on.nil}}get(){return this._scope}name(e){return new kb(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(e),{prefix:s}=i,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[s];if(a){let c=a.get(o);if(c)return c}else a=this._values[s]=new Map;a.set(o,i);let l=this._scope[s]||(this._scope[s]=[]),u=l.length;return l[u]=r.ref,i.setValue(r,{property:s,itemIndex:u}),i}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,on._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(e,r,n={},i){let s=on.nil;for(let o in e){let a=e[o];if(!a)continue;let l=n[o]=n[o]||new Map;a.forEach(u=>{if(l.has(u))return;l.set(u,Nb.Started);let c=r(u);if(c){let f=this.opts.es5?an.varKinds.var:an.varKinds.const;s=(0,on._)`${s}${f} ${u} = ${c};${this.opts._n}`}else if(c=i?.(u))s=(0,on._)`${s}${c}${this.opts._n}`;else throw new JI(u);l.set(u,Nb.Completed)})}return s}};an.ValueScope=QI});var pe=g(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.or=_e.and=_e.not=_e.CodeGen=_e.operators=_e.varKinds=_e.ValueScopeName=_e.ValueScope=_e.Scope=_e.Name=_e.regexpCode=_e.stringify=_e.getProperty=_e.nil=_e.strConcat=_e.str=_e._=void 0;var Me=mp(),Pi=XI(),fa=mp();Object.defineProperty(_e,"_",{enumerable:!0,get:function(){return fa._}});Object.defineProperty(_e,"str",{enumerable:!0,get:function(){return fa.str}});Object.defineProperty(_e,"strConcat",{enumerable:!0,get:function(){return fa.strConcat}});Object.defineProperty(_e,"nil",{enumerable:!0,get:function(){return fa.nil}});Object.defineProperty(_e,"getProperty",{enumerable:!0,get:function(){return fa.getProperty}});Object.defineProperty(_e,"stringify",{enumerable:!0,get:function(){return fa.stringify}});Object.defineProperty(_e,"regexpCode",{enumerable:!0,get:function(){return fa.regexpCode}});Object.defineProperty(_e,"Name",{enumerable:!0,get:function(){return fa.Name}});var Mb=XI();Object.defineProperty(_e,"Scope",{enumerable:!0,get:function(){return Mb.Scope}});Object.defineProperty(_e,"ValueScope",{enumerable:!0,get:function(){return Mb.ValueScope}});Object.defineProperty(_e,"ValueScopeName",{enumerable:!0,get:function(){return Mb.ValueScopeName}});Object.defineProperty(_e,"varKinds",{enumerable:!0,get:function(){return Mb.varKinds}});_e.operators={GT:new Me._Code(">"),GTE:new Me._Code(">="),LT:new Me._Code("<"),LTE:new Me._Code("<="),EQ:new Me._Code("==="),NEQ:new Me._Code("!=="),NOT:new Me._Code("!"),OR:new Me._Code("||"),AND:new Me._Code("&&"),ADD:new Me._Code("+")};var to=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},ZI=class extends to{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Pi.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Yc(this.rhs,e,r)),this}get names(){return this.rhs instanceof Me._CodeOrName?this.rhs.names:{}}},qb=class extends to{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Me.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Yc(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Me.Name?{}:{...this.lhs.names};return jb(e,this.rhs)}},eA=class extends qb{constructor(e,r,n,i){super(e,n,i),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},tA=class extends to{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},rA=class extends to{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},nA=class extends to{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},iA=class extends to{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Yc(this.code,e,r),this}get names(){return this.code instanceof Me._CodeOrName?this.code.names:{}}},gp=class extends to{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,i=n.length;for(;i--;){let s=n[i];s.optimizeNames(e,r)||(oMe(e,s.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Wl(e,r.names),{})}},ro=class extends gp{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},sA=class extends gp{},Kc=class extends ro{};Kc.kind="else";var Hl=class t extends ro{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Kc(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(i7(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Yc(this.condition,e,r),this}get names(){let e=super.names;return jb(e,this.condition),this.else&&Wl(e,this.else.names),e}};Hl.kind="if";var zl=class extends ro{};zl.kind="for";var oA=class extends zl{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Yc(this.iteration,e,r),this}get names(){return Wl(super.names,this.iteration.names)}},aA=class extends zl{constructor(e,r,n,i){super(),this.varKind=e,this.name=r,this.from=n,this.to=i}render(e){let r=e.es5?Pi.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return`for(${r} ${n}=${i}; ${n}<${s}; ${n}++)`+super.render(e)}get names(){let e=jb(super.names,this.from);return jb(e,this.to)}},xb=class extends zl{constructor(e,r,n,i){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Yc(this.iterable,e,r),this}get names(){return Wl(super.names,this.iterable.names)}},yp=class extends ro{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};yp.kind="func";var _p=class extends gp{render(e){return"return "+super.render(e)}};_p.kind="return";var lA=class extends ro{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,i;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(i=this.finally)===null||i===void 0||i.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Wl(e,this.catch.names),this.finally&&Wl(e,this.finally.names),e}},bp=class extends ro{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};bp.kind="catch";var vp=class extends ro{render(e){return"finally"+super.render(e)}};vp.kind="finally";var uA=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Pi.Scope({parent:e}),this._nodes=[new sA]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,i){let s=this._scope.toName(r);return n!==void 0&&i&&(this._constants[s.str]=n),this._leafNode(new ZI(e,s,n)),s}const(e,r,n){return this._def(Pi.varKinds.const,e,r,n)}let(e,r,n){return this._def(Pi.varKinds.let,e,r,n)}var(e,r,n){return this._def(Pi.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new qb(e,r,n))}add(e,r){return this._leafNode(new eA(e,_e.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Me.nil&&this._leafNode(new iA(e)),this}object(...e){let r=["{"];for(let[n,i]of e)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,Me.addCodeArg)(r,i));return r.push("}"),new Me._Code(r)}if(e,r,n){if(this._blockNode(new Hl(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Hl(e))}else(){return this._elseNode(new Kc)}endIf(){return this._endBlockNode(Hl,Kc)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new oA(e),r)}forRange(e,r,n,i,s=this.opts.es5?Pi.varKinds.var:Pi.varKinds.let){let o=this._scope.toName(e);return this._for(new aA(s,o,r,n),()=>i(o))}forOf(e,r,n,i=Pi.varKinds.const){let s=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Me.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Me._)`${o}.length`,a=>{this.var(s,(0,Me._)`${o}[${a}]`),n(s)})}return this._for(new xb("of",i,s,r),()=>n(s))}forIn(e,r,n,i=this.opts.es5?Pi.varKinds.var:Pi.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Me._)`Object.keys(${r})`,n);let s=this._scope.toName(e);return this._for(new xb("in",i,s,r),()=>n(s))}endFor(){return this._endBlockNode(zl)}label(e){return this._leafNode(new tA(e))}break(e){return this._leafNode(new rA(e))}return(e){let r=new _p;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(_p)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new lA;if(this._blockNode(i),this.code(e),r){let s=this.name("e");this._currNode=i.catch=new bp(s),r(s)}return n&&(this._currNode=i.finally=new vp,this.code(n)),this._endBlockNode(bp,vp)}throw(e){return this._leafNode(new nA(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Me.nil,n,i){return this._blockNode(new yp(e,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(yp)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Hl))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};_e.CodeGen=uA;function Wl(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function jb(t,e){return e instanceof Me._CodeOrName?Wl(t,e.names):t}function Yc(t,e,r){if(t instanceof Me.Name)return n(t);if(!i(t))return t;return new Me._Code(t._items.reduce((s,o)=>(o instanceof Me.Name&&(o=n(o)),o instanceof Me._Code?s.push(...o._items):s.push(o),s),[]));function n(s){let o=r[s.str];return o===void 0||e[s.str]!==1?s:(delete e[s.str],o)}function i(s){return s instanceof Me._Code&&s._items.some(o=>o instanceof Me.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function oMe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function i7(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Me._)`!${cA(t)}`}_e.not=i7;var aMe=s7(_e.operators.AND);function lMe(...t){return t.reduce(aMe)}_e.and=lMe;var uMe=s7(_e.operators.OR);function cMe(...t){return t.reduce(uMe)}_e.or=cMe;function s7(t){return(e,r)=>e===Me.nil?r:r===Me.nil?e:(0,Me._)`${cA(e)} ${t} ${cA(r)}`}function cA(t){return t instanceof Me.Name?t:(0,Me._)`(${t})`}});var Ge=g(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.checkStrictMode=Re.getErrorPath=Re.Type=Re.useFunc=Re.setEvaluated=Re.evaluatedPropsToName=Re.mergeEvaluated=Re.eachItem=Re.unescapeJsonPointer=Re.escapeJsonPointer=Re.escapeFragment=Re.unescapeFragment=Re.schemaRefOrVal=Re.schemaHasRulesButRef=Re.schemaHasRules=Re.checkUnknownRules=Re.alwaysValidSchema=Re.toHash=void 0;var st=pe(),fMe=mp();function dMe(t){let e={};for(let r of t)e[r]=!0;return e}Re.toHash=dMe;function hMe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(l7(t,e),!u7(e,t.self.RULES.all))}Re.alwaysValidSchema=hMe;function l7(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let i=n.RULES.keywords;for(let s in e)i[s]||d7(t,`unknown keyword: "${s}"`)}Re.checkUnknownRules=l7;function u7(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Re.schemaHasRules=u7;function pMe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Re.schemaHasRulesButRef=pMe;function mMe({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,st._)`${r}`}return(0,st._)`${t}${e}${(0,st.getProperty)(n)}`}Re.schemaRefOrVal=mMe;function gMe(t){return c7(decodeURIComponent(t))}Re.unescapeFragment=gMe;function yMe(t){return encodeURIComponent(dA(t))}Re.escapeFragment=yMe;function dA(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Re.escapeJsonPointer=dA;function c7(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Re.unescapeJsonPointer=c7;function _Me(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Re.eachItem=_Me;function o7({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,s,o,a)=>{let l=o===void 0?s:o instanceof st.Name?(s instanceof st.Name?t(i,s,o):e(i,s,o),o):s instanceof st.Name?(e(i,o,s),s):r(s,o);return a===st.Name&&!(l instanceof st.Name)?n(i,l):l}}Re.mergeEvaluated={props:o7({mergeNames:(t,e,r)=>t.if((0,st._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,st._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,st._)`${r} || {}`).code((0,st._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,st._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,st._)`${r} || {}`),hA(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:f7}),items:o7({mergeNames:(t,e,r)=>t.if((0,st._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,st._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,st._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,st._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function f7(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,st._)`{}`);return e!==void 0&&hA(t,r,e),r}Re.evaluatedPropsToName=f7;function hA(t,e,r){Object.keys(r).forEach(n=>t.assign((0,st._)`${e}${(0,st.getProperty)(n)}`,!0))}Re.setEvaluated=hA;var a7={};function bMe(t,e){return t.scopeValue("func",{ref:e,code:a7[e.code]||(a7[e.code]=new fMe._Code(e.code))})}Re.useFunc=bMe;var fA;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(fA||(Re.Type=fA={}));function vMe(t,e,r){if(t instanceof st.Name){let n=e===fA.Num;return r?n?(0,st._)`"[" + ${t} + "]"`:(0,st._)`"['" + ${t} + "']"`:n?(0,st._)`"/" + ${t}`:(0,st._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,st.getProperty)(t).toString():"/"+dA(t)}Re.getErrorPath=vMe;function d7(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Re.checkStrictMode=d7});var no=g(pA=>{"use strict";Object.defineProperty(pA,"__esModule",{value:!0});var Pr=pe(),wMe={data:new Pr.Name("data"),valCxt:new Pr.Name("valCxt"),instancePath:new Pr.Name("instancePath"),parentData:new Pr.Name("parentData"),parentDataProperty:new Pr.Name("parentDataProperty"),rootData:new Pr.Name("rootData"),dynamicAnchors:new Pr.Name("dynamicAnchors"),vErrors:new Pr.Name("vErrors"),errors:new Pr.Name("errors"),this:new Pr.Name("this"),self:new Pr.Name("self"),scope:new Pr.Name("scope"),json:new Pr.Name("json"),jsonPos:new Pr.Name("jsonPos"),jsonLen:new Pr.Name("jsonLen"),jsonPart:new Pr.Name("jsonPart")};pA.default=wMe});var wp=g($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.extendErrors=$r.resetErrorsCount=$r.reportExtraError=$r.reportError=$r.keyword$DataError=$r.keywordError=void 0;var Fe=pe(),Lb=Ge(),Br=no();$r.keywordError={message:({keyword:t})=>(0,Fe.str)`must pass "${t}" keyword validation`};$r.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Fe.str)`"${t}" keyword must be ${e} ($data)`:(0,Fe.str)`"${t}" keyword is invalid ($data)`};function EMe(t,e=$r.keywordError,r,n){let{it:i}=t,{gen:s,compositeRule:o,allErrors:a}=i,l=m7(t,e,r);n??(o||a)?h7(s,l):p7(i,(0,Fe._)`[${l}]`)}$r.reportError=EMe;function SMe(t,e=$r.keywordError,r){let{it:n}=t,{gen:i,compositeRule:s,allErrors:o}=n,a=m7(t,e,r);h7(i,a),s||o||p7(n,Br.default.vErrors)}$r.reportExtraError=SMe;function RMe(t,e){t.assign(Br.default.errors,e),t.if((0,Fe._)`${Br.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Fe._)`${Br.default.vErrors}.length`,e),()=>t.assign(Br.default.vErrors,null)))}$r.resetErrorsCount=RMe;function TMe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:i,it:s}){if(i===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",i,Br.default.errors,a=>{t.const(o,(0,Fe._)`${Br.default.vErrors}[${a}]`),t.if((0,Fe._)`${o}.instancePath === undefined`,()=>t.assign((0,Fe._)`${o}.instancePath`,(0,Fe.strConcat)(Br.default.instancePath,s.errorPath))),t.assign((0,Fe._)`${o}.schemaPath`,(0,Fe.str)`${s.errSchemaPath}/${e}`),s.opts.verbose&&(t.assign((0,Fe._)`${o}.schema`,r),t.assign((0,Fe._)`${o}.data`,n))})}$r.extendErrors=TMe;function h7(t,e){let r=t.const("err",e);t.if((0,Fe._)`${Br.default.vErrors} === null`,()=>t.assign(Br.default.vErrors,(0,Fe._)`[${r}]`),(0,Fe._)`${Br.default.vErrors}.push(${r})`),t.code((0,Fe._)`${Br.default.errors}++`)}function p7(t,e){let{gen:r,validateName:n,schemaEnv:i}=t;i.$async?r.throw((0,Fe._)`new ${t.ValidationError}(${e})`):(r.assign((0,Fe._)`${n}.errors`,e),r.return(!1))}var Gl={keyword:new Fe.Name("keyword"),schemaPath:new Fe.Name("schemaPath"),params:new Fe.Name("params"),propertyName:new Fe.Name("propertyName"),message:new Fe.Name("message"),schema:new Fe.Name("schema"),parentSchema:new Fe.Name("parentSchema")};function m7(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Fe._)`{}`:PMe(t,e,r)}function PMe(t,e,r={}){let{gen:n,it:i}=t,s=[$Me(i,r),OMe(t,r)];return IMe(t,e,s),n.object(...s)}function $Me({errorPath:t},{instancePath:e}){let r=e?(0,Fe.str)`${t}${(0,Lb.getErrorPath)(e,Lb.Type.Str)}`:t;return[Br.default.instancePath,(0,Fe.strConcat)(Br.default.instancePath,r)]}function OMe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let i=n?e:(0,Fe.str)`${e}/${t}`;return r&&(i=(0,Fe.str)`${i}${(0,Lb.getErrorPath)(r,Lb.Type.Str)}`),[Gl.schemaPath,i]}function IMe(t,{params:e,message:r},n){let{keyword:i,data:s,schemaValue:o,it:a}=t,{opts:l,propertyName:u,topSchemaRef:c,schemaPath:f}=a;n.push([Gl.keyword,i],[Gl.params,typeof e=="function"?e(t):e||(0,Fe._)`{}`]),l.messages&&n.push([Gl.message,typeof r=="function"?r(t):r]),l.verbose&&n.push([Gl.schema,o],[Gl.parentSchema,(0,Fe._)`${c}${f}`],[Br.default.data,s]),u&&n.push([Gl.propertyName,u])}});var y7=g(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.boolOrEmptySchema=Jc.topBoolOrEmptySchema=void 0;var AMe=wp(),NMe=pe(),CMe=no(),kMe={message:"boolean schema is false"};function qMe(t){let{gen:e,schema:r,validateName:n}=t;r===!1?g7(t,!1):typeof r=="object"&&r.$async===!0?e.return(CMe.default.data):(e.assign((0,NMe._)`${n}.errors`,null),e.return(!0))}Jc.topBoolOrEmptySchema=qMe;function xMe(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),g7(t)):r.var(e,!0)}Jc.boolOrEmptySchema=xMe;function g7(t,e){let{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,AMe.reportError)(i,kMe,void 0,e)}});var mA=g(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.getRules=Qc.isJSONType=void 0;var jMe=["string","number","integer","boolean","null","object","array"],MMe=new Set(jMe);function LMe(t){return typeof t=="string"&&MMe.has(t)}Qc.isJSONType=LMe;function DMe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Qc.getRules=DMe});var gA=g(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.shouldUseRule=da.shouldUseGroup=da.schemaHasRulesForType=void 0;function FMe({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&_7(t,n)}da.schemaHasRulesForType=FMe;function _7(t,e){return e.rules.some(r=>b7(t,r))}da.shouldUseGroup=_7;function b7(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}da.shouldUseRule=b7});var Ep=g(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.reportTypeError=Or.checkDataTypes=Or.checkDataType=Or.coerceAndCheckDataType=Or.getJSONTypes=Or.getSchemaTypes=Or.DataType=void 0;var UMe=mA(),BMe=gA(),VMe=wp(),fe=pe(),v7=Ge(),Xc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Xc||(Or.DataType=Xc={}));function HMe(t){let e=w7(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Or.getSchemaTypes=HMe;function w7(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(UMe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Or.getJSONTypes=w7;function zMe(t,e){let{gen:r,data:n,opts:i}=t,s=WMe(e,i.coerceTypes),o=e.length>0&&!(s.length===0&&e.length===1&&(0,BMe.schemaHasRulesForType)(t,e[0]));if(o){let a=_A(e,n,i.strictNumbers,Xc.Wrong);r.if(a,()=>{s.length?GMe(t,e,s):bA(t)})}return o}Or.coerceAndCheckDataType=zMe;var E7=new Set(["string","number","integer","boolean","null"]);function WMe(t,e){return e?t.filter(r=>E7.has(r)||e==="array"&&r==="array"):[]}function GMe(t,e,r){let{gen:n,data:i,opts:s}=t,o=n.let("dataType",(0,fe._)`typeof ${i}`),a=n.let("coerced",(0,fe._)`undefined`);s.coerceTypes==="array"&&n.if((0,fe._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,fe._)`${i}[0]`).assign(o,(0,fe._)`typeof ${i}`).if(_A(e,i,s.strictNumbers),()=>n.assign(a,i))),n.if((0,fe._)`${a} !== undefined`);for(let u of r)(E7.has(u)||u==="array"&&s.coerceTypes==="array")&&l(u);n.else(),bA(t),n.endIf(),n.if((0,fe._)`${a} !== undefined`,()=>{n.assign(i,a),KMe(t,a)});function l(u){switch(u){case"string":n.elseIf((0,fe._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,fe._)`"" + ${i}`).elseIf((0,fe._)`${i} === null`).assign(a,(0,fe._)`""`);return;case"number":n.elseIf((0,fe._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,fe._)`+${i}`);return;case"integer":n.elseIf((0,fe._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,fe._)`+${i}`);return;case"boolean":n.elseIf((0,fe._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,fe._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,fe._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,fe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,fe._)`[${i}]`)}}}function KMe({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,fe._)`${e} !== undefined`,()=>t.assign((0,fe._)`${e}[${r}]`,n))}function yA(t,e,r,n=Xc.Correct){let i=n===Xc.Correct?fe.operators.EQ:fe.operators.NEQ,s;switch(t){case"null":return(0,fe._)`${e} ${i} null`;case"array":s=(0,fe._)`Array.isArray(${e})`;break;case"object":s=(0,fe._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=o((0,fe._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=o();break;default:return(0,fe._)`typeof ${e} ${i} ${t}`}return n===Xc.Correct?s:(0,fe.not)(s);function o(a=fe.nil){return(0,fe.and)((0,fe._)`typeof ${e} == "number"`,a,r?(0,fe._)`isFinite(${e})`:fe.nil)}}Or.checkDataType=yA;function _A(t,e,r,n){if(t.length===1)return yA(t[0],e,r,n);let i,s=(0,v7.toHash)(t);if(s.array&&s.object){let o=(0,fe._)`typeof ${e} != "object"`;i=s.null?o:(0,fe._)`!${e} || ${o}`,delete s.null,delete s.array,delete s.object}else i=fe.nil;s.number&&delete s.integer;for(let o in s)i=(0,fe.and)(i,yA(o,e,r,n));return i}Or.checkDataTypes=_A;var YMe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,fe._)`{type: ${t}}`:(0,fe._)`{type: ${e}}`};function bA(t){let e=JMe(t);(0,VMe.reportError)(e,YMe)}Or.reportTypeError=bA;function JMe(t){let{gen:e,data:r,schema:n}=t,i=(0,v7.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}});var R7=g(Db=>{"use strict";Object.defineProperty(Db,"__esModule",{value:!0});Db.assignDefaults=void 0;var Zc=pe(),QMe=Ge();function XMe(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let i in r)S7(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,s)=>S7(t,s,i.default))}Db.assignDefaults=XMe;function S7(t,e,r){let{gen:n,compositeRule:i,data:s,opts:o}=t;if(r===void 0)return;let a=(0,Zc._)`${s}${(0,Zc.getProperty)(e)}`;if(i){(0,QMe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let l=(0,Zc._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,Zc._)`${l} || ${a} === null || ${a} === ""`),n.if(l,(0,Zc._)`${a} = ${(0,Zc.stringify)(r)}`)}});var Wn=g(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.validateUnion=et.validateArray=et.usePattern=et.callValidateCode=et.schemaProperties=et.allSchemaProperties=et.noPropertyInData=et.propertyInData=et.isOwnProperty=et.hasPropFunc=et.reportMissingProp=et.checkMissingProp=et.checkReportMissingProp=void 0;var mt=pe(),vA=Ge(),ha=no(),ZMe=Ge();function eLe(t,e){let{gen:r,data:n,it:i}=t;r.if(EA(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,mt._)`${e}`},!0),t.error()})}et.checkReportMissingProp=eLe;function tLe({gen:t,data:e,it:{opts:r}},n,i){return(0,mt.or)(...n.map(s=>(0,mt.and)(EA(t,e,s,r.ownProperties),(0,mt._)`${i} = ${s}`)))}et.checkMissingProp=tLe;function rLe(t,e){t.setParams({missingProperty:e},!0),t.error()}et.reportMissingProp=rLe;function T7(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,mt._)`Object.prototype.hasOwnProperty`})}et.hasPropFunc=T7;function wA(t,e,r){return(0,mt._)`${T7(t)}.call(${e}, ${r})`}et.isOwnProperty=wA;function nLe(t,e,r,n){let i=(0,mt._)`${e}${(0,mt.getProperty)(r)} !== undefined`;return n?(0,mt._)`${i} && ${wA(t,e,r)}`:i}et.propertyInData=nLe;function EA(t,e,r,n){let i=(0,mt._)`${e}${(0,mt.getProperty)(r)} === undefined`;return n?(0,mt.or)(i,(0,mt.not)(wA(t,e,r))):i}et.noPropertyInData=EA;function P7(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}et.allSchemaProperties=P7;function iLe(t,e){return P7(e).filter(r=>!(0,vA.alwaysValidSchema)(t,e[r]))}et.schemaProperties=iLe;function sLe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:o},a,l,u){let c=u?(0,mt._)`${t}, ${e}, ${n}${i}`:e,f=[[ha.default.instancePath,(0,mt.strConcat)(ha.default.instancePath,s)],[ha.default.parentData,o.parentData],[ha.default.parentDataProperty,o.parentDataProperty],[ha.default.rootData,ha.default.rootData]];o.opts.dynamicRef&&f.push([ha.default.dynamicAnchors,ha.default.dynamicAnchors]);let h=(0,mt._)`${c}, ${r.object(...f)}`;return l!==mt.nil?(0,mt._)`${a}.call(${l}, ${h})`:(0,mt._)`${a}(${h})`}et.callValidateCode=sLe;var oLe=(0,mt._)`new RegExp`;function aLe({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,s=i(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,mt._)`${i.code==="new RegExp"?oLe:(0,ZMe.useFunc)(t,i)}(${r}, ${n})`})}et.usePattern=aLe;function lLe(t){let{gen:e,data:r,keyword:n,it:i}=t,s=e.name("valid");if(i.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(s,!0),o(()=>e.break()),s;function o(a){let l=e.const("len",(0,mt._)`${r}.length`);e.forRange("i",0,l,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:vA.Type.Num},s),e.if((0,mt.not)(s),a)})}}et.validateArray=lLe;function uLe(t){let{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,vA.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((l,u)=>{let c=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);e.assign(o,(0,mt._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,mt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}et.validateUnion=uLe});var I7=g(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.validateKeywordUsage=vs.validSchemaType=vs.funcKeywordCode=vs.macroKeywordCode=void 0;var Vr=pe(),Kl=no(),cLe=Wn(),fLe=wp();function dLe(t,e){let{gen:r,keyword:n,schema:i,parentSchema:s,it:o}=t,a=e.macro.call(o.self,i,s,o),l=O7(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let u=r.name("valid");t.subschema({schema:a,schemaPath:Vr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}vs.macroKeywordCode=dLe;function hLe(t,e){var r;let{gen:n,keyword:i,schema:s,parentSchema:o,$data:a,it:l}=t;mLe(l,e);let u=!a&&e.compile?e.compile.call(l.self,s,o,l):e.validate,c=O7(n,i,u),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&$7(t),y(()=>t.error());else{let _=e.async?d():p();e.modifying&&$7(t),y(()=>pLe(t,_))}}function d(){let _=n.let("ruleErrs",null);return n.try(()=>m((0,Vr._)`await `),w=>n.assign(f,!1).if((0,Vr._)`${w} instanceof ${l.ValidationError}`,()=>n.assign(_,(0,Vr._)`${w}.errors`),()=>n.throw(w))),_}function p(){let _=(0,Vr._)`${c}.errors`;return n.assign(_,null),m(Vr.nil),_}function m(_=e.async?(0,Vr._)`await `:Vr.nil){let w=l.opts.passContext?Kl.default.this:Kl.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,Vr._)`${_}${(0,cLe.callValidateCode)(t,c,w,v)}`,e.modifying)}function y(_){var w;n.if((0,Vr.not)((w=e.valid)!==null&&w!==void 0?w:f),_)}}vs.funcKeywordCode=hLe;function $7(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Vr._)`${n.parentData}[${n.parentDataProperty}]`))}function pLe(t,e){let{gen:r}=t;r.if((0,Vr._)`Array.isArray(${e})`,()=>{r.assign(Kl.default.vErrors,(0,Vr._)`${Kl.default.vErrors} === null ? ${e} : ${Kl.default.vErrors}.concat(${e})`).assign(Kl.default.errors,(0,Vr._)`${Kl.default.vErrors}.length`),(0,fLe.extendErrors)(t)},()=>t.error())}function mLe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function O7(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Vr.stringify)(r)})}function gLe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}vs.validSchemaType=gLe;function yLe({schema:t,opts:e,self:r,errSchemaPath:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");let o=i.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[s])){let l=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}vs.validateKeywordUsage=yLe});var N7=g(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.extendSubschemaMode=pa.extendSubschemaData=pa.getSubschema=void 0;var ws=pe(),A7=Ge();function _Le(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,ws._)`${t.schemaPath}${(0,ws.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,ws._)`${t.schemaPath}${(0,ws.getProperty)(e)}${(0,ws.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,A7.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}pa.getSubschema=_Le;function bLe(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:u,dataPathArr:c,opts:f}=e,h=a.let("data",(0,ws._)`${e.data}${(0,ws.getProperty)(r)}`,!0);l(h),t.errorPath=(0,ws.str)`${u}${(0,A7.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,ws._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(i!==void 0){let u=i instanceof ws.Name?i:a.let("data",i,!0);l(u),o!==void 0&&(t.propertyName=o)}s&&(t.dataTypes=s);function l(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}pa.extendSubschemaData=bLe;function vLe(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=r}pa.extendSubschemaMode=vLe});var k7=g((fnt,C7)=>{"use strict";var ma=C7.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};Fb(e,n,i,t,"",t)};ma.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ma.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ma.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ma.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Fb(t,e,r,n,i,s,o,a,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,s,o,a,l,u);for(var c in n){var f=n[c];if(Array.isArray(f)){if(c in ma.arrayKeywords)for(var h=0;h<f.length;h++)Fb(t,e,r,f[h],i+"/"+c+"/"+h,s,i,c,n,h)}else if(c in ma.propsKeywords){if(f&&typeof f=="object")for(var d in f)Fb(t,e,r,f[d],i+"/"+c+"/"+wLe(d),s,i,c,n,d)}else(c in ma.keywords||t.allKeys&&!(c in ma.skipKeywords))&&Fb(t,e,r,f,i+"/"+c,s,i,c,n)}r(n,i,s,o,a,l,u)}}function wLe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Sp=g(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.getSchemaRefs=ln.resolveUrl=ln.normalizeId=ln._getFullPath=ln.getFullPath=ln.inlineRef=void 0;var ELe=Ge(),SLe=Xs(),RLe=k7(),TLe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function PLe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!SA(t):e?q7(t)<=e:!1}ln.inlineRef=PLe;var $Le=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function SA(t){for(let e in t){if($Le.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(SA)||typeof r=="object"&&SA(r))return!0}return!1}function q7(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!TLe.has(r)&&(typeof t[r]=="object"&&(0,ELe.eachItem)(t[r],n=>e+=q7(n)),e===1/0))return 1/0}return e}function x7(t,e="",r){r!==!1&&(e=ef(e));let n=t.parse(e);return j7(t,n)}ln.getFullPath=x7;function j7(t,e){return t.serialize(e).split("#")[0]+"#"}ln._getFullPath=j7;var OLe=/#\/?$/;function ef(t){return t?t.replace(OLe,""):""}ln.normalizeId=ef;function ILe(t,e,r){return r=ef(r),t.resolve(e,r)}ln.resolveUrl=ILe;var ALe=/^[a-z_][-a-z0-9._]*$/i;function NLe(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=ef(t[r]||e),s={"":i},o=x7(n,i,!1),a={},l=new Set;return RLe(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,y=s[p];typeof f[r]=="string"&&(y=_.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),s[h]=y;function _(v){let b=this.opts.uriResolver.resolve;if(v=ef(y?b(y,v):v),l.has(v))throw c(v);l.add(v);let E=this.refs[v];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?u(f,E.schema,v):v!==ef(m)&&(v[0]==="#"?(u(f,a[v],v),a[v]=f):this.refs[v]=m),v}function w(v){if(typeof v=="string"){if(!ALe.test(v))throw new Error(`invalid anchor "${v}"`);_.call(this,`#${v}`)}}}),a;function u(f,h,d){if(h!==void 0&&!SLe(f,h))throw c(d)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}ln.getSchemaRefs=NLe});var Pp=g(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.getData=ga.KeywordCxt=ga.validateFunctionCode=void 0;var U7=y7(),M7=Ep(),TA=gA(),Ub=Ep(),CLe=R7(),Tp=I7(),RA=N7(),J=pe(),ie=no(),kLe=Sp(),io=Ge(),Rp=wp();function qLe(t){if(H7(t)&&(z7(t),V7(t))){MLe(t);return}B7(t,()=>(0,U7.topBoolOrEmptySchema)(t))}ga.validateFunctionCode=qLe;function B7({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},s){i.code.es5?t.func(e,(0,J._)`${ie.default.data}, ${ie.default.valCxt}`,n.$async,()=>{t.code((0,J._)`"use strict"; ${L7(r,i)}`),jLe(t,i),t.code(s)}):t.func(e,(0,J._)`${ie.default.data}, ${xLe(i)}`,n.$async,()=>t.code(L7(r,i)).code(s))}function xLe(t){return(0,J._)`{${ie.default.instancePath}="", ${ie.default.parentData}, ${ie.default.parentDataProperty}, ${ie.default.rootData}=${ie.default.data}${t.dynamicRef?(0,J._)`, ${ie.default.dynamicAnchors}={}`:J.nil}}={}`}function jLe(t,e){t.if(ie.default.valCxt,()=>{t.var(ie.default.instancePath,(0,J._)`${ie.default.valCxt}.${ie.default.instancePath}`),t.var(ie.default.parentData,(0,J._)`${ie.default.valCxt}.${ie.default.parentData}`),t.var(ie.default.parentDataProperty,(0,J._)`${ie.default.valCxt}.${ie.default.parentDataProperty}`),t.var(ie.default.rootData,(0,J._)`${ie.default.valCxt}.${ie.default.rootData}`),e.dynamicRef&&t.var(ie.default.dynamicAnchors,(0,J._)`${ie.default.valCxt}.${ie.default.dynamicAnchors}`)},()=>{t.var(ie.default.instancePath,(0,J._)`""`),t.var(ie.default.parentData,(0,J._)`undefined`),t.var(ie.default.parentDataProperty,(0,J._)`undefined`),t.var(ie.default.rootData,ie.default.data),e.dynamicRef&&t.var(ie.default.dynamicAnchors,(0,J._)`{}`)})}function MLe(t){let{schema:e,opts:r,gen:n}=t;B7(t,()=>{r.$comment&&e.$comment&&G7(t),BLe(t),n.let(ie.default.vErrors,null),n.let(ie.default.errors,0),r.unevaluated&&LLe(t),W7(t),zLe(t)})}function LLe(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,J._)`${r}.evaluated`),e.if((0,J._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,J._)`${t.evaluated}.props`,(0,J._)`undefined`)),e.if((0,J._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,J._)`${t.evaluated}.items`,(0,J._)`undefined`))}function L7(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,J._)`/*# sourceURL=${r} */`:J.nil}function DLe(t,e){if(H7(t)&&(z7(t),V7(t))){FLe(t,e);return}(0,U7.boolOrEmptySchema)(t,e)}function V7({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function H7(t){return typeof t.schema!="boolean"}function FLe(t,e){let{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&G7(t),VLe(t),HLe(t);let s=n.const("_errs",ie.default.errors);W7(t,s),n.var(e,(0,J._)`${s} === ${ie.default.errors}`)}function z7(t){(0,io.checkUnknownRules)(t),ULe(t)}function W7(t,e){if(t.opts.jtd)return D7(t,[],!1,e);let r=(0,M7.getSchemaTypes)(t.schema),n=(0,M7.coerceAndCheckDataType)(t,r);D7(t,r,!n,e)}function ULe(t){let{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,io.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function BLe(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,io.checkStrictMode)(t,"default is ignored in the schema root")}function VLe(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,kLe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function HLe(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function G7({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){let s=r.$comment;if(i.$comment===!0)t.code((0,J._)`${ie.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){let o=(0,J.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,J._)`${ie.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function zLe(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=t;r.$async?e.if((0,J._)`${ie.default.errors} === 0`,()=>e.return(ie.default.data),()=>e.throw((0,J._)`new ${i}(${ie.default.vErrors})`)):(e.assign((0,J._)`${n}.errors`,ie.default.vErrors),s.unevaluated&&WLe(t),e.return((0,J._)`${ie.default.errors} === 0`))}function WLe({gen:t,evaluated:e,props:r,items:n}){r instanceof J.Name&&t.assign((0,J._)`${e}.props`,r),n instanceof J.Name&&t.assign((0,J._)`${e}.items`,n)}function D7(t,e,r,n){let{gen:i,schema:s,data:o,allErrors:a,opts:l,self:u}=t,{RULES:c}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,io.schemaHasRulesButRef)(s,c))){i.block(()=>Y7(t,"$ref",c.all.$ref.definition));return}l.jtd||GLe(t,e),i.block(()=>{for(let h of c.rules)f(h);f(c.post)});function f(h){(0,TA.shouldUseGroup)(s,h)&&(h.type?(i.if((0,Ub.checkDataType)(h.type,o,l.strictNumbers)),F7(t,h),e.length===1&&e[0]===h.type&&r&&(i.else(),(0,Ub.reportTypeError)(t)),i.endIf()):F7(t,h),a||i.if((0,J._)`${ie.default.errors} === ${n||0}`))}}function F7(t,e){let{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,CLe.assignDefaults)(t,e.type),r.block(()=>{for(let s of e.rules)(0,TA.shouldUseRule)(n,s)&&Y7(t,s.keyword,s.definition,e.type)})}function GLe(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(KLe(t,e),t.opts.allowUnionTypes||YLe(t,e),JLe(t,t.dataTypes))}function KLe(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{K7(t.dataTypes,r)||PA(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),XLe(t,e)}}function YLe(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&PA(t,"use allowUnionTypes to allow union type keyword")}function JLe(t,e){let r=t.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,TA.shouldUseRule)(t.schema,i)){let{type:s}=i.definition;s.length&&!s.some(o=>QLe(e,o))&&PA(t,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function QLe(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function K7(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function XLe(t,e){let r=[];for(let n of t.dataTypes)K7(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function PA(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,io.checkStrictMode)(t,e,t.opts.strictTypes)}var Bb=class{constructor(e,r,n){if((0,Tp.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,io.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",J7(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Tp.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ie.default.errors))}result(e,r,n){this.failResult((0,J.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,J.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,J._)`${r} !== undefined && (${(0,J.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Rp.reportExtraError:Rp.reportError)(this,this.def.error,r)}$dataError(){(0,Rp.reportError)(this,this.def.$dataError||Rp.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Rp.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=J.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=J.nil,r=J.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:s,def:o}=this;n.if((0,J.or)((0,J._)`${i} === undefined`,r)),e!==J.nil&&n.assign(e,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==J.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:i,it:s}=this;return(0,J.or)(o(),a());function o(){if(n.length){if(!(r instanceof J.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,J._)`${(0,Ub.checkDataTypes)(l,r,s.opts.strictNumbers,Ub.DataType.Wrong)}`}return J.nil}function a(){if(i.validateSchema){let l=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,J._)`!${l}(${r})`}return J.nil}}subschema(e,r){let n=(0,RA.getSubschema)(this.it,e);(0,RA.extendSubschemaData)(n,this.it,e),(0,RA.extendSubschemaMode)(n,e);let i={...this.it,...n,items:void 0,props:void 0};return DLe(i,r),i}mergeEvaluated(e,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=io.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=io.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,J.Name)),!0}};ga.KeywordCxt=Bb;function Y7(t,e,r,n){let i=new Bb(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,Tp.funcKeywordCode)(i,r):"macro"in r?(0,Tp.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,Tp.funcKeywordCode)(i,r)}var ZLe=/^\/(?:[^~]|~0|~1)*$/,eDe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function J7(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,s;if(t==="")return ie.default.rootData;if(t[0]==="/"){if(!ZLe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,s=ie.default.rootData}else{let u=eDe.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);let c=+u[1];if(i=u[2],i==="#"){if(c>=e)throw new Error(l("property/index",c));return n[e-c]}if(c>e)throw new Error(l("data",c));if(s=r[e-c],!i)return s}let o=s,a=i.split("/");for(let u of a)u&&(s=(0,J._)`${s}${(0,J.getProperty)((0,io.unescapeJsonPointer)(u))}`,o=(0,J._)`${o} && ${s}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${e}`}}ga.getData=J7});var Vb=g(OA=>{"use strict";Object.defineProperty(OA,"__esModule",{value:!0});var $A=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};OA.default=$A});var $p=g(NA=>{"use strict";Object.defineProperty(NA,"__esModule",{value:!0});var IA=Sp(),AA=class extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,IA.resolveUrl)(e,r,n),this.missingSchema=(0,IA.normalizeId)((0,IA.getFullPath)(e,this.missingRef))}};NA.default=AA});var zb=g(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.resolveSchema=Gn.getCompilingSchema=Gn.resolveRef=Gn.compileSchema=Gn.SchemaEnv=void 0;var $i=pe(),tDe=Vb(),Yl=no(),Oi=Sp(),Q7=Ge(),rDe=Pp(),tf=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Oi.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Gn.SchemaEnv=tf;function kA(t){let e=X7.call(this,t);if(e)return e;let r=(0,Oi.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new $i.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a;t.$async&&(a=o.scopeValue("Error",{ref:tDe.default,code:(0,$i._)`require("ajv/dist/runtime/validation_error").default`}));let l=o.scopeName("validate");t.validateName=l;let u={gen:o,allErrors:this.opts.allErrors,data:Yl.default.data,parentData:Yl.default.parentData,parentDataProperty:Yl.default.parentDataProperty,dataNames:[Yl.default.data],dataPathArr:[$i.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,$i.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:$i.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,$i._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(t),(0,rDe.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);let f=o.toString();c=`${o.scopeRefs(Yl.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));let d=new Function(`${Yl.default.self}`,`${Yl.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=u;d.evaluated={props:p instanceof $i.Name?void 0:p,items:m instanceof $i.Name?void 0:m,dynamicProps:p instanceof $i.Name,dynamicItems:m instanceof $i.Name},d.source&&(d.source.evaluated=(0,$i.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}Gn.compileSchema=kA;function nDe(t,e,r){var n;r=(0,Oi.resolveUrl)(this.opts.uriResolver,e,r);let i=t.refs[r];if(i)return i;let s=oDe.call(this,t,r);if(s===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(s=new tf({schema:o,schemaId:a,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=iDe.call(this,s)}Gn.resolveRef=nDe;function iDe(t){return(0,Oi.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:kA.call(this,t)}function X7(t){for(let e of this._compilations)if(sDe(e,t))return e}Gn.getCompilingSchema=X7;function sDe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function oDe(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Hb.call(this,t,e)}function Hb(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Oi._getFullPath)(this.opts.uriResolver,r),i=(0,Oi.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return CA.call(this,r,t);let s=(0,Oi.normalizeId)(n),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){let a=Hb.call(this,t,o);return typeof a?.schema!="object"?void 0:CA.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||kA.call(this,o),s===(0,Oi.normalizeId)(e)){let{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(i=(0,Oi.resolveUrl)(this.opts.uriResolver,i,u)),new tf({schema:a,schemaId:l,root:t,baseId:i})}return CA.call(this,r,o)}}Gn.resolveSchema=Hb;var aDe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function CA(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,Q7.unescapeFragment)(a)];if(l===void 0)return;r=l;let u=typeof r=="object"&&r[this.opts.schemaId];!aDe.has(a)&&u&&(e=(0,Oi.resolveUrl)(this.opts.uriResolver,e,u))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Q7.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Oi.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=Hb.call(this,n,a)}let{schemaId:o}=this.opts;if(s=s||new tf({schema:r,schemaId:o,root:n,baseId:e}),s.schema!==s.root.schema)return s}});var Z7=g((ynt,lDe)=>{lDe.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var tY=g(qA=>{"use strict";Object.defineProperty(qA,"__esModule",{value:!0});var eY=Uc();eY.code='require("ajv/dist/runtime/uri").default';qA.default=eY});var uY=g(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.CodeGen=dr.Name=dr.nil=dr.stringify=dr.str=dr._=dr.KeywordCxt=void 0;var uDe=Pp();Object.defineProperty(dr,"KeywordCxt",{enumerable:!0,get:function(){return uDe.KeywordCxt}});var rf=pe();Object.defineProperty(dr,"_",{enumerable:!0,get:function(){return rf._}});Object.defineProperty(dr,"str",{enumerable:!0,get:function(){return rf.str}});Object.defineProperty(dr,"stringify",{enumerable:!0,get:function(){return rf.stringify}});Object.defineProperty(dr,"nil",{enumerable:!0,get:function(){return rf.nil}});Object.defineProperty(dr,"Name",{enumerable:!0,get:function(){return rf.Name}});Object.defineProperty(dr,"CodeGen",{enumerable:!0,get:function(){return rf.CodeGen}});var cDe=Vb(),oY=$p(),fDe=mA(),Op=zb(),dDe=pe(),Ip=Sp(),Wb=Ep(),jA=Ge(),rY=Z7(),hDe=tY(),aY=(t,e)=>new RegExp(t,e);aY.code="new RegExp";var pDe=["removeAdditional","useDefaults","coerceTypes"],mDe=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),gDe={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},yDe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},nY=200;function _De(t){var e,r,n,i,s,o,a,l,u,c,f,h,d,p,m,y,_,w,v,b,E,R,S,P,T;let O=t.strict,j=(e=t.code)===null||e===void 0?void 0:e.optimize,N=j===!0||j===void 0?1:j||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:aY,z=(i=t.uriResolver)!==null&&i!==void 0?i:hDe.default;return{strictSchema:(o=(s=t.strictSchema)!==null&&s!==void 0?s:O)!==null&&o!==void 0?o:!0,strictNumbers:(l=(a=t.strictNumbers)!==null&&a!==void 0?a:O)!==null&&l!==void 0?l:!0,strictTypes:(c=(u=t.strictTypes)!==null&&u!==void 0?u:O)!==null&&c!==void 0?c:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:O)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:O)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:nY,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:nY,meta:(_=t.meta)!==null&&_!==void 0?_:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(b=t.schemaId)!==null&&b!==void 0?b:"$id",addUsedSchema:(E=t.addUsedSchema)!==null&&E!==void 0?E:!0,validateSchema:(R=t.validateSchema)!==null&&R!==void 0?R:!0,validateFormats:(S=t.validateFormats)!==null&&S!==void 0?S:!0,unicodeRegExp:(P=t.unicodeRegExp)!==null&&P!==void 0?P:!0,int32range:(T=t.int32range)!==null&&T!==void 0?T:!0,uriResolver:z}}var Ap=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,..._De(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new dDe.ValueScope({scope:{},prefixes:mDe,es5:r,lines:n}),this.logger=RDe(e.logger);let i=e.validateFormats;e.validateFormats=!1,this.RULES=(0,fDe.getRules)(),iY.call(this,gDe,e,"NOT SUPPORTED"),iY.call(this,yDe,e,"DEPRECATED","warn"),this._metaOpts=EDe.call(this),e.formats&&vDe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&wDe.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),bDe.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,i=rY;n==="id"&&(i={...rY},i.id=i.$id,delete i.$id),r&&e&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,e,r);async function i(c,f){await s.call(this,c.$schema);let h=this._addSchema(c,f);return h.validate||o.call(this,h)}async function s(c){c&&!this.getSchema(c)&&await i.call(this,{$ref:c},!0)}async function o(c){try{return this._compileSchemaEnv(c)}catch(f){if(!(f instanceof oY.default))throw f;return a.call(this,f),await l.call(this,f.missingSchema),o.call(this,c)}}function a({missingSchema:c,missingRef:f}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${f} cannot be resolved`)}async function l(c){let f=await u.call(this,c);this.refs[c]||await s.call(this,f.$schema),this.refs[c]||this.addSchema(f,c,r)}async function u(c){let f=this._loading[c];if(f)return f;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(e,r,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,i);return this}let s;if(typeof e=="object"){let{schemaId:o}=this.opts;if(s=e[o],s!==void 0&&typeof s!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Ip.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,i,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,e);if(!i&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return i}getSchema(e){let r;for(;typeof(r=sY.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,i=new Op.SchemaEnv({schema:{},schemaId:n});if(r=Op.resolveSchema.call(this,i,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=sY.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Ip.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(PDe.call(this,n,r),!r)return(0,jA.eachItem)(n,s=>xA.call(this,s)),this;ODe.call(this,r);let i={...r,type:(0,Wb.getJSONTypes)(r.type),schemaType:(0,Wb.getJSONTypes)(r.schemaType)};return(0,jA.eachItem)(n,i.type.length===0?s=>xA.call(this,s,i):s=>i.type.forEach(o=>xA.call(this,s,i,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let i=n.rules.findIndex(s=>s.keyword===e);i>=0&&n.rules.splice(i,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,s)=>i+r+s)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let i of r){let s=i.split("/").slice(1),o=e;for(let a of s)o=o[a];for(let a in n){let l=n[a];if(typeof l!="object")continue;let{$data:u}=l.definition,c=o[a];u&&c&&(o[a]=lY(c))}}return e}_removeAllSchemas(e,r){for(let n in e){let i=e[n];(!r||r.test(n))&&(typeof i=="string"?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,r,n,i=this.opts.validateSchema,s=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;n=(0,Ip.normalizeId)(o||n);let u=Ip.getSchemaRefs.call(this,e,n);return l=new Op.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:u}),this._cache.set(l.schema,l),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),i&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Op.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Op.compileSchema.call(this,e)}finally{this.opts=r}}};Ap.ValidationError=cDe.default;Ap.MissingRefError=oY.default;dr.default=Ap;function iY(t,e,r,n="error"){for(let i in t){let s=i;s in e&&this.logger[n](`${r}: option ${i}. ${t[s]}`)}}function sY(t){return t=(0,Ip.normalizeId)(t),this.schemas[t]||this.refs[t]}function bDe(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function vDe(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function wDe(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function EDe(){let t={...this.opts};for(let e of pDe)delete t[e];return t}var SDe={log(){},warn(){},error(){}};function RDe(t){if(t===!1)return SDe;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var TDe=/^[a-z_$][a-z0-9_$:-]*$/i;function PDe(t,e){let{RULES:r}=this;if((0,jA.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!TDe.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function xA(t,e,r){var n;let i=e?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,o=i?s.post:s.rules.find(({type:l})=>l===r);if(o||(o={type:r,rules:[]},s.rules.push(o)),s.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Wb.getJSONTypes)(e.type),schemaType:(0,Wb.getJSONTypes)(e.schemaType)}};e.before?$De.call(this,o,a,e.before):o.rules.push(a),s.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function $De(t,e,r){let n=t.rules.findIndex(i=>i.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function ODe(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=lY(e)),t.validateSchema=this.compile(e,!0))}var IDe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function lY(t){return{anyOf:[t,IDe]}}});var cY=g(MA=>{"use strict";Object.defineProperty(MA,"__esModule",{value:!0});var ADe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};MA.default=ADe});var pY=g(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.callRef=Jl.getValidate=void 0;var NDe=$p(),fY=Wn(),un=pe(),nf=no(),dY=zb(),Gb=Ge(),CDe={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:l}=n,{root:u}=s;if((r==="#"||r==="#/")&&i===u.baseId)return f();let c=dY.resolveRef.call(l,u,i,r);if(c===void 0)throw new NDe.default(n.opts.uriResolver,i,r);if(c instanceof dY.SchemaEnv)return h(c);return d(c);function f(){if(s===u)return Kb(t,o,s,s.$async);let p=e.scopeValue("root",{ref:u});return Kb(t,(0,un._)`${p}.validate`,u,u.$async)}function h(p){let m=hY(t,p);Kb(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,un.stringify)(p)}:{ref:p}),y=e.name("valid"),_=t.subschema({schema:p,dataTypes:[],schemaPath:un.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(_),t.ok(y)}}};function hY(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,un._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Jl.getValidate=hY;function Kb(t,e,r,n){let{gen:i,it:s}=t,{allErrors:o,schemaEnv:a,opts:l}=s,u=l.passContext?nf.default.this:un.nil;n?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=i.let("valid");i.try(()=>{i.code((0,un._)`await ${(0,fY.callValidateCode)(t,e,u)}`),d(e),o||i.assign(p,!0)},m=>{i.if((0,un._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),h(m),o||i.assign(p,!1)}),t.ok(p)}function f(){t.result((0,fY.callValidateCode)(t,e,u),()=>d(e),()=>h(e))}function h(p){let m=(0,un._)`${p}.errors`;i.assign(nf.default.vErrors,(0,un._)`${nf.default.vErrors} === null ? ${m} : ${nf.default.vErrors}.concat(${m})`),i.assign(nf.default.errors,(0,un._)`${nf.default.vErrors}.length`)}function d(p){var m;if(!s.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(s.props=Gb.mergeEvaluated.props(i,y.props,s.props));else{let _=i.var("props",(0,un._)`${p}.evaluated.props`);s.props=Gb.mergeEvaluated.props(i,_,s.props,un.Name)}if(s.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(s.items=Gb.mergeEvaluated.items(i,y.items,s.items));else{let _=i.var("items",(0,un._)`${p}.evaluated.items`);s.items=Gb.mergeEvaluated.items(i,_,s.items,un.Name)}}}Jl.callRef=Kb;Jl.default=CDe});var mY=g(LA=>{"use strict";Object.defineProperty(LA,"__esModule",{value:!0});var kDe=cY(),qDe=pY(),xDe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",kDe.default,qDe.default];LA.default=xDe});var gY=g(DA=>{"use strict";Object.defineProperty(DA,"__esModule",{value:!0});var Yb=pe(),ya=Yb.operators,Jb={maximum:{okStr:"<=",ok:ya.LTE,fail:ya.GT},minimum:{okStr:">=",ok:ya.GTE,fail:ya.LT},exclusiveMaximum:{okStr:"<",ok:ya.LT,fail:ya.GTE},exclusiveMinimum:{okStr:">",ok:ya.GT,fail:ya.LTE}},jDe={message:({keyword:t,schemaCode:e})=>(0,Yb.str)`must be ${Jb[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Yb._)`{comparison: ${Jb[t].okStr}, limit: ${e}}`},MDe={keyword:Object.keys(Jb),type:"number",schemaType:"number",$data:!0,error:jDe,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Yb._)`${r} ${Jb[e].fail} ${n} || isNaN(${r})`)}};DA.default=MDe});var yY=g(FA=>{"use strict";Object.defineProperty(FA,"__esModule",{value:!0});var Np=pe(),LDe={message:({schemaCode:t})=>(0,Np.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Np._)`{multipleOf: ${t}}`},DDe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:LDe,code(t){let{gen:e,data:r,schemaCode:n,it:i}=t,s=i.opts.multipleOfPrecision,o=e.let("res"),a=s?(0,Np._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Np._)`${o} !== parseInt(${o})`;t.fail$data((0,Np._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};FA.default=DDe});var bY=g(UA=>{"use strict";Object.defineProperty(UA,"__esModule",{value:!0});function _Y(t){let e=t.length,r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}UA.default=_Y;_Y.code='require("ajv/dist/runtime/ucs2length").default'});var vY=g(BA=>{"use strict";Object.defineProperty(BA,"__esModule",{value:!0});var Ql=pe(),FDe=Ge(),UDe=bY(),BDe={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Ql.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Ql._)`{limit: ${t}}`},VDe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:BDe,code(t){let{keyword:e,data:r,schemaCode:n,it:i}=t,s=e==="maxLength"?Ql.operators.GT:Ql.operators.LT,o=i.opts.unicode===!1?(0,Ql._)`${r}.length`:(0,Ql._)`${(0,FDe.useFunc)(t.gen,UDe.default)}(${r})`;t.fail$data((0,Ql._)`${o} ${s} ${n}`)}};BA.default=VDe});var wY=g(VA=>{"use strict";Object.defineProperty(VA,"__esModule",{value:!0});var HDe=Wn(),Qb=pe(),zDe={message:({schemaCode:t})=>(0,Qb.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Qb._)`{pattern: ${t}}`},WDe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:zDe,code(t){let{data:e,$data:r,schema:n,schemaCode:i,it:s}=t,o=s.opts.unicodeRegExp?"u":"",a=r?(0,Qb._)`(new RegExp(${i}, ${o}))`:(0,HDe.usePattern)(t,n);t.fail$data((0,Qb._)`!${a}.test(${e})`)}};VA.default=WDe});var EY=g(HA=>{"use strict";Object.defineProperty(HA,"__esModule",{value:!0});var Cp=pe(),GDe={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Cp.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Cp._)`{limit: ${t}}`},KDe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:GDe,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?Cp.operators.GT:Cp.operators.LT;t.fail$data((0,Cp._)`Object.keys(${r}).length ${i} ${n}`)}};HA.default=KDe});var SY=g(zA=>{"use strict";Object.defineProperty(zA,"__esModule",{value:!0});var kp=Wn(),qp=pe(),YDe=Ge(),JDe={message:({params:{missingProperty:t}})=>(0,qp.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,qp._)`{missingProperty: ${t}}`},QDe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:JDe,code(t){let{gen:e,schema:r,schemaCode:n,data:i,$data:s,it:o}=t,{opts:a}=o;if(!s&&r.length===0)return;let l=r.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,_=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,YDe.checkStrictMode)(o,_,o.opts.strictRequired)}}function u(){if(l||s)t.block$data(qp.nil,f);else for(let d of r)(0,kp.checkReportMissingProp)(t,d)}function c(){let d=e.let("missing");if(l||s){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,kp.checkMissingProp)(t,r,d)),(0,kp.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,kp.noPropertyInData)(e,i,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,kp.propertyInData)(e,i,d,a.ownProperties)),e.if((0,qp.not)(p),()=>{t.error(),e.break()})},qp.nil)}}};zA.default=QDe});var RY=g(WA=>{"use strict";Object.defineProperty(WA,"__esModule",{value:!0});var xp=pe(),XDe={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,xp.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,xp._)`{limit: ${t}}`},ZDe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:XDe,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?xp.operators.GT:xp.operators.LT;t.fail$data((0,xp._)`${r}.length ${i} ${n}`)}};WA.default=ZDe});var Xb=g(GA=>{"use strict";Object.defineProperty(GA,"__esModule",{value:!0});var TY=Xs();TY.code='require("ajv/dist/runtime/equal").default';GA.default=TY});var PY=g(YA=>{"use strict";Object.defineProperty(YA,"__esModule",{value:!0});var KA=Ep(),hr=pe(),e2e=Ge(),t2e=Xb(),r2e={message:({params:{i:t,j:e}})=>(0,hr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,hr._)`{i: ${t}, j: ${e}}`},n2e={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:r2e,code(t){let{gen:e,data:r,$data:n,schema:i,parentSchema:s,schemaCode:o,it:a}=t;if(!n&&!i)return;let l=e.let("valid"),u=s.items?(0,KA.getSchemaTypes)(s.items):[];t.block$data(l,c,(0,hr._)`${o} === false`),t.ok(l);function c(){let p=e.let("i",(0,hr._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(l,!0),e.if((0,hr._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return u.length>0&&!u.some(p=>p==="object"||p==="array")}function h(p,m){let y=e.name("item"),_=(0,KA.checkDataTypes)(u,y,a.opts.strictNumbers,KA.DataType.Wrong),w=e.const("indices",(0,hr._)`{}`);e.for((0,hr._)`;${p}--;`,()=>{e.let(y,(0,hr._)`${r}[${p}]`),e.if(_,(0,hr._)`continue`),u.length>1&&e.if((0,hr._)`typeof ${y} == "string"`,(0,hr._)`${y} += "_"`),e.if((0,hr._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,hr._)`${w}[${y}]`),t.error(),e.assign(l,!1).break()}).code((0,hr._)`${w}[${y}] = ${p}`)})}function d(p,m){let y=(0,e2e.useFunc)(e,t2e.default),_=e.name("outer");e.label(_).for((0,hr._)`;${p}--;`,()=>e.for((0,hr._)`${m} = ${p}; ${m}--;`,()=>e.if((0,hr._)`${y}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(l,!1).break(_)})))}}};YA.default=n2e});var $Y=g(QA=>{"use strict";Object.defineProperty(QA,"__esModule",{value:!0});var JA=pe(),i2e=Ge(),s2e=Xb(),o2e={message:"must be equal to constant",params:({schemaCode:t})=>(0,JA._)`{allowedValue: ${t}}`},a2e={keyword:"const",$data:!0,error:o2e,code(t){let{gen:e,data:r,$data:n,schemaCode:i,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,JA._)`!${(0,i2e.useFunc)(e,s2e.default)}(${r}, ${i})`):t.fail((0,JA._)`${s} !== ${r}`)}};QA.default=a2e});var OY=g(XA=>{"use strict";Object.defineProperty(XA,"__esModule",{value:!0});var jp=pe(),l2e=Ge(),u2e=Xb(),c2e={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,jp._)`{allowedValues: ${t}}`},f2e={keyword:"enum",schemaType:"array",$data:!0,error:c2e,code(t){let{gen:e,data:r,$data:n,schema:i,schemaCode:s,it:o}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=o.opts.loopEnum,l,u=()=>l??(l=(0,l2e.useFunc)(e,u2e.default)),c;if(a||n)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let d=e.const("vSchema",s);c=(0,jp.or)(...i.map((p,m)=>h(d,m)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",s,d=>e.if((0,jp._)`${u()}(${r}, ${d})`,()=>e.assign(c,!0).break()))}function h(d,p){let m=i[p];return typeof m=="object"&&m!==null?(0,jp._)`${u()}(${r}, ${d}[${p}])`:(0,jp._)`${r} === ${m}`}}};XA.default=f2e});var IY=g(ZA=>{"use strict";Object.defineProperty(ZA,"__esModule",{value:!0});var d2e=gY(),h2e=yY(),p2e=vY(),m2e=wY(),g2e=EY(),y2e=SY(),_2e=RY(),b2e=PY(),v2e=$Y(),w2e=OY(),E2e=[d2e.default,h2e.default,p2e.default,m2e.default,g2e.default,y2e.default,_2e.default,b2e.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},v2e.default,w2e.default];ZA.default=E2e});var tN=g(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.validateAdditionalItems=void 0;var Xl=pe(),eN=Ge(),S2e={message:({params:{len:t}})=>(0,Xl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Xl._)`{limit: ${t}}`},R2e={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:S2e,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,eN.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}AY(t,n)}};function AY(t,e){let{gen:r,schema:n,data:i,keyword:s,it:o}=t;o.items=!0;let a=r.const("len",(0,Xl._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Xl._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,eN.alwaysValidSchema)(o,n)){let u=r.var("valid",(0,Xl._)`${a} <= ${e.length}`);r.if((0,Xl.not)(u),()=>l(u)),t.ok(u)}function l(u){r.forRange("i",e.length,a,c=>{t.subschema({keyword:s,dataProp:c,dataPropType:eN.Type.Num},u),o.allErrors||r.if((0,Xl.not)(u),()=>r.break())})}}Mp.validateAdditionalItems=AY;Mp.default=R2e});var rN=g(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.validateTuple=void 0;var NY=pe(),Zb=Ge(),T2e=Wn(),P2e={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return CY(t,"additionalItems",e);r.items=!0,!(0,Zb.alwaysValidSchema)(r,e)&&t.ok((0,T2e.validateArray)(t))}};function CY(t,e,r=t.schema){let{gen:n,parentSchema:i,data:s,keyword:o,it:a}=t;c(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Zb.mergeEvaluated.items(n,r.length,a.items));let l=n.name("valid"),u=n.const("len",(0,NY._)`${s}.length`);r.forEach((f,h)=>{(0,Zb.alwaysValidSchema)(a,f)||(n.if((0,NY._)`${u} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},l)),t.ok(l))});function c(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let y=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Zb.checkStrictMode)(a,y,h.strictTuples)}}}Lp.validateTuple=CY;Lp.default=P2e});var kY=g(nN=>{"use strict";Object.defineProperty(nN,"__esModule",{value:!0});var $2e=rN(),O2e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,$2e.validateTuple)(t,"items")};nN.default=O2e});var xY=g(iN=>{"use strict";Object.defineProperty(iN,"__esModule",{value:!0});var qY=pe(),I2e=Ge(),A2e=Wn(),N2e=tN(),C2e={message:({params:{len:t}})=>(0,qY.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,qY._)`{limit: ${t}}`},k2e={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:C2e,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,I2e.alwaysValidSchema)(n,e)&&(i?(0,N2e.validateAdditionalItems)(t,i):t.ok((0,A2e.validateArray)(t)))}};iN.default=k2e});var jY=g(sN=>{"use strict";Object.defineProperty(sN,"__esModule",{value:!0});var Kn=pe(),ev=Ge(),q2e={message:({params:{min:t,max:e}})=>e===void 0?(0,Kn.str)`must contain at least ${t} valid item(s)`:(0,Kn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Kn._)`{minContains: ${t}}`:(0,Kn._)`{minContains: ${t}, maxContains: ${e}}`},x2e={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:q2e,code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:s}=t,o,a,{minContains:l,maxContains:u}=n;s.opts.next?(o=l===void 0?1:l,a=u):o=1;let c=e.const("len",(0,Kn._)`${i}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,ev.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,ev.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,ev.alwaysValidSchema)(s,r)){let m=(0,Kn._)`${c} >= ${o}`;a!==void 0&&(m=(0,Kn._)`${m} && ${c} <= ${a}`),t.pass(m);return}s.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,Kn._)`${i}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),y=e.let("count",0);d(m,()=>e.if(m,()=>p(y)))}function d(m,y){e.forRange("i",0,c,_=>{t.subschema({keyword:"contains",dataProp:_,dataPropType:ev.Type.Num,compositeRule:!0},m),y()})}function p(m){e.code((0,Kn._)`${m}++`),a===void 0?e.if((0,Kn._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,Kn._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,Kn._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};sN.default=x2e});var DY=g(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.validateSchemaDeps=Es.validatePropertyDeps=Es.error=void 0;var oN=pe(),j2e=Ge(),Dp=Wn();Es.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,oN.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,oN._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var M2e={keyword:"dependencies",type:"object",schemaType:"object",error:Es.error,code(t){let[e,r]=L2e(t);MY(t,e),LY(t,r)}};function L2e({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let i=Array.isArray(t[n])?e:r;i[n]=t[n]}return[e,r]}function MY(t,e=t.schema){let{gen:r,data:n,it:i}=t;if(Object.keys(e).length===0)return;let s=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let l=(0,Dp.propertyInData)(r,n,o,i.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),i.allErrors?r.if(l,()=>{for(let u of a)(0,Dp.checkReportMissingProp)(t,u)}):(r.if((0,oN._)`${l} && (${(0,Dp.checkMissingProp)(t,a,s)})`),(0,Dp.reportMissingProp)(t,s),r.else())}}Es.validatePropertyDeps=MY;function LY(t,e=t.schema){let{gen:r,data:n,keyword:i,it:s}=t,o=r.name("valid");for(let a in e)(0,j2e.alwaysValidSchema)(s,e[a])||(r.if((0,Dp.propertyInData)(r,n,a,s.opts.ownProperties),()=>{let l=t.subschema({keyword:i,schemaProp:a},o);t.mergeValidEvaluated(l,o)},()=>r.var(o,!0)),t.ok(o))}Es.validateSchemaDeps=LY;Es.default=M2e});var UY=g(aN=>{"use strict";Object.defineProperty(aN,"__esModule",{value:!0});var FY=pe(),D2e=Ge(),F2e={message:"property name must be valid",params:({params:t})=>(0,FY._)`{propertyName: ${t.propertyName}}`},U2e={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:F2e,code(t){let{gen:e,schema:r,data:n,it:i}=t;if((0,D2e.alwaysValidSchema)(i,r))return;let s=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),e.if((0,FY.not)(s),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(s)}};aN.default=U2e});var uN=g(lN=>{"use strict";Object.defineProperty(lN,"__esModule",{value:!0});var tv=Wn(),Ii=pe(),B2e=no(),rv=Ge(),V2e={message:"must NOT have additional properties",params:({params:t})=>(0,Ii._)`{additionalProperty: ${t.additionalProperty}}`},H2e={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:V2e,code(t){let{gen:e,schema:r,parentSchema:n,data:i,errsCount:s,it:o}=t;if(!s)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,rv.alwaysValidSchema)(o,r))return;let u=(0,tv.allSchemaProperties)(n.properties),c=(0,tv.allSchemaProperties)(n.patternProperties);f(),t.ok((0,Ii._)`${s} === ${B2e.default.errors}`);function f(){e.forIn("key",i,y=>{!u.length&&!c.length?p(y):e.if(h(y),()=>p(y))})}function h(y){let _;if(u.length>8){let w=(0,rv.schemaRefOrVal)(o,n.properties,"properties");_=(0,tv.isOwnProperty)(e,w,y)}else u.length?_=(0,Ii.or)(...u.map(w=>(0,Ii._)`${y} === ${w}`)):_=Ii.nil;return c.length&&(_=(0,Ii.or)(_,...c.map(w=>(0,Ii._)`${(0,tv.usePattern)(t,w)}.test(${y})`))),(0,Ii.not)(_)}function d(y){e.code((0,Ii._)`delete ${i}[${y}]`)}function p(y){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){d(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,rv.alwaysValidSchema)(o,r)){let _=e.name("valid");l.removeAdditional==="failing"?(m(y,_,!1),e.if((0,Ii.not)(_),()=>{t.reset(),d(y)})):(m(y,_),a||e.if((0,Ii.not)(_),()=>e.break()))}}function m(y,_,w){let v={keyword:"additionalProperties",dataProp:y,dataPropType:rv.Type.Str};w===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,_)}}};lN.default=H2e});var HY=g(fN=>{"use strict";Object.defineProperty(fN,"__esModule",{value:!0});var z2e=Pp(),BY=Wn(),cN=Ge(),VY=uN(),W2e={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&VY.default.code(new z2e.KeywordCxt(s,VY.default,"additionalProperties"));let o=(0,BY.allSchemaProperties)(r);for(let f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=cN.mergeEvaluated.props(e,(0,cN.toHash)(o),s.props));let a=o.filter(f=>!(0,cN.alwaysValidSchema)(s,r[f]));if(a.length===0)return;let l=e.name("valid");for(let f of a)u(f)?c(f):(e.if((0,BY.propertyInData)(e,i,f,s.opts.ownProperties)),c(f),s.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function u(f){return s.opts.useDefaults&&!s.compositeRule&&r[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};fN.default=W2e});var KY=g(dN=>{"use strict";Object.defineProperty(dN,"__esModule",{value:!0});var zY=Wn(),nv=pe(),WY=Ge(),GY=Ge(),G2e={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:i,it:s}=t,{opts:o}=s,a=(0,zY.allSchemaProperties)(r),l=a.filter(m=>(0,WY.alwaysValidSchema)(s,r[m]));if(a.length===0||l.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;let u=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=e.name("valid");s.props!==!0&&!(s.props instanceof nv.Name)&&(s.props=(0,GY.evaluatedPropsToName)(e,s.props));let{props:f}=s;h();function h(){for(let m of a)u&&d(m),s.allErrors?p(m):(e.var(c,!0),p(m),e.if(c))}function d(m){for(let y in u)new RegExp(m).test(y)&&(0,WY.checkStrictMode)(s,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,y=>{e.if((0,nv._)`${(0,zY.usePattern)(t,m)}.test(${y})`,()=>{let _=l.includes(m);_||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:GY.Type.Str},c),s.opts.unevaluated&&f!==!0?e.assign((0,nv._)`${f}[${y}]`,!0):!_&&!s.allErrors&&e.if((0,nv.not)(c),()=>e.break())})})}}};dN.default=G2e});var YY=g(hN=>{"use strict";Object.defineProperty(hN,"__esModule",{value:!0});var K2e=Ge(),Y2e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,K2e.alwaysValidSchema)(n,r)){t.fail();return}let i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};hN.default=Y2e});var JY=g(pN=>{"use strict";Object.defineProperty(pN,"__esModule",{value:!0});var J2e=Wn(),Q2e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:J2e.validateUnion,error:{message:"must match a schema in anyOf"}};pN.default=Q2e});var QY=g(mN=>{"use strict";Object.defineProperty(mN,"__esModule",{value:!0});var iv=pe(),X2e=Ge(),Z2e={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,iv._)`{passingSchemas: ${t.passing}}`},eFe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Z2e,code(t){let{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let s=r,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(o,()=>t.reset(),()=>t.error(!0));function u(){s.forEach((c,f)=>{let h;(0,X2e.alwaysValidSchema)(i,c)?e.var(l,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,iv._)`${l} && ${o}`).assign(o,!1).assign(a,(0,iv._)`[${a}, ${f}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,iv.Name)})})}}};mN.default=eFe});var XY=g(gN=>{"use strict";Object.defineProperty(gN,"__esModule",{value:!0});var tFe=Ge(),rFe={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=e.name("valid");r.forEach((s,o)=>{if((0,tFe.alwaysValidSchema)(n,s))return;let a=t.subschema({keyword:"allOf",schemaProp:o},i);t.ok(i),t.mergeEvaluated(a)})}};gN.default=rFe});var tJ=g(yN=>{"use strict";Object.defineProperty(yN,"__esModule",{value:!0});var sv=pe(),eJ=Ge(),nFe={message:({params:t})=>(0,sv.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,sv._)`{failingKeyword: ${t.ifClause}}`},iFe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:nFe,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,eJ.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=ZY(n,"then"),s=ZY(n,"else");if(!i&&!s)return;let o=e.let("valid",!0),a=e.name("_valid");if(l(),t.reset(),i&&s){let c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,u("then",c),u("else",c))}else i?e.if(a,u("then")):e.if((0,sv.not)(a),u("else"));t.pass(o,()=>t.error(!0));function l(){let c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function u(c,f){return()=>{let h=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,sv._)`${c}`):t.setParams({ifClause:c})}}}};function ZY(t,e){let r=t.schema[e];return r!==void 0&&!(0,eJ.alwaysValidSchema)(t,r)}yN.default=iFe});var rJ=g(_N=>{"use strict";Object.defineProperty(_N,"__esModule",{value:!0});var sFe=Ge(),oFe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,sFe.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};_N.default=oFe});var nJ=g(bN=>{"use strict";Object.defineProperty(bN,"__esModule",{value:!0});var aFe=tN(),lFe=kY(),uFe=rN(),cFe=xY(),fFe=jY(),dFe=DY(),hFe=UY(),pFe=uN(),mFe=HY(),gFe=KY(),yFe=YY(),_Fe=JY(),bFe=QY(),vFe=XY(),wFe=tJ(),EFe=rJ();function SFe(t=!1){let e=[yFe.default,_Fe.default,bFe.default,vFe.default,wFe.default,EFe.default,hFe.default,pFe.default,dFe.default,mFe.default,gFe.default];return t?e.push(lFe.default,cFe.default):e.push(aFe.default,uFe.default),e.push(fFe.default),e}bN.default=SFe});var iJ=g(vN=>{"use strict";Object.defineProperty(vN,"__esModule",{value:!0});var xt=pe(),RFe={message:({schemaCode:t})=>(0,xt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,xt._)`{format: ${t}}`},TFe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:RFe,code(t,e){let{gen:r,data:n,$data:i,schema:s,schemaCode:o,it:a}=t,{opts:l,errSchemaPath:u,schemaEnv:c,self:f}=a;if(!l.validateFormats)return;i?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:l.code.formats}),m=r.const("fDef",(0,xt._)`${p}[${o}]`),y=r.let("fType"),_=r.let("format");r.if((0,xt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,xt._)`${m}.type || "string"`).assign(_,(0,xt._)`${m}.validate`),()=>r.assign(y,(0,xt._)`"string"`).assign(_,m)),t.fail$data((0,xt.or)(w(),v()));function w(){return l.strictSchema===!1?xt.nil:(0,xt._)`${o} && !${_}`}function v(){let b=c.$async?(0,xt._)`(${m}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,xt._)`${_}(${n})`,E=(0,xt._)`(typeof ${_} == "function" ? ${b} : ${_}.test(${n}))`;return(0,xt._)`${_} && ${_} !== true && ${y} === ${e} && !${E}`}}function d(){let p=f.formats[s];if(!p){w();return}if(p===!0)return;let[m,y,_]=v(p);m===e&&t.pass(b());function w(){if(l.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function v(E){let R=E instanceof RegExp?(0,xt.regexpCode)(E):l.code.formats?(0,xt._)`${l.code.formats}${(0,xt.getProperty)(s)}`:void 0,S=r.scopeValue("formats",{key:s,ref:E,code:R});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,xt._)`${S}.validate`]:["string",E,S]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,xt._)`await ${_}(${n})`}return typeof y=="function"?(0,xt._)`${_}(${n})`:(0,xt._)`${_}.test(${n})`}}}};vN.default=TFe});var sJ=g(wN=>{"use strict";Object.defineProperty(wN,"__esModule",{value:!0});var PFe=iJ(),$Fe=[PFe.default];wN.default=$Fe});var oJ=g(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.contentVocabulary=sf.metadataVocabulary=void 0;sf.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];sf.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var lJ=g(EN=>{"use strict";Object.defineProperty(EN,"__esModule",{value:!0});var OFe=mY(),IFe=IY(),AFe=nJ(),NFe=sJ(),aJ=oJ(),CFe=[OFe.default,IFe.default,(0,AFe.default)(),NFe.default,aJ.metadataVocabulary,aJ.contentVocabulary];EN.default=CFe});var cJ=g(ov=>{"use strict";Object.defineProperty(ov,"__esModule",{value:!0});ov.DiscrError=void 0;var uJ;(function(t){t.Tag="tag",t.Mapping="mapping"})(uJ||(ov.DiscrError=uJ={}))});var dJ=g(RN=>{"use strict";Object.defineProperty(RN,"__esModule",{value:!0});var of=pe(),SN=cJ(),fJ=zb(),kFe=$p(),qFe=Ge(),xFe={message:({params:{discrError:t,tagName:e}})=>t===SN.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,of._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},jFe={keyword:"discriminator",type:"object",schemaType:"object",error:xFe,code(t){let{gen:e,data:r,schema:n,parentSchema:i,it:s}=t,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),u=e.const("tag",(0,of._)`${r}${(0,of.getProperty)(a)}`);e.if((0,of._)`typeof ${u} == "string"`,()=>c(),()=>t.error(!1,{discrError:SN.DiscrError.Tag,tag:u,tagName:a})),t.ok(l);function c(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,of._)`${u} === ${p}`),e.assign(l,f(d[p]));e.else(),t.error(!1,{discrError:SN.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,of.Name),p}function h(){var d;let p={},m=_(i),y=!0;for(let b=0;b<o.length;b++){let E=o[b];if(E?.$ref&&!(0,qFe.schemaHasRulesButRef)(E,s.self.RULES)){let S=E.$ref;if(E=fJ.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof fJ.SchemaEnv&&(E=E.schema),E===void 0)throw new kFe.default(s.opts.uriResolver,s.baseId,S)}let R=(d=E?.properties)===null||d===void 0?void 0:d[a];if(typeof R!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||_(E)),w(R,b)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return p;function _({required:b}){return Array.isArray(b)&&b.includes(a)}function w(b,E){if(b.const)v(b.const,E);else if(b.enum)for(let R of b.enum)v(R,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(b,E){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=E}}}};RN.default=jFe});var hJ=g((sit,MFe)=>{MFe.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var mJ=g((gt,TN)=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.MissingRefError=gt.ValidationError=gt.CodeGen=gt.Name=gt.nil=gt.stringify=gt.str=gt._=gt.KeywordCxt=gt.Ajv=void 0;var LFe=uY(),DFe=lJ(),FFe=dJ(),pJ=hJ(),UFe=["/properties"],av="http://json-schema.org/draft-07/schema",af=class extends LFe.default{_addVocabularies(){super._addVocabularies(),DFe.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(FFe.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(pJ,UFe):pJ;this.addMetaSchema(e,av,!1),this.refs["http://json-schema.org/schema"]=av}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(av)?av:void 0)}};gt.Ajv=af;TN.exports=gt=af;TN.exports.Ajv=af;Object.defineProperty(gt,"__esModule",{value:!0});gt.default=af;var BFe=Pp();Object.defineProperty(gt,"KeywordCxt",{enumerable:!0,get:function(){return BFe.KeywordCxt}});var lf=pe();Object.defineProperty(gt,"_",{enumerable:!0,get:function(){return lf._}});Object.defineProperty(gt,"str",{enumerable:!0,get:function(){return lf.str}});Object.defineProperty(gt,"stringify",{enumerable:!0,get:function(){return lf.stringify}});Object.defineProperty(gt,"nil",{enumerable:!0,get:function(){return lf.nil}});Object.defineProperty(gt,"Name",{enumerable:!0,get:function(){return lf.Name}});Object.defineProperty(gt,"CodeGen",{enumerable:!0,get:function(){return lf.CodeGen}});var VFe=Vb();Object.defineProperty(gt,"ValidationError",{enumerable:!0,get:function(){return VFe.default}});var HFe=$p();Object.defineProperty(gt,"MissingRefError",{enumerable:!0,get:function(){return HFe.default}})});var gJ=g(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.formatLimitDefinition=void 0;var zFe=mJ(),Ai=pe(),_a=Ai.operators,lv={formatMaximum:{okStr:"<=",ok:_a.LTE,fail:_a.GT},formatMinimum:{okStr:">=",ok:_a.GTE,fail:_a.LT},formatExclusiveMaximum:{okStr:"<",ok:_a.LT,fail:_a.GTE},formatExclusiveMinimum:{okStr:">",ok:_a.GT,fail:_a.LTE}},WFe={message:({keyword:t,schemaCode:e})=>(0,Ai.str)`should be ${lv[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Ai._)`{comparison: ${lv[t].okStr}, limit: ${e}}`};uf.formatLimitDefinition={keyword:Object.keys(lv),type:"string",schemaType:"string",$data:!0,error:WFe,code(t){let{gen:e,data:r,schemaCode:n,keyword:i,it:s}=t,{opts:o,self:a}=s;if(!o.validateFormats)return;let l=new zFe.KeywordCxt(s,a.RULES.all.format.definition,"format");l.$data?u():c();function u(){let h=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),d=e.const("fmt",(0,Ai._)`${h}[${l.schemaCode}]`);t.fail$data((0,Ai.or)((0,Ai._)`typeof ${d} != "object"`,(0,Ai._)`${d} instanceof RegExp`,(0,Ai._)`typeof ${d}.compare != "function"`,f(d)))}function c(){let h=l.schema,d=a.formats[h];if(!d||d===!0)return;if(typeof d!="object"||d instanceof RegExp||typeof d.compare!="function")throw new Error(`"${i}": format "${h}" does not define "compare" function`);let p=e.scopeValue("formats",{key:h,ref:d,code:o.code.formats?(0,Ai._)`${o.code.formats}${(0,Ai.getProperty)(h)}`:void 0});t.fail$data(f(p))}function f(h){return(0,Ai._)`${h}.compare(${r}, ${n}) ${lv[i].fail} 0`}},dependencies:["format"]};var GFe=t=>(t.addKeyword(uf.formatLimitDefinition),t);uf.default=GFe});var ON=g((Fp,bJ)=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});var cf=Ab(),KFe=gJ(),PN=pe(),yJ=new PN.Name("fullFormats"),YFe=new PN.Name("fastFormats"),$N=(t,e={keywords:!0})=>{if(Array.isArray(e))return _J(t,e,cf.fullFormats,yJ),t;let[r,n]=e.mode==="fast"?[cf.fastFormats,YFe]:[cf.fullFormats,yJ],i=e.formats||cf.formatNames;return _J(t,i,r,n),e.keywords&&(0,KFe.default)(t),t};$N.get=(t,e="full")=>{let n=(e==="fast"?cf.fastFormats:cf.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function _J(t,e,r,n){var i,s;(i=(s=t.opts.code).formats)!==null&&i!==void 0||(s.formats=(0,PN._)`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}bJ.exports=Fp=$N;Object.defineProperty(Fp,"__esModule",{value:!0});Fp.default=$N});var AN=g((ait,vJ)=>{"use strict";var JFe=KK(),QFe=Uc(),XFe=ON(),ZFe=Zd()({proto:!0}),IN=class t{constructor(e){this.ajv=new JFe({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:QFe}),XFe(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=e||{}}addSchema(e,r){let n=e.$id||r;if(e.$id!==void 0&&e.$id[0]==="#"&&(n=r+e.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let i=ZFe(e);this.convertSchemaToAjvFormat(i),this.ajv.addSchema(i,n),this._ajvSchemas[n]=e}}validate(e,r){return this.ajv.validate(e,r)}convertSchemaToAjvFormat(e){if(e!==null){e.type==="string"?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(let r in e)typeof e[r]=="object"&&this.convertSchemaToAjvFormat(e[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(e){let r=new t(e.ajvOptions);for(let[n,i]of Object.entries(e.ajvSchemas))r.ajv.addSchema(i,n);return r}};vJ.exports=IN});var EJ=g((lit,wJ)=>{"use strict";var NN=class t{constructor(e,r,n="#"){this.schema=e,this.schemaId=r,this.jsonPointer=n}getPropertyLocation(e){return new t(this.schema[e],this.schemaId,this.jsonPointer+"/"+e)}getSchemaRef(){return this.schemaId+this.jsonPointer}};wJ.exports=NN});var $J=g((uit,kN)=>{"use strict";kN.exports=M;kN.exports.default=M;var e5e={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},SJ={enum:["array","boolean","integer","null","number","object","string"]},RJ=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,t5e=Ab().fullFormats.uri,TJ=Ab().fullFormats.regex;function Yn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t}={}){let s=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(Yn.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(Yn.errors=s,o===0):(Yn.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var CN={validate:M};function Hr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t}={}){let s=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return Hr.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let l=t.length;for(let u=0;u<l;u++){let c=o;CN.validate(t[u],{instancePath:e+"/"+u,parentData:t,parentDataProperty:u,rootData:i})||(s=s===null?CN.validate.errors:s.concat(CN.validate.errors),o=s.length);var a=c===o;if(!a)break}}}else return Hr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Hr.errors=s,o===0}var PJ=lp().default;function M(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t}={}){let s=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return M.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:e5e.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let v=t.$id,b=o;if(o===b&&o===b)if(typeof v=="string"){if(!RJ.test(v))return M.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return M.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.$schema!==void 0){let v=t.$schema,b=o;if(o===b&&o===b)if(typeof v=="string"){if(!t5e(v))return M.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return M.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.$ref!==void 0){let v=t.$ref,b=o;if(o===b&&o===b)if(typeof v=="string"){if(!RJ.test(v))return M.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return M.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.$comment!==void 0){let v=o;if(typeof t.$comment!="string")return M.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.title!==void 0){let v=o;if(typeof t.title!="string")return M.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.description!==void 0){let v=o;if(typeof t.description!="string")return M.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.readOnly!==void 0){let v=o;if(typeof t.readOnly!="boolean")return M.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=v===o}else var a=!0;if(a){if(t.examples!==void 0){let v=o;if(o===v&&!Array.isArray(t.examples))return M.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let v=t.multipleOf,b=o;if(o===b)if(typeof v=="number"&&isFinite(v)){if(v<=0||isNaN(v))return M.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return M.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=b===o}else var a=!0;if(a){if(t.maximum!==void 0){let v=t.maximum,b=o;if(!(typeof v=="number"&&isFinite(v)))return M.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=b===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let v=t.exclusiveMaximum,b=o;if(!(typeof v=="number"&&isFinite(v)))return M.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=b===o}else var a=!0;if(a){if(t.minimum!==void 0){let v=t.minimum,b=o;if(!(typeof v=="number"&&isFinite(v)))return M.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=b===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let v=t.exclusiveMinimum,b=o;if(!(typeof v=="number"&&isFinite(v)))return M.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=b===o}else var a=!0;if(a){if(t.maxLength!==void 0){let v=t.maxLength,b=o,E=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return M.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===E&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return M.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=b===o}else var a=!0;if(a){if(t.minLength!==void 0){let v=o;Yn(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:i})||(s=s===null?Yn.errors:s.concat(Yn.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.pattern!==void 0){let v=t.pattern,b=o;if(o===b&&o===b)if(typeof v=="string"){if(!TJ(v))return M.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return M.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let v=o;M(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.items!==void 0){let v=t.items,b=o,E=o,R=!1,S=o;M(v,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var l=S===o;if(R=R||l,!R){let T=o;Hr(v,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:i})||(s=s===null?Hr.errors:s.concat(Hr.errors),o=s.length);var l=T===o;R=R||l}if(R)o=E,s!==null&&(E?s.length=E:s=null);else{let T={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[T]:s.push(T),o++,M.errors=s,!1}var a=b===o}else var a=!0;if(a){if(t.maxItems!==void 0){let v=t.maxItems,b=o,E=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return M.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===E&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return M.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=b===o}else var a=!0;if(a){if(t.minItems!==void 0){let v=o;Yn(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:i})||(s=s===null?Yn.errors:s.concat(Yn.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let v=o;if(typeof t.uniqueItems!="boolean")return M.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=v===o}else var a=!0;if(a){if(t.contains!==void 0){let v=o;M(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let v=t.maxProperties,b=o,E=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return M.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===E&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return M.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=b===o}else var a=!0;if(a){if(t.minProperties!==void 0){let v=o;Yn(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:i})||(s=s===null?Yn.errors:s.concat(Yn.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.required!==void 0){let v=t.required,b=o;if(o===o)if(Array.isArray(v)){var u=!0;let S=v.length;for(let P=0;P<S;P++){let T=o;if(typeof v[P]!="string")return M.errors=[{instancePath:e+"/required/"+P,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=T===o;if(!u)break}if(u){let P=v.length,T;if(P>1){let O={};for(;P--;){let j=v[P];if(typeof j=="string"){if(typeof O[j]=="number"){return T=O[j],M.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:P,j:T},message:"must NOT have duplicate items (items ## "+T+" and "+P+" are identical)"}],!1;break}O[j]=P}}}}}else return M.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=b===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let v=o;M(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.definitions!==void 0){let v=t.definitions,b=o;if(o===b)if(v&&typeof v=="object"&&!Array.isArray(v))for(let R in v){let S=o;M(v[R],{instancePath:e+"/definitions/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:R,rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var c=S===o;if(!c)break}else return M.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=b===o}else var a=!0;if(a){if(t.properties!==void 0){let v=t.properties,b=o;if(o===b)if(v&&typeof v=="object"&&!Array.isArray(v))for(let R in v){let S=o;M(v[R],{instancePath:e+"/properties/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:R,rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var f=S===o;if(!f)break}else return M.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=b===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let v=t.patternProperties,b=o;if(o===b)if(v&&typeof v=="object"&&!Array.isArray(v)){for(let R in v){let S=o;if(o===S&&typeof R=="string"&&!TJ(R)){let P={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:R};s===null?s=[P]:s.push(P),o++}var h=S===o;if(!h){let P={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:R},message:"property name must be valid"};return s===null?s=[P]:s.push(P),o++,M.errors=s,!1;break}}if(h)for(let R in v){let S=o;M(v[R],{instancePath:e+"/patternProperties/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:R,rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var d=S===o;if(!d)break}}else return M.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=b===o}else var a=!0;if(a){if(t.dependencies!==void 0){let v=t.dependencies,b=o;if(o===b)if(v&&typeof v=="object"&&!Array.isArray(v))for(let R in v){let S=v[R],P=o,T=o,O=!1,j=o;M(S,{instancePath:e+"/dependencies/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:R,rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var p=j===o;if(O=O||p,!O){let N=o;if(o===o)if(Array.isArray(S)){var m=!0;let ge=S.length;for(let $=0;$<ge;$++){let k=o;if(typeof S[$]!="string"){let U={instancePath:e+"/dependencies/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+$,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[U]:s.push(U),o++}var m=k===o;if(!m)break}if(m){let $=S.length,k;if($>1){let ae={};for(;$--;){let U=S[$];if(typeof U=="string"){if(typeof ae[U]=="number"){k=ae[U];let W={instancePath:e+"/dependencies/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:$,j:k},message:"must NOT have duplicate items (items ## "+k+" and "+$+" are identical)"};s===null?s=[W]:s.push(W),o++;break}ae[U]=$}}}}}else{let ge={instancePath:e+"/dependencies/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[ge]:s.push(ge),o++}var p=N===o;O=O||p}if(O)o=T,s!==null&&(T?s.length=T:s=null);else{let N={instancePath:e+"/dependencies/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[N]:s.push(N),o++,M.errors=s,!1}var y=P===o;if(!y)break}else return M.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=b===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let v=o;M(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.enum!==void 0){let v=t.enum,b=o;if(o===b)if(Array.isArray(v)){if(v.length<1)return M.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let R=v.length,S;if(R>1){e:for(;R--;)for(S=R;S--;)if(PJ(v[R],v[S])){return M.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:R,j:S},message:"must NOT have duplicate items (items ## "+S+" and "+R+" are identical)"}],!1;break e}}}}else return M.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=b===o}else var a=!0;if(a){if(t.type!==void 0){let v=t.type,b=o,E=o,R=!1,S=o;if(!(v==="array"||v==="boolean"||v==="integer"||v==="null"||v==="number"||v==="object"||v==="string")){let T={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:SJ.enum},message:"must be equal to one of the allowed values"};s===null?s=[T]:s.push(T),o++}var _=S===o;if(R=R||_,!R){let T=o;if(o===T)if(Array.isArray(v))if(v.length<1){let j={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[j]:s.push(j),o++}else{var w=!0;let j=v.length;for(let N=0;N<j;N++){let C=v[N],z=o;if(!(C==="array"||C==="boolean"||C==="integer"||C==="null"||C==="number"||C==="object"||C==="string")){let $={instancePath:e+"/type/"+N,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:SJ.enum},message:"must be equal to one of the allowed values"};s===null?s=[$]:s.push($),o++}var w=z===o;if(!w)break}if(w){let N=v.length,C;if(N>1){e:for(;N--;)for(C=N;C--;)if(PJ(v[N],v[C])){let z={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:N,j:C},message:"must NOT have duplicate items (items ## "+C+" and "+N+" are identical)"};s===null?s=[z]:s.push(z),o++;break e}}}}else{let j={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[j]:s.push(j),o++}var _=T===o;R=R||_}if(R)o=E,s!==null&&(E?s.length=E:s=null);else{let T={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[T]:s.push(T),o++,M.errors=s,!1}var a=b===o}else var a=!0;if(a){if(t.format!==void 0){let v=o;if(typeof t.format!="string")return M.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let v=o;if(typeof t.contentMediaType!="string")return M.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let v=o;if(typeof t.contentEncoding!="string")return M.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.if!==void 0){let v=o;M(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.then!==void 0){let v=o;M(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.else!==void 0){let v=o;M(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.allOf!==void 0){let v=o;Hr(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:i})||(s=s===null?Hr.errors:s.concat(Hr.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.anyOf!==void 0){let v=o;Hr(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:i})||(s=s===null?Hr.errors:s.concat(Hr.errors),o=s.length);var a=v===o}else var a=!0;if(a){if(t.oneOf!==void 0){let v=o;Hr(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:i})||(s=s===null?Hr.errors:s.concat(Hr.errors),o=s.length);var a=v===o}else var a=!0;if(a)if(t.not!==void 0){let v=o;M(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:i})||(s=s===null?M.errors:s.concat(M.errors),o=s.length);var a=v===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return M.errors=s,o===0}});var MN=g((cit,OJ)=>{"use strict";var qN=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Failed to merge "${e}" keyword schemas.`,this.schemas=r}},xN=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Resolver for "${e}" keyword not found.`,this.schemas=r}},jN=class extends Error{constructor(e){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Invalid "onConflict" option: "${e}".`}};OJ.exports={MergeError:qN,ResolverNotFoundError:xN,InvalidOnConflictOptionError:jN}});var NJ=g((fit,AJ)=>{"use strict";var{dequal:r5e}=J0(),{MergeError:LN}=MN();function IJ(t){let e=t[0];for(let r=1;r<t.length;r++)e=e.filter(n=>t[r].includes(n));return e}function n5e(t,e,r){let n=IJ(e);if(n.length===0)throw new LN(t,e);r[t]=n}function i5e(t,e,r){for(let i=0;i<e.length;i++)Array.isArray(e[i])||(e[i]=[e[i]]);let n=IJ(e);if(n.length===0)throw new LN(t,e);n.length===1?r[t]=n[0]:r[t]=n}function s5e(t,e,r){let n=[];for(let i of e)for(let s of i)n.includes(s)||n.push(s);r[t]=n}function o5e(t,e,r){r[t]=Math.min(...e)}function a5e(t,e,r){r[t]=Math.max(...e)}function l5e(t,e,r){let n=(a,l)=>l?n(l,a%l):a,i=(a,l)=>a*l/n(a,l),s=1;for(let a of e)for(;a*s%1!==0;)s*=10;let o=e[0]*s;for(let a of e)o=i(o,a*s);r[t]=o/s}function u5e(t,e,r){let n=e[0];for(let i=1;i<e.length;i++)if(!r5e(e[i],n))throw new LN(t,e);r[t]=n}function c5e(){}function f5e(t,e,r){for(let n of e)if(n===!1){r[t]=!1;return}r[t]=!0}function d5e(t,e,r){for(let n of e)if(n===!0){r[t]=!0;return}r[t]=!1}AJ.exports={arraysIntersection:n5e,hybridArraysIntersection:i5e,arraysUnion:s5e,minNumber:o5e,maxNumber:a5e,commonMultiple:l5e,allEqual:u5e,booleanAnd:f5e,booleanOr:d5e,skip:c5e}});var MJ=g((dit,jJ)=>{"use strict";var{dequal:h5e}=J0(),$t=NJ(),fv=MN(),qJ={$id:$t.skip,type:$t.hybridArraysIntersection,enum:$t.arraysIntersection,minLength:$t.maxNumber,maxLength:$t.minNumber,minimum:$t.maxNumber,maximum:$t.minNumber,multipleOf:$t.commonMultiple,exclusiveMinimum:$t.maxNumber,exclusiveMaximum:$t.minNumber,minItems:$t.maxNumber,maxItems:$t.minNumber,maxProperties:$t.minNumber,minProperties:$t.maxNumber,const:$t.allEqual,default:$t.allEqual,format:$t.allEqual,required:$t.arraysUnion,properties:b5e,patternProperties:cv,additionalProperties:uv,items:g5e,additionalItems:y5e,definitions:cv,$defs:cv,nullable:$t.booleanAnd,oneOf:CJ,anyOf:CJ,allOf:$t.arraysUnion,not:uv,if:v5e,then:$t.skip,else:$t.skip,dependencies:kJ,dependentRequired:kJ,dependentSchemas:cv,propertyNames:uv,uniqueItems:$t.booleanOr,contains:uv};function uv(t,e,r,n,i){r[t]=Ni(e,i)}function p5e(t){let e=[[]];for(let r of t){let n=[];for(let i of e)for(let s of r)n.push([...i,s]);e=n}return e}function CJ(t,e,r,n,i){if(e.length===1){r[t]=e[0];return}let s=p5e(e),o=[];for(let a of s)try{let l=Ni(a,i);l!==void 0&&o.push(l)}catch(l){if(l instanceof fv.MergeError)continue;throw l}r[t]=o}function m5e(t,e){let{items:r,additionalItems:n}=t;return Array.isArray(r)?e<r.length?r[e]:n:r!==void 0?r:n}function g5e(t,e,r,n,i){let s=0;for(let a of e)Array.isArray(a)&&(s=Math.max(s,a.length));if(s===0){r[t]=Ni(e,i);return}let o=[];for(let a=0;a<s;a++){let l=[];for(let u of n){let c=m5e(u,a);c!==void 0&&l.push(c)}o[a]=Ni(l,i)}r[t]=o}function y5e(t,e,r,n,i){let s=!1;for(let a of n)if(Array.isArray(a.items)){s=!0;break}if(!s){r[t]=Ni(e,i);return}let o=[];for(let a of n){let l=a.additionalItems;l===void 0&&!Array.isArray(a.items)&&(l=a.items),l!==void 0&&o.push(l)}r[t]=Ni(o,i)}function _5e(t,e){let{properties:r,patternProperties:n,additionalProperties:i}=t;if(r?.[e]!==void 0)return r[e];for(let s of Object.keys(n??{}))if(new RegExp(s).test(e))return n[s];return i}function b5e(t,e,r,n,i){let s={};for(let a of n){let l=a.properties??{};for(let u of Object.keys(l)){if(s[u]!==void 0)continue;let c=l[u];s[u]=[c];for(let f of n){if(a===f)continue;let h=_5e(f,u);h!==void 0&&s[u].push(h)}}}let o={};for(let a of Object.keys(s)){let l=s[a];o[a]=Ni(l,i)}r[t]=o}function cv(t,e,r,n,i){let s={};for(let a of e)for(let l of Object.keys(a))s[l]===void 0&&(s[l]=[]),s[l].push(a[l]);let o={};for(let a of Object.keys(s)){let l=s[a],u=Ni(l,i);o[a]=u}r[t]=o}function v5e(t,e,r,n,i){for(let s=0;s<n.length;s++){let o={if:n[s].if,then:n[s].then,else:n[s].else};if(o.if!==void 0){if(r.if===void 0){r.if=o.if,o.then!==void 0&&(r.then=o.then),o.else!==void 0&&(r.else=o.else);continue}r.then!==void 0&&(r.then=Ni([r.then,o],i)),r.else!==void 0&&(r.else=Ni([r.else,o],i))}}}function kJ(t,e,r){let n={};for(let i of e)for(let s of Object.keys(i)){n[s]===void 0&&(n[s]=[]);let o=n[s];for(let a of i[s])o.includes(a)||o.push(a)}r[t]=n}function Ni(t,e){if(t.length===0)return{};if(t.length===1)return t[0];let r={},n={},i=!0;for(let s of t){if(s===!1)return!1;if(s!==!0){i=!1;for(let o of Object.keys(s))n[o]===void 0&&(n[o]=[]),n[o].push(s[o])}}if(i)return!0;for(let s of Object.keys(n)){let o=n[s];(e.resolvers[s]??e.defaultResolver)(s,o,r,t,e)}return r}function xJ(t,e,r,n,i){let s=i.onConflict??"throw";if(e.length===1||s==="first"){r[t]=e[0];return}let o=!0;for(let a=1;a<e.length;a++)if(!h5e(e[a],e[0])){o=!1;break}if(o){r[t]=e[0];return}if(s==="throw")throw new fv.ResolverNotFoundError(t,e);if(s!=="skip")throw new fv.InvalidOnConflictOptionError(s)}function w5e(t,e={}){return e.defaultResolver===void 0&&(e.defaultResolver=xJ),e.resolvers={...qJ,...e.resolvers},Ni(t,e)}jJ.exports={mergeSchemas:w5e,keywordsResolvers:qJ,defaultResolver:xJ,...fv}});var DJ=g((hit,LJ)=>{"use strict";var{mergeSchemas:E5e}=MJ();function S5e(t){return E5e(t,{onConflict:"skip"})}LJ.exports=S5e});var FJ=g((pit,DN)=>{"use strict";function R5e(t,e,r,n){let i="";e.validatorSchemasIds.size>0?(i+=`const Validator = require('fast-json-stringify/lib/validator')
`,i+=`const validatorState = ${JSON.stringify(n.getState())}
`,i+=`const validator = Validator.restoreFromState(validatorState)
`):i+=`const validator = null
`;let{schema:s,...o}=r.getState();return`
  'use strict'

  const Serializer = require('fast-json-stringify/lib/serializer')
  const serializerState = ${JSON.stringify(o)}
  const serializer = Serializer.restoreFromState(serializerState)

  ${i}

  module.exports = ${t.toString()}(validator, serializer)`}DN.exports=R5e;DN.exports.dependencies={Serializer:I0(),Validator:AN()}});var YJ=g((mit,ff)=>{"use strict";var{RefResolver:T5e}=g6(),P5e=I0(),$5e=AN(),Zl=EJ(),UJ=$J(),O5e=DJ(),I5e=/'/g,dv=2e4,VJ="default",A5e=["floor","ceil","round","trunc"],HJ=["default","json-stringify"],Up=0;function FN(t,e){if(!UJ(t)){e?e=`"${e}" `:e="";let r=UJ.errors[0],n=new Error(`${e}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=FN.errors,n}}function Bp(t,e){let r=e.schema.$ref,n=r.indexOf("#");n===-1&&(n=r.length);let i=r.slice(0,n)||e.schemaId,s=r.slice(n)||"#",o=t.refResolver.getSchema(i,s);if(o===null)throw new Error(`Cannot find reference "${r}"`);let a=new Zl(o,i,s);return o.$ref!==void 0?Bp(t,a):a}function hv(t,e){let r=t.refResolver.getSchema(e,"#");return new Zl(r,e,"#")}function BJ(t,e){return t.$id&&t.$id.charAt(0)!=="#"?t.$id:e}function UN(t,e){FN(t),e=e||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:e,refResolver:new T5e,rootSchemaId:t.$id||`__fjs_root_${Up++}`,validatorSchemasIds:new Set,mergedSchemasIds:new Map},n=BJ(t,r.rootSchemaId);if(r.refResolver.hasSchema(n)||r.refResolver.addSchema(t,r.rootSchemaId),e.schema)for(let c in e.schema){let f=e.schema[c],h=BJ(f,c);r.refResolver.hasSchema(h)||(FN(f,c),r.refResolver.addSchema(f,c))}if(e.rounding&&!A5e.includes(e.rounding))throw new Error(`Unsupported integer rounding method ${e.rounding}`);if(e.largeArrayMechanism)if(HJ.includes(e.largeArrayMechanism))VJ=e.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${e.largeArrayMechanism}`);if(e.largeArraySize)if(typeof e.largeArraySize=="string"&&Number.isFinite(Number.parseInt(e.largeArraySize,10)))dv=Number.parseInt(e.largeArraySize,10);else if(typeof e.largeArraySize=="number"&&Number.isInteger(e.largeArraySize))dv=e.largeArraySize;else if(typeof e.largeArraySize=="bigint")dv=Number(e.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof e.largeArraySize} with value ${e.largeArraySize}`);let i=new Zl(t,r.rootSchemaId),s=wn(r,i,"input"),o=`
    const JSON_STR_BEGIN_OBJECT = '{'
    const JSON_STR_END_OBJECT = '}'
    const JSON_STR_BEGIN_ARRAY = '['
    const JSON_STR_END_ARRAY = ']'
    const JSON_STR_COMMA = ','
    const JSON_STR_COLONS = ':'
    const JSON_STR_QUOTE = '"'
    const JSON_STR_EMPTY_OBJECT = JSON_STR_BEGIN_OBJECT + JSON_STR_END_OBJECT
    const JSON_STR_EMPTY_ARRAY = JSON_STR_BEGIN_ARRAY + JSON_STR_END_ARRAY
    const JSON_STR_EMPTY_STRING = JSON_STR_QUOTE + JSON_STR_QUOTE
    const JSON_STR_NULL = 'null'
  `;s==="json += anonymous0(input)"?o+=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:o+=`
    function main (input) {
      let json = ''
      ${s}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let a=new P5e(e),l=new $5e(e.ajv);for(let c of r.validatorSchemasIds){let f=r.refResolver.getSchema(c);l.addSchema(f,c);let h=r.refResolver.getSchemaDependencies(c);for(let[d,p]of Object.entries(h))l.addSchema(p,d)}if(e.debugMode&&(e.mode="debug"),e.mode==="debug")return{validator:l,serializer:a,code:`validator
serializer
${o}`,ajv:l.ajv};let u=new Function("validator","serializer",o);return e.mode==="standalone"?FJ()(u,r,a,l):u(l,a)}var N5e=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],C5e=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],k5e=["maxLength","minLength","pattern"],q5e=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function x5e(t){for(let e of N5e)if(e in t)return"object";for(let e of C5e)if(e in t)return"array";for(let e of k5e)if(e in t)return"string";for(let e of q5e)if(e in t)return"number";return t.type}function j5e(t,e,r){let n=e.schema,i=Object.keys(n.properties||{}),s=`
    const propertiesKeys = ${JSON.stringify(i)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,o=e.getPropertyLocation("patternProperties"),a=o.schema;if(a!==void 0)for(let c in a){let f=o.getPropertyLocation(c);s+=`
        if (/${c.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${r}
          json += serializer.asString(key) + JSON_STR_COLONS
          ${wn(t,f,"value")}
          continue
        }
      `}let u=e.getPropertyLocation("additionalProperties").schema;if(u!==void 0)if(u===!0)s+=`
        ${r}
        json += serializer.asString(key) + JSON_STR_COLONS + JSON.stringify(value)
      `;else{let c=e.getPropertyLocation("additionalProperties");s+=`
        ${r}
        json += serializer.asString(key) + JSON_STR_COLONS
        ${wn(t,c,"value")}
      `}return s+=`
    }
  `,s}function M5e(t,e){let r=e.schema,n=e.getPropertyLocation("properties"),i=r.required||[],s=Object.keys(r.properties||{}).sort((u,c)=>{let f=i.includes(u),h=i.includes(c);return f===h?0:f?-1:1}),o=i.includes(s[0]),a=`let value
`;for(let u of i)if(!s.includes(u)){let c=JSON.stringify(u);a+=`if (obj[${c}] === undefined) throw new Error('${c.replace(/'/g,"\\'")} is required!')
`}a+=`let json = JSON_STR_BEGIN_OBJECT
`;let l="";o||(a+=`let addComma = false
`,l="!addComma && (addComma = true) || (json += JSON_STR_COMMA)");for(let u of s){let c=n.getPropertyLocation(u);c.schema.$ref&&(c=Bp(t,c));let f=JSON.stringify(u),h=c.schema.default,d=i.includes(u);a+=`
      value = obj[${f}]
      if (value !== undefined) {
        ${l}
        json += ${JSON.stringify(f+":")}
        ${wn(t,c,"value")}
      }`,h!==void 0?a+=` else {
        ${l}
        json += ${JSON.stringify(f+":"+JSON.stringify(h))}
      }
      `:d?a+=` else {
        throw new Error('${f.replace(/'/g,"\\'")} is required!')
      }
      `:a+=`
`,o&&(l="json += ','")}return(r.patternProperties||r.additionalProperties)&&(a+=j5e(t,e,l)),a+=`
    return json + JSON_STR_END_OBJECT
  `,a}function pv(t,e,r){for(let o=0;o<r.length;o++){let a=r[o];a.schema.$ref&&(r[o]=Bp(t,a))}let n=[];for(let o of r){let a=zJ(t,o.schema,o.schemaId);delete a.$id,n.push(a)}let i=O5e(n),s=new Zl(i,e);return t.refResolver.addSchema(i,e),s}function zJ(t,e,r){let n=Array.isArray(e)?[]:{};e.$id!==void 0&&e.$id.charAt(0)!=="#"&&(r=e.$id);let i=t.mergedSchemasIds.get(e);i&&t.mergedSchemasIds.set(n,i);for(let s in e){let o=e[s];s==="$ref"&&typeof o=="string"&&o.charAt(0)==="#"&&(o=r+o),typeof o=="object"&&o!==null&&(o=zJ(t,o,r)),n[s]=o}return n}function L5e(t){return`(${t} && typeof ${t}.toJSON === 'function')
    ? ${t}.toJSON()
    : ${t}
  `}function D5e(t,e){let r=e.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let n=GJ(t);t.functionsNamesBySchema.set(r,n);let i=e.getSchemaRef();i.startsWith(t.rootSchemaId)&&(i=i.replace(t.rootSchemaId,""));let s=`
  `,o=r.nullable===!0;return s+=`
    // ${i}
    function ${n} (input) {
      const obj = ${L5e("input")}
      ${o?"":"if (obj === null) return JSON_STR_EMPTY_OBJECT"}

      ${M5e(t,e)}
    }
  `,t.functions.push(s),n}function F5e(t,e){let r=e.schema,n=e.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=Bp(t,n));let i=n.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let s=GJ(t);t.functionsNamesBySchema.set(r,s);let o=e.getSchemaRef();o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,""));let a=`
    function ${s} (obj) {
      // ${o}
  `,l=r.nullable===!0;if(a+=`
    ${l?"":"if (obj === null) return JSON_STR_EMPTY_ARRAY"}
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(i)&&(a+=`
      if (arrayLength > ${i.length}) {
        throw new Error(\`Item at ${i.length} does not match schema definition.\`)
      }
    `),VJ==="json-stringify"&&(a+=`if (arrayLength >= ${dv}) return JSON.stringify(obj)
`),a+=`
    const arrayEnd = arrayLength - 1
    let value
    let json = ''
  `,Array.isArray(i)){for(let u=0;u<i.length;u++){let c=i[u];a+=`value = obj[${u}]`;let f=wn(t,n.getPropertyLocation(u),"value");a+=`
        if (${u} < arrayLength) {
          if (${WJ(c.type,`[${u}]`)}) {
            ${f}
            if (${u} < arrayEnd) {
              json += JSON_STR_COMMA
            }
          } else {
            throw new Error(\`Item at ${u} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${i.length}; i < arrayLength; i++) {
          json += JSON.stringify(obj[i])
          if (i < arrayEnd) {
            json += JSON_STR_COMMA
          }
        }`)}else{let u=wn(t,n,"obj[i]");a+=`
      for (let i = 0; i < arrayLength; i++) {
        ${u}
        if (i < arrayEnd) {
          json += JSON_STR_COMMA
        }
      }`}return a+=`
    return JSON_STR_BEGIN_ARRAY + json + JSON_STR_END_ARRAY
  }`,t.functions.push(a),s}function WJ(t,e){let r;switch(t){case"null":r="value === null";break;case"string":r=`typeof value === 'string' ||
      value === null ||
      value instanceof Date ||
      value instanceof RegExp ||
      (
        typeof value === "object" &&
        typeof value.toString === "function" &&
        value.toString !== Object.prototype.toString
      )`;break;case"integer":r="Number.isInteger(value)";break;case"number":r="Number.isFinite(value)";break;case"boolean":r="typeof value === 'boolean'";break;case"object":r="value && typeof value === 'object' && value.constructor === Object";break;case"array":r="Array.isArray(value)";break;default:Array.isArray(t)&&(r=`(${t.map(i=>WJ(i,e)).join(" || ")})`)}return r}function GJ(t){return"anonymous"+t.functionsCounter++}function U5e(t,e,r){let i=e.schema.type.sort(a=>a==="null"?-1:1),s="";i.forEach((a,l)=>{e.schema={...e.schema,type:a};let u=KJ(t,e,r),c=l===0?"if":"else if";switch(a){case"null":s+=`
          ${c} (${r} === null)
            ${u}
          `;break;case"string":{s+=`
          ${c}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString
            )
          )
            ${u}
        `;break}case"array":{s+=`
          ${c}(Array.isArray(${r}))
            ${u}
        `;break}case"integer":{s+=`
          ${c}(Number.isInteger(${r}) || ${r} === null)
            ${u}
        `;break}default:{s+=`
          ${c}(typeof ${r} === "${a}" || ${r} === null)
            ${u}
        `;break}}});let o=e.getSchemaRef();return o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,"")),s+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,s}function KJ(t,e,r){let n=e.schema;switch(n.type){case"null":return"json += JSON_STR_NULL";case"string":return n.format==="date-time"?`json += serializer.asDateTime(${r})`:n.format==="date"?`json += serializer.asDate(${r})`:n.format==="time"?`json += serializer.asTime(${r})`:n.format==="unsafe"?`json += serializer.asUnsafeString(${r})`:`
        if (typeof ${r} !== 'string') {
          if (${r} === null) {
            json += JSON_STR_EMPTY_STRING
          } else if (${r} instanceof Date) {
            json += JSON_STR_QUOTE + ${r}.toISOString() + JSON_STR_QUOTE
          } else if (${r} instanceof RegExp) {
            json += serializer.asString(${r}.source)
          } else {
            json += serializer.asString(${r}.toString())
          }
        } else {
          json += serializer.asString(${r})
        }
        `;case"integer":return`json += serializer.asInteger(${r})`;case"number":return`json += serializer.asNumber(${r})`;case"boolean":return`json += serializer.asBoolean(${r})`;case"object":return`json += ${D5e(t,e)}(${r})`;case"array":return`json += ${F5e(t,e)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function B5e(t,e){let r=t.schema,n=r.type,i=Array.isArray(n)&&n.includes("null"),s="";return i&&(s+=`
      if (${e} === null) {
        json += JSON_STR_NULL
      } else {
    `),s+=`json += '${JSON.stringify(r.const).replace(I5e,"\\'")}'`,i&&(s+=`
      }
    `),s}function V5e(t,e,r){let n=e.schema,i=t.mergedSchemasIds.get(n);if(i){let c=hv(t,i);return wn(t,c,r)}i=`__fjs_merged_${Up++}`,t.mergedSchemasIds.set(n,i);let{allOf:s,...o}=e.schema,a=[new Zl(o,e.schemaId,e.jsonPointer)],l=e.getPropertyLocation("allOf");for(let c=0;c<s.length;c++)a.push(l.getPropertyLocation(c));let u=pv(t,i,a);return wn(t,u,r)}function H5e(t,e,r){t.validatorSchemasIds.add(e.schemaId);let i=e.schema.anyOf?"anyOf":"oneOf",{[i]:s,...o}=e.schema,a=new Zl(o,e.schemaId,e.jsonPointer),l=e.getPropertyLocation(i),u="";for(let f=0;f<s.length;f++){let h=l.getPropertyLocation(f),d=h.schema,p=t.mergedSchemasIds.get(d),m=null;p?m=hv(t,p):(p=`__fjs_merged_${Up++}`,t.mergedSchemasIds.set(d,p),m=pv(t,p,[a,h]));let y=wn(t,m,r),_=h.getSchemaRef();u+=`
      ${f===0?"if":"else if"}(validator.validate("${_}", ${r}))
        ${y}
    `}let c=e.getSchemaRef();return c.startsWith(t.rootSchemaId)&&(c=c.replace(t.rootSchemaId,"")),u+=`
    else throw new TypeError(\`The value of '${c}' does not match schema definition.\`)
  `,u}function z5e(t,e,r){t.validatorSchemasIds.add(e.schemaId);let{if:n,then:i,else:s,...o}=e.schema,a=new Zl(o,e.schemaId,e.jsonPointer),u=e.getPropertyLocation("if").getSchemaRef(),c=e.getPropertyLocation("then"),f=t.mergedSchemasIds.get(i),h=null;if(f?h=hv(t,f):(f=`__fjs_merged_${Up++}`,t.mergedSchemasIds.set(i,f),h=pv(t,f,[a,c])),!s)return`
      if (validator.validate("${u}", ${r})) {
        ${wn(t,h,r)}
      } else {
        ${wn(t,a,r)}
      }
    `;let d=e.getPropertyLocation("else"),p=t.mergedSchemasIds.get(s),m=null;return p?m=hv(t,p):(p=`__fjs_merged_${Up++}`,t.mergedSchemasIds.set(s,p),m=pv(t,p,[a,d])),`
    if (validator.validate("${u}", ${r})) {
      ${wn(t,h,r)}
    } else {
      ${wn(t,m,r)}
    }
  `}function wn(t,e,r){let n=e.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(e=Bp(t,e),n=e.schema),n.allOf)return V5e(t,e,r);if(n.anyOf||n.oneOf)return H5e(t,e,r);if(n.if&&n.then)return z5e(t,e,r);if(n.type===void 0){let a=x5e(n);a&&(n.type=a)}let i="",s=n.type,o=n.nullable===!0;return o&&(i+=`
      if (${r} === null) {
        json += JSON_STR_NULL
      } else {
    `),n.const!==void 0?i+=B5e(e,r):Array.isArray(s)?i+=U5e(t,e,r):i+=KJ(t,e,r),o&&(i+=`
      }
    `),i}ff.exports=UN;ff.exports.default=UN;ff.exports.build=UN;ff.exports.validLargeArrayMechanisms=HJ;ff.exports.restore=function({code:t,validator:e,serializer:r}){return Function.apply(null,["validator","serializer",t]).apply(null,[e,r])}});var QJ=g((git,BN)=>{"use strict";var W5e=VN();function JJ(t={readMode:!0}){if(t.readMode===!0&&typeof t.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(t.readMode!==!0&&typeof t.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=W5e();return function(n,i={}){i.mode="standalone";let s=e(n,i);return function(o){let a=s(o);return t.storeFunction(o,a),new Function(a)}}}BN.exports=JJ;BN.exports.default=JJ});var VN=g((yit,Vp)=>{"use strict";var G5e=YJ();function HN(){return function(e,r){let n=Object.assign({},r,{schema:e});return K5e.bind(null,n)}}function K5e(t,{schema:e}){return t.schema&&e.$id&&t.schema[e.$id]&&(t.schema={...t.schema},delete t.schema[e.$id]),G5e(e,t)}Vp.exports=HN;Vp.exports.default=HN;Vp.exports.SerializerSelector=HN;Vp.exports.StandaloneSerializer=QJ()});var df=g(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.regexpCode=Ke.getEsmExportName=Ke.getProperty=Ke.safeStringify=Ke.stringify=Ke.strConcat=Ke.addCodeArg=Ke.str=Ke._=Ke.nil=Ke._Code=Ke.Name=Ke.IDENTIFIER=Ke._CodeOrName=void 0;var Hp=class{};Ke._CodeOrName=Hp;Ke.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var eu=class extends Hp{constructor(e){if(super(),!Ke.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Ke.Name=eu;var Jn=class extends Hp{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof eu&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Ke._Code=Jn;Ke.nil=new Jn("");function XJ(t,...e){let r=[t[0]],n=0;for(;n<e.length;)WN(r,e[n]),r.push(t[++n]);return new Jn(r)}Ke._=XJ;var zN=new Jn("+");function ZJ(t,...e){let r=[zp(t[0])],n=0;for(;n<e.length;)r.push(zN),WN(r,e[n]),r.push(zN,zp(t[++n]));return Y5e(r),new Jn(r)}Ke.str=ZJ;function WN(t,e){e instanceof Jn?t.push(...e._items):e instanceof eu?t.push(e):t.push(X5e(e))}Ke.addCodeArg=WN;function Y5e(t){let e=1;for(;e<t.length-1;){if(t[e]===zN){let r=J5e(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function J5e(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof eu||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof eu))return`"${t}${e.slice(1)}`}function Q5e(t,e){return e.emptyStr()?t:t.emptyStr()?e:ZJ`${t}${e}`}Ke.strConcat=Q5e;function X5e(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:zp(Array.isArray(t)?t.join(","):t)}function Z5e(t){return new Jn(zp(t))}Ke.stringify=Z5e;function zp(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Ke.safeStringify=zp;function eUe(t){return typeof t=="string"&&Ke.IDENTIFIER.test(t)?new Jn(`.${t}`):XJ`[${t}]`}Ke.getProperty=eUe;function tUe(t){if(typeof t=="string"&&Ke.IDENTIFIER.test(t))return new Jn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Ke.getEsmExportName=tUe;function rUe(t){return new Jn(t.toString())}Ke.regexpCode=rUe});var _v=g(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.ValueScope=fn.ValueScopeName=fn.Scope=fn.varKinds=fn.UsedValueState=void 0;var cn=df(),GN=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},mv;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(mv||(fn.UsedValueState=mv={}));fn.varKinds={const:new cn.Name("const"),let:new cn.Name("let"),var:new cn.Name("var")};var gv=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof cn.Name?e:this.name(e)}name(e){return new cn.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};fn.Scope=gv;var yv=class extends cn.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,cn._)`.${new cn.Name(r)}[${n}]`}};fn.ValueScopeName=yv;var nUe=(0,cn._)`\n`,KN=class extends gv{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?nUe:cn.nil}}get(){return this._scope}name(e){return new yv(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(e),{prefix:s}=i,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[s];if(a){let c=a.get(o);if(c)return c}else a=this._values[s]=new Map;a.set(o,i);let l=this._scope[s]||(this._scope[s]=[]),u=l.length;return l[u]=r.ref,i.setValue(r,{property:s,itemIndex:u}),i}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,cn._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(e,r,n={},i){let s=cn.nil;for(let o in e){let a=e[o];if(!a)continue;let l=n[o]=n[o]||new Map;a.forEach(u=>{if(l.has(u))return;l.set(u,mv.Started);let c=r(u);if(c){let f=this.opts.es5?fn.varKinds.var:fn.varKinds.const;s=(0,cn._)`${s}${f} ${u} = ${c};${this.opts._n}`}else if(c=i?.(u))s=(0,cn._)`${s}${c}${this.opts._n}`;else throw new GN(u);l.set(u,mv.Completed)})}return s}};fn.ValueScope=KN});var ee=g(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.or=be.and=be.not=be.CodeGen=be.operators=be.varKinds=be.ValueScopeName=be.ValueScope=be.Scope=be.Name=be.regexpCode=be.stringify=be.getProperty=be.nil=be.strConcat=be.str=be._=void 0;var Le=df(),Ci=_v(),ba=df();Object.defineProperty(be,"_",{enumerable:!0,get:function(){return ba._}});Object.defineProperty(be,"str",{enumerable:!0,get:function(){return ba.str}});Object.defineProperty(be,"strConcat",{enumerable:!0,get:function(){return ba.strConcat}});Object.defineProperty(be,"nil",{enumerable:!0,get:function(){return ba.nil}});Object.defineProperty(be,"getProperty",{enumerable:!0,get:function(){return ba.getProperty}});Object.defineProperty(be,"stringify",{enumerable:!0,get:function(){return ba.stringify}});Object.defineProperty(be,"regexpCode",{enumerable:!0,get:function(){return ba.regexpCode}});Object.defineProperty(be,"Name",{enumerable:!0,get:function(){return ba.Name}});var Ev=_v();Object.defineProperty(be,"Scope",{enumerable:!0,get:function(){return Ev.Scope}});Object.defineProperty(be,"ValueScope",{enumerable:!0,get:function(){return Ev.ValueScope}});Object.defineProperty(be,"ValueScopeName",{enumerable:!0,get:function(){return Ev.ValueScopeName}});Object.defineProperty(be,"varKinds",{enumerable:!0,get:function(){return Ev.varKinds}});be.operators={GT:new Le._Code(">"),GTE:new Le._Code(">="),LT:new Le._Code("<"),LTE:new Le._Code("<="),EQ:new Le._Code("==="),NEQ:new Le._Code("!=="),NOT:new Le._Code("!"),OR:new Le._Code("||"),AND:new Le._Code("&&"),ADD:new Le._Code("+")};var so=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},YN=class extends so{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Ci.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=pf(this.rhs,e,r)),this}get names(){return this.rhs instanceof Le._CodeOrName?this.rhs.names:{}}},bv=class extends so{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Le.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=pf(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Le.Name?{}:{...this.lhs.names};return wv(e,this.rhs)}},JN=class extends bv{constructor(e,r,n,i){super(e,n,i),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},QN=class extends so{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},XN=class extends so{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},ZN=class extends so{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},eC=class extends so{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=pf(this.code,e,r),this}get names(){return this.code instanceof Le._CodeOrName?this.code.names:{}}},Wp=class extends so{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,i=n.length;for(;i--;){let s=n[i];s.optimizeNames(e,r)||(iUe(e,s.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>nu(e,r.names),{})}},oo=class extends Wp{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},tC=class extends Wp{},hf=class extends oo{};hf.kind="else";var tu=class t extends oo{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new hf(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(eQ(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=pf(this.condition,e,r),this}get names(){let e=super.names;return wv(e,this.condition),this.else&&nu(e,this.else.names),e}};tu.kind="if";var ru=class extends oo{};ru.kind="for";var rC=class extends ru{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=pf(this.iteration,e,r),this}get names(){return nu(super.names,this.iteration.names)}},nC=class extends ru{constructor(e,r,n,i){super(),this.varKind=e,this.name=r,this.from=n,this.to=i}render(e){let r=e.es5?Ci.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return`for(${r} ${n}=${i}; ${n}<${s}; ${n}++)`+super.render(e)}get names(){let e=wv(super.names,this.from);return wv(e,this.to)}},vv=class extends ru{constructor(e,r,n,i){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=pf(this.iterable,e,r),this}get names(){return nu(super.names,this.iterable.names)}},Gp=class extends oo{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Gp.kind="func";var Kp=class extends Wp{render(e){return"return "+super.render(e)}};Kp.kind="return";var iC=class extends oo{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,i;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(i=this.finally)===null||i===void 0||i.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&nu(e,this.catch.names),this.finally&&nu(e,this.finally.names),e}},Yp=class extends oo{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Yp.kind="catch";var Jp=class extends oo{render(e){return"finally"+super.render(e)}};Jp.kind="finally";var sC=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Ci.Scope({parent:e}),this._nodes=[new tC]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,i){let s=this._scope.toName(r);return n!==void 0&&i&&(this._constants[s.str]=n),this._leafNode(new YN(e,s,n)),s}const(e,r,n){return this._def(Ci.varKinds.const,e,r,n)}let(e,r,n){return this._def(Ci.varKinds.let,e,r,n)}var(e,r,n){return this._def(Ci.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new bv(e,r,n))}add(e,r){return this._leafNode(new JN(e,be.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Le.nil&&this._leafNode(new eC(e)),this}object(...e){let r=["{"];for(let[n,i]of e)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,Le.addCodeArg)(r,i));return r.push("}"),new Le._Code(r)}if(e,r,n){if(this._blockNode(new tu(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new tu(e))}else(){return this._elseNode(new hf)}endIf(){return this._endBlockNode(tu,hf)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new rC(e),r)}forRange(e,r,n,i,s=this.opts.es5?Ci.varKinds.var:Ci.varKinds.let){let o=this._scope.toName(e);return this._for(new nC(s,o,r,n),()=>i(o))}forOf(e,r,n,i=Ci.varKinds.const){let s=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Le.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Le._)`${o}.length`,a=>{this.var(s,(0,Le._)`${o}[${a}]`),n(s)})}return this._for(new vv("of",i,s,r),()=>n(s))}forIn(e,r,n,i=this.opts.es5?Ci.varKinds.var:Ci.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Le._)`Object.keys(${r})`,n);let s=this._scope.toName(e);return this._for(new vv("in",i,s,r),()=>n(s))}endFor(){return this._endBlockNode(ru)}label(e){return this._leafNode(new QN(e))}break(e){return this._leafNode(new XN(e))}return(e){let r=new Kp;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Kp)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new iC;if(this._blockNode(i),this.code(e),r){let s=this.name("e");this._currNode=i.catch=new Yp(s),r(s)}return n&&(this._currNode=i.finally=new Jp,this.code(n)),this._endBlockNode(Yp,Jp)}throw(e){return this._leafNode(new ZN(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Le.nil,n,i){return this._blockNode(new Gp(e,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(Gp)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof tu))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};be.CodeGen=sC;function nu(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function wv(t,e){return e instanceof Le._CodeOrName?nu(t,e.names):t}function pf(t,e,r){if(t instanceof Le.Name)return n(t);if(!i(t))return t;return new Le._Code(t._items.reduce((s,o)=>(o instanceof Le.Name&&(o=n(o)),o instanceof Le._Code?s.push(...o._items):s.push(o),s),[]));function n(s){let o=r[s.str];return o===void 0||e[s.str]!==1?s:(delete e[s.str],o)}function i(s){return s instanceof Le._Code&&s._items.some(o=>o instanceof Le.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function iUe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function eQ(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Le._)`!${oC(t)}`}be.not=eQ;var sUe=tQ(be.operators.AND);function oUe(...t){return t.reduce(sUe)}be.and=oUe;var aUe=tQ(be.operators.OR);function lUe(...t){return t.reduce(aUe)}be.or=lUe;function tQ(t){return(e,r)=>e===Le.nil?r:r===Le.nil?e:(0,Le._)`${oC(e)} ${t} ${oC(r)}`}function oC(t){return t instanceof Le.Name?t:(0,Le._)`(${t})`}});var me=g(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.checkStrictMode=Te.getErrorPath=Te.Type=Te.useFunc=Te.setEvaluated=Te.evaluatedPropsToName=Te.mergeEvaluated=Te.eachItem=Te.unescapeJsonPointer=Te.escapeJsonPointer=Te.escapeFragment=Te.unescapeFragment=Te.schemaRefOrVal=Te.schemaHasRulesButRef=Te.schemaHasRules=Te.checkUnknownRules=Te.alwaysValidSchema=Te.toHash=void 0;var ot=ee(),uUe=df();function cUe(t){let e={};for(let r of t)e[r]=!0;return e}Te.toHash=cUe;function fUe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(iQ(t,e),!sQ(e,t.self.RULES.all))}Te.alwaysValidSchema=fUe;function iQ(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let i=n.RULES.keywords;for(let s in e)i[s]||lQ(t,`unknown keyword: "${s}"`)}Te.checkUnknownRules=iQ;function sQ(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Te.schemaHasRules=sQ;function dUe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Te.schemaHasRulesButRef=dUe;function hUe({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ot._)`${r}`}return(0,ot._)`${t}${e}${(0,ot.getProperty)(n)}`}Te.schemaRefOrVal=hUe;function pUe(t){return oQ(decodeURIComponent(t))}Te.unescapeFragment=pUe;function mUe(t){return encodeURIComponent(lC(t))}Te.escapeFragment=mUe;function lC(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Te.escapeJsonPointer=lC;function oQ(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Te.unescapeJsonPointer=oQ;function gUe(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Te.eachItem=gUe;function rQ({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,s,o,a)=>{let l=o===void 0?s:o instanceof ot.Name?(s instanceof ot.Name?t(i,s,o):e(i,s,o),o):s instanceof ot.Name?(e(i,o,s),s):r(s,o);return a===ot.Name&&!(l instanceof ot.Name)?n(i,l):l}}Te.mergeEvaluated={props:rQ({mergeNames:(t,e,r)=>t.if((0,ot._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,ot._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,ot._)`${r} || {}`).code((0,ot._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,ot._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,ot._)`${r} || {}`),uC(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:aQ}),items:rQ({mergeNames:(t,e,r)=>t.if((0,ot._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,ot._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,ot._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,ot._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function aQ(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,ot._)`{}`);return e!==void 0&&uC(t,r,e),r}Te.evaluatedPropsToName=aQ;function uC(t,e,r){Object.keys(r).forEach(n=>t.assign((0,ot._)`${e}${(0,ot.getProperty)(n)}`,!0))}Te.setEvaluated=uC;var nQ={};function yUe(t,e){return t.scopeValue("func",{ref:e,code:nQ[e.code]||(nQ[e.code]=new uUe._Code(e.code))})}Te.useFunc=yUe;var aC;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(aC||(Te.Type=aC={}));function _Ue(t,e,r){if(t instanceof ot.Name){let n=e===aC.Num;return r?n?(0,ot._)`"[" + ${t} + "]"`:(0,ot._)`"['" + ${t} + "']"`:n?(0,ot._)`"/" + ${t}`:(0,ot._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ot.getProperty)(t).toString():"/"+lC(t)}Te.getErrorPath=_Ue;function lQ(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Te.checkStrictMode=lQ});var Qn=g(cC=>{"use strict";Object.defineProperty(cC,"__esModule",{value:!0});var Ir=ee(),bUe={data:new Ir.Name("data"),valCxt:new Ir.Name("valCxt"),instancePath:new Ir.Name("instancePath"),parentData:new Ir.Name("parentData"),parentDataProperty:new Ir.Name("parentDataProperty"),rootData:new Ir.Name("rootData"),dynamicAnchors:new Ir.Name("dynamicAnchors"),vErrors:new Ir.Name("vErrors"),errors:new Ir.Name("errors"),this:new Ir.Name("this"),self:new Ir.Name("self"),scope:new Ir.Name("scope"),json:new Ir.Name("json"),jsonPos:new Ir.Name("jsonPos"),jsonLen:new Ir.Name("jsonLen"),jsonPart:new Ir.Name("jsonPart")};cC.default=bUe});var Qp=g(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.extendErrors=Ar.resetErrorsCount=Ar.reportExtraError=Ar.reportError=Ar.keyword$DataError=Ar.keywordError=void 0;var Ue=ee(),Sv=me(),zr=Qn();Ar.keywordError={message:({keyword:t})=>(0,Ue.str)`must pass "${t}" keyword validation`};Ar.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ue.str)`"${t}" keyword must be ${e} ($data)`:(0,Ue.str)`"${t}" keyword is invalid ($data)`};function vUe(t,e=Ar.keywordError,r,n){let{it:i}=t,{gen:s,compositeRule:o,allErrors:a}=i,l=fQ(t,e,r);n??(o||a)?uQ(s,l):cQ(i,(0,Ue._)`[${l}]`)}Ar.reportError=vUe;function wUe(t,e=Ar.keywordError,r){let{it:n}=t,{gen:i,compositeRule:s,allErrors:o}=n,a=fQ(t,e,r);uQ(i,a),s||o||cQ(n,zr.default.vErrors)}Ar.reportExtraError=wUe;function EUe(t,e){t.assign(zr.default.errors,e),t.if((0,Ue._)`${zr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ue._)`${zr.default.vErrors}.length`,e),()=>t.assign(zr.default.vErrors,null)))}Ar.resetErrorsCount=EUe;function SUe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:i,it:s}){if(i===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",i,zr.default.errors,a=>{t.const(o,(0,Ue._)`${zr.default.vErrors}[${a}]`),t.if((0,Ue._)`${o}.instancePath === undefined`,()=>t.assign((0,Ue._)`${o}.instancePath`,(0,Ue.strConcat)(zr.default.instancePath,s.errorPath))),t.assign((0,Ue._)`${o}.schemaPath`,(0,Ue.str)`${s.errSchemaPath}/${e}`),s.opts.verbose&&(t.assign((0,Ue._)`${o}.schema`,r),t.assign((0,Ue._)`${o}.data`,n))})}Ar.extendErrors=SUe;function uQ(t,e){let r=t.const("err",e);t.if((0,Ue._)`${zr.default.vErrors} === null`,()=>t.assign(zr.default.vErrors,(0,Ue._)`[${r}]`),(0,Ue._)`${zr.default.vErrors}.push(${r})`),t.code((0,Ue._)`${zr.default.errors}++`)}function cQ(t,e){let{gen:r,validateName:n,schemaEnv:i}=t;i.$async?r.throw((0,Ue._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ue._)`${n}.errors`,e),r.return(!1))}var iu={keyword:new Ue.Name("keyword"),schemaPath:new Ue.Name("schemaPath"),params:new Ue.Name("params"),propertyName:new Ue.Name("propertyName"),message:new Ue.Name("message"),schema:new Ue.Name("schema"),parentSchema:new Ue.Name("parentSchema")};function fQ(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ue._)`{}`:RUe(t,e,r)}function RUe(t,e,r={}){let{gen:n,it:i}=t,s=[TUe(i,r),PUe(t,r)];return $Ue(t,e,s),n.object(...s)}function TUe({errorPath:t},{instancePath:e}){let r=e?(0,Ue.str)`${t}${(0,Sv.getErrorPath)(e,Sv.Type.Str)}`:t;return[zr.default.instancePath,(0,Ue.strConcat)(zr.default.instancePath,r)]}function PUe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let i=n?e:(0,Ue.str)`${e}/${t}`;return r&&(i=(0,Ue.str)`${i}${(0,Sv.getErrorPath)(r,Sv.Type.Str)}`),[iu.schemaPath,i]}function $Ue(t,{params:e,message:r},n){let{keyword:i,data:s,schemaValue:o,it:a}=t,{opts:l,propertyName:u,topSchemaRef:c,schemaPath:f}=a;n.push([iu.keyword,i],[iu.params,typeof e=="function"?e(t):e||(0,Ue._)`{}`]),l.messages&&n.push([iu.message,typeof r=="function"?r(t):r]),l.verbose&&n.push([iu.schema,o],[iu.parentSchema,(0,Ue._)`${c}${f}`],[zr.default.data,s]),u&&n.push([iu.propertyName,u])}});var hQ=g(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.boolOrEmptySchema=mf.topBoolOrEmptySchema=void 0;var OUe=Qp(),IUe=ee(),AUe=Qn(),NUe={message:"boolean schema is false"};function CUe(t){let{gen:e,schema:r,validateName:n}=t;r===!1?dQ(t,!1):typeof r=="object"&&r.$async===!0?e.return(AUe.default.data):(e.assign((0,IUe._)`${n}.errors`,null),e.return(!0))}mf.topBoolOrEmptySchema=CUe;function kUe(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),dQ(t)):r.var(e,!0)}mf.boolOrEmptySchema=kUe;function dQ(t,e){let{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,OUe.reportError)(i,NUe,void 0,e)}});var fC=g(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.getRules=gf.isJSONType=void 0;var qUe=["string","number","integer","boolean","null","object","array"],xUe=new Set(qUe);function jUe(t){return typeof t=="string"&&xUe.has(t)}gf.isJSONType=jUe;function MUe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}gf.getRules=MUe});var dC=g(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.shouldUseRule=va.shouldUseGroup=va.schemaHasRulesForType=void 0;function LUe({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&pQ(t,n)}va.schemaHasRulesForType=LUe;function pQ(t,e){return e.rules.some(r=>mQ(t,r))}va.shouldUseGroup=pQ;function mQ(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}va.shouldUseRule=mQ});var Xp=g(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.reportTypeError=Nr.checkDataTypes=Nr.checkDataType=Nr.coerceAndCheckDataType=Nr.getJSONTypes=Nr.getSchemaTypes=Nr.DataType=void 0;var DUe=fC(),FUe=dC(),UUe=Qp(),de=ee(),gQ=me(),yf;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(yf||(Nr.DataType=yf={}));function BUe(t){let e=yQ(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Nr.getSchemaTypes=BUe;function yQ(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(DUe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Nr.getJSONTypes=yQ;function VUe(t,e){let{gen:r,data:n,opts:i}=t,s=HUe(e,i.coerceTypes),o=e.length>0&&!(s.length===0&&e.length===1&&(0,FUe.schemaHasRulesForType)(t,e[0]));if(o){let a=pC(e,n,i.strictNumbers,yf.Wrong);r.if(a,()=>{s.length?zUe(t,e,s):mC(t)})}return o}Nr.coerceAndCheckDataType=VUe;var _Q=new Set(["string","number","integer","boolean","null"]);function HUe(t,e){return e?t.filter(r=>_Q.has(r)||e==="array"&&r==="array"):[]}function zUe(t,e,r){let{gen:n,data:i,opts:s}=t,o=n.let("dataType",(0,de._)`typeof ${i}`),a=n.let("coerced",(0,de._)`undefined`);s.coerceTypes==="array"&&n.if((0,de._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,de._)`${i}[0]`).assign(o,(0,de._)`typeof ${i}`).if(pC(e,i,s.strictNumbers),()=>n.assign(a,i))),n.if((0,de._)`${a} !== undefined`);for(let u of r)(_Q.has(u)||u==="array"&&s.coerceTypes==="array")&&l(u);n.else(),mC(t),n.endIf(),n.if((0,de._)`${a} !== undefined`,()=>{n.assign(i,a),WUe(t,a)});function l(u){switch(u){case"string":n.elseIf((0,de._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,de._)`"" + ${i}`).elseIf((0,de._)`${i} === null`).assign(a,(0,de._)`""`);return;case"number":n.elseIf((0,de._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,de._)`+${i}`);return;case"integer":n.elseIf((0,de._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,de._)`+${i}`);return;case"boolean":n.elseIf((0,de._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,de._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,de._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,de._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,de._)`[${i}]`)}}}function WUe({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,de._)`${e} !== undefined`,()=>t.assign((0,de._)`${e}[${r}]`,n))}function hC(t,e,r,n=yf.Correct){let i=n===yf.Correct?de.operators.EQ:de.operators.NEQ,s;switch(t){case"null":return(0,de._)`${e} ${i} null`;case"array":s=(0,de._)`Array.isArray(${e})`;break;case"object":s=(0,de._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=o((0,de._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=o();break;default:return(0,de._)`typeof ${e} ${i} ${t}`}return n===yf.Correct?s:(0,de.not)(s);function o(a=de.nil){return(0,de.and)((0,de._)`typeof ${e} == "number"`,a,r?(0,de._)`isFinite(${e})`:de.nil)}}Nr.checkDataType=hC;function pC(t,e,r,n){if(t.length===1)return hC(t[0],e,r,n);let i,s=(0,gQ.toHash)(t);if(s.array&&s.object){let o=(0,de._)`typeof ${e} != "object"`;i=s.null?o:(0,de._)`!${e} || ${o}`,delete s.null,delete s.array,delete s.object}else i=de.nil;s.number&&delete s.integer;for(let o in s)i=(0,de.and)(i,hC(o,e,r,n));return i}Nr.checkDataTypes=pC;var GUe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,de._)`{type: ${t}}`:(0,de._)`{type: ${e}}`};function mC(t){let e=KUe(t);(0,UUe.reportError)(e,GUe)}Nr.reportTypeError=mC;function KUe(t){let{gen:e,data:r,schema:n}=t,i=(0,gQ.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}});var vQ=g(Rv=>{"use strict";Object.defineProperty(Rv,"__esModule",{value:!0});Rv.assignDefaults=void 0;var _f=ee(),YUe=me();function JUe(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let i in r)bQ(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,s)=>bQ(t,s,i.default))}Rv.assignDefaults=JUe;function bQ(t,e,r){let{gen:n,compositeRule:i,data:s,opts:o}=t;if(r===void 0)return;let a=(0,_f._)`${s}${(0,_f.getProperty)(e)}`;if(i){(0,YUe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let l=(0,_f._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,_f._)`${l} || ${a} === null || ${a} === ""`),n.if(l,(0,_f._)`${a} = ${(0,_f.stringify)(r)}`)}});var pr=g(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.validateUnion=tt.validateArray=tt.usePattern=tt.callValidateCode=tt.schemaProperties=tt.allSchemaProperties=tt.noPropertyInData=tt.propertyInData=tt.isOwnProperty=tt.hasPropFunc=tt.reportMissingProp=tt.checkMissingProp=tt.checkReportMissingProp=void 0;var yt=ee(),gC=me(),wa=Qn(),QUe=me();function XUe(t,e){let{gen:r,data:n,it:i}=t;r.if(_C(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,yt._)`${e}`},!0),t.error()})}tt.checkReportMissingProp=XUe;function ZUe({gen:t,data:e,it:{opts:r}},n,i){return(0,yt.or)(...n.map(s=>(0,yt.and)(_C(t,e,s,r.ownProperties),(0,yt._)`${i} = ${s}`)))}tt.checkMissingProp=ZUe;function eBe(t,e){t.setParams({missingProperty:e},!0),t.error()}tt.reportMissingProp=eBe;function wQ(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,yt._)`Object.prototype.hasOwnProperty`})}tt.hasPropFunc=wQ;function yC(t,e,r){return(0,yt._)`${wQ(t)}.call(${e}, ${r})`}tt.isOwnProperty=yC;function tBe(t,e,r,n){let i=(0,yt._)`${e}${(0,yt.getProperty)(r)} !== undefined`;return n?(0,yt._)`${i} && ${yC(t,e,r)}`:i}tt.propertyInData=tBe;function _C(t,e,r,n){let i=(0,yt._)`${e}${(0,yt.getProperty)(r)} === undefined`;return n?(0,yt.or)(i,(0,yt.not)(yC(t,e,r))):i}tt.noPropertyInData=_C;function EQ(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}tt.allSchemaProperties=EQ;function rBe(t,e){return EQ(e).filter(r=>!(0,gC.alwaysValidSchema)(t,e[r]))}tt.schemaProperties=rBe;function nBe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:o},a,l,u){let c=u?(0,yt._)`${t}, ${e}, ${n}${i}`:e,f=[[wa.default.instancePath,(0,yt.strConcat)(wa.default.instancePath,s)],[wa.default.parentData,o.parentData],[wa.default.parentDataProperty,o.parentDataProperty],[wa.default.rootData,wa.default.rootData]];o.opts.dynamicRef&&f.push([wa.default.dynamicAnchors,wa.default.dynamicAnchors]);let h=(0,yt._)`${c}, ${r.object(...f)}`;return l!==yt.nil?(0,yt._)`${a}.call(${l}, ${h})`:(0,yt._)`${a}(${h})`}tt.callValidateCode=nBe;var iBe=(0,yt._)`new RegExp`;function sBe({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,s=i(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,yt._)`${i.code==="new RegExp"?iBe:(0,QUe.useFunc)(t,i)}(${r}, ${n})`})}tt.usePattern=sBe;function oBe(t){let{gen:e,data:r,keyword:n,it:i}=t,s=e.name("valid");if(i.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(s,!0),o(()=>e.break()),s;function o(a){let l=e.const("len",(0,yt._)`${r}.length`);e.forRange("i",0,l,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:gC.Type.Num},s),e.if((0,yt.not)(s),a)})}}tt.validateArray=oBe;function aBe(t){let{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,gC.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((l,u)=>{let c=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);e.assign(o,(0,yt._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,yt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}tt.validateUnion=aBe});var TQ=g(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.validateKeywordUsage=Ss.validSchemaType=Ss.funcKeywordCode=Ss.macroKeywordCode=void 0;var Wr=ee(),su=Qn(),lBe=pr(),uBe=Qp();function cBe(t,e){let{gen:r,keyword:n,schema:i,parentSchema:s,it:o}=t,a=e.macro.call(o.self,i,s,o),l=RQ(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let u=r.name("valid");t.subschema({schema:a,schemaPath:Wr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}Ss.macroKeywordCode=cBe;function fBe(t,e){var r;let{gen:n,keyword:i,schema:s,parentSchema:o,$data:a,it:l}=t;hBe(l,e);let u=!a&&e.compile?e.compile.call(l.self,s,o,l):e.validate,c=RQ(n,i,u),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&SQ(t),y(()=>t.error());else{let _=e.async?d():p();e.modifying&&SQ(t),y(()=>dBe(t,_))}}function d(){let _=n.let("ruleErrs",null);return n.try(()=>m((0,Wr._)`await `),w=>n.assign(f,!1).if((0,Wr._)`${w} instanceof ${l.ValidationError}`,()=>n.assign(_,(0,Wr._)`${w}.errors`),()=>n.throw(w))),_}function p(){let _=(0,Wr._)`${c}.errors`;return n.assign(_,null),m(Wr.nil),_}function m(_=e.async?(0,Wr._)`await `:Wr.nil){let w=l.opts.passContext?su.default.this:su.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,Wr._)`${_}${(0,lBe.callValidateCode)(t,c,w,v)}`,e.modifying)}function y(_){var w;n.if((0,Wr.not)((w=e.valid)!==null&&w!==void 0?w:f),_)}}Ss.funcKeywordCode=fBe;function SQ(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Wr._)`${n.parentData}[${n.parentDataProperty}]`))}function dBe(t,e){let{gen:r}=t;r.if((0,Wr._)`Array.isArray(${e})`,()=>{r.assign(su.default.vErrors,(0,Wr._)`${su.default.vErrors} === null ? ${e} : ${su.default.vErrors}.concat(${e})`).assign(su.default.errors,(0,Wr._)`${su.default.vErrors}.length`),(0,uBe.extendErrors)(t)},()=>t.error())}function hBe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function RQ(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Wr.stringify)(r)})}function pBe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Ss.validSchemaType=pBe;function mBe({schema:t,opts:e,self:r,errSchemaPath:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");let o=i.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[s])){let l=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}Ss.validateKeywordUsage=mBe});var $Q=g(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.extendSubschemaMode=Ea.extendSubschemaData=Ea.getSubschema=void 0;var Rs=ee(),PQ=me();function gBe(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Rs._)`${t.schemaPath}${(0,Rs.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Rs._)`${t.schemaPath}${(0,Rs.getProperty)(e)}${(0,Rs.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,PQ.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Ea.getSubschema=gBe;function yBe(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:u,dataPathArr:c,opts:f}=e,h=a.let("data",(0,Rs._)`${e.data}${(0,Rs.getProperty)(r)}`,!0);l(h),t.errorPath=(0,Rs.str)`${u}${(0,PQ.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Rs._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(i!==void 0){let u=i instanceof Rs.Name?i:a.let("data",i,!0);l(u),o!==void 0&&(t.propertyName=o)}s&&(t.dataTypes=s);function l(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}Ea.extendSubschemaData=yBe;function _Be(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=r}Ea.extendSubschemaMode=_Be});var IQ=g((Cit,OQ)=>{"use strict";var Sa=OQ.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};Tv(e,n,i,t,"",t)};Sa.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Sa.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Sa.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Sa.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Tv(t,e,r,n,i,s,o,a,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,s,o,a,l,u);for(var c in n){var f=n[c];if(Array.isArray(f)){if(c in Sa.arrayKeywords)for(var h=0;h<f.length;h++)Tv(t,e,r,f[h],i+"/"+c+"/"+h,s,i,c,n,h)}else if(c in Sa.propsKeywords){if(f&&typeof f=="object")for(var d in f)Tv(t,e,r,f[d],i+"/"+c+"/"+bBe(d),s,i,c,n,d)}else(c in Sa.keywords||t.allKeys&&!(c in Sa.skipKeywords))&&Tv(t,e,r,f,i+"/"+c,s,i,c,n)}r(n,i,s,o,a,l,u)}}function bBe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Zp=g(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.getSchemaRefs=dn.resolveUrl=dn.normalizeId=dn._getFullPath=dn.getFullPath=dn.inlineRef=void 0;var vBe=me(),wBe=Xs(),EBe=IQ(),SBe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function RBe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!bC(t):e?AQ(t)<=e:!1}dn.inlineRef=RBe;var TBe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function bC(t){for(let e in t){if(TBe.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(bC)||typeof r=="object"&&bC(r))return!0}return!1}function AQ(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!SBe.has(r)&&(typeof t[r]=="object"&&(0,vBe.eachItem)(t[r],n=>e+=AQ(n)),e===1/0))return 1/0}return e}function NQ(t,e="",r){r!==!1&&(e=bf(e));let n=t.parse(e);return CQ(t,n)}dn.getFullPath=NQ;function CQ(t,e){return t.serialize(e).split("#")[0]+"#"}dn._getFullPath=CQ;var PBe=/#\/?$/;function bf(t){return t?t.replace(PBe,""):""}dn.normalizeId=bf;function $Be(t,e,r){return r=bf(r),t.resolve(e,r)}dn.resolveUrl=$Be;var OBe=/^[a-z_][-a-z0-9._]*$/i;function IBe(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=bf(t[r]||e),s={"":i},o=NQ(n,i,!1),a={},l=new Set;return EBe(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,y=s[p];typeof f[r]=="string"&&(y=_.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),s[h]=y;function _(v){let b=this.opts.uriResolver.resolve;if(v=bf(y?b(y,v):v),l.has(v))throw c(v);l.add(v);let E=this.refs[v];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?u(f,E.schema,v):v!==bf(m)&&(v[0]==="#"?(u(f,a[v],v),a[v]=f):this.refs[v]=m),v}function w(v){if(typeof v=="string"){if(!OBe.test(v))throw new Error(`invalid anchor "${v}"`);_.call(this,`#${v}`)}}}),a;function u(f,h,d){if(h!==void 0&&!wBe(f,h))throw c(d)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}dn.getSchemaRefs=IBe});var vf=g(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.getData=Ra.KeywordCxt=Ra.validateFunctionCode=void 0;var MQ=hQ(),kQ=Xp(),wC=dC(),Pv=Xp(),ABe=vQ(),tm=TQ(),vC=$Q(),Q=ee(),se=Qn(),NBe=Zp(),ao=me(),em=Qp();function CBe(t){if(FQ(t)&&(UQ(t),DQ(t))){xBe(t);return}LQ(t,()=>(0,MQ.topBoolOrEmptySchema)(t))}Ra.validateFunctionCode=CBe;function LQ({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},s){i.code.es5?t.func(e,(0,Q._)`${se.default.data}, ${se.default.valCxt}`,n.$async,()=>{t.code((0,Q._)`"use strict"; ${qQ(r,i)}`),qBe(t,i),t.code(s)}):t.func(e,(0,Q._)`${se.default.data}, ${kBe(i)}`,n.$async,()=>t.code(qQ(r,i)).code(s))}function kBe(t){return(0,Q._)`{${se.default.instancePath}="", ${se.default.parentData}, ${se.default.parentDataProperty}, ${se.default.rootData}=${se.default.data}${t.dynamicRef?(0,Q._)`, ${se.default.dynamicAnchors}={}`:Q.nil}}={}`}function qBe(t,e){t.if(se.default.valCxt,()=>{t.var(se.default.instancePath,(0,Q._)`${se.default.valCxt}.${se.default.instancePath}`),t.var(se.default.parentData,(0,Q._)`${se.default.valCxt}.${se.default.parentData}`),t.var(se.default.parentDataProperty,(0,Q._)`${se.default.valCxt}.${se.default.parentDataProperty}`),t.var(se.default.rootData,(0,Q._)`${se.default.valCxt}.${se.default.rootData}`),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,Q._)`${se.default.valCxt}.${se.default.dynamicAnchors}`)},()=>{t.var(se.default.instancePath,(0,Q._)`""`),t.var(se.default.parentData,(0,Q._)`undefined`),t.var(se.default.parentDataProperty,(0,Q._)`undefined`),t.var(se.default.rootData,se.default.data),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,Q._)`{}`)})}function xBe(t){let{schema:e,opts:r,gen:n}=t;LQ(t,()=>{r.$comment&&e.$comment&&VQ(t),FBe(t),n.let(se.default.vErrors,null),n.let(se.default.errors,0),r.unevaluated&&jBe(t),BQ(t),VBe(t)})}function jBe(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Q._)`${r}.evaluated`),e.if((0,Q._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Q._)`${t.evaluated}.props`,(0,Q._)`undefined`)),e.if((0,Q._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Q._)`${t.evaluated}.items`,(0,Q._)`undefined`))}function qQ(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Q._)`/*# sourceURL=${r} */`:Q.nil}function MBe(t,e){if(FQ(t)&&(UQ(t),DQ(t))){LBe(t,e);return}(0,MQ.boolOrEmptySchema)(t,e)}function DQ({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function FQ(t){return typeof t.schema!="boolean"}function LBe(t,e){let{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&VQ(t),UBe(t),BBe(t);let s=n.const("_errs",se.default.errors);BQ(t,s),n.var(e,(0,Q._)`${s} === ${se.default.errors}`)}function UQ(t){(0,ao.checkUnknownRules)(t),DBe(t)}function BQ(t,e){if(t.opts.jtd)return xQ(t,[],!1,e);let r=(0,kQ.getSchemaTypes)(t.schema),n=(0,kQ.coerceAndCheckDataType)(t,r);xQ(t,r,!n,e)}function DBe(t){let{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ao.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function FBe(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ao.checkStrictMode)(t,"default is ignored in the schema root")}function UBe(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,NBe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function BBe(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function VQ({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){let s=r.$comment;if(i.$comment===!0)t.code((0,Q._)`${se.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){let o=(0,Q.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Q._)`${se.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function VBe(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=t;r.$async?e.if((0,Q._)`${se.default.errors} === 0`,()=>e.return(se.default.data),()=>e.throw((0,Q._)`new ${i}(${se.default.vErrors})`)):(e.assign((0,Q._)`${n}.errors`,se.default.vErrors),s.unevaluated&&HBe(t),e.return((0,Q._)`${se.default.errors} === 0`))}function HBe({gen:t,evaluated:e,props:r,items:n}){r instanceof Q.Name&&t.assign((0,Q._)`${e}.props`,r),n instanceof Q.Name&&t.assign((0,Q._)`${e}.items`,n)}function xQ(t,e,r,n){let{gen:i,schema:s,data:o,allErrors:a,opts:l,self:u}=t,{RULES:c}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,ao.schemaHasRulesButRef)(s,c))){i.block(()=>zQ(t,"$ref",c.all.$ref.definition));return}l.jtd||zBe(t,e),i.block(()=>{for(let h of c.rules)f(h);f(c.post)});function f(h){(0,wC.shouldUseGroup)(s,h)&&(h.type?(i.if((0,Pv.checkDataType)(h.type,o,l.strictNumbers)),jQ(t,h),e.length===1&&e[0]===h.type&&r&&(i.else(),(0,Pv.reportTypeError)(t)),i.endIf()):jQ(t,h),a||i.if((0,Q._)`${se.default.errors} === ${n||0}`))}}function jQ(t,e){let{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,ABe.assignDefaults)(t,e.type),r.block(()=>{for(let s of e.rules)(0,wC.shouldUseRule)(n,s)&&zQ(t,s.keyword,s.definition,e.type)})}function zBe(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(WBe(t,e),t.opts.allowUnionTypes||GBe(t,e),KBe(t,t.dataTypes))}function WBe(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{HQ(t.dataTypes,r)||EC(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),JBe(t,e)}}function GBe(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&EC(t,"use allowUnionTypes to allow union type keyword")}function KBe(t,e){let r=t.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,wC.shouldUseRule)(t.schema,i)){let{type:s}=i.definition;s.length&&!s.some(o=>YBe(e,o))&&EC(t,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function YBe(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function HQ(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function JBe(t,e){let r=[];for(let n of t.dataTypes)HQ(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function EC(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ao.checkStrictMode)(t,e,t.opts.strictTypes)}var $v=class{constructor(e,r,n){if((0,tm.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ao.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",WQ(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,tm.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",se.default.errors))}result(e,r,n){this.failResult((0,Q.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Q.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Q._)`${r} !== undefined && (${(0,Q.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?em.reportExtraError:em.reportError)(this,this.def.error,r)}$dataError(){(0,em.reportError)(this,this.def.$dataError||em.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,em.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Q.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Q.nil,r=Q.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:s,def:o}=this;n.if((0,Q.or)((0,Q._)`${i} === undefined`,r)),e!==Q.nil&&n.assign(e,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Q.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:i,it:s}=this;return(0,Q.or)(o(),a());function o(){if(n.length){if(!(r instanceof Q.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,Q._)`${(0,Pv.checkDataTypes)(l,r,s.opts.strictNumbers,Pv.DataType.Wrong)}`}return Q.nil}function a(){if(i.validateSchema){let l=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,Q._)`!${l}(${r})`}return Q.nil}}subschema(e,r){let n=(0,vC.getSubschema)(this.it,e);(0,vC.extendSubschemaData)(n,this.it,e),(0,vC.extendSubschemaMode)(n,e);let i={...this.it,...n,items:void 0,props:void 0};return MBe(i,r),i}mergeEvaluated(e,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ao.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ao.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,Q.Name)),!0}};Ra.KeywordCxt=$v;function zQ(t,e,r,n){let i=new $v(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,tm.funcKeywordCode)(i,r):"macro"in r?(0,tm.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,tm.funcKeywordCode)(i,r)}var QBe=/^\/(?:[^~]|~0|~1)*$/,XBe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function WQ(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,s;if(t==="")return se.default.rootData;if(t[0]==="/"){if(!QBe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,s=se.default.rootData}else{let u=XBe.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);let c=+u[1];if(i=u[2],i==="#"){if(c>=e)throw new Error(l("property/index",c));return n[e-c]}if(c>e)throw new Error(l("data",c));if(s=r[e-c],!i)return s}let o=s,a=i.split("/");for(let u of a)u&&(s=(0,Q._)`${s}${(0,Q.getProperty)((0,ao.unescapeJsonPointer)(u))}`,o=(0,Q._)`${o} && ${s}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${e}`}}Ra.getData=WQ});var rm=g(RC=>{"use strict";Object.defineProperty(RC,"__esModule",{value:!0});var SC=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};RC.default=SC});var lo=g($C=>{"use strict";Object.defineProperty($C,"__esModule",{value:!0});var TC=Zp(),PC=class extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,TC.resolveUrl)(e,r,n),this.missingSchema=(0,TC.normalizeId)((0,TC.getFullPath)(e,this.missingRef))}};$C.default=PC});var au=g(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.resolveSchema=Xn.getCompilingSchema=Xn.resolveRef=Xn.compileSchema=Xn.SchemaEnv=void 0;var ki=ee(),ZBe=rm(),ou=Qn(),qi=Zp(),GQ=me(),eVe=vf(),wf=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,qi.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Xn.SchemaEnv=wf;function IC(t){let e=KQ.call(this,t);if(e)return e;let r=(0,qi.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new ki.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a;t.$async&&(a=o.scopeValue("Error",{ref:ZBe.default,code:(0,ki._)`require("ajv/dist/runtime/validation_error").default`}));let l=o.scopeName("validate");t.validateName=l;let u={gen:o,allErrors:this.opts.allErrors,data:ou.default.data,parentData:ou.default.parentData,parentDataProperty:ou.default.parentDataProperty,dataNames:[ou.default.data],dataPathArr:[ki.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ki.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ki.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ki._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(t),(0,eVe.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);let f=o.toString();c=`${o.scopeRefs(ou.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));let d=new Function(`${ou.default.self}`,`${ou.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=u;d.evaluated={props:p instanceof ki.Name?void 0:p,items:m instanceof ki.Name?void 0:m,dynamicProps:p instanceof ki.Name,dynamicItems:m instanceof ki.Name},d.source&&(d.source.evaluated=(0,ki.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}Xn.compileSchema=IC;function tVe(t,e,r){var n;r=(0,qi.resolveUrl)(this.opts.uriResolver,e,r);let i=t.refs[r];if(i)return i;let s=iVe.call(this,t,r);if(s===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(s=new wf({schema:o,schemaId:a,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=rVe.call(this,s)}Xn.resolveRef=tVe;function rVe(t){return(0,qi.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:IC.call(this,t)}function KQ(t){for(let e of this._compilations)if(nVe(e,t))return e}Xn.getCompilingSchema=KQ;function nVe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function iVe(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Ov.call(this,t,e)}function Ov(t,e){let r=this.opts.uriResolver.parse(e),n=(0,qi._getFullPath)(this.opts.uriResolver,r),i=(0,qi.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return OC.call(this,r,t);let s=(0,qi.normalizeId)(n),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){let a=Ov.call(this,t,o);return typeof a?.schema!="object"?void 0:OC.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||IC.call(this,o),s===(0,qi.normalizeId)(e)){let{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(i=(0,qi.resolveUrl)(this.opts.uriResolver,i,u)),new wf({schema:a,schemaId:l,root:t,baseId:i})}return OC.call(this,r,o)}}Xn.resolveSchema=Ov;var sVe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function OC(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,GQ.unescapeFragment)(a)];if(l===void 0)return;r=l;let u=typeof r=="object"&&r[this.opts.schemaId];!sVe.has(a)&&u&&(e=(0,qi.resolveUrl)(this.opts.uriResolver,e,u))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,GQ.schemaHasRulesButRef)(r,this.RULES)){let a=(0,qi.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=Ov.call(this,n,a)}let{schemaId:o}=this.opts;if(s=s||new wf({schema:r,schemaId:o,root:n,baseId:e}),s.schema!==s.root.schema)return s}});var YQ=g((Lit,oVe)=>{oVe.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var QQ=g(AC=>{"use strict";Object.defineProperty(AC,"__esModule",{value:!0});var JQ=Uc();JQ.code='require("ajv/dist/runtime/uri").default';AC.default=JQ});var kC=g(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.CodeGen=mr.Name=mr.nil=mr.stringify=mr.str=mr._=mr.KeywordCxt=void 0;var aVe=vf();Object.defineProperty(mr,"KeywordCxt",{enumerable:!0,get:function(){return aVe.KeywordCxt}});var Ef=ee();Object.defineProperty(mr,"_",{enumerable:!0,get:function(){return Ef._}});Object.defineProperty(mr,"str",{enumerable:!0,get:function(){return Ef.str}});Object.defineProperty(mr,"stringify",{enumerable:!0,get:function(){return Ef.stringify}});Object.defineProperty(mr,"nil",{enumerable:!0,get:function(){return Ef.nil}});Object.defineProperty(mr,"Name",{enumerable:!0,get:function(){return Ef.Name}});Object.defineProperty(mr,"CodeGen",{enumerable:!0,get:function(){return Ef.CodeGen}});var lVe=rm(),rX=lo(),uVe=fC(),nm=au(),cVe=ee(),im=Zp(),Iv=Xp(),CC=me(),XQ=YQ(),fVe=QQ(),nX=(t,e)=>new RegExp(t,e);nX.code="new RegExp";var dVe=["removeAdditional","useDefaults","coerceTypes"],hVe=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),pVe={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},mVe={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},ZQ=200;function gVe(t){var e,r,n,i,s,o,a,l,u,c,f,h,d,p,m,y,_,w,v,b,E,R,S,P,T;let O=t.strict,j=(e=t.code)===null||e===void 0?void 0:e.optimize,N=j===!0||j===void 0?1:j||0,C=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:nX,z=(i=t.uriResolver)!==null&&i!==void 0?i:fVe.default;return{strictSchema:(o=(s=t.strictSchema)!==null&&s!==void 0?s:O)!==null&&o!==void 0?o:!0,strictNumbers:(l=(a=t.strictNumbers)!==null&&a!==void 0?a:O)!==null&&l!==void 0?l:!0,strictTypes:(c=(u=t.strictTypes)!==null&&u!==void 0?u:O)!==null&&c!==void 0?c:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:O)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:O)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:N,regExp:C}:{optimize:N,regExp:C},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:ZQ,loopEnum:(y=t.loopEnum)!==null&&y!==void 0?y:ZQ,meta:(_=t.meta)!==null&&_!==void 0?_:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(b=t.schemaId)!==null&&b!==void 0?b:"$id",addUsedSchema:(E=t.addUsedSchema)!==null&&E!==void 0?E:!0,validateSchema:(R=t.validateSchema)!==null&&R!==void 0?R:!0,validateFormats:(S=t.validateFormats)!==null&&S!==void 0?S:!0,unicodeRegExp:(P=t.unicodeRegExp)!==null&&P!==void 0?P:!0,int32range:(T=t.int32range)!==null&&T!==void 0?T:!0,uriResolver:z}}var sm=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...gVe(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new cVe.ValueScope({scope:{},prefixes:hVe,es5:r,lines:n}),this.logger=EVe(e.logger);let i=e.validateFormats;e.validateFormats=!1,this.RULES=(0,uVe.getRules)(),eX.call(this,pVe,e,"NOT SUPPORTED"),eX.call(this,mVe,e,"DEPRECATED","warn"),this._metaOpts=vVe.call(this),e.formats&&_Ve.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&bVe.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),yVe.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,i=XQ;n==="id"&&(i={...XQ},i.id=i.$id,delete i.$id),r&&e&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,e,r);async function i(c,f){await s.call(this,c.$schema);let h=this._addSchema(c,f);return h.validate||o.call(this,h)}async function s(c){c&&!this.getSchema(c)&&await i.call(this,{$ref:c},!0)}async function o(c){try{return this._compileSchemaEnv(c)}catch(f){if(!(f instanceof rX.default))throw f;return a.call(this,f),await l.call(this,f.missingSchema),o.call(this,c)}}function a({missingSchema:c,missingRef:f}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${f} cannot be resolved`)}async function l(c){let f=await u.call(this,c);this.refs[c]||await s.call(this,f.$schema),this.refs[c]||this.addSchema(f,c,r)}async function u(c){let f=this._loading[c];if(f)return f;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(e,r,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,i);return this}let s;if(typeof e=="object"){let{schemaId:o}=this.opts;if(s=e[o],s!==void 0&&typeof s!="string")throw new Error(`schema ${o} must be string`)}return r=(0,im.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,i,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,e);if(!i&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return i}getSchema(e){let r;for(;typeof(r=tX.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,i=new nm.SchemaEnv({schema:{},schemaId:n});if(r=nm.resolveSchema.call(this,i,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=tX.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,im.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(RVe.call(this,n,r),!r)return(0,CC.eachItem)(n,s=>NC.call(this,s)),this;PVe.call(this,r);let i={...r,type:(0,Iv.getJSONTypes)(r.type),schemaType:(0,Iv.getJSONTypes)(r.schemaType)};return(0,CC.eachItem)(n,i.type.length===0?s=>NC.call(this,s,i):s=>i.type.forEach(o=>NC.call(this,s,i,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let i=n.rules.findIndex(s=>s.keyword===e);i>=0&&n.rules.splice(i,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,s)=>i+r+s)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let i of r){let s=i.split("/").slice(1),o=e;for(let a of s)o=o[a];for(let a in n){let l=n[a];if(typeof l!="object")continue;let{$data:u}=l.definition,c=o[a];u&&c&&(o[a]=iX(c))}}return e}_removeAllSchemas(e,r){for(let n in e){let i=e[n];(!r||r.test(n))&&(typeof i=="string"?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,r,n,i=this.opts.validateSchema,s=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;n=(0,im.normalizeId)(o||n);let u=im.getSchemaRefs.call(this,e,n);return l=new nm.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:u}),this._cache.set(l.schema,l),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),i&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):nm.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{nm.compileSchema.call(this,e)}finally{this.opts=r}}};sm.ValidationError=lVe.default;sm.MissingRefError=rX.default;mr.default=sm;function eX(t,e,r,n="error"){for(let i in t){let s=i;s in e&&this.logger[n](`${r}: option ${i}. ${t[s]}`)}}function tX(t){return t=(0,im.normalizeId)(t),this.schemas[t]||this.refs[t]}function yVe(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function _Ve(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function bVe(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function vVe(){let t={...this.opts};for(let e of dVe)delete t[e];return t}var wVe={log(){},warn(){},error(){}};function EVe(t){if(t===!1)return wVe;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var SVe=/^[a-z_$][a-z0-9_$:-]*$/i;function RVe(t,e){let{RULES:r}=this;if((0,CC.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!SVe.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function NC(t,e,r){var n;let i=e?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,o=i?s.post:s.rules.find(({type:l})=>l===r);if(o||(o={type:r,rules:[]},s.rules.push(o)),s.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Iv.getJSONTypes)(e.type),schemaType:(0,Iv.getJSONTypes)(e.schemaType)}};e.before?TVe.call(this,o,a,e.before):o.rules.push(a),s.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function TVe(t,e,r){let n=t.rules.findIndex(i=>i.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function PVe(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=iX(e)),t.validateSchema=this.compile(e,!0))}var $Ve={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function iX(t){return{anyOf:[t,$Ve]}}});var sX=g(qC=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0});var OVe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};qC.default=OVe});var xC=g(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.callRef=lu.getValidate=void 0;var IVe=lo(),oX=pr(),hn=ee(),Sf=Qn(),aX=au(),Av=me(),AVe={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:l}=n,{root:u}=s;if((r==="#"||r==="#/")&&i===u.baseId)return f();let c=aX.resolveRef.call(l,u,i,r);if(c===void 0)throw new IVe.default(n.opts.uriResolver,i,r);if(c instanceof aX.SchemaEnv)return h(c);return d(c);function f(){if(s===u)return Nv(t,o,s,s.$async);let p=e.scopeValue("root",{ref:u});return Nv(t,(0,hn._)`${p}.validate`,u,u.$async)}function h(p){let m=lX(t,p);Nv(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,hn.stringify)(p)}:{ref:p}),y=e.name("valid"),_=t.subschema({schema:p,dataTypes:[],schemaPath:hn.nil,topSchemaRef:m,errSchemaPath:r},y);t.mergeEvaluated(_),t.ok(y)}}};function lX(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,hn._)`${r.scopeValue("wrapper",{ref:e})}.validate`}lu.getValidate=lX;function Nv(t,e,r,n){let{gen:i,it:s}=t,{allErrors:o,schemaEnv:a,opts:l}=s,u=l.passContext?Sf.default.this:hn.nil;n?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=i.let("valid");i.try(()=>{i.code((0,hn._)`await ${(0,oX.callValidateCode)(t,e,u)}`),d(e),o||i.assign(p,!0)},m=>{i.if((0,hn._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),h(m),o||i.assign(p,!1)}),t.ok(p)}function f(){t.result((0,oX.callValidateCode)(t,e,u),()=>d(e),()=>h(e))}function h(p){let m=(0,hn._)`${p}.errors`;i.assign(Sf.default.vErrors,(0,hn._)`${Sf.default.vErrors} === null ? ${m} : ${Sf.default.vErrors}.concat(${m})`),i.assign(Sf.default.errors,(0,hn._)`${Sf.default.vErrors}.length`)}function d(p){var m;if(!s.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(s.props=Av.mergeEvaluated.props(i,y.props,s.props));else{let _=i.var("props",(0,hn._)`${p}.evaluated.props`);s.props=Av.mergeEvaluated.props(i,_,s.props,hn.Name)}if(s.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(s.items=Av.mergeEvaluated.items(i,y.items,s.items));else{let _=i.var("items",(0,hn._)`${p}.evaluated.items`);s.items=Av.mergeEvaluated.items(i,_,s.items,hn.Name)}}}lu.callRef=Nv;lu.default=AVe});var uX=g(jC=>{"use strict";Object.defineProperty(jC,"__esModule",{value:!0});var NVe=sX(),CVe=xC(),kVe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",NVe.default,CVe.default];jC.default=kVe});var cX=g(MC=>{"use strict";Object.defineProperty(MC,"__esModule",{value:!0});var Cv=ee(),Ta=Cv.operators,kv={maximum:{okStr:"<=",ok:Ta.LTE,fail:Ta.GT},minimum:{okStr:">=",ok:Ta.GTE,fail:Ta.LT},exclusiveMaximum:{okStr:"<",ok:Ta.LT,fail:Ta.GTE},exclusiveMinimum:{okStr:">",ok:Ta.GT,fail:Ta.LTE}},qVe={message:({keyword:t,schemaCode:e})=>(0,Cv.str)`must be ${kv[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Cv._)`{comparison: ${kv[t].okStr}, limit: ${e}}`},xVe={keyword:Object.keys(kv),type:"number",schemaType:"number",$data:!0,error:qVe,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Cv._)`${r} ${kv[e].fail} ${n} || isNaN(${r})`)}};MC.default=xVe});var fX=g(LC=>{"use strict";Object.defineProperty(LC,"__esModule",{value:!0});var om=ee(),jVe={message:({schemaCode:t})=>(0,om.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,om._)`{multipleOf: ${t}}`},MVe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:jVe,code(t){let{gen:e,data:r,schemaCode:n,it:i}=t,s=i.opts.multipleOfPrecision,o=e.let("res"),a=s?(0,om._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,om._)`${o} !== parseInt(${o})`;t.fail$data((0,om._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};LC.default=MVe});var hX=g(DC=>{"use strict";Object.defineProperty(DC,"__esModule",{value:!0});function dX(t){let e=t.length,r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}DC.default=dX;dX.code='require("ajv/dist/runtime/ucs2length").default'});var pX=g(FC=>{"use strict";Object.defineProperty(FC,"__esModule",{value:!0});var uu=ee(),LVe=me(),DVe=hX(),FVe={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,uu.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,uu._)`{limit: ${t}}`},UVe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:FVe,code(t){let{keyword:e,data:r,schemaCode:n,it:i}=t,s=e==="maxLength"?uu.operators.GT:uu.operators.LT,o=i.opts.unicode===!1?(0,uu._)`${r}.length`:(0,uu._)`${(0,LVe.useFunc)(t.gen,DVe.default)}(${r})`;t.fail$data((0,uu._)`${o} ${s} ${n}`)}};FC.default=UVe});var mX=g(UC=>{"use strict";Object.defineProperty(UC,"__esModule",{value:!0});var BVe=pr(),qv=ee(),VVe={message:({schemaCode:t})=>(0,qv.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,qv._)`{pattern: ${t}}`},HVe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:VVe,code(t){let{data:e,$data:r,schema:n,schemaCode:i,it:s}=t,o=s.opts.unicodeRegExp?"u":"",a=r?(0,qv._)`(new RegExp(${i}, ${o}))`:(0,BVe.usePattern)(t,n);t.fail$data((0,qv._)`!${a}.test(${e})`)}};UC.default=HVe});var gX=g(BC=>{"use strict";Object.defineProperty(BC,"__esModule",{value:!0});var am=ee(),zVe={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,am.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,am._)`{limit: ${t}}`},WVe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:zVe,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?am.operators.GT:am.operators.LT;t.fail$data((0,am._)`Object.keys(${r}).length ${i} ${n}`)}};BC.default=WVe});var yX=g(VC=>{"use strict";Object.defineProperty(VC,"__esModule",{value:!0});var lm=pr(),um=ee(),GVe=me(),KVe={message:({params:{missingProperty:t}})=>(0,um.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,um._)`{missingProperty: ${t}}`},YVe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:KVe,code(t){let{gen:e,schema:r,schemaCode:n,data:i,$data:s,it:o}=t,{opts:a}=o;if(!s&&r.length===0)return;let l=r.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let y=o.schemaEnv.baseId+o.errSchemaPath,_=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,GVe.checkStrictMode)(o,_,o.opts.strictRequired)}}function u(){if(l||s)t.block$data(um.nil,f);else for(let d of r)(0,lm.checkReportMissingProp)(t,d)}function c(){let d=e.let("missing");if(l||s){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,lm.checkMissingProp)(t,r,d)),(0,lm.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,lm.noPropertyInData)(e,i,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,lm.propertyInData)(e,i,d,a.ownProperties)),e.if((0,um.not)(p),()=>{t.error(),e.break()})},um.nil)}}};VC.default=YVe});var _X=g(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0});var cm=ee(),JVe={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,cm.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,cm._)`{limit: ${t}}`},QVe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:JVe,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?cm.operators.GT:cm.operators.LT;t.fail$data((0,cm._)`${r}.length ${i} ${n}`)}};HC.default=QVe});var xv=g(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0});var bX=Xs();bX.code='require("ajv/dist/runtime/equal").default';zC.default=bX});var vX=g(GC=>{"use strict";Object.defineProperty(GC,"__esModule",{value:!0});var WC=Xp(),gr=ee(),XVe=me(),ZVe=xv(),e4e={message:({params:{i:t,j:e}})=>(0,gr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,gr._)`{i: ${t}, j: ${e}}`},t4e={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:e4e,code(t){let{gen:e,data:r,$data:n,schema:i,parentSchema:s,schemaCode:o,it:a}=t;if(!n&&!i)return;let l=e.let("valid"),u=s.items?(0,WC.getSchemaTypes)(s.items):[];t.block$data(l,c,(0,gr._)`${o} === false`),t.ok(l);function c(){let p=e.let("i",(0,gr._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(l,!0),e.if((0,gr._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return u.length>0&&!u.some(p=>p==="object"||p==="array")}function h(p,m){let y=e.name("item"),_=(0,WC.checkDataTypes)(u,y,a.opts.strictNumbers,WC.DataType.Wrong),w=e.const("indices",(0,gr._)`{}`);e.for((0,gr._)`;${p}--;`,()=>{e.let(y,(0,gr._)`${r}[${p}]`),e.if(_,(0,gr._)`continue`),u.length>1&&e.if((0,gr._)`typeof ${y} == "string"`,(0,gr._)`${y} += "_"`),e.if((0,gr._)`typeof ${w}[${y}] == "number"`,()=>{e.assign(m,(0,gr._)`${w}[${y}]`),t.error(),e.assign(l,!1).break()}).code((0,gr._)`${w}[${y}] = ${p}`)})}function d(p,m){let y=(0,XVe.useFunc)(e,ZVe.default),_=e.name("outer");e.label(_).for((0,gr._)`;${p}--;`,()=>e.for((0,gr._)`${m} = ${p}; ${m}--;`,()=>e.if((0,gr._)`${y}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(l,!1).break(_)})))}}};GC.default=t4e});var wX=g(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});var KC=ee(),r4e=me(),n4e=xv(),i4e={message:"must be equal to constant",params:({schemaCode:t})=>(0,KC._)`{allowedValue: ${t}}`},s4e={keyword:"const",$data:!0,error:i4e,code(t){let{gen:e,data:r,$data:n,schemaCode:i,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,KC._)`!${(0,r4e.useFunc)(e,n4e.default)}(${r}, ${i})`):t.fail((0,KC._)`${s} !== ${r}`)}};YC.default=s4e});var EX=g(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});var fm=ee(),o4e=me(),a4e=xv(),l4e={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,fm._)`{allowedValues: ${t}}`},u4e={keyword:"enum",schemaType:"array",$data:!0,error:l4e,code(t){let{gen:e,data:r,$data:n,schema:i,schemaCode:s,it:o}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=o.opts.loopEnum,l,u=()=>l??(l=(0,o4e.useFunc)(e,a4e.default)),c;if(a||n)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let d=e.const("vSchema",s);c=(0,fm.or)(...i.map((p,m)=>h(d,m)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",s,d=>e.if((0,fm._)`${u()}(${r}, ${d})`,()=>e.assign(c,!0).break()))}function h(d,p){let m=i[p];return typeof m=="object"&&m!==null?(0,fm._)`${u()}(${r}, ${d}[${p}])`:(0,fm._)`${r} === ${m}`}}};JC.default=u4e});var SX=g(QC=>{"use strict";Object.defineProperty(QC,"__esModule",{value:!0});var c4e=cX(),f4e=fX(),d4e=pX(),h4e=mX(),p4e=gX(),m4e=yX(),g4e=_X(),y4e=vX(),_4e=wX(),b4e=EX(),v4e=[c4e.default,f4e.default,d4e.default,h4e.default,p4e.default,m4e.default,g4e.default,y4e.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},_4e.default,b4e.default];QC.default=v4e});var ZC=g(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.validateAdditionalItems=void 0;var cu=ee(),XC=me(),w4e={message:({params:{len:t}})=>(0,cu.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,cu._)`{limit: ${t}}`},E4e={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:w4e,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,XC.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}RX(t,n)}};function RX(t,e){let{gen:r,schema:n,data:i,keyword:s,it:o}=t;o.items=!0;let a=r.const("len",(0,cu._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,cu._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,XC.alwaysValidSchema)(o,n)){let u=r.var("valid",(0,cu._)`${a} <= ${e.length}`);r.if((0,cu.not)(u),()=>l(u)),t.ok(u)}function l(u){r.forRange("i",e.length,a,c=>{t.subschema({keyword:s,dataProp:c,dataPropType:XC.Type.Num},u),o.allErrors||r.if((0,cu.not)(u),()=>r.break())})}}dm.validateAdditionalItems=RX;dm.default=E4e});var ek=g(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.validateTuple=void 0;var TX=ee(),jv=me(),S4e=pr(),R4e={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return PX(t,"additionalItems",e);r.items=!0,!(0,jv.alwaysValidSchema)(r,e)&&t.ok((0,S4e.validateArray)(t))}};function PX(t,e,r=t.schema){let{gen:n,parentSchema:i,data:s,keyword:o,it:a}=t;c(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=jv.mergeEvaluated.items(n,r.length,a.items));let l=n.name("valid"),u=n.const("len",(0,TX._)`${s}.length`);r.forEach((f,h)=>{(0,jv.alwaysValidSchema)(a,f)||(n.if((0,TX._)`${u} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},l)),t.ok(l))});function c(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let y=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,jv.checkStrictMode)(a,y,h.strictTuples)}}}hm.validateTuple=PX;hm.default=R4e});var $X=g(tk=>{"use strict";Object.defineProperty(tk,"__esModule",{value:!0});var T4e=ek(),P4e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,T4e.validateTuple)(t,"items")};tk.default=P4e});var IX=g(rk=>{"use strict";Object.defineProperty(rk,"__esModule",{value:!0});var OX=ee(),$4e=me(),O4e=pr(),I4e=ZC(),A4e={message:({params:{len:t}})=>(0,OX.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,OX._)`{limit: ${t}}`},N4e={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:A4e,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,$4e.alwaysValidSchema)(n,e)&&(i?(0,I4e.validateAdditionalItems)(t,i):t.ok((0,O4e.validateArray)(t)))}};rk.default=N4e});var AX=g(nk=>{"use strict";Object.defineProperty(nk,"__esModule",{value:!0});var Zn=ee(),Mv=me(),C4e={message:({params:{min:t,max:e}})=>e===void 0?(0,Zn.str)`must contain at least ${t} valid item(s)`:(0,Zn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Zn._)`{minContains: ${t}}`:(0,Zn._)`{minContains: ${t}, maxContains: ${e}}`},k4e={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:C4e,code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:s}=t,o,a,{minContains:l,maxContains:u}=n;s.opts.next?(o=l===void 0?1:l,a=u):o=1;let c=e.const("len",(0,Zn._)`${i}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Mv.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Mv.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Mv.alwaysValidSchema)(s,r)){let m=(0,Zn._)`${c} >= ${o}`;a!==void 0&&(m=(0,Zn._)`${m} && ${c} <= ${a}`),t.pass(m);return}s.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,Zn._)`${i}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),y=e.let("count",0);d(m,()=>e.if(m,()=>p(y)))}function d(m,y){e.forRange("i",0,c,_=>{t.subschema({keyword:"contains",dataProp:_,dataPropType:Mv.Type.Num,compositeRule:!0},m),y()})}function p(m){e.code((0,Zn._)`${m}++`),a===void 0?e.if((0,Zn._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,Zn._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,Zn._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};nk.default=k4e});var kX=g(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.validateSchemaDeps=Ts.validatePropertyDeps=Ts.error=void 0;var ik=ee(),q4e=me(),pm=pr();Ts.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,ik.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,ik._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var x4e={keyword:"dependencies",type:"object",schemaType:"object",error:Ts.error,code(t){let[e,r]=j4e(t);NX(t,e),CX(t,r)}};function j4e({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let i=Array.isArray(t[n])?e:r;i[n]=t[n]}return[e,r]}function NX(t,e=t.schema){let{gen:r,data:n,it:i}=t;if(Object.keys(e).length===0)return;let s=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let l=(0,pm.propertyInData)(r,n,o,i.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),i.allErrors?r.if(l,()=>{for(let u of a)(0,pm.checkReportMissingProp)(t,u)}):(r.if((0,ik._)`${l} && (${(0,pm.checkMissingProp)(t,a,s)})`),(0,pm.reportMissingProp)(t,s),r.else())}}Ts.validatePropertyDeps=NX;function CX(t,e=t.schema){let{gen:r,data:n,keyword:i,it:s}=t,o=r.name("valid");for(let a in e)(0,q4e.alwaysValidSchema)(s,e[a])||(r.if((0,pm.propertyInData)(r,n,a,s.opts.ownProperties),()=>{let l=t.subschema({keyword:i,schemaProp:a},o);t.mergeValidEvaluated(l,o)},()=>r.var(o,!0)),t.ok(o))}Ts.validateSchemaDeps=CX;Ts.default=x4e});var xX=g(sk=>{"use strict";Object.defineProperty(sk,"__esModule",{value:!0});var qX=ee(),M4e=me(),L4e={message:"property name must be valid",params:({params:t})=>(0,qX._)`{propertyName: ${t.propertyName}}`},D4e={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:L4e,code(t){let{gen:e,schema:r,data:n,it:i}=t;if((0,M4e.alwaysValidSchema)(i,r))return;let s=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),e.if((0,qX.not)(s),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(s)}};sk.default=D4e});var ak=g(ok=>{"use strict";Object.defineProperty(ok,"__esModule",{value:!0});var Lv=pr(),xi=ee(),F4e=Qn(),Dv=me(),U4e={message:"must NOT have additional properties",params:({params:t})=>(0,xi._)`{additionalProperty: ${t.additionalProperty}}`},B4e={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:U4e,code(t){let{gen:e,schema:r,parentSchema:n,data:i,errsCount:s,it:o}=t;if(!s)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,Dv.alwaysValidSchema)(o,r))return;let u=(0,Lv.allSchemaProperties)(n.properties),c=(0,Lv.allSchemaProperties)(n.patternProperties);f(),t.ok((0,xi._)`${s} === ${F4e.default.errors}`);function f(){e.forIn("key",i,y=>{!u.length&&!c.length?p(y):e.if(h(y),()=>p(y))})}function h(y){let _;if(u.length>8){let w=(0,Dv.schemaRefOrVal)(o,n.properties,"properties");_=(0,Lv.isOwnProperty)(e,w,y)}else u.length?_=(0,xi.or)(...u.map(w=>(0,xi._)`${y} === ${w}`)):_=xi.nil;return c.length&&(_=(0,xi.or)(_,...c.map(w=>(0,xi._)`${(0,Lv.usePattern)(t,w)}.test(${y})`))),(0,xi.not)(_)}function d(y){e.code((0,xi._)`delete ${i}[${y}]`)}function p(y){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){d(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Dv.alwaysValidSchema)(o,r)){let _=e.name("valid");l.removeAdditional==="failing"?(m(y,_,!1),e.if((0,xi.not)(_),()=>{t.reset(),d(y)})):(m(y,_),a||e.if((0,xi.not)(_),()=>e.break()))}}function m(y,_,w){let v={keyword:"additionalProperties",dataProp:y,dataPropType:Dv.Type.Str};w===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,_)}}};ok.default=B4e});var LX=g(uk=>{"use strict";Object.defineProperty(uk,"__esModule",{value:!0});var V4e=vf(),jX=pr(),lk=me(),MX=ak(),H4e={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&MX.default.code(new V4e.KeywordCxt(s,MX.default,"additionalProperties"));let o=(0,jX.allSchemaProperties)(r);for(let f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=lk.mergeEvaluated.props(e,(0,lk.toHash)(o),s.props));let a=o.filter(f=>!(0,lk.alwaysValidSchema)(s,r[f]));if(a.length===0)return;let l=e.name("valid");for(let f of a)u(f)?c(f):(e.if((0,jX.propertyInData)(e,i,f,s.opts.ownProperties)),c(f),s.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function u(f){return s.opts.useDefaults&&!s.compositeRule&&r[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};uk.default=H4e});var BX=g(ck=>{"use strict";Object.defineProperty(ck,"__esModule",{value:!0});var DX=pr(),Fv=ee(),FX=me(),UX=me(),z4e={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:i,it:s}=t,{opts:o}=s,a=(0,DX.allSchemaProperties)(r),l=a.filter(m=>(0,FX.alwaysValidSchema)(s,r[m]));if(a.length===0||l.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;let u=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=e.name("valid");s.props!==!0&&!(s.props instanceof Fv.Name)&&(s.props=(0,UX.evaluatedPropsToName)(e,s.props));let{props:f}=s;h();function h(){for(let m of a)u&&d(m),s.allErrors?p(m):(e.var(c,!0),p(m),e.if(c))}function d(m){for(let y in u)new RegExp(m).test(y)&&(0,FX.checkStrictMode)(s,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,y=>{e.if((0,Fv._)`${(0,DX.usePattern)(t,m)}.test(${y})`,()=>{let _=l.includes(m);_||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:UX.Type.Str},c),s.opts.unevaluated&&f!==!0?e.assign((0,Fv._)`${f}[${y}]`,!0):!_&&!s.allErrors&&e.if((0,Fv.not)(c),()=>e.break())})})}}};ck.default=z4e});var VX=g(fk=>{"use strict";Object.defineProperty(fk,"__esModule",{value:!0});var W4e=me(),G4e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,W4e.alwaysValidSchema)(n,r)){t.fail();return}let i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};fk.default=G4e});var HX=g(dk=>{"use strict";Object.defineProperty(dk,"__esModule",{value:!0});var K4e=pr(),Y4e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:K4e.validateUnion,error:{message:"must match a schema in anyOf"}};dk.default=Y4e});var zX=g(hk=>{"use strict";Object.defineProperty(hk,"__esModule",{value:!0});var Uv=ee(),J4e=me(),Q4e={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Uv._)`{passingSchemas: ${t.passing}}`},X4e={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Q4e,code(t){let{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let s=r,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(o,()=>t.reset(),()=>t.error(!0));function u(){s.forEach((c,f)=>{let h;(0,J4e.alwaysValidSchema)(i,c)?e.var(l,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,Uv._)`${l} && ${o}`).assign(o,!1).assign(a,(0,Uv._)`[${a}, ${f}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,Uv.Name)})})}}};hk.default=X4e});var WX=g(pk=>{"use strict";Object.defineProperty(pk,"__esModule",{value:!0});var Z4e=me(),e3e={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=e.name("valid");r.forEach((s,o)=>{if((0,Z4e.alwaysValidSchema)(n,s))return;let a=t.subschema({keyword:"allOf",schemaProp:o},i);t.ok(i),t.mergeEvaluated(a)})}};pk.default=e3e});var YX=g(mk=>{"use strict";Object.defineProperty(mk,"__esModule",{value:!0});var Bv=ee(),KX=me(),t3e={message:({params:t})=>(0,Bv.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Bv._)`{failingKeyword: ${t.ifClause}}`},r3e={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:t3e,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,KX.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=GX(n,"then"),s=GX(n,"else");if(!i&&!s)return;let o=e.let("valid",!0),a=e.name("_valid");if(l(),t.reset(),i&&s){let c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,u("then",c),u("else",c))}else i?e.if(a,u("then")):e.if((0,Bv.not)(a),u("else"));t.pass(o,()=>t.error(!0));function l(){let c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function u(c,f){return()=>{let h=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,Bv._)`${c}`):t.setParams({ifClause:c})}}}};function GX(t,e){let r=t.schema[e];return r!==void 0&&!(0,KX.alwaysValidSchema)(t,r)}mk.default=r3e});var JX=g(gk=>{"use strict";Object.defineProperty(gk,"__esModule",{value:!0});var n3e=me(),i3e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,n3e.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};gk.default=i3e});var QX=g(yk=>{"use strict";Object.defineProperty(yk,"__esModule",{value:!0});var s3e=ZC(),o3e=$X(),a3e=ek(),l3e=IX(),u3e=AX(),c3e=kX(),f3e=xX(),d3e=ak(),h3e=LX(),p3e=BX(),m3e=VX(),g3e=HX(),y3e=zX(),_3e=WX(),b3e=YX(),v3e=JX();function w3e(t=!1){let e=[m3e.default,g3e.default,y3e.default,_3e.default,b3e.default,v3e.default,f3e.default,d3e.default,c3e.default,h3e.default,p3e.default];return t?e.push(o3e.default,l3e.default):e.push(s3e.default,a3e.default),e.push(u3e.default),e}yk.default=w3e});var XX=g(_k=>{"use strict";Object.defineProperty(_k,"__esModule",{value:!0});var jt=ee(),E3e={message:({schemaCode:t})=>(0,jt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,jt._)`{format: ${t}}`},S3e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:E3e,code(t,e){let{gen:r,data:n,$data:i,schema:s,schemaCode:o,it:a}=t,{opts:l,errSchemaPath:u,schemaEnv:c,self:f}=a;if(!l.validateFormats)return;i?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:l.code.formats}),m=r.const("fDef",(0,jt._)`${p}[${o}]`),y=r.let("fType"),_=r.let("format");r.if((0,jt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,jt._)`${m}.type || "string"`).assign(_,(0,jt._)`${m}.validate`),()=>r.assign(y,(0,jt._)`"string"`).assign(_,m)),t.fail$data((0,jt.or)(w(),v()));function w(){return l.strictSchema===!1?jt.nil:(0,jt._)`${o} && !${_}`}function v(){let b=c.$async?(0,jt._)`(${m}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,jt._)`${_}(${n})`,E=(0,jt._)`(typeof ${_} == "function" ? ${b} : ${_}.test(${n}))`;return(0,jt._)`${_} && ${_} !== true && ${y} === ${e} && !${E}`}}function d(){let p=f.formats[s];if(!p){w();return}if(p===!0)return;let[m,y,_]=v(p);m===e&&t.pass(b());function w(){if(l.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function v(E){let R=E instanceof RegExp?(0,jt.regexpCode)(E):l.code.formats?(0,jt._)`${l.code.formats}${(0,jt.getProperty)(s)}`:void 0,S=r.scopeValue("formats",{key:s,ref:E,code:R});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,jt._)`${S}.validate`]:["string",E,S]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,jt._)`await ${_}(${n})`}return typeof y=="function"?(0,jt._)`${_}(${n})`:(0,jt._)`${_}.test(${n})`}}}};_k.default=S3e});var ZX=g(bk=>{"use strict";Object.defineProperty(bk,"__esModule",{value:!0});var R3e=XX(),T3e=[R3e.default];bk.default=T3e});var eZ=g(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.contentVocabulary=Rf.metadataVocabulary=void 0;Rf.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Rf.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var rZ=g(vk=>{"use strict";Object.defineProperty(vk,"__esModule",{value:!0});var P3e=uX(),$3e=SX(),O3e=QX(),I3e=ZX(),tZ=eZ(),A3e=[P3e.default,$3e.default,(0,O3e.default)(),I3e.default,tZ.metadataVocabulary,tZ.contentVocabulary];vk.default=A3e});var wk=g(Vv=>{"use strict";Object.defineProperty(Vv,"__esModule",{value:!0});Vv.DiscrError=void 0;var nZ;(function(t){t.Tag="tag",t.Mapping="mapping"})(nZ||(Vv.DiscrError=nZ={}))});var sZ=g(Sk=>{"use strict";Object.defineProperty(Sk,"__esModule",{value:!0});var Tf=ee(),Ek=wk(),iZ=au(),N3e=lo(),C3e=me(),k3e={message:({params:{discrError:t,tagName:e}})=>t===Ek.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Tf._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},q3e={keyword:"discriminator",type:"object",schemaType:"object",error:k3e,code(t){let{gen:e,data:r,schema:n,parentSchema:i,it:s}=t,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),u=e.const("tag",(0,Tf._)`${r}${(0,Tf.getProperty)(a)}`);e.if((0,Tf._)`typeof ${u} == "string"`,()=>c(),()=>t.error(!1,{discrError:Ek.DiscrError.Tag,tag:u,tagName:a})),t.ok(l);function c(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,Tf._)`${u} === ${p}`),e.assign(l,f(d[p]));e.else(),t.error(!1,{discrError:Ek.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,Tf.Name),p}function h(){var d;let p={},m=_(i),y=!0;for(let b=0;b<o.length;b++){let E=o[b];if(E?.$ref&&!(0,C3e.schemaHasRulesButRef)(E,s.self.RULES)){let S=E.$ref;if(E=iZ.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof iZ.SchemaEnv&&(E=E.schema),E===void 0)throw new N3e.default(s.opts.uriResolver,s.baseId,S)}let R=(d=E?.properties)===null||d===void 0?void 0:d[a];if(typeof R!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(m||_(E)),w(R,b)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return p;function _({required:b}){return Array.isArray(b)&&b.includes(a)}function w(b,E){if(b.const)v(b.const,E);else if(b.enum)for(let R of b.enum)v(R,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(b,E){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=E}}}};Sk.default=q3e});var oZ=g((Pst,x3e)=>{x3e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var lZ=g((_t,Rk)=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.MissingRefError=_t.ValidationError=_t.CodeGen=_t.Name=_t.nil=_t.stringify=_t.str=_t._=_t.KeywordCxt=_t.Ajv=void 0;var j3e=kC(),M3e=rZ(),L3e=sZ(),aZ=oZ(),D3e=["/properties"],Hv="http://json-schema.org/draft-07/schema",Pf=class extends j3e.default{_addVocabularies(){super._addVocabularies(),M3e.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(L3e.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(aZ,D3e):aZ;this.addMetaSchema(e,Hv,!1),this.refs["http://json-schema.org/schema"]=Hv}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Hv)?Hv:void 0)}};_t.Ajv=Pf;Rk.exports=_t=Pf;Rk.exports.Ajv=Pf;Object.defineProperty(_t,"__esModule",{value:!0});_t.default=Pf;var F3e=vf();Object.defineProperty(_t,"KeywordCxt",{enumerable:!0,get:function(){return F3e.KeywordCxt}});var $f=ee();Object.defineProperty(_t,"_",{enumerable:!0,get:function(){return $f._}});Object.defineProperty(_t,"str",{enumerable:!0,get:function(){return $f.str}});Object.defineProperty(_t,"stringify",{enumerable:!0,get:function(){return $f.stringify}});Object.defineProperty(_t,"nil",{enumerable:!0,get:function(){return $f.nil}});Object.defineProperty(_t,"Name",{enumerable:!0,get:function(){return $f.Name}});Object.defineProperty(_t,"CodeGen",{enumerable:!0,get:function(){return $f.CodeGen}});var U3e=rm();Object.defineProperty(_t,"ValidationError",{enumerable:!0,get:function(){return U3e.default}});var B3e=lo();Object.defineProperty(_t,"MissingRefError",{enumerable:!0,get:function(){return B3e.default}})});var uo=g(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.checkMetadata=void 0;var V3e=me(),H3e={keyword:"metadata",schemaType:"object",code(t){uZ(t);let{gen:e,schema:r,it:n}=t;if((0,V3e.alwaysValidSchema)(n,r))return;let i=e.name("valid");t.subschema({keyword:"metadata",jtdMetadata:!0},i),t.ok(i)}};function uZ({it:t,keyword:e},r){if(t.jtdMetadata!==r)throw new Error(`JTD: "${e}" cannot be used in this schema location`)}mm.checkMetadata=uZ;mm.default=H3e});var zv=g(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.hasRef=void 0;var cZ=au(),gm=ee(),z3e=lo(),fZ=Qn(),dZ=xC(),W3e=uo(),G3e={keyword:"ref",schemaType:"string",code(t){(0,W3e.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:i,it:s}=t,{schemaEnv:{root:o}}=s,a=e.name("valid");i.nullable?(e.var(a,(0,gm._)`${r} === null`),e.if((0,gm.not)(a),l)):(e.var(a,!1),l()),t.ok(a);function l(){var f;let h=(f=o.schema.definitions)===null||f===void 0?void 0:f[n];if(!h)throw new z3e.default(s.opts.uriResolver,"",n,`No definition ${n}`);Tk(h)||!s.opts.inlineRefs?u(h):c(h)}function u(f){let h=cZ.compileSchema.call(s.self,new cZ.SchemaEnv({schema:f,root:o,schemaPath:`/definitions/${n}`})),d=(0,dZ.getValidate)(t,h),p=e.const("_errs",fZ.default.errors);(0,dZ.callRef)(t,d,h,h.$async),e.assign(a,(0,gm._)`${p} === ${fZ.default.errors}`)}function c(f){let h=e.scopeValue("schema",s.opts.code.source===!0?{ref:f,code:(0,gm.stringify)(f)}:{ref:f});t.subschema({schema:f,dataTypes:[],schemaPath:gm.nil,topSchemaRef:h,errSchemaPath:`/definitions/${n}`},a)}}};function Tk(t){for(let e in t){let r;if(e==="ref"||typeof(r=t[e])=="object"&&Tk(r))return!0}return!1}ym.hasRef=Tk;ym.default=G3e});var $k=g(Pk=>{"use strict";Object.defineProperty(Pk,"__esModule",{value:!0});var K3e=/t|\s/i,Y3e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,J3e=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,Q3e=[0,31,28,31,30,31,30,31,31,30,31,30,31];function pZ(t,e){let r=t.split(K3e);return r.length===2&&hZ(r[0])&&X3e(r[1])||e&&r.length===1&&hZ(r[0])}Pk.default=pZ;function hZ(t){let e=Y3e.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&(i<=Q3e[n]||n===2&&i===29&&(r%100===0?r%400===0:r%4===0))}function X3e(t){let e=J3e.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],i=+e[3],s=+(e[4]||0),o=+(e[5]||0);return r<=23&&n<=59&&i<=59||r-s===23&&n-o===59&&i===60}pZ.code='require("ajv/dist/runtime/timestamp").default'});var Of=g(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.typeErrorParams=Pa.typeErrorMessage=Pa.typeError=void 0;var Z3e=ee();function eHe(t){return{message:e=>mZ(e,t),params:e=>gZ(e,t)}}Pa.typeError=eHe;function mZ({parentSchema:t},e){return t?.nullable?`must be ${e} or null`:`must be ${e}`}Pa.typeErrorMessage=mZ;function gZ({parentSchema:t},e){return(0,Z3e._)`{type: ${e}, nullable: ${!!t?.nullable}}`}Pa.typeErrorParams=gZ});var Ok=g(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.intRange=void 0;var En=ee(),tHe=$k(),rHe=me(),nHe=uo(),yZ=Of();If.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var iHe={message:t=>(0,yZ.typeErrorMessage)(t,t.schema),params:t=>(0,yZ.typeErrorParams)(t,t.schema)};function sHe(t){let{gen:e,data:r,it:n}=t,{timestamp:i,allowDate:s}=n.opts;if(i==="date")return(0,En._)`${r} instanceof Date `;let o=(0,rHe.useFunc)(e,tHe.default),a=s?(0,En._)`, true`:En.nil,l=(0,En._)`typeof ${r} == "string" && ${o}(${r}${a})`;return i==="string"?l:(0,En.or)((0,En._)`${r} instanceof Date`,l)}var oHe={keyword:"type",schemaType:"string",error:iHe,code(t){(0,nHe.checkMetadata)(t);let{data:e,schema:r,parentSchema:n,it:i}=t,s;switch(r){case"boolean":case"string":s=(0,En._)`typeof ${e} == ${r}`;break;case"timestamp":{s=sHe(t);break}case"float32":case"float64":s=(0,En._)`typeof ${e} == "number"`;break;default:{let o=r;if(s=(0,En._)`typeof ${e} == "number" && isFinite(${e}) && !(${e} % 1)`,!i.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(s=(0,En._)`${s} && ${e} >= 0`);else{let[a,l]=If.intRange[o];s=(0,En._)`${s} && ${e} >= ${a} && ${e} <= ${l}`}}}t.pass(n.nullable?(0,En.or)((0,En._)`${e} === null`,s):s)}};If.default=oHe});var Nf=g(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.checkNullableObject=Af.checkNullable=void 0;var Wv=ee();function _Z({gen:t,data:e,parentSchema:r},n=Wv.nil){let i=t.name("valid");return r.nullable?(t.let(i,(0,Wv._)`${e} === null`),n=(0,Wv.not)(i)):t.let(i,!1),[i,n]}Af.checkNullable=_Z;function aHe(t,e){let[r,n]=_Z(t,e);return[r,(0,Wv._)`${n} && typeof ${t.data} == "object" && !Array.isArray(${t.data})`]}Af.checkNullableObject=aHe});var bZ=g(Ik=>{"use strict";Object.defineProperty(Ik,"__esModule",{value:!0});var $a=ee(),lHe=uo(),uHe=Nf(),cHe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,$a._)`{allowedValues: ${t}}`},fHe={keyword:"enum",schemaType:"array",error:cHe,code(t){(0,lHe.checkMetadata)(t);let{gen:e,data:r,schema:n,schemaValue:i,parentSchema:s,it:o}=t;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,l=(0,$a._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let c;[a,c]=(0,uHe.checkNullable)(t,l),e.if(c,u)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,$a.and)(l,(0,$a.or)(...n.map(c=>(0,$a._)`${r} === ${c}`))),s.nullable&&(a=(0,$a.or)((0,$a._)`${r} === null`,a))}t.pass(a);function u(){e.forOf("v",i,c=>e.if((0,$a._)`${a} = ${r} === ${c}`,()=>e.break()))}}};Ik.default=fHe});var wZ=g(Ak=>{"use strict";Object.defineProperty(Ak,"__esModule",{value:!0});var dHe=me(),hHe=pr(),vZ=ee(),pHe=uo(),mHe=Nf(),gHe=Of(),yHe={keyword:"elements",schemaType:"object",error:(0,gHe.typeError)("array"),code(t){(0,pHe.checkMetadata)(t);let{gen:e,data:r,schema:n,it:i}=t;if((0,dHe.alwaysValidSchema)(i,n))return;let[s]=(0,mHe.checkNullable)(t);e.if((0,vZ.not)(s),()=>e.if((0,vZ._)`Array.isArray(${r})`,()=>e.assign(s,(0,hHe.validateArray)(t)),()=>t.error())),t.ok(s)}};Ak.default=yHe});var Ck=g(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.validateProperties=Oa.error=void 0;var Nk=pr(),EZ=me(),co=ee(),_He=uo(),bHe=Nf(),SZ=Of(),Cf;(function(t){t.Additional="additional",t.Missing="missing"})(Cf||(Cf={}));Oa.error={message:t=>{let{params:e}=t;return e.propError?e.propError===Cf.Additional?"must NOT have additional properties":`must have property '${e.missingProperty}'`:(0,SZ.typeErrorMessage)(t,"object")},params:t=>{let{params:e}=t;return e.propError?e.propError===Cf.Additional?(0,co._)`{error: ${e.propError}, additionalProperty: ${e.additionalProperty}}`:(0,co._)`{error: ${e.propError}, missingProperty: ${e.missingProperty}}`:(0,SZ.typeErrorParams)(t,"object")}};var vHe={keyword:"properties",schemaType:"object",error:Oa.error,code:RZ};function RZ(t){(0,_He.checkMetadata)(t);let{gen:e,data:r,parentSchema:n,it:i}=t,{additionalProperties:s,nullable:o}=n;if(i.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(d())throw new Error("JTD: properties and optionalProperties have common members");let[a,l]=p("properties"),[u,c]=p("optionalProperties");if(l.length===0&&c.length===0&&s)return;let[f,h]=i.jtdDiscriminator===void 0?(0,bHe.checkNullableObject)(t,r):[e.let("valid",!1),!0];e.if(h,()=>e.assign(f,!0).block(()=>{m(l,"properties",!0),m(c,"optionalProperties"),s||_()})),t.pass(f);function d(){let v=n.properties,b=n.optionalProperties;if(!(v&&b))return!1;for(let E in v)if(Object.prototype.hasOwnProperty.call(b,E))return!0;return!1}function p(v){let b=n[v],E=b?(0,Nk.allSchemaProperties)(b):[];if(i.jtdDiscriminator&&E.some(S=>S===i.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${v}`);let R=E.filter(S=>!(0,EZ.alwaysValidSchema)(i,b[S]));return[E,R]}function m(v,b,E){let R=e.var("valid");for(let P of v)e.if((0,Nk.propertyInData)(e,r,P,i.opts.ownProperties),()=>y(P,b,R),()=>S(P)),t.ok(R);function S(P){E?(e.assign(R,!1),t.error(!1,{propError:Cf.Missing,missingProperty:P},{schemaPath:P})):e.assign(R,!0)}}function y(v,b,E){t.subschema({keyword:b,schemaProp:v,dataProp:v},E)}function _(){e.forIn("key",r,v=>{let b=w(v,a,"properties",i.jtdDiscriminator),E=w(v,u,"optionalProperties"),R=b===!0?E:E===!0?b:(0,co.and)(b,E);e.if(R,()=>{i.opts.removeAdditional?e.code((0,co._)`delete ${r}[${v}]`):(t.error(!1,{propError:Cf.Additional,additionalProperty:v},{instancePath:v,parentSchema:!0}),i.opts.allErrors||e.break())})})}function w(v,b,E,R){let S;if(b.length>8){let P=(0,EZ.schemaRefOrVal)(i,n[E],E);S=(0,co.not)((0,Nk.isOwnProperty)(e,P,v)),R!==void 0&&(S=(0,co.and)(S,(0,co._)`${v} !== ${R}`))}else if(b.length||R!==void 0){let P=R===void 0?b:[R].concat(b);S=(0,co.and)(...P.map(T=>(0,co._)`${v} !== ${T}`))}else S=!0;return S}}Oa.validateProperties=RZ;Oa.default=vHe});var PZ=g(kk=>{"use strict";Object.defineProperty(kk,"__esModule",{value:!0});var TZ=Ck(),wHe={keyword:"optionalProperties",schemaType:"object",error:TZ.error,code(t){t.parentSchema.properties||(0,TZ.validateProperties)(t)}};kk.default=wHe});var OZ=g(qk=>{"use strict";Object.defineProperty(qk,"__esModule",{value:!0});var fu=ee(),EHe=uo(),SHe=Nf(),$Z=Of(),Gv=wk(),RHe={message:t=>{let{schema:e,params:r}=t;return r.discrError?r.discrError===Gv.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in mapping`:(0,$Z.typeErrorMessage)(t,"object")},params:t=>{let{schema:e,params:r}=t;return r.discrError?(0,fu._)`{error: ${r.discrError}, tag: ${e}, tagValue: ${r.tag}}`:(0,$Z.typeErrorParams)(t,"object")}},THe={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:RHe,code(t){(0,EHe.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:i}=t,[s,o]=(0,SHe.checkNullableObject)(t,r);e.if(o),a(),e.elseIf((0,fu.not)(s)),t.error(),e.endIf(),t.ok(s);function a(){let c=e.const("tag",(0,fu._)`${r}${(0,fu.getProperty)(n)}`);e.if((0,fu._)`${c} === undefined`),t.error(!1,{discrError:Gv.DiscrError.Tag,tag:c}),e.elseIf((0,fu._)`typeof ${c} == "string"`),l(c),e.else(),t.error(!1,{discrError:Gv.DiscrError.Tag,tag:c},{instancePath:n}),e.endIf()}function l(c){e.if(!1);for(let f in i.mapping)e.elseIf((0,fu._)`${c} === ${f}`),e.assign(s,u(f));e.else(),t.error(!1,{discrError:Gv.DiscrError.Mapping,tag:c},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),e.endIf()}function u(c){let f=e.name("valid");return t.subschema({keyword:"mapping",schemaProp:c,jtdDiscriminator:n},f),f}}};qk.default=THe});var AZ=g(xk=>{"use strict";Object.defineProperty(xk,"__esModule",{value:!0});var IZ=me(),Kv=ee(),PHe=uo(),$He=Nf(),OHe=Of(),IHe={keyword:"values",schemaType:"object",error:(0,OHe.typeError)("object"),code(t){(0,PHe.checkMetadata)(t);let{gen:e,data:r,schema:n,it:i}=t,[s,o]=(0,$He.checkNullableObject)(t,r);(0,IZ.alwaysValidSchema)(i,n)?e.if((0,Kv.not)((0,Kv.or)(o,s)),()=>t.error()):(e.if(o),e.assign(s,a()),e.elseIf((0,Kv.not)(s)),t.error(),e.endIf()),t.ok(s);function a(){let l=e.name("valid");if(i.allErrors){let c=e.let("valid",!0);return u(()=>e.assign(c,!1)),c}return e.var(l,!0),u(()=>e.break()),l;function u(c){e.forIn("key",r,f=>{t.subschema({keyword:"values",dataProp:f,dataPropType:IZ.Type.Str},l),e.if((0,Kv.not)(l),c)})}}}};xk.default=IHe});var NZ=g(jk=>{"use strict";Object.defineProperty(jk,"__esModule",{value:!0});var AHe=pr(),NHe={keyword:"union",schemaType:"array",trackErrors:!0,code:AHe.validateUnion,error:{message:"must match a schema in union"}};jk.default=NHe});var CZ=g(Mk=>{"use strict";Object.defineProperty(Mk,"__esModule",{value:!0});var CHe=zv(),kHe=Ok(),qHe=bZ(),xHe=wZ(),jHe=Ck(),MHe=PZ(),LHe=OZ(),DHe=AZ(),FHe=NZ(),UHe=uo(),BHe=["definitions",CHe.default,kHe.default,qHe.default,xHe.default,jHe.default,MHe.default,LHe.default,DHe.default,FHe.default,UHe.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];Mk.default=BHe});var jZ=g(Lk=>{"use strict";Object.defineProperty(Lk,"__esModule",{value:!0});var fo=t=>{let e={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return t&&(e.definitions={values:{ref:"schema"}}),e},VHe=t=>({optionalProperties:fo(t)}),HHe=t=>({properties:{ref:{type:"string"}},optionalProperties:fo(t)}),zHe=t=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:fo(t)}),WHe=t=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:fo(t)}),GHe=t=>({properties:{elements:{ref:"schema"}},optionalProperties:fo(t)}),qZ=t=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...fo(t)}}),xZ=t=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...fo(t)}}),KHe=t=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[qZ(!1),xZ(!1)]}}}},optionalProperties:fo(t)}),YHe=t=>({properties:{values:{ref:"schema"}},optionalProperties:fo(t)}),kZ=t=>({metadata:{union:[VHe,HHe,zHe,WHe,GHe,qZ,xZ,KHe,YHe].map(e=>e(t))}}),JHe={definitions:{schema:kZ(!1)},...kZ(!0)};Lk.default=JHe});var Dk=g(Yv=>{"use strict";Object.defineProperty(Yv,"__esModule",{value:!0});Yv.jtdForms=void 0;Yv.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var LZ=g(Uk=>{"use strict";Object.defineProperty(Uk,"__esModule",{value:!0});var Fk=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,QHe={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function MZ(t){return Fk.lastIndex=0,'"'+(Fk.test(t)?t.replace(Fk,e=>{let r=QHe[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t)+'"'}Uk.default=MZ;MZ.code='require("ajv/dist/runtime/quote").default'});var HZ=g(Vk=>{"use strict";Object.defineProperty(Vk,"__esModule",{value:!0});var XHe=Dk(),FZ=au(),qe=ee(),ZHe=lo(),ut=Qn(),eze=pr(),tze=zv(),rze=me(),nze=LZ(),ize={elements:oze,values:aze,discriminator:lze,properties:DZ,optionalProperties:DZ,enum:_m,type:uze,ref:fze};function UZ(t,e){let r=FZ.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new qe.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a=o.scopeName("serialize"),l={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:ut.default.data},u;try{this._compilations.add(t),t.serializeName=a,o.func(a,ut.default.data,!1,()=>{o.let(ut.default.json,(0,qe.str)``),bm(l),o.return(ut.default.json)}),o.optimize(this.opts.code.optimize);let c=o.toString();u=`${o.scopeRefs(ut.default.scope)}return ${c}`;let h=new Function(`${ut.default.scope}`,u)(this.scope.get());this.scope.value(a,{ref:h}),t.serialize=h}catch(c){throw u&&this.logger.error("Error compiling serializer, function code:",u),delete t.serialize,delete t.serializeName,c}finally{this._compilations.delete(t)}return t}Vk.default=UZ;function bm(t){let e;for(let r of XHe.jtdForms)if(r in t.schema){e=r;break}sze(t,e?ize[e]:hze)}function sze(t,e){let{gen:r,schema:n,data:i}=t;if(!n.nullable)return e(t);r.if((0,qe._)`${i} === undefined || ${i} === null`,()=>r.add(ut.default.json,(0,qe._)`"null"`),()=>e(t))}function oze(t){let{gen:e,schema:r,data:n}=t;e.add(ut.default.json,(0,qe.str)`[`);let i=e.let("first",!0);e.forOf("el",n,s=>{Bk(t,i),bm({...t,schema:r.elements,data:s})}),e.add(ut.default.json,(0,qe.str)`]`)}function aze(t){let{gen:e,schema:r,data:n}=t;e.add(ut.default.json,(0,qe.str)`{`);let i=e.let("first",!0);e.forIn("key",n,s=>BZ(t,s,r.values,i)),e.add(ut.default.json,(0,qe.str)`}`)}function BZ(t,e,r,n){let{gen:i,data:s}=t;Bk(t,n),_m({...t,data:e}),i.add(ut.default.json,(0,qe.str)`:`);let o=i.const("value",(0,qe._)`${s}${(0,qe.getProperty)(e)}`);bm({...t,schema:r,data:o})}function lze(t){let{gen:e,schema:r,data:n}=t,{discriminator:i}=r;e.add(ut.default.json,(0,qe.str)`{${JSON.stringify(i)}:`);let s=e.const("tag",(0,qe._)`${n}${(0,qe.getProperty)(i)}`);_m({...t,data:s}),e.if(!1);for(let o in r.mapping){e.elseIf((0,qe._)`${s} === ${o}`);let a=r.mapping[o];VZ({...t,schema:a},i)}e.endIf(),e.add(ut.default.json,(0,qe.str)`}`)}function DZ(t){let{gen:e}=t;e.add(ut.default.json,(0,qe.str)`{`),VZ(t),e.add(ut.default.json,(0,qe.str)`}`)}function VZ(t,e){let{gen:r,schema:n,data:i}=t,{properties:s,optionalProperties:o}=n,a=h(s),l=h(o),u=d(a.concat(l)),c=!e,f;for(let _ of a)c?c=!1:r.add(ut.default.json,(0,qe.str)`,`),m(_,s[_],p(_));c&&(f=r.let("first",!0));for(let _ of l){let w=p(_);r.if((0,qe.and)((0,qe._)`${w} !== undefined`,(0,eze.isOwnProperty)(r,i,_)),()=>{Bk(t,f),m(_,o[_],w)})}n.additionalProperties&&r.forIn("key",i,_=>r.if(y(_,u),()=>BZ(t,_,{},f)));function h(_){return _?Object.keys(_):[]}function d(_){if(e&&_.push(e),new Set(_).size!==_.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return _}function p(_){return r.const("value",(0,qe._)`${i}${(0,qe.getProperty)(_)}`)}function m(_,w,v){r.add(ut.default.json,(0,qe.str)`${JSON.stringify(_)}:`),bm({...t,schema:w,data:v})}function y(_,w){return w.length?(0,qe.and)(...w.map(v=>(0,qe._)`${_} !== ${v}`)):!0}}function uze(t){let{gen:e,schema:r,data:n}=t;switch(r.type){case"boolean":e.add(ut.default.json,(0,qe._)`${n} ? "true" : "false"`);break;case"string":_m(t);break;case"timestamp":e.if((0,qe._)`${n} instanceof Date`,()=>e.add(ut.default.json,(0,qe._)`'"' + ${n}.toISOString() + '"'`),()=>_m(t));break;default:cze(t)}}function _m({gen:t,data:e}){t.add(ut.default.json,(0,qe._)`${(0,rze.useFunc)(t,nze.default)}(${e})`)}function cze({gen:t,data:e}){t.add(ut.default.json,(0,qe._)`"" + ${e}`)}function fze(t){let{gen:e,self:r,data:n,definitions:i,schema:s,schemaEnv:o}=t,{ref:a}=s,l=i[a];if(!l)throw new ZHe.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,tze.hasRef)(l))return bm({...t,schema:l});let{root:u}=o,c=UZ.call(r,new FZ.SchemaEnv({schema:l,root:u}),i);e.add(ut.default.json,(0,qe._)`${dze(e,c)}(${n})`)}function dze(t,e){return e.serialize?t.scopeValue("serialize",{ref:e.serialize}):(0,qe._)`${t.scopeValue("wrapper",{ref:e})}.serialize`}function hze({gen:t,data:e}){t.add(ut.default.json,(0,qe._)`JSON.stringify(${e})`)}function Bk({gen:t},e){e?t.if(e,()=>t.assign(e,!1),()=>t.add(ut.default.json,(0,qe.str)`,`)):t.add(ut.default.json,(0,qe.str)`,`)}});var WZ=g(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.parseJsonString=Aa.parseJsonNumber=Aa.parseJson=void 0;var pze=/position\s(\d+)(?: \(line \d+ column \d+\))?$/;function ho(t,e){let r;ho.message=void 0;let n;e&&(t=t.slice(e));try{return ho.position=e+t.length,JSON.parse(t)}catch(i){if(n=pze.exec(i.message),!n){ho.message="unexpected end";return}r=+n[1];let s=t[r];t=t.slice(0,r),ho.position=e+r;try{return JSON.parse(t)}catch{ho.message=`unexpected token ${s}`;return}}}Aa.parseJson=ho;ho.message=void 0;ho.position=0;ho.code='require("ajv/dist/runtime/parseJson").parseJson';function po(t,e,r){let n="",i;if(po.message=void 0,t[e]==="-"&&(n+="-",e++),t[e]==="0")n+="0",e++;else if(!s(r)){o();return}if(r)return po.position=e,+n;if(t[e]==="."&&(n+=".",e++,!s())){o();return}if(i=t[e],(i==="e"||i==="E")&&(n+="e",e++,i=t[e],(i==="+"||i==="-")&&(n+=i,e++),!s())){o();return}return po.position=e,+n;function s(a){let l=!1;for(;i=t[e],i>="0"&&i<="9"&&(a===void 0||a-- >0);)l=!0,n+=i,e++;return l}function o(){po.position=e,po.message=e<t.length?`unexpected token ${t[e]}`:"unexpected end"}}Aa.parseJsonNumber=po;po.message=void 0;po.position=0;po.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var zZ={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},mze=97,gze=48;function Ia(t,e){let r="",n;for(Ia.message=void 0;n=t[e++],n!=='"';)if(n==="\\")if(n=t[e],n in zZ)r+=zZ[n],e++;else if(n==="u"){e++;let s=4,o=0;for(;s--;){if(o<<=4,n=t[e],n===void 0){i("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-mze+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-gze;else{i(`unexpected token ${n}`);return}e++}r+=String.fromCharCode(o)}else{i(`unexpected token ${n}`);return}else if(n===void 0){i("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{i(`unexpected token ${n}`);return}return Ia.position=e,r;function i(s){Ia.position=e,Ia.message=s}}Aa.parseJsonString=Ia;Ia.message=void 0;Ia.position=0;Ia.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var nee=g(Qk=>{"use strict";Object.defineProperty(Qk,"__esModule",{value:!0});var yze=Dk(),JZ=au(),X=ee(),_ze=lo(),Ie=Qn(),bze=pr(),vze=zv(),wze=Ok(),Wk=WZ(),QZ=me(),Eze=$k(),Sze={elements:$ze,values:Oze,discriminator:Aze,properties:GZ,optionalProperties:GZ,enum:Cze,type:Nze,ref:kze};function XZ(t,e){let r=JZ.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new X.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a=o.scopeName("parse"),l={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:Ie.default.data,parseName:a,char:o.name("c")},u;try{this._compilations.add(t),t.parseName=a,Rze(l),o.optimize(this.opts.code.optimize);let c=o.toString();u=`${o.scopeRefs(Ie.default.scope)}return ${c}`;let h=new Function(`${Ie.default.scope}`,u)(this.scope.get());this.scope.value(a,{ref:h}),t.parse=h}catch(c){throw u&&this.logger.error("Error compiling parser, function code:",u),delete t.parse,delete t.parseName,c}finally{this._compilations.delete(t)}return t}Qk.default=XZ;var zk=(0,X._)`undefined`;function Rze(t){let{gen:e,parseName:r,char:n}=t;e.func(r,(0,X._)`${Ie.default.json}, ${Ie.default.jsonPos}, ${Ie.default.jsonPart}`,!1,()=>{e.let(Ie.default.data),e.let(n),e.assign((0,X._)`${r}.message`,zk),e.assign((0,X._)`${r}.position`,zk),e.assign(Ie.default.jsonPos,(0,X._)`${Ie.default.jsonPos} || 0`),e.const(Ie.default.jsonLen,(0,X._)`${Ie.default.json}.length`),Jv(t),Jk(t),e.if(Ie.default.jsonPart,()=>{e.assign((0,X._)`${r}.position`,Ie.default.jsonPos),e.return(Ie.default.data)}),e.if((0,X._)`${Ie.default.jsonPos} === ${Ie.default.jsonLen}`,()=>e.return(Ie.default.data)),kf(t)})}function Jv(t){let e;for(let r of yze.jtdForms)if(r in t.schema){e=r;break}e?Pze(t,Sze[e]):Kk(t)}var Tze=YZ(!0,YZ(!1,kf));function Pze(t,e){let{gen:r,schema:n,data:i}=t;if(!n.nullable)return e(t);vm(t,"null",e,()=>r.assign(i,null))}function $ze(t){let{gen:e,schema:r,data:n}=t;Ps(t,"[");let i=e.let("i",0);e.assign(n,(0,X._)`[]`),Gk(t,"]",()=>{let s=e.let("el");Jv({...t,schema:r.elements,data:s}),e.assign((0,X._)`${n}[${i}++]`,s)})}function Oze(t){let{gen:e,schema:r,data:n}=t;Ps(t,"{"),e.assign(n,(0,X._)`{}`),Gk(t,"}",()=>Ize(t,r.values))}function Gk(t,e,r){ZZ(t,e,r),Ps(t,e)}function ZZ(t,e,r){let{gen:n}=t;n.for((0,X._)`;${Ie.default.jsonPos}<${Ie.default.jsonLen} && ${Qv(1)}!==${e};`,()=>{r(),vm(t,",",()=>n.break(),i)});function i(){vm(t,e,()=>{},kf)}}function Ize(t,e){let{gen:r}=t,n=r.let("key");du({...t,data:n}),Ps(t,":"),tee(t,n,e)}function Aze(t){let{gen:e,data:r,schema:n}=t,{discriminator:i,mapping:s}=n;Ps(t,"{"),e.assign(r,(0,X._)`{}`);let o=e.const("pos",Ie.default.jsonPos),a=e.let("value"),l=e.let("tag");ZZ(t,"}",()=>{let u=e.let("key");du({...t,data:u}),Ps(t,":"),e.if((0,X._)`${u} === ${i}`,()=>{du({...t,data:l}),e.assign((0,X._)`${r}[${u}]`,l),e.break()},()=>Kk({...t,data:a}))}),e.assign(Ie.default.jsonPos,o),e.if((0,X._)`${l} === undefined`),mo(t,(0,X.str)`discriminator tag not found`);for(let u in s)e.elseIf((0,X._)`${l} === ${u}`),eee({...t,schema:s[u]},i);e.else(),mo(t,(0,X.str)`discriminator value not in schema`),e.endIf()}function GZ(t){let{gen:e,data:r}=t;Ps(t,"{"),e.assign(r,(0,X._)`{}`),eee(t)}function eee(t,e){let{gen:r,schema:n,data:i}=t,{properties:s,optionalProperties:o,additionalProperties:a}=n;if(Gk(t,"}",()=>{let l=r.let("key");if(du({...t,data:l}),Ps(t,":"),r.if(!1),KZ(t,l,s),KZ(t,l,o),e){r.elseIf((0,X._)`${l} === ${e}`);let u=r.let("tag");du({...t,data:u})}r.else(),a?Kk({...t,data:(0,X._)`${i}[${l}]`}):mo(t,(0,X.str)`property ${l} not allowed`),r.endIf()}),s){let l=(0,bze.hasPropFunc)(r),u=(0,X.and)(...Object.keys(s).map(c=>(0,X._)`${l}.call(${i}, ${c})`));r.if((0,X.not)(u),()=>mo(t,(0,X.str)`missing required properties`))}}function KZ(t,e,r={}){let{gen:n}=t;for(let i in r)n.elseIf((0,X._)`${e} === ${i}`),tee(t,e,r[i])}function tee(t,e,r){Jv({...t,schema:r,data:(0,X._)`${t.data}[${e}]`})}function Nze(t){let{gen:e,schema:r,data:n,self:i}=t;switch(r.type){case"boolean":Tze(t);break;case"string":du(t);break;case"timestamp":{du(t);let s=(0,QZ.useFunc)(e,Eze.default),{allowDate:o,parseDate:a}=i.opts,l=o?(0,X._)`!${s}(${n}, true)`:(0,X._)`!${s}(${n})`,u=a?(0,X.or)(l,(0,X._)`(${n} = new Date(${n}), false)`,(0,X._)`isNaN(${n}.valueOf())`):l;e.if(u,()=>mo(t,(0,X.str)`invalid timestamp`));break}case"float32":case"float64":Hk(t);break;default:{let s=r.type;if(!i.opts.int32range&&(s==="int32"||s==="uint32"))Hk(t,16),s==="uint32"&&e.if((0,X._)`${n} < 0`,()=>mo(t,(0,X.str)`integer out of range`));else{let[o,a,l]=wze.intRange[s];Hk(t,l),e.if((0,X._)`${n} < ${o} || ${n} > ${a}`,()=>mo(t,(0,X.str)`integer out of range`))}}}}function du(t){Ps(t,'"'),Yk(t,Wk.parseJsonString)}function Cze(t){let{gen:e,data:r,schema:n}=t,i=n.enum;Ps(t,'"'),e.if(!1);for(let s of i){let o=JSON.stringify(s).slice(1);e.elseIf((0,X._)`${Qv(o.length)} === ${o}`),e.assign(r,(0,X.str)`${s}`),e.add(Ie.default.jsonPos,o.length)}e.else(),kf(t),e.endIf()}function Hk(t,e){let{gen:r}=t;Jk(t),r.if((0,X._)`"-0123456789".indexOf(${Qv(1)}) < 0`,()=>kf(t),()=>Yk(t,Wk.parseJsonNumber,e))}function YZ(t,e){return r=>{let{gen:n,data:i}=r;vm(r,`${t}`,()=>e(r),()=>n.assign(i,t))}}function kze(t){let{gen:e,self:r,definitions:n,schema:i,schemaEnv:s}=t,{ref:o}=i,a=n[o];if(!a)throw new _ze.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,vze.hasRef)(a))return Jv({...t,schema:a});let{root:l}=s,u=XZ.call(r,new JZ.SchemaEnv({schema:a,root:l}),n);ree(t,qze(e,u),!0)}function qze(t,e){return e.parse?t.scopeValue("parse",{ref:e.parse}):(0,X._)`${t.scopeValue("wrapper",{ref:e})}.parse`}function Kk(t){Yk(t,Wk.parseJson)}function Yk(t,e,r){ree(t,(0,QZ.useFunc)(t.gen,e),r)}function ree(t,e,r){let{gen:n,data:i}=t;n.assign(i,(0,X._)`${e}(${Ie.default.json}, ${Ie.default.jsonPos}${r?(0,X._)`, ${r}`:X.nil})`),n.assign(Ie.default.jsonPos,(0,X._)`${e}.position`),n.if((0,X._)`${i} === undefined`,()=>mo(t,(0,X._)`${e}.message`))}function Ps(t,e){vm(t,e,kf)}function vm(t,e,r,n){let{gen:i}=t,s=e.length;Jk(t),i.if((0,X._)`${Qv(s)} === ${e}`,()=>{i.add(Ie.default.jsonPos,s),n?.(t)},()=>r(t))}function Jk({gen:t,char:e}){t.code((0,X._)`while((${e}=${Ie.default.json}[${Ie.default.jsonPos}],${e}===" "||${e}==="\\n"||${e}==="\\r"||${e}==="\\t"))${Ie.default.jsonPos}++;`)}function Qv(t){return t===1?(0,X._)`${Ie.default.json}[${Ie.default.jsonPos}]`:(0,X._)`${Ie.default.json}.slice(${Ie.default.jsonPos}, ${Ie.default.jsonPos}+${t})`}function kf(t){mo(t,(0,X._)`"unexpected token " + ${Ie.default.json}[${Ie.default.jsonPos}]`)}function mo({gen:t,parseName:e},r){t.assign((0,X._)`${e}.message`,r),t.assign((0,X._)`${e}.position`,Ie.default.jsonPos),t.return(zk)}});var eq=g((bt,Zk)=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.MissingRefError=bt.ValidationError=bt.CodeGen=bt.Name=bt.nil=bt.stringify=bt.str=bt._=bt.KeywordCxt=bt.Ajv=void 0;var xze=kC(),jze=CZ(),Mze=jZ(),Lze=HZ(),Dze=nee(),Xk="JTD-meta-schema",qf=class extends xze.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(jze.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(Mze.default,Xk,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Xk)?Xk:void 0)}compileSerializer(e){let r=this._addSchema(e);return r.serialize||this._compileSerializer(r)}compileParser(e){let r=this._addSchema(e);return r.parse||this._compileParser(r)}_compileSerializer(e){if(Lze.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw new Error("ajv implementation error");return e.serialize}_compileParser(e){if(Dze.default.call(this,e,e.schema.definitions||{}),!e.parse)throw new Error("ajv implementation error");return e.parse}};bt.Ajv=qf;Zk.exports=bt=qf;Zk.exports.Ajv=qf;Object.defineProperty(bt,"__esModule",{value:!0});bt.default=qf;var Fze=vf();Object.defineProperty(bt,"KeywordCxt",{enumerable:!0,get:function(){return Fze.KeywordCxt}});var xf=ee();Object.defineProperty(bt,"_",{enumerable:!0,get:function(){return xf._}});Object.defineProperty(bt,"str",{enumerable:!0,get:function(){return xf.str}});Object.defineProperty(bt,"stringify",{enumerable:!0,get:function(){return xf.stringify}});Object.defineProperty(bt,"nil",{enumerable:!0,get:function(){return xf.nil}});Object.defineProperty(bt,"Name",{enumerable:!0,get:function(){return xf.Name}});Object.defineProperty(bt,"CodeGen",{enumerable:!0,get:function(){return xf.CodeGen}});var Uze=rm();Object.defineProperty(bt,"ValidationError",{enumerable:!0,get:function(){return Uze.default}});var Bze=lo();Object.defineProperty(bt,"MissingRefError",{enumerable:!0,get:function(){return Bze.default}})});var tq=g((Gst,iee)=>{"use strict";var Vze=Uc();iee.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:Vze,addUsedSchema:!1,allErrors:!1})});var aee=g((Kst,oee)=>{"use strict";var Hze=lZ().default,zze=eq(),see=tq(),rq=class{constructor(e,r){r.mode==="JTD"?this.ajv=new zze(Object.assign({},see,r.customOptions)):this.ajv=new Hze(Object.assign({},see,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let s of r.plugins)Array.isArray(s)?(n=n&&s[0].name!=="formatsPlugin",s[0](this.ajv,s[1])):(n=n&&s.name!=="formatsPlugin",s(this.ajv));n&&ON()(this.ajv),r.onCreate?.(this.ajv);let i=Object.values(e);for(let s of i)this.ajv.addSchema(s)}buildValidatorFunction({schema:e}){if(e.$id){let r=this.ajv.getSchema(e.$id);if(r)return r}return this.ajv.compile(e)}};oee.exports=rq});var uee=g((Yst,lee)=>{"use strict";var Wze=eq(),Gze=tq(),nq=class{constructor(e,r){this.ajv=new Wze(Object.assign({},Gze,r))}buildSerializerFunction({schema:e}){return this.ajv.compileSerializer(e)}};lee.exports=nq});var dee=g((Em,fee)=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});var wm=_v(),ji=df();function cee(t,e){if(!t.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=t.scope.opts;return typeof e=="function"?i(e.source):e!==void 0?s(e,n):s(t.schemas,a=>a.meta?void 0:t.compile(a.schema));function n(a){let l=t.getSchema(a);if(!l)throw new Error(`moduleCode: no schema with id ${a}`);return l}function i(a){let l={},u=a?.validateName,c=o(l,a);return t.opts.code.esm?`"use strict";${r}export const validate = ${u};${r}export default ${u};${r}${c}`:`"use strict";${r}module.exports = ${u};${r}module.exports.default = ${u};${r}${c}`}function s(a,l){var u;let c={},f=(0,ji._)`"use strict";`;for(let h in a){let d=l(a[h]);if(d){let p=o(c,d.source),m=t.opts.code.esm?(0,ji._)`export const ${(0,ji.getEsmExportName)(h)}`:(0,ji._)`exports${(0,ji.getProperty)(h)}`;f=(0,ji._)`${f}${r}${m} = ${(u=d.source)===null||u===void 0?void 0:u.validateName};${r}${p}`}}return`${f}`}function o(a,l){if(!l)throw new Error('moduleCode: function does not have "source" property');if(h(l.validateName)===wm.UsedValueState.Completed)return ji.nil;d(l.validateName,wm.UsedValueState.Started);let u=t.scope.scopeCode(l.scopeValues,a,f),c=new ji._Code(`${u}${r}${l.validateCode}`);return l.evaluated?(0,ji._)`${c}${l.validateName}.evaluated = ${l.evaluated};${r}`:c;function f(p){var m;let y=(m=p.value)===null||m===void 0?void 0:m.ref;if(p.prefix==="validate"&&typeof y=="function")return o(a,y.source);if((p.prefix==="root"||p.prefix==="wrapper")&&typeof y=="object"){let{validate:_,validateName:w}=y;if(!w)throw new Error("ajv internal error");let v=t.opts.code.es5?wm.varKinds.var:wm.varKinds.const,b=(0,ji._)`${v} ${p} = {validate: ${w}};`;if(h(w)===wm.UsedValueState.Started)return b;let E=o(a,_?.source);return(0,ji._)`${b}${r}${E}`}}function h(p){var m;return(m=a[p.prefix])===null||m===void 0?void 0:m.get(p)}function d(p,m){let{prefix:y}=p;(a[y]=a[y]||new Map).set(p,m)}}}fee.exports=Em=cee;Object.defineProperty(Em,"__esModule",{value:!0});Em.default=cee});var mee=g((Jst,pee)=>{"use strict";var hee=iq(),Kze=dee().default;function Yze(t={readMode:!0}){if(t.readMode===!0&&!t.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(t.readMode!==!0&&!t.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=hee();return function(n,i={}){(!i.customOptions||!i.customOptions.code)&&(i.customOptions=Object.assign({},i.customOptions,{code:{source:!0}}));let s=e(n,i);return function(o){let a=s(o),l=Kze(s[hee.AjvReference].ajv,a);return t.storeFunction(o,l),a}}}pee.exports=Yze});var iq=g((Qst,jf)=>{"use strict";var yee=Symbol.for("fastify.ajv-compiler.reference"),Jze=aee(),Qze=uee();function sq(t){let e=new Map,r=new Map;return t&&t.jtdSerializer===!0?function(i,s){let o=gee({},s);if(r.has(o))return r.get(o);let a=new Qze(i,s),l=a.buildSerializerFunction.bind(a);return r.set(o,l),l}:function(i,s){let o=gee(i,s.customOptions);if(e.has(o))return e.get(o);let a=new Jze(i,s),l=a.buildValidatorFunction.bind(a);return e.set(o,l),s.customOptions.code!==void 0&&(l[yee]=a),l}}function gee(t,e){let r=JSON.stringify(t),n=JSON.stringify(e);return`${r}${n}`}jf.exports=sq;jf.exports.default=sq;jf.exports.AjvCompiler=sq;jf.exports.AjvReference=yee;jf.exports.StandaloneValidator=mee()});var oq=g((Xst,_ee)=>{"use strict";var{buildSchemas:Xze}=Ah(),Zze=VN(),eWe=iq();function tWe(t,e){if(t)return new Mf(t,e);let r=Object.assign({buildValidator:null,buildSerializer:null},e?.compilersFactory);r.buildValidator||(r.buildValidator=eWe()),r.buildSerializer||(r.buildSerializer=Zze());let n={bucket:e&&e.bucket||Xze,compilersFactory:r,isCustomValidatorCompiler:typeof e?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof e?.compilersFactory?.buildValidator=="function"};return new Mf(void 0,n)}var Mf=class{constructor(e,r){this.opts=r||e?.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,e?(this.schemaBucket=this.opts.bucket(e.getSchemas()),this.validatorCompiler=e.getValidatorCompiler(),this.serializerCompiler=e.getSerializerCompiler(),this.isCustomValidatorCompiler=e.isCustomValidatorCompiler,this.isCustomSerializerCompiler=e.isCustomSerializerCompiler,this.parent=e):(this.schemaBucket=this.opts.bucket(),this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1)}add(e){return this.addedSchemas=!0,this.schemaBucket.add(e)}getSchema(e){return this.schemaBucket.getSchema(e)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildValidator:()=>e}),this.validatorCompiler=e,this.isCustomValidatorCompiler=!0}setSerializerCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildSerializer:()=>e}),this.serializerCompiler=e,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(e){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),e.ajv))}setupSerializer(e){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),e.serializerOpts))}};Mf.buildSchemaController=tWe;_ee.exports=Mf});var Sm=g((Zst,bee)=>{"use strict";var rWe="2.0.0",nWe=Number.MAX_SAFE_INTEGER||9007199254740991,iWe=16,sWe=250,oWe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];bee.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:iWe,MAX_SAFE_BUILD_LENGTH:sWe,MAX_SAFE_INTEGER:nWe,RELEASE_TYPES:oWe,SEMVER_SPEC_VERSION:rWe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Rm=g((eot,vee)=>{"use strict";var aWe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};vee.exports=aWe});var Lf=g((go,wee)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:aq,MAX_SAFE_BUILD_LENGTH:lWe,MAX_LENGTH:uWe}=Sm(),cWe=Rm();go=wee.exports={};var fWe=go.re=[],dWe=go.safeRe=[],V=go.src=[],H=go.t={},hWe=0,lq="[a-zA-Z0-9-]",pWe=[["\\s",1],["\\d",uWe],[lq,lWe]],mWe=t=>{for(let[e,r]of pWe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},ue=(t,e,r)=>{let n=mWe(e),i=hWe++;cWe(t,i,e),H[t]=i,V[i]=e,fWe[i]=new RegExp(e,r?"g":void 0),dWe[i]=new RegExp(n,r?"g":void 0)};ue("NUMERICIDENTIFIER","0|[1-9]\\d*");ue("NUMERICIDENTIFIERLOOSE","\\d+");ue("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${lq}*`);ue("MAINVERSION",`(${V[H.NUMERICIDENTIFIER]})\\.(${V[H.NUMERICIDENTIFIER]})\\.(${V[H.NUMERICIDENTIFIER]})`);ue("MAINVERSIONLOOSE",`(${V[H.NUMERICIDENTIFIERLOOSE]})\\.(${V[H.NUMERICIDENTIFIERLOOSE]})\\.(${V[H.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASEIDENTIFIER",`(?:${V[H.NUMERICIDENTIFIER]}|${V[H.NONNUMERICIDENTIFIER]})`);ue("PRERELEASEIDENTIFIERLOOSE",`(?:${V[H.NUMERICIDENTIFIERLOOSE]}|${V[H.NONNUMERICIDENTIFIER]})`);ue("PRERELEASE",`(?:-(${V[H.PRERELEASEIDENTIFIER]}(?:\\.${V[H.PRERELEASEIDENTIFIER]})*))`);ue("PRERELEASELOOSE",`(?:-?(${V[H.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${V[H.PRERELEASEIDENTIFIERLOOSE]})*))`);ue("BUILDIDENTIFIER",`${lq}+`);ue("BUILD",`(?:\\+(${V[H.BUILDIDENTIFIER]}(?:\\.${V[H.BUILDIDENTIFIER]})*))`);ue("FULLPLAIN",`v?${V[H.MAINVERSION]}${V[H.PRERELEASE]}?${V[H.BUILD]}?`);ue("FULL",`^${V[H.FULLPLAIN]}$`);ue("LOOSEPLAIN",`[v=\\s]*${V[H.MAINVERSIONLOOSE]}${V[H.PRERELEASELOOSE]}?${V[H.BUILD]}?`);ue("LOOSE",`^${V[H.LOOSEPLAIN]}$`);ue("GTLT","((?:<|>)?=?)");ue("XRANGEIDENTIFIERLOOSE",`${V[H.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ue("XRANGEIDENTIFIER",`${V[H.NUMERICIDENTIFIER]}|x|X|\\*`);ue("XRANGEPLAIN",`[v=\\s]*(${V[H.XRANGEIDENTIFIER]})(?:\\.(${V[H.XRANGEIDENTIFIER]})(?:\\.(${V[H.XRANGEIDENTIFIER]})(?:${V[H.PRERELEASE]})?${V[H.BUILD]}?)?)?`);ue("XRANGEPLAINLOOSE",`[v=\\s]*(${V[H.XRANGEIDENTIFIERLOOSE]})(?:\\.(${V[H.XRANGEIDENTIFIERLOOSE]})(?:\\.(${V[H.XRANGEIDENTIFIERLOOSE]})(?:${V[H.PRERELEASELOOSE]})?${V[H.BUILD]}?)?)?`);ue("XRANGE",`^${V[H.GTLT]}\\s*${V[H.XRANGEPLAIN]}$`);ue("XRANGELOOSE",`^${V[H.GTLT]}\\s*${V[H.XRANGEPLAINLOOSE]}$`);ue("COERCEPLAIN",`(^|[^\\d])(\\d{1,${aq}})(?:\\.(\\d{1,${aq}}))?(?:\\.(\\d{1,${aq}}))?`);ue("COERCE",`${V[H.COERCEPLAIN]}(?:$|[^\\d])`);ue("COERCEFULL",V[H.COERCEPLAIN]+`(?:${V[H.PRERELEASE]})?(?:${V[H.BUILD]})?(?:$|[^\\d])`);ue("COERCERTL",V[H.COERCE],!0);ue("COERCERTLFULL",V[H.COERCEFULL],!0);ue("LONETILDE","(?:~>?)");ue("TILDETRIM",`(\\s*)${V[H.LONETILDE]}\\s+`,!0);go.tildeTrimReplace="$1~";ue("TILDE",`^${V[H.LONETILDE]}${V[H.XRANGEPLAIN]}$`);ue("TILDELOOSE",`^${V[H.LONETILDE]}${V[H.XRANGEPLAINLOOSE]}$`);ue("LONECARET","(?:\\^)");ue("CARETTRIM",`(\\s*)${V[H.LONECARET]}\\s+`,!0);go.caretTrimReplace="$1^";ue("CARET",`^${V[H.LONECARET]}${V[H.XRANGEPLAIN]}$`);ue("CARETLOOSE",`^${V[H.LONECARET]}${V[H.XRANGEPLAINLOOSE]}$`);ue("COMPARATORLOOSE",`^${V[H.GTLT]}\\s*(${V[H.LOOSEPLAIN]})$|^$`);ue("COMPARATOR",`^${V[H.GTLT]}\\s*(${V[H.FULLPLAIN]})$|^$`);ue("COMPARATORTRIM",`(\\s*)${V[H.GTLT]}\\s*(${V[H.LOOSEPLAIN]}|${V[H.XRANGEPLAIN]})`,!0);go.comparatorTrimReplace="$1$2$3";ue("HYPHENRANGE",`^\\s*(${V[H.XRANGEPLAIN]})\\s+-\\s+(${V[H.XRANGEPLAIN]})\\s*$`);ue("HYPHENRANGELOOSE",`^\\s*(${V[H.XRANGEPLAINLOOSE]})\\s+-\\s+(${V[H.XRANGEPLAINLOOSE]})\\s*$`);ue("STAR","(<|>)?=?\\s*\\*");ue("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ue("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Xv=g((tot,Eee)=>{"use strict";var gWe=Object.freeze({loose:!0}),yWe=Object.freeze({}),_We=t=>t?typeof t!="object"?gWe:t:yWe;Eee.exports=_We});var uq=g((rot,Tee)=>{"use strict";var See=/^[0-9]+$/,Ree=(t,e)=>{let r=See.test(t),n=See.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},bWe=(t,e)=>Ree(e,t);Tee.exports={compareIdentifiers:Ree,rcompareIdentifiers:bWe}});var Cr=g((not,Iee)=>{"use strict";var Zv=Rm(),{MAX_LENGTH:Pee,MAX_SAFE_INTEGER:ew}=Sm(),{safeRe:$ee,t:Oee}=Lf(),vWe=Xv(),{compareIdentifiers:Df}=uq(),cq=class t{constructor(e,r){if(r=vWe(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Pee)throw new TypeError(`version is longer than ${Pee} characters`);Zv("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?$ee[Oee.LOOSE]:$ee[Oee.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ew||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ew||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ew||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<ew)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Zv("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Df(this.major,e.major)||Df(this.minor,e.minor)||Df(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Zv("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Df(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Zv("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Df(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Df(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Iee.exports=cq});var hu=g((iot,Nee)=>{"use strict";var Aee=Cr(),wWe=(t,e,r=!1)=>{if(t instanceof Aee)return t;try{return new Aee(t,e)}catch(n){if(!r)return null;throw n}};Nee.exports=wWe});var kee=g((sot,Cee)=>{"use strict";var EWe=hu(),SWe=(t,e)=>{let r=EWe(t,e);return r?r.version:null};Cee.exports=SWe});var xee=g((oot,qee)=>{"use strict";var RWe=hu(),TWe=(t,e)=>{let r=RWe(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};qee.exports=TWe});var Lee=g((aot,Mee)=>{"use strict";var jee=Cr(),PWe=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new jee(t instanceof jee?t.version:t,r).inc(e,n,i).version}catch{return null}};Mee.exports=PWe});var Uee=g((lot,Fee)=>{"use strict";var Dee=hu(),$We=(t,e)=>{let r=Dee(t,null,!0),n=Dee(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let c=l?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"};Fee.exports=$We});var Vee=g((uot,Bee)=>{"use strict";var OWe=Cr(),IWe=(t,e)=>new OWe(t,e).major;Bee.exports=IWe});var zee=g((cot,Hee)=>{"use strict";var AWe=Cr(),NWe=(t,e)=>new AWe(t,e).minor;Hee.exports=NWe});var Gee=g((fot,Wee)=>{"use strict";var CWe=Cr(),kWe=(t,e)=>new CWe(t,e).patch;Wee.exports=kWe});var Yee=g((dot,Kee)=>{"use strict";var qWe=hu(),xWe=(t,e)=>{let r=qWe(t,e);return r&&r.prerelease.length?r.prerelease:null};Kee.exports=xWe});var ei=g((hot,Qee)=>{"use strict";var Jee=Cr(),jWe=(t,e,r)=>new Jee(t,r).compare(new Jee(e,r));Qee.exports=jWe});var Zee=g((pot,Xee)=>{"use strict";var MWe=ei(),LWe=(t,e,r)=>MWe(e,t,r);Xee.exports=LWe});var tte=g((mot,ete)=>{"use strict";var DWe=ei(),FWe=(t,e)=>DWe(t,e,!0);ete.exports=FWe});var tw=g((got,nte)=>{"use strict";var rte=Cr(),UWe=(t,e,r)=>{let n=new rte(t,r),i=new rte(e,r);return n.compare(i)||n.compareBuild(i)};nte.exports=UWe});var ste=g((yot,ite)=>{"use strict";var BWe=tw(),VWe=(t,e)=>t.sort((r,n)=>BWe(r,n,e));ite.exports=VWe});var ate=g((_ot,ote)=>{"use strict";var HWe=tw(),zWe=(t,e)=>t.sort((r,n)=>HWe(n,r,e));ote.exports=zWe});var Tm=g((bot,lte)=>{"use strict";var WWe=ei(),GWe=(t,e,r)=>WWe(t,e,r)>0;lte.exports=GWe});var rw=g((vot,ute)=>{"use strict";var KWe=ei(),YWe=(t,e,r)=>KWe(t,e,r)<0;ute.exports=YWe});var fq=g((wot,cte)=>{"use strict";var JWe=ei(),QWe=(t,e,r)=>JWe(t,e,r)===0;cte.exports=QWe});var dq=g((Eot,fte)=>{"use strict";var XWe=ei(),ZWe=(t,e,r)=>XWe(t,e,r)!==0;fte.exports=ZWe});var nw=g((Sot,dte)=>{"use strict";var e9e=ei(),t9e=(t,e,r)=>e9e(t,e,r)>=0;dte.exports=t9e});var iw=g((Rot,hte)=>{"use strict";var r9e=ei(),n9e=(t,e,r)=>r9e(t,e,r)<=0;hte.exports=n9e});var hq=g((Tot,pte)=>{"use strict";var i9e=fq(),s9e=dq(),o9e=Tm(),a9e=nw(),l9e=rw(),u9e=iw(),c9e=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return i9e(t,r,n);case"!=":return s9e(t,r,n);case">":return o9e(t,r,n);case">=":return a9e(t,r,n);case"<":return l9e(t,r,n);case"<=":return u9e(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};pte.exports=c9e});var gte=g((Pot,mte)=>{"use strict";var f9e=Cr(),d9e=hu(),{safeRe:sw,t:ow}=Lf(),h9e=(t,e)=>{if(t instanceof f9e)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?sw[ow.COERCEFULL]:sw[ow.COERCE]);else{let l=e.includePrerelease?sw[ow.COERCERTLFULL]:sw[ow.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return d9e(`${n}.${i}.${s}${o}${a}`,e)};mte.exports=h9e});var _te=g(($ot,yte)=>{"use strict";var pq=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};yte.exports=pq});var ti=g((Oot,Ete)=>{"use strict";var p9e=/\s+/g,mq=class t{constructor(e,r){if(r=g9e(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof gq)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(p9e," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!vte(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&S9e(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&w9e)|(this.options.loose&&E9e))+":"+e,i=bte.get(n);if(i)return i;let s=this.options.loose,o=s?pn[Gr.HYPHENRANGELOOSE]:pn[Gr.HYPHENRANGE];e=e.replace(o,k9e(this.options.includePrerelease)),vt("hyphen replace",e),e=e.replace(pn[Gr.COMPARATORTRIM],_9e),vt("comparator trim",e),e=e.replace(pn[Gr.TILDETRIM],b9e),vt("tilde trim",e),e=e.replace(pn[Gr.CARETTRIM],v9e),vt("caret trim",e);let a=e.split(" ").map(f=>R9e(f,this.options)).join(" ").split(/\s+/).map(f=>C9e(f,this.options));s&&(a=a.filter(f=>(vt("loose invalid filter",f,this.options),!!f.match(pn[Gr.COMPARATORLOOSE])))),vt("range list",a);let l=new Map,u=a.map(f=>new gq(f,this.options));for(let f of u){if(vte(f))return[f];l.set(f.value,f)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return bte.set(n,c),c}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>wte(n,r)&&e.set.some(i=>wte(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new y9e(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(q9e(this.set[r],e,this.options))return!0;return!1}};Ete.exports=mq;var m9e=_te(),bte=new m9e,g9e=Xv(),gq=Pm(),vt=Rm(),y9e=Cr(),{safeRe:pn,t:Gr,comparatorTrimReplace:_9e,tildeTrimReplace:b9e,caretTrimReplace:v9e}=Lf(),{FLAG_INCLUDE_PRERELEASE:w9e,FLAG_LOOSE:E9e}=Sm(),vte=t=>t.value==="<0.0.0-0",S9e=t=>t.value==="",wte=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},R9e=(t,e)=>(vt("comp",t,e),t=$9e(t,e),vt("caret",t),t=T9e(t,e),vt("tildes",t),t=I9e(t,e),vt("xrange",t),t=N9e(t,e),vt("stars",t),t),Kr=t=>!t||t.toLowerCase()==="x"||t==="*",T9e=(t,e)=>t.trim().split(/\s+/).map(r=>P9e(r,e)).join(" "),P9e=(t,e)=>{let r=e.loose?pn[Gr.TILDELOOSE]:pn[Gr.TILDE];return t.replace(r,(n,i,s,o,a)=>{vt("tilde",t,n,i,s,o,a);let l;return Kr(i)?l="":Kr(s)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:Kr(o)?l=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(vt("replaceTilde pr",a),l=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):l=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,vt("tilde return",l),l})},$9e=(t,e)=>t.trim().split(/\s+/).map(r=>O9e(r,e)).join(" "),O9e=(t,e)=>{vt("caret",t,e);let r=e.loose?pn[Gr.CARETLOOSE]:pn[Gr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,l)=>{vt("caret",t,i,s,o,a,l);let u;return Kr(s)?u="":Kr(o)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Kr(a)?s==="0"?u=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:l?(vt("replaceCaret pr",l),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${l} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${l} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${l} <${+s+1}.0.0-0`):(vt("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),vt("caret return",u),u})},I9e=(t,e)=>(vt("replaceXRanges",t,e),t.split(/\s+/).map(r=>A9e(r,e)).join(" ")),A9e=(t,e)=>{t=t.trim();let r=e.loose?pn[Gr.XRANGELOOSE]:pn[Gr.XRANGE];return t.replace(r,(n,i,s,o,a,l)=>{vt("xRange",t,n,i,s,o,a,l);let u=Kr(s),c=u||Kr(o),f=c||Kr(a),h=f;return i==="="&&h&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&h?(c&&(o=0),a=0,i===">"?(i=">=",c?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",c?s=+s+1:o=+o+1),i==="<"&&(l="-0"),n=`${i+s}.${o}.${a}${l}`):c?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${o}.0${l} <${s}.${+o+1}.0-0`),vt("xRange return",n),n})},N9e=(t,e)=>(vt("replaceStars",t,e),t.trim().replace(pn[Gr.STAR],"")),C9e=(t,e)=>(vt("replaceGTE0",t,e),t.trim().replace(pn[e.includePrerelease?Gr.GTE0PRE:Gr.GTE0],"")),k9e=t=>(e,r,n,i,s,o,a,l,u,c,f,h)=>(Kr(n)?r="":Kr(i)?r=`>=${n}.0.0${t?"-0":""}`:Kr(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Kr(u)?l="":Kr(c)?l=`<${+u+1}.0.0-0`:Kr(f)?l=`<${u}.${+c+1}.0-0`:h?l=`<=${u}.${c}.${f}-${h}`:t?l=`<${u}.${c}.${+f+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),q9e=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(vt(t[n].semver),t[n].semver!==gq.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Pm=g((Iot,Ote)=>{"use strict";var $m=Symbol("SemVer ANY"),bq=class t{static get ANY(){return $m}constructor(e,r){if(r=Ste(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),_q("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===$m?this.value="":this.value=this.operator+this.semver.version,_q("comp",this)}parse(e){let r=this.options.loose?Rte[Tte.COMPARATORLOOSE]:Rte[Tte.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Pte(n[2],this.options.loose):this.semver=$m}toString(){return this.value}test(e){if(_q("Comparator.test",e,this.options.loose),this.semver===$m||e===$m)return!0;if(typeof e=="string")try{e=new Pte(e,this.options)}catch{return!1}return yq(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new $te(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new $te(this.value,r).test(e.semver):(r=Ste(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||yq(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||yq(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Ote.exports=bq;var Ste=Xv(),{safeRe:Rte,t:Tte}=Lf(),yq=hq(),_q=Rm(),Pte=Cr(),$te=ti()});var Om=g((Aot,Ite)=>{"use strict";var x9e=ti(),j9e=(t,e,r)=>{try{e=new x9e(e,r)}catch{return!1}return e.test(t)};Ite.exports=j9e});var Nte=g((Not,Ate)=>{"use strict";var M9e=ti(),L9e=(t,e)=>new M9e(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Ate.exports=L9e});var kte=g((Cot,Cte)=>{"use strict";var D9e=Cr(),F9e=ti(),U9e=(t,e,r)=>{let n=null,i=null,s=null;try{s=new F9e(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new D9e(n,r))}),n};Cte.exports=U9e});var xte=g((kot,qte)=>{"use strict";var B9e=Cr(),V9e=ti(),H9e=(t,e,r)=>{let n=null,i=null,s=null;try{s=new V9e(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new B9e(n,r))}),n};qte.exports=H9e});var Lte=g((qot,Mte)=>{"use strict";var vq=Cr(),z9e=ti(),jte=Tm(),W9e=(t,e)=>{t=new z9e(t,e);let r=new vq("0.0.0");if(t.test(r)||(r=new vq("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new vq(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||jte(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||jte(r,s))&&(r=s)}return r&&t.test(r)?r:null};Mte.exports=W9e});var Fte=g((xot,Dte)=>{"use strict";var G9e=ti(),K9e=(t,e)=>{try{return new G9e(t,e).range||"*"}catch{return null}};Dte.exports=K9e});var aw=g((jot,Hte)=>{"use strict";var Y9e=Cr(),Vte=Pm(),{ANY:J9e}=Vte,Q9e=ti(),X9e=Om(),Ute=Tm(),Bte=rw(),Z9e=iw(),e8e=nw(),t8e=(t,e,r,n)=>{t=new Y9e(t,n),e=new Q9e(e,n);let i,s,o,a,l;switch(r){case">":i=Ute,s=Z9e,o=Bte,a=">",l=">=";break;case"<":i=Bte,s=e8e,o=Ute,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(X9e(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let c=e.set[u],f=null,h=null;if(c.forEach(d=>{d.semver===J9e&&(d=new Vte(">=0.0.0")),f=f||d,h=h||d,i(d.semver,f.semver,n)?f=d:o(d.semver,h.semver,n)&&(h=d)}),f.operator===a||f.operator===l||(!h.operator||h.operator===a)&&s(t,h.semver))return!1;if(h.operator===l&&o(t,h.semver))return!1}return!0};Hte.exports=t8e});var Wte=g((Mot,zte)=>{"use strict";var r8e=aw(),n8e=(t,e,r)=>r8e(t,e,">",r);zte.exports=n8e});var Kte=g((Lot,Gte)=>{"use strict";var i8e=aw(),s8e=(t,e,r)=>i8e(t,e,"<",r);Gte.exports=s8e});var Qte=g((Dot,Jte)=>{"use strict";var Yte=ti(),o8e=(t,e,r)=>(t=new Yte(t,r),e=new Yte(e,r),t.intersects(e,r));Jte.exports=o8e});var Zte=g((Fot,Xte)=>{"use strict";var a8e=Om(),l8e=ei();Xte.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((c,f)=>l8e(c,f,r));for(let c of o)a8e(c,e,r)?(s=c,i||(i=c)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[c,f]of n)c===f?a.push(c):!f&&c===o[0]?a.push("*"):f?c===o[0]?a.push(`<=${f}`):a.push(`${c} - ${f}`):a.push(`>=${c}`);let l=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var sre=g((Uot,ire)=>{"use strict";var ere=ti(),Eq=Pm(),{ANY:wq}=Eq,Im=Om(),Sq=ei(),u8e=(t,e,r={})=>{if(t===e)return!0;t=new ere(t,r),e=new ere(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=f8e(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},c8e=[new Eq(">=0.0.0-0")],tre=[new Eq(">=0.0.0")],f8e=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===wq){if(e.length===1&&e[0].semver===wq)return!0;r.includePrerelease?t=c8e:t=tre}if(e.length===1&&e[0].semver===wq){if(r.includePrerelease)return!0;e=tre}let n=new Set,i,s;for(let d of t)d.operator===">"||d.operator===">="?i=rre(i,d,r):d.operator==="<"||d.operator==="<="?s=nre(s,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Sq(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let d of n){if(i&&!Im(d,String(i),r)||s&&!Im(d,String(s),r))return null;for(let p of e)if(!Im(d,String(p),r))return!1;return!0}let a,l,u,c,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(c=c||d.operator===">"||d.operator===">=",u=u||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=rre(i,d,r),a===d&&a!==i)return!1}else if(i.operator===">="&&!Im(i.semver,String(d),r))return!1}if(s){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(l=nre(s,d,r),l===d&&l!==s)return!1}else if(s.operator==="<="&&!Im(s.semver,String(d),r))return!1}if(!d.operator&&(s||i)&&o!==0)return!1}return!(i&&u&&!s&&o!==0||s&&c&&!i&&o!==0||h||f)},rre=(t,e,r)=>{if(!t)return e;let n=Sq(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},nre=(t,e,r)=>{if(!t)return e;let n=Sq(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};ire.exports=u8e});var ure=g((Bot,lre)=>{"use strict";var Rq=Lf(),ore=Sm(),d8e=Cr(),are=uq(),h8e=hu(),p8e=kee(),m8e=xee(),g8e=Lee(),y8e=Uee(),_8e=Vee(),b8e=zee(),v8e=Gee(),w8e=Yee(),E8e=ei(),S8e=Zee(),R8e=tte(),T8e=tw(),P8e=ste(),$8e=ate(),O8e=Tm(),I8e=rw(),A8e=fq(),N8e=dq(),C8e=nw(),k8e=iw(),q8e=hq(),x8e=gte(),j8e=Pm(),M8e=ti(),L8e=Om(),D8e=Nte(),F8e=kte(),U8e=xte(),B8e=Lte(),V8e=Fte(),H8e=aw(),z8e=Wte(),W8e=Kte(),G8e=Qte(),K8e=Zte(),Y8e=sre();lre.exports={parse:h8e,valid:p8e,clean:m8e,inc:g8e,diff:y8e,major:_8e,minor:b8e,patch:v8e,prerelease:w8e,compare:E8e,rcompare:S8e,compareLoose:R8e,compareBuild:T8e,sort:P8e,rsort:$8e,gt:O8e,lt:I8e,eq:A8e,neq:N8e,gte:C8e,lte:k8e,cmp:q8e,coerce:x8e,Comparator:j8e,Range:M8e,satisfies:L8e,toComparators:D8e,maxSatisfying:F8e,minSatisfying:U8e,minVersion:B8e,validRange:V8e,outside:H8e,gtr:z8e,ltr:W8e,intersects:G8e,simplifyRange:K8e,subset:Y8e,SemVer:d8e,re:Rq.re,src:Rq.src,tokens:Rq.t,SEMVER_SPEC_VERSION:ore.SEMVER_SPEC_VERSION,RELEASE_TYPES:ore.RELEASE_TYPES,compareIdentifiers:are.compareIdentifiers,rcompareIdentifiers:are.rcompareIdentifiers}});var Aq=g((Vot,Iq)=>{"use strict";var Tq=ure(),$q=A("node:assert"),Oq=Symbol.for("registered-plugin"),{kTestInternals:J8e}=Zt(),{exist:Q8e,existReply:X8e,existRequest:Z8e}=Y$(),{FST_ERR_PLUGIN_VERSION_MISMATCH:e6e,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:t6e,FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:r6e}=ur();function Am(t){return t[Symbol.for("plugin-meta")]}function cre(t){let e=fre(t);if(e)return e;let r=A.cache;if(r){let n=Object.keys(r);for(let i=0;i<n.length;i++){let s=n[i];if(r[s].exports===t)return s}}return t.name?t.name:null}function n6e(t){return t.toString().split(`
`,2).map(e=>e.trim()).join(" -- ")}function fre(t){return t[Symbol.for("fastify.display-name")]}function dre(t){return!!t[Symbol.for("skip-override")]}function hre(t){let e=Am(t);if(!e)return;let r=e.dependencies;r&&($q(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{$q(this[Oq].indexOf(n)>-1,`The dependency '${n}' of plugin '${e.name}' is not registered`)}))}function pre(t){let e=Am(t);if(!e)return;let{decorators:r,name:n}=e;r&&(r.fastify&&Pq(this,"Fastify",r.fastify,n),r.reply&&Pq(this,"Reply",r.reply,n),r.request&&Pq(this,"Request",r.request,n))}var i6e={Fastify:Q8e,Request:Z8e,Reply:X8e};function Pq(t,e,r,n){$q(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(i=>{let s=typeof n=="string"?` required by '${n}'`:"";if(!i6e[e].call(t,i))throw new t6e(i,s,e)})}function s6e(t){let e=Am(t);if(e==null||e?.fastify==null)return;let r=e.fastify,n=/-(?:rc|pre|alpha).+$/.test(this.version);if(!(n===!0&&Tq.gt(this.version,Tq.coerce(r))===!0)&&r&&Tq.satisfies(this.version,r,{includePrerelease:n})===!1)throw new e6e(e.name,r,this.version)}function o6e(t){let e=Am(t);if(!e)return;let r=e.name;if(r)return this[Oq].push(r),r}function a6e(t,e){if(t.constructor.name==="AsyncFunction"&&t.length===3)throw new r6e(e)}function l6e(t){let e=o6e.call(this,t)||cre(t);return a6e.call(this,t,e),s6e.call(this,t),pre.call(this,t),hre.call(this,t),dre(t)}Iq.exports={getPluginName:cre,getFuncPreview:n6e,kRegisteredPlugins:Oq,getDisplayName:fre,registerPlugin:l6e};Iq.exports[J8e]={shouldSkipOverride:dre,getMeta:Am,checkDecorators:pre,checkDependencies:hre}});var lw=g((zot,mre)=>{"use strict";function u6e(t,e){let r=e||f6e();return t?d6e(t,r):r}function c6e(t,e){return t.genReqId(e)}function f6e(){let e=0;return function(){return e=e+1&2147483647,`req-${e.toString(36)}`}}function d6e(t,e){return function(r){return r.headers[t]||e(r)}}mre.exports={getGenReqId:c6e,reqIdGenFactory:u6e}});var bre=g((Wot,_re)=>{"use strict";var gre=12,h6e=0,Nq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function p6e(t){var e=t.indexOf("%");if(e===-1)return t;for(var r=t.length,n="",i=0,s=0,o=e,a=gre;e>-1&&e<r;){var l=yre(t[e+1],4),u=yre(t[e+2],0),c=l|u,f=Nq[c];if(a=Nq[256+a+f],s=s<<6|c&Nq[364+f],a===gre)n+=t.slice(i,o),n+=s<=65535?String.fromCharCode(s):String.fromCharCode(55232+(s>>10),56320+(s&1023)),s=0,i=e+3,e=o=t.indexOf("%",i);else{if(a===h6e)return null;if(e+=3,e<r&&t.charCodeAt(e)===37)continue;return null}}return n+t.slice(i)}var m6e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function yre(t,e){var r=m6e[t];return r===void 0?255:r<<e}_re.exports=p6e});var Rre=g((Got,Sre)=>{"use strict";var vre=bre(),wre=/\+/g,Ere=function(){};Ere.prototype=Object.create(null);function g6e(t){let e=new Ere;if(typeof t!="string")return e;let r=t.length,n="",i="",s=-1,o=-1,a=!1,l=!1,u=!1,c=!1,f=!1,h=0;for(let d=0;d<r+1;d++)if(h=d!==r?t.charCodeAt(d):38,h===38){if(f=o>s,f||(o=d),n=t.slice(s+1,o),f||n.length>0){u&&(n=n.replace(wre," ")),a&&(n=vre(n)||n),f&&(i=t.slice(o+1,d),c&&(i=i.replace(wre," ")),l&&(i=vre(i)||i));let p=e[n];p===void 0?e[n]=i:p.pop?p.push(i):e[n]=[p,i]}i="",s=d,o=d,a=!1,l=!1,u=!1,c=!1}else h===61?o<=s?o=d:l=!0:h===43?o>s?c=!0:u=!0:h===37&&(o>s?l=!0:a=!0);return e}Sre.exports=g6e});var Pre=g((Kot,Tre)=>{"use strict";var $s=Array.from({length:256},(t,e)=>"%"+((e<16?"0":"")+e.toString(16)).toUpperCase()),y6e=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function _6e(t){let e=t.length;if(e===0)return"";let r="",n=0,i=0;e:for(;i<e;i++){let s=t.charCodeAt(i);for(;s<128;){if(y6e[s]!==1&&(n<i&&(r+=t.slice(n,i)),n=i+1,r+=$s[s]),++i===e)break e;s=t.charCodeAt(i)}if(n<i&&(r+=t.slice(n,i)),s<2048){n=i+1,r+=$s[192|s>>6]+$s[128|s&63];continue}if(s<55296||s>=57344){n=i+1,r+=$s[224|s>>12]+$s[128|s>>6&63]+$s[128|s&63];continue}if(++i,i>=e)throw new Error("URI malformed");let o=t.charCodeAt(i)&1023;n=i+1,s=65536+((s&1023)<<10|o),r+=$s[240|s>>18]+$s[128|s>>12&63]+$s[128|s>>6&63]+$s[128|s&63]}return n===0?t:n<e?r+t.slice(n):r}Tre.exports={encodeString:_6e}});var Ire=g((Yot,Ore)=>{"use strict";var{encodeString:Cq}=Pre();function $re(t){let e=typeof t;return e==="string"?Cq(t):e==="bigint"?t.toString():e==="boolean"?t?"true":"false":e==="number"&&Number.isFinite(t)?t<1e21?""+t:Cq(""+t):""}function b6e(t){let e="";if(t===null||typeof t!="object")return e;let r="&",n=Object.keys(t),i=n.length,s=0;for(let o=0;o<i;o++){let a=n[o],l=t[a],u=Cq(a)+"=";if(o&&(e+=r),Array.isArray(l)){s=l.length;for(let c=0;c<s;c++)c&&(e+=r),e+=u,e+=$re(l[c])}else e+=u,e+=$re(l)}return e}Ore.exports=b6e});var kre=g((Jot,Nm)=>{"use strict";var Are=Rre(),Nre=Ire(),Cre={parse:Are,stringify:Nre};Nm.exports=Cre;Nm.exports.default=Cre;Nm.exports.parse=Are;Nm.exports.stringify=Nre});var xre=g(qre=>{"use strict";Object.defineProperty(qre,"__esModule",{value:!0})});var jre=g(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.types=void 0;var v6e;(function(t){t[t.ROOT=0]="ROOT",t[t.GROUP=1]="GROUP",t[t.POSITION=2]="POSITION",t[t.SET=3]="SET",t[t.RANGE=4]="RANGE",t[t.REPETITION=5]="REPETITION",t[t.REFERENCE=6]="REFERENCE",t[t.CHAR=7]="CHAR"})(v6e=Cm.types||(Cm.types={}))});var Lre=g(Mre=>{"use strict";Object.defineProperty(Mre,"__esModule",{value:!0})});var _o=g(yo=>{"use strict";var w6e=yo&&yo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kq=yo&&yo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&w6e(e,t,r)};Object.defineProperty(yo,"__esModule",{value:!0});kq(xre(),yo);kq(jre(),yo);kq(Lre(),yo)});var uw=g(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.anyChar=kr.notWhitespace=kr.whitespace=kr.notInts=kr.ints=kr.notWords=kr.words=void 0;var Je=_o(),Dre=()=>[{type:Je.types.RANGE,from:48,to:57}],Fre=()=>[{type:Je.types.CHAR,value:95},{type:Je.types.RANGE,from:97,to:122},{type:Je.types.RANGE,from:65,to:90},{type:Je.types.RANGE,from:48,to:57}],Ure=()=>[{type:Je.types.CHAR,value:9},{type:Je.types.CHAR,value:10},{type:Je.types.CHAR,value:11},{type:Je.types.CHAR,value:12},{type:Je.types.CHAR,value:13},{type:Je.types.CHAR,value:32},{type:Je.types.CHAR,value:160},{type:Je.types.CHAR,value:5760},{type:Je.types.RANGE,from:8192,to:8202},{type:Je.types.CHAR,value:8232},{type:Je.types.CHAR,value:8233},{type:Je.types.CHAR,value:8239},{type:Je.types.CHAR,value:8287},{type:Je.types.CHAR,value:12288},{type:Je.types.CHAR,value:65279}],E6e=()=>[{type:Je.types.CHAR,value:10},{type:Je.types.CHAR,value:13},{type:Je.types.CHAR,value:8232},{type:Je.types.CHAR,value:8233}];kr.words=()=>({type:Je.types.SET,set:Fre(),not:!1});kr.notWords=()=>({type:Je.types.SET,set:Fre(),not:!0});kr.ints=()=>({type:Je.types.SET,set:Dre(),not:!1});kr.notInts=()=>({type:Je.types.SET,set:Dre(),not:!0});kr.whitespace=()=>({type:Je.types.SET,set:Ure(),not:!1});kr.notWhitespace=()=>({type:Je.types.SET,set:Ure(),not:!0});kr.anyChar=()=>({type:Je.types.SET,set:E6e(),not:!0})});var Vre=g(ri=>{"use strict";var S6e=ri&&ri.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),R6e=ri&&ri.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),T6e=ri&&ri.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&S6e(e,t,r);return R6e(e,t),e};Object.defineProperty(ri,"__esModule",{value:!0});ri.tokenizeClass=ri.strToChars=void 0;var Bre=_o(),Ff=T6e(uw()),P6e="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?";ri.strToChars=t=>{let e=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return t.replace(e,(r,n,i,s,o,a,l)=>{if(i)return r;let u=n?8:s?parseInt(s,16):o?parseInt(o,16):a?P6e.indexOf(a):{0:0,t:9,n:10,v:11,f:12,r:13}[l],c=String.fromCharCode(u);return/[[\]{}^$.|?*+()]/.test(c)?`\\${c}`:c})};ri.tokenizeClass=(t,e)=>{var r,n,i,s,o,a,l;let u=[],c,f,h=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;for(;(c=h.exec(t))!==null;){let d=(l=(a=(o=(s=(i=(n=(r=c[1]&&Ff.words())!==null&&r!==void 0?r:c[2]&&Ff.ints())!==null&&n!==void 0?n:c[3]&&Ff.whitespace())!==null&&i!==void 0?i:c[4]&&Ff.notWords())!==null&&s!==void 0?s:c[5]&&Ff.notInts())!==null&&o!==void 0?o:c[6]&&Ff.notWhitespace())!==null&&a!==void 0?a:c[7]&&{type:Bre.types.RANGE,from:(c[8]||c[9]).charCodeAt(0),to:(f=c[10]).charCodeAt(f.length-1)})!==null&&l!==void 0?l:(f=c[16])&&{type:Bre.types.CHAR,value:f.charCodeAt(0)};if(d)u.push(d);else return[u,h.lastIndex]}throw new SyntaxError(`Invalid regular expression: /${e}/: Unterminated character class`)}});var qq=g(Os=>{"use strict";var $6e=Os&&Os.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),O6e=Os&&Os.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Wre=Os&&Os.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$6e(e,t,r);return O6e(e,t),e};Object.defineProperty(Os,"__esModule",{value:!0});Os.tokenizer=void 0;var Hre=Wre(Vre()),yr=_o(),pu=Wre(uw()),I6e=/^[a-zA-Z_$]$/i,A6e=/^[a-zA-Z0-9_$]$/i,zre=/\d/;Os.tokenizer=t=>{let e=0,r,n={type:yr.types.ROOT,stack:[]},i=n,s=n.stack,o=[],a=[],l=0,u=f=>{throw new SyntaxError(`Invalid regular expression: /${t}/: Nothing to repeat at column ${f-1}`)},c=Hre.strToChars(t);for(;e<c.length;)switch(r=c[e++]){case"\\":if(e===c.length)throw new SyntaxError(`Invalid regular expression: /${t}/: \\ at end of pattern`);switch(r=c[e++]){case"b":s.push({type:yr.types.POSITION,value:"b"});break;case"B":s.push({type:yr.types.POSITION,value:"B"});break;case"w":s.push(pu.words());break;case"W":s.push(pu.notWords());break;case"d":s.push(pu.ints());break;case"D":s.push(pu.notInts());break;case"s":s.push(pu.whitespace());break;case"S":s.push(pu.notWhitespace());break;default:if(zre.test(r)){let f=r;for(;e<c.length&&zre.test(c[e]);)f+=c[e++];let h=parseInt(f,10),d={type:yr.types.REFERENCE,value:h};s.push(d),a.push({reference:d,stack:s,index:s.length-1})}else s.push({type:yr.types.CHAR,value:r.charCodeAt(0)})}break;case"^":s.push({type:yr.types.POSITION,value:"^"});break;case"$":s.push({type:yr.types.POSITION,value:"$"});break;case"[":{let f;c[e]==="^"?(f=!0,e++):f=!1;let h=Hre.tokenizeClass(c.slice(e),t);e+=h[1],s.push({type:yr.types.SET,set:h[0],not:f});break}case".":s.push(pu.anyChar());break;case"(":{let f={type:yr.types.GROUP,stack:[],remember:!0};if(c[e]==="?")if(r=c[e+1],e+=2,r==="=")f.followedBy=!0,f.remember=!1;else if(r==="!")f.notFollowedBy=!0,f.remember=!1;else if(r==="<"){let h="";if(I6e.test(c[e]))h+=c[e],e++;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${c[e]}' after '<' at column ${e+1}`);for(;e<c.length&&A6e.test(c[e]);)h+=c[e],e++;if(!h)throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${c[e]}' after '<' at column ${e+1}`);if(c[e]!==">")throw new SyntaxError(`Invalid regular expression: /${t}/: Unclosed capture group name, expected '>', found '${c[e]}' at column ${e+1}`);f.name=h,e++}else if(r===":")f.remember=!1;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid group, character '${r}' after '?' at column ${e-1}`);else l+=1;s.push(f),o.push(i),i=f,s=f.stack;break}case")":if(o.length===0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unmatched ) at column ${e-1}`);i=o.pop(),s=i.options?i.options[i.options.length-1]:i.stack;break;case"|":{i.options||(i.options=[i.stack],delete i.stack);let f=[];i.options.push(f),s=f;break}case"{":{let f=/^(\d+)(,(\d+)?)?\}/.exec(c.slice(e)),h,d;f!==null?(s.length===0&&u(e),h=parseInt(f[1],10),d=f[2]?f[3]?parseInt(f[3],10):1/0:h,e+=f[0].length,s.push({type:yr.types.REPETITION,min:h,max:d,value:s.pop()})):s.push({type:yr.types.CHAR,value:123});break}case"?":s.length===0&&u(e),s.push({type:yr.types.REPETITION,min:0,max:1,value:s.pop()});break;case"+":s.length===0&&u(e),s.push({type:yr.types.REPETITION,min:1,max:1/0,value:s.pop()});break;case"*":s.length===0&&u(e),s.push({type:yr.types.REPETITION,min:0,max:1/0,value:s.pop()});break;default:s.push({type:yr.types.CHAR,value:r.charCodeAt(0)})}if(o.length!==0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unterminated group`);return N6e(a,l),n};function N6e(t,e){for(let r of t.reverse())if(e<r.reference.value){r.reference.type=yr.types.CHAR;let n=r.reference.value.toString();if(r.reference.value=parseInt(n,8),!/^[0-7]+$/.test(n)){let i=0;for(;n[i]!=="8"&&n[i]!=="9";)i+=1;if(i===0?(r.reference.value=n.charCodeAt(0),i+=1):r.reference.value=parseInt(n.slice(0,i),8),n.length>i){let s=r.stack.splice(r.index+1);for(let o of n.slice(i))r.stack.push({type:yr.types.CHAR,value:o.charCodeAt(0)});r.stack.push(...s)}}}}});var Kre=g(qr=>{"use strict";var C6e=qr&&qr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),k6e=qr&&qr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),q6e=qr&&qr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&C6e(e,t,r);return k6e(e,t),e};Object.defineProperty(qr,"__esModule",{value:!0});qr.NOTANYCHAR=qr.WHITESPACE=qr.WORDS=qr.INTS=void 0;var cw=q6e(uw()),Gre=_o();function fw(t){let e={},r=0;for(let n of t)n.type===Gre.types.CHAR&&(e[n.value]=!0),n.type===Gre.types.RANGE&&(e[`${n.from}-${n.to}`]=!0),r+=1;return{lookup:()=>Object.assign({},e),len:r}}qr.INTS=fw(cw.ints().set);qr.WORDS=fw(cw.words().set);qr.WHITESPACE=fw(cw.whitespace().set);qr.NOTANYCHAR=fw(cw.anyChar().set)});var Jre=g(ni=>{"use strict";var x6e=ni&&ni.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),j6e=ni&&ni.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),M6e=ni&&ni.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&x6e(e,t,r);return j6e(e,t),e};Object.defineProperty(ni,"__esModule",{value:!0});ni.writeSetTokens=ni.setChar=void 0;var mw=_o(),dw=M6e(Kre());function pw(t){return t===94?"\\^":t===92?"\\\\":t===93?"\\]":t===45?"\\-":String.fromCharCode(t)}ni.setChar=pw;function hw(t,{lookup:e,len:r}){if(r!==t.length)return!1;let n=e();for(let i of t){if(i.type===mw.types.SET)return!1;let s=i.type===mw.types.CHAR?i.value:`${i.from}-${i.to}`;if(n[s])n[s]=!1;else return!1}return!0}function Yre(t,e=!1){if(hw(t.set,dw.INTS))return t.not?"\\D":"\\d";if(hw(t.set,dw.WORDS))return t.not?"\\W":"\\w";if(t.not&&hw(t.set,dw.NOTANYCHAR))return".";if(hw(t.set,dw.WHITESPACE))return t.not?"\\S":"\\s";let r="";for(let i=0;i<t.set.length;i++){let s=t.set[i];r+=L6e(s)}let n=`${t.not?"^":""}${r}`;return e?n:`[${n}]`}ni.writeSetTokens=Yre;function L6e(t){return t.type===mw.types.CHAR?pw(t.value):t.type===mw.types.RANGE?`${pw(t.from)}-${pw(t.to)}`:Yre(t,!0)}});var jq=g(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.reconstruct=void 0;var Na=_o(),xq=Jre(),Qre=t=>t.map(Uf.reconstruct).join(""),Xre=t=>{if("options"in t)return t.options.map(Qre).join("|");if("stack"in t)return Qre(t.stack);throw new Error("options or stack must be Root or Group token")};Uf.reconstruct=t=>{switch(t.type){case Na.types.ROOT:return Xre(t);case Na.types.CHAR:{let e=String.fromCharCode(t.value);return(/[[\\{}$^.|?*+()]/.test(e)?"\\":"")+e}case Na.types.POSITION:return t.value==="^"||t.value==="$"?t.value:`\\${t.value}`;case Na.types.REFERENCE:return`\\${t.value}`;case Na.types.SET:return xq.writeSetTokens(t);case Na.types.GROUP:return`(${t.name?`?<${t.name}>`:t.remember?"":t.followedBy?"?=":t.notFollowedBy?"?!":"?:"}${Xre(t)})`;case Na.types.REPETITION:{let{min:e,max:r}=t,n;return e===0&&r===1?n="?":e===1&&r===1/0?n="+":e===0&&r===1/0?n="*":r===1/0?n=`{${e},}`:e===r?n=`{${e}}`:n=`{${e},${r}}`,`${Uf.reconstruct(t.value)}${n}`}case Na.types.RANGE:return`${xq.setChar(t.from)}-${xq.setChar(t.to)}`;default:throw new Error(`Invalid token type ${t}`)}}});var tne=g((ii,gw)=>{"use strict";var D6e=ii&&ii.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mq=ii&&ii.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&D6e(e,t,r)};Object.defineProperty(ii,"__esModule",{value:!0});ii.types=void 0;var Zre=_o();Object.defineProperty(ii,"types",{enumerable:!0,get:function(){return Zre.types}});Mq(qq(),ii);Mq(jq(),ii);var ene=qq(),F6e=jq();Mq(_o(),ii);ii.default=ene.tokenizer;gw.exports=ene.tokenizer;gw.exports.types=Zre.types;gw.exports.reconstruct=F6e.reconstruct});var nne=g((aat,yw)=>{"use strict";var rne=tne(),U6e=rne.types;function Lq(t,e){e||(e={});let r=e.limit===void 0?25:e.limit;B6e(t)?t=t.source:typeof t!="string"&&(t=String(t));try{t=rne(t)}catch{return!1}let n=0;return function i(s,o){let a,l,u;if(s.type===U6e.REPETITION&&(o++,n++,o>1||n>r))return!1;if(s.options){for(a=0,u=s.options.length;a<u;a++)if(l=i({stack:s.options[a]},o),!l)return!1}let c=s.stack||s.value?.stack;if(!c)return!0;for(a=0;a<c.length;a++)if(l=i(c[a],o),!l)return!1;return!0}(t,0)}function B6e(t){return{}.toString.call(t)==="[object RegExp]"}yw.exports=Lq;yw.exports.default=Lq;yw.exports.safeRegex=Lq});var _w=g((lat,ine)=>{"use strict";ine.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let t={};return{get:e=>t[e]||null,set:(e,r)=>{t[e]=r}}},deriveConstraint:t=>t.method,mustMatchWhenDerived:!0}});var fne=g((uat,cne)=>{"use strict";var sne=Xs(),one=_w(),ane=Symbol("treeData");function lne(t,e=""){let r="",n=Object.keys(t);for(let i=0;i<n.length;i++){let s=n[i],o=t[s],a=i===n.length-1,l=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",u=a?"    ":"\u2502   ",f=(o[ane]||"").split(`
`).join(`
`+e+u);r+=e+l+s+f+`
`,r+=lne(o,e+u)}return r}function V6e(t){let e=t.name||"";return e=e.replace("bound","").trim(),e=(e||"anonymous")+"()",e}function une(t){return Array.isArray(t)?t.map(e=>une(e)):typeof t=="symbol"?t.toString():typeof t=="function"?V6e(t):t}function H6e(t,e){if(!e.includeMeta)return{};let r=e.buildPrettyMeta(t),n={},i=e.includeMeta;Array.isArray(i)||(i=Reflect.ownKeys(r));for(let s of i){if(!Object.prototype.hasOwnProperty.call(r,s))continue;let o=s.toString(),a=r[s];if(a!=null){let l=JSON.stringify(une(a));n[o]=l}}return n}function z6e(t){let e="";for(let[r,n]of Object.entries(t))e+=`
\u2022 (${r}) ${n}`;return e}function W6e(t){let e={...t.opts.constraints},r=e[one.name];return delete e[one.name],{...t,method:r,opts:{constraints:e}}}function G6e(t){let e=` (${t.method})`,r=t.opts.constraints||{};return Object.keys(r).length!==0&&(e+=" "+JSON.stringify(r)),e+=z6e(t.metaData),e}function K6e(t){return t.reduce((e,r)=>{for(let n of e)if(sne(r.opts.constraints,n.opts.constraints)&&sne(r.metaData,n.metaData))return n.method+=", "+r.method,e;return e.push(r),e},[])}function Y6e(t,e,r){let n=t.routes;return r.method===void 0&&(n=n.map(W6e)),n=n.map(i=>(i.metaData=H6e(i,r),i)),r.method===void 0&&(n=K6e(n)),n.map(G6e).join(`
${e}`)}function bw(t,e,r,n){if((t.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",e=e[r]={},t.isLeafNode&&(e[ane]=Y6e(t,r,n)),r=""),t.staticChildren)for(let i of Object.values(t.staticChildren))bw(i,e,r+i.prefix,n);if(t.parametricChildren)for(let i of Object.values(t.parametricChildren)){let s=Array.from(i.nodePaths).join("|");bw(i,e,r+s,n)}t.wildcardChild&&bw(t.wildcardChild,e,"*",n)}function J6e(t,e){let r={};return bw(t,r,t.prefix,e),lne(r)}cne.exports={prettyPrintTree:J6e}});var pne=g((cat,hne)=>{"use strict";var dne=function(){};dne.prototype=Object.create(null);hne.exports={NullObject:dne}});var gne=g((fat,mne)=>{"use strict";var{NullObject:Q6e}=pne(),X6e=_w(),Dq=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return e===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,r){let n=r.params,i=r.opts.constraints||{},s={params:n,constraints:i,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(i);o.length===0&&(this.unconstrainedHandler=s);for(let l of o)this.constraints.includes(l)||(l==="version"?this.constraints.unshift(l):this.constraints.push(l));let a=o.includes(X6e.name);if(!a&&this.handlers.length>=31)throw new Error("find-my-way supports a maximum of 31 route handlers per node when there are constraints, limit reached");this.handlers.push(s),this.handlers.sort((l,u)=>Object.keys(l.constraints).length-Object.keys(u.constraints).length),a||this._compileGetHandlerMatchingConstraints(e,i)}_compileCreateParamsObject(e){let r=[];r.push("const fn = function _createParamsObject (paramsArray) {"),r.push("const params = new NullObject()");for(let n=0;n<e.length;n++)r.push(`params['${e[n]}'] = paramsArray[${n}]`);return r.push("return params"),r.push("}"),r.push("return fn"),new Function("NullObject",r.join(`
`))(Q6e)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,r){for(let n=0;n<this.handlers.length;n++){let s=this.handlers[n].constraints[r];if(s!==void 0){let o=e.get(s)||0;o|=1<<n,e.set(s,o)}}}_constrainedIndexBitmask(e){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[e]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(e){this.constrainedHandlerStores={};for(let n of this.constraints){let i=e.newStoreForConstraint(n);this.constrainedHandlerStores[n]=i,this._buildConstraintStore(i,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let s=e.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${s}
      }
      if (candidates === 0) return null;
      `)}for(let n in e.strategies)e.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};mne.exports=Dq});var _ne=g((dat,yne)=>{"use strict";var Z6e=gne(),Tw={STATIC:0,PARAMETRIC:1,WILDCARD:2},vw=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new Z6e),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(r,e)}},ww=class extends vw{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,r){let n=this.staticChildren[e.charAt(r)];return n===void 0||!n.matchPrefix(e,r)?null:n}getStaticChild(e,r=0){if(e.length===r)return this;let n=this.findStaticMatchingChild(e,r);return n?n.getStaticChild(e,r+n.prefix.length):null}createStaticChild(e){if(e.length===0)return this;let r=this.staticChildren[e.charAt(0)];if(r){let i=1;for(;i<r.prefix.length;i++)if(e.charCodeAt(i)!==r.prefix.charCodeAt(i)){r=r.split(this,i);break}return r.createStaticChild(e.slice(i))}let n=e.charAt(0);return this.staticChildren[n]=new Ew(e),this.staticChildren[n]}},Ew=class t extends ww{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=Tw.STATIC,this._compilePrefixMatch()}getParametricChild(e){let r=e&&e.source,n=this.parametricChildren.find(i=>(i.regex&&i.regex.source)===r);return n||null}createParametricChild(e,r,n){let i=this.getParametricChild(e);return i?(i.nodePaths.add(n),i):(i=new Sw(e,r,n),this.parametricChildren.push(i),this.parametricChildren.sort((s,o)=>s.isRegex?o.isRegex?s.staticSuffix===null?1:o.staticSuffix===null?-1:o.staticSuffix.endsWith(s.staticSuffix)?1:s.staticSuffix.endsWith(o.staticSuffix)?-1:0:-1:1),i)}getWildcardChild(){return this.wildcardChild}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new Rw,this.wildcardChild}split(e,r){let n=this.prefix.slice(0,r),i=this.prefix.slice(r);this.prefix=i,this._compilePrefixMatch();let s=new t(n);return s.staticChildren[i.charAt(0)]=this,e.staticChildren[n.charAt(0)]=s,s}getNextNode(e,r,n,i){let s=this.findStaticMatchingChild(e,r),o=0;if(s===null){if(this.parametricChildren.length===0)return this.wildcardChild;s=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:i,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:i,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return s}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let e=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);e.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${e.join(" && ")}`)}},Sw=class extends ww{constructor(e,r,n){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=r||null,this.kind=Tw.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(e,r){return this.findStaticMatchingChild(e,r)}},Rw=class extends vw{constructor(){super(),this.kind=Tw.WILDCARD}getNextNode(){return null}};yne.exports={StaticNode:Ew,ParametricNode:Sw,WildcardNode:Rw,NODE_TYPES:Tw}});var vne=g((hat,bne)=>{"use strict";var eGe=A("node:assert");function km(){if(!(this instanceof km))return new km;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}km.prototype.set=function(t,e){if(typeof t!="string")throw new TypeError("Version should be a string");let[r,n,i]=t.split(".");if(isNaN(r))throw new TypeError("Major version must be a numeric value");return r=Number(r),n=Number(n)||0,i=Number(i)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=e,this.store["*"]=e,this.store["x.x"]=e,this.store["x.x.x"]=e),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=e,this.store[`${r}.x.x`]=e),i>=(this.maxPatches[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=i,this.store[`${r}.${n}.x`]=e),this.store[`${r}.${n}.${i}`]=e,this};km.prototype.get=function(t){return this.store[t]};bne.exports={name:"version",mustMatchWhenDerived:!0,storage:km,validate(t){eGe(typeof t=="string","Version should be a string")}}});var Ene=g((pat,wne)=>{"use strict";var tGe=A("node:assert");function rGe(){let t={},e=[];return{get:r=>{let n=t[r];if(n)return n;for(let i of e)if(i.host.test(r))return i.value},set:(r,n)=>{r instanceof RegExp?e.push({host:r,value:n}):t[r]=n}}}wne.exports={name:"host",mustMatchWhenDerived:!1,storage:rGe,validate(t){tGe(typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]","Host should be a string or a RegExp")}}});var Rne=g((mat,Sne)=>{"use strict";var nGe=vne(),iGe=Ene(),Fq=A("node:assert"),Uq=class{constructor(e){if(this.strategies={version:nGe,host:iGe},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(let r of Object.values(e))this.addConstraintStrategy(r)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){let r=this.strategies[e];return r!==void 0?r.isCustom||this.isStrategyUsed(e):!1}addConstraintStrategy(e){if(Fq(typeof e.name=="string"&&e.name!=="","strategy.name is required."),Fq(e.storage&&typeof e.storage=="function","strategy.storage function is required."),Fq(e.deriveConstraint&&typeof e.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw new Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=e.deriveConstraint.length===3,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,r,n){let i=this.deriveSyncConstraints(e,r);if(n===void 0)return i;this.deriveAsyncConstraints(i,e,r,n)}deriveSyncConstraints(e,r){}noteUsage(e){if(e){let r=this.strategiesInUse.size;for(let n in e)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw new Error(`No strategy registered for constraint key ${e}`);return this.strategies[e].storage()}validateConstraints(e){for(let r in e){let n=e[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let i=this.strategies[r];if(!i)throw new Error(`No strategy registered for constraint key ${r}`);i.validate&&i.validate(n)}}deriveAsyncConstraints(e,r,n,i){let s=this.asyncStrategiesInUse.size;if(s===0){i(null,e);return}e=e||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(l,u)=>{if(l!==null){i(l);return}e[o]=u,--s===0&&i(null,e)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let e=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];n.isCustom?e.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`):r==="version"?e.push("   version: req.headers['accept-version'],"):e.push("   host: req.headers.host || req.headers[':authority'],")}e.push("}"),this.deriveSyncConstraints=new Function("req","ctx",e.join(`
`)).bind(this)}};Sne.exports=Uq});var Pne=g((gat,Tne)=>{"use strict";var sGe=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];Tne.exports=sGe});var Ine=g((yat,One)=>{"use strict";function $ne(t,e){return t===50?e===53?"%":e===51?"#":e===52?"$":e===54?"&":e===66||e===98?"+":e===67||e===99?",":e===70||e===102?"/":null:t===51?e===65||e===97?":":e===66||e===98?";":e===68||e===100?"=":e===70||e===102?"?":null:t===52&&e===48?"@":null}function oGe(t,e){let r=!1,n=!1,i="";for(let o=1;o<t.length;o++){let a=t.charCodeAt(o);if(a===37){let l=t.charCodeAt(o+1),u=t.charCodeAt(o+2);$ne(l,u)===null?r=!0:(n=!0,l===50&&u===53&&(r=!0,t=t.slice(0,o+1)+"25"+t.slice(o+1),o+=2),o+=2)}else if(a===63||a===35||a===59&&e){i=t.slice(o+1),t=t.slice(0,o);break}}return{path:r?decodeURI(t):t,querystring:i,shouldDecodeParam:n}}function aGe(t){let e=t.indexOf("%");if(e===-1)return t;let r="",n=e;for(let i=e;i<t.length;i++)if(t.charCodeAt(i)===37){let s=t.charCodeAt(i+1),o=t.charCodeAt(i+2),a=$ne(s,o);r+=t.slice(n,i)+a,n=i+3}return t.slice(0,e)+r+t.slice(n)}One.exports={safeDecodeURI:oGe,safeDecodeURIComponent:aGe}});var Wq=g((_at,Mne)=>{"use strict";var Mt=A("node:assert"),lGe=kre(),Pw=nne(),Vq=Xs(),{prettyPrintTree:uGe}=fne(),{StaticNode:Ane,NODE_TYPES:Nne}=_ne(),cGe=Rne(),Bf=Pne(),Bq=_w(),{safeDecodeURI:fGe,safeDecodeURIComponent:Cne}=Ine(),kne=/^https?:\/\/.*?\//,mu=/(\/:[^/()]*?)\?(\/?)/;if(!Pw(kne))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!Pw(mu))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function Ct(t){if(!(this instanceof Ct))return new Ct(t);t=t||{},this._opts=t,t.defaultRoute?(Mt(typeof t.defaultRoute=="function","The default route must be a function"),this.defaultRoute=t.defaultRoute):this.defaultRoute=null,t.onBadUrl?(Mt(typeof t.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=t.onBadUrl):this.onBadUrl=null,t.buildPrettyMeta?(Mt(typeof t.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=t.buildPrettyMeta):this.buildPrettyMeta=dGe,t.querystringParser?(Mt(typeof t.querystringParser=="function","querystringParser must be a function"),this.querystringParser=t.querystringParser):this.querystringParser=e=>e===""?{}:lGe.parse(e),this.caseSensitive=t.caseSensitive===void 0?!0:t.caseSensitive,this.ignoreTrailingSlash=t.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=t.ignoreDuplicateSlashes||!1,this.maxParamLength=t.maxParamLength||100,this.allowUnsafeRegex=t.allowUnsafeRegex||!1,this.constrainer=new cGe(t.constraints),this.useSemicolonDelimiter=t.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}Ct.prototype.on=function(e,r,n,i,s){typeof n=="function"&&(i!==void 0&&(s=i),i=n,n={}),Mt(typeof r=="string","Path should be a string"),Mt(r.length>0,"The path could not be empty"),Mt(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),Mt(typeof i=="function","Handler should be a function");let o=r.match(mu);if(o){Mt(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let u=r.replace(mu,"$1$2"),c=r.replace(mu,"$2")||"/";this.on(e,u,n,i,s),this.on(e,c,n,i,s);return}let a=r;this.ignoreDuplicateSlashes&&(r=Hq(r)),this.ignoreTrailingSlash&&(r=zq(r));let l=Array.isArray(e)?e:[e];for(let u of l)Mt(typeof u=="string","Method should be a string"),Mt(Bf.includes(u),`Method '${u}' is not an http method.`),this._on(u,r,n,i,s,a)};Ct.prototype._on=function(e,r,n,i,s){let o={};n.constraints!==void 0&&(Mt(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[e]===void 0&&(this.trees[e]=new Ane("/"));let a=r;if(a==="*"&&this.trees[e].prefix.length!==0){let h=this.trees[e];this.trees[e]=new Ane(""),this.trees[e].staticChildren["/"]=h}let l=this.trees[e],u=l.prefix.length,c=[];for(let h=0;h<=a.length;h++){if(a.charCodeAt(h)===58&&a.charCodeAt(h+1)===58){h++;continue}let d=a.charCodeAt(h)===58&&a.charCodeAt(h+1)!==58,p=a.charCodeAt(h)===42;if(d||p||h===a.length&&h!==u){let m=a.slice(u,h);this.caseSensitive||(m=m.toLowerCase()),m=m.split("::").join(":"),m=m.split("%").join("%25"),l=l.createStaticChild(m)}if(d){let m=!1,y=!0,_="",w=[],v=h+1;for(let b=v;;b++){let E=a.charCodeAt(b),R=E===40,S=E===45||E===46,P=E===47||b===a.length;if(R||S||P){let T=a.slice(v,b);if(c.push(T),m=m||R||S,R){let N=jne(a,b),C=a.slice(b,N+1);this.allowUnsafeRegex||Mt(Pw(new RegExp(C)),`The regex '${C}' is not safe!`),w.push(xne(C)),b=N+1,y=!0}else w.push(y?"(.*?)":`(${_}|(?:(?!${_}).)*)`),y=!1;let O=b;for(;b<a.length;b++){let N=a.charCodeAt(b);if(N===47)break;if(N===58)if(a.charCodeAt(b+1)===58)b++;else break}let j=a.slice(O,b);if(j&&(j=j.split("::").join(":"),j=j.split("%").join("%25"),w.push(_=qne(j))),v=b+1,P||a.charCodeAt(b)===47||b===a.length){let N=m?"()"+j:j,C=a.slice(h,b);a=a.slice(0,h+1)+N+a.slice(b),h+=N.length;let z=m?new RegExp("^"+w.join("")+"$"):null;l=l.createParametricChild(z,j||null,C),u=h+1;break}}}}else if(p&&(c.push("*"),l=l.createWildcardChild(),u=h+1,h!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let h of this.routes){let d=h.opts.constraints||{};if(h.method===e&&h.pattern===a&&Vq(d,o))throw new Error(`Method '${e}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let f={method:e,path:r,pattern:a,params:c,opts:n,handler:i,store:s};this.routes.push(f),l.addRoute(f,this.constrainer)};Ct.prototype.hasRoute=function(e,r,n){return this.findRoute(e,r,n)!==null};Ct.prototype.findRoute=function(e,r,n={}){if(this.trees[e]===void 0)return null;let i=r,s=this.trees[e],o=s.prefix.length,a=[];for(let l=0;l<=i.length;l++){if(i.charCodeAt(l)===58&&i.charCodeAt(l+1)===58){l++;continue}let u=i.charCodeAt(l)===58&&i.charCodeAt(l+1)!==58,c=i.charCodeAt(l)===42;if(u||c||l===i.length&&l!==o){let f=i.slice(o,l);if(this.caseSensitive||(f=f.toLowerCase()),f=f.split("::").join(":"),f=f.split("%").join("%25"),s=s.getStaticChild(f),s===null)return null}if(u){let f=!1,h=!0,d="",p=[],m=l+1;for(let y=m;;y++){let _=i.charCodeAt(y),w=_===40,v=_===45||_===46,b=_===47||y===i.length;if(w||v||b){let E=i.slice(m,y);if(a.push(E),f=f||w||v,w){let P=jne(i,y),T=i.slice(y,P+1);this.allowUnsafeRegex||Mt(Pw(new RegExp(T)),`The regex '${T}' is not safe!`),p.push(xne(T)),y=P+1,h=!1}else p.push(h?"(.*?)":`(${d}|(?:(?!${d}).)*)`),h=!1;let R=y;for(;y<i.length;y++){let P=i.charCodeAt(y);if(P===47)break;if(P===58)if(i.charCodeAt(y+1)===58)y++;else break}let S=i.slice(R,y);if(S&&(S=S.split("::").join(":"),S=S.split("%").join("%25"),p.push(d=qne(S))),m=y+1,b||i.charCodeAt(y)===47||y===i.length){let P=f?"()"+S:S,T=i.slice(l,y);i=i.slice(0,l+1)+P+i.slice(y),l+=P.length;let O=f?new RegExp("^"+p.join("")+"$"):null;if(s=s.getParametricChild(O,S||null,T),s===null)return null;o=l+1;break}}}}else if(c&&(a.push("*"),s=s.getWildcardChild(),o=l+1,l!==i.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(i=i.toLowerCase());for(let l of this.routes){let u=l.opts.constraints||{};if(l.method===e&&l.pattern===i&&Vq(u,n))return{handler:l.handler,store:l.store,params:l.params}}return null};Ct.prototype.hasConstraintStrategy=function(t){return this.constrainer.hasConstraintStrategy(t)};Ct.prototype.addConstraintStrategy=function(t){this.constrainer.addConstraintStrategy(t),this._rebuild(this.routes)};Ct.prototype.reset=function(){this.trees={},this.routes=[]};Ct.prototype.off=function(e,r,n){Mt(typeof r=="string","Path should be a string"),Mt(r.length>0,"The path could not be empty"),Mt(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),Mt(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let i=r.match(mu);if(i){Mt(r.length===i.index+i[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(mu,"$1$2"),a=r.replace(mu,"$2");this.off(e,o,n),this.off(e,a,n);return}this.ignoreDuplicateSlashes&&(r=Hq(r)),this.ignoreTrailingSlash&&(r=zq(r));let s=Array.isArray(e)?e:[e];for(let o of s)this._off(o,r,n)};Ct.prototype._off=function(e,r,n){Mt(typeof e=="string","Method should be a string"),Mt(Bf.includes(e),`Method '${e}' is not an http method.`);function i(l){return e!==l.method||r!==l.path}function s(l){return i(l)||!Vq(n,l.opts.constraints||{})}let o=n?s:i,a=this.routes.filter(o);this._rebuild(a)};Ct.prototype.lookup=function(e,r,n,i){if(typeof n=="function"&&(i=n,n=void 0),i===void 0){let s=this.constrainer.deriveConstraints(e,n),o=this.find(e.method,e.url,s);return this.callHandler(o,e,r,n)}this.constrainer.deriveConstraints(e,n,(s,o)=>{if(s!==null){i(s);return}try{let a=this.find(e.method,e.url,o),l=this.callHandler(a,e,r,n);i(null,l)}catch(a){i(a)}})};Ct.prototype.callHandler=function(e,r,n,i){return e===null?this._defaultRoute(r,n,i):i===void 0?e.handler(r,n,e.params,e.store,e.searchParams):e.handler.call(i,r,n,e.params,e.store,e.searchParams)};Ct.prototype.find=function(e,r,n){let i=this.trees[e];if(i===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(kne,"/")),this.ignoreDuplicateSlashes&&(r=Hq(r));let s,o,a;try{s=fGe(r,this.useSemicolonDelimiter),r=s.path,o=s.querystring,a=s.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=zq(r));let l=r;this.caseSensitive===!1&&(r=r.toLowerCase());let u=this.maxParamLength,c=i.prefix.length,f=[],h=r.length,d=[];for(;;){if(c===h&&i.isLeafNode){let _=i.handlerStorage.getMatchingHandler(n);if(_!==null)return{handler:_.handler,store:_.store,params:_._createParamsObject(f),searchParams:this.querystringParser(o)}}let p=i.getNextNode(r,c,d,f.length);if(p===null){if(d.length===0)return null;let _=d.pop();c=_.brotherPathIndex,f.splice(_.paramsCount),p=_.brotherNode}if(i=p,i.kind===Nne.STATIC){c+=i.prefix.length;continue}if(i.kind===Nne.WILDCARD){let _=l.slice(c);a&&(_=Cne(_)),f.push(_),c=h;continue}let m=l.indexOf("/",c);m===-1&&(m=h);let y=l.slice(c,m);if(a&&(y=Cne(y)),i.isRegex){let _=i.regex.exec(y);if(_===null)continue;for(let w=1;w<_.length;w++){let v=_[w];if(v.length>u)return null;f.push(v)}}else{if(y.length>u)return null;f.push(y)}c=m}};Ct.prototype._rebuild=function(t){this.reset();for(let e of t){let{method:r,path:n,opts:i,handler:s,store:o}=e;this._on(r,n,i,s,o)}};Ct.prototype._defaultRoute=function(t,e,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(t,e):this.defaultRoute.call(r,t,e);e.statusCode=404,e.end()};Ct.prototype._onBadUrl=function(t){if(this.onBadUrl===null)return null;let e=this.onBadUrl;return{handler:(r,n,i)=>e(t,r,n),params:{},store:null}};Ct.prototype.prettyPrint=function(t={}){let e=t.method;t.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(e===void 0){let{version:n,host:i,...s}=this.constrainer.strategies;s[Bq.name]=Bq;let o=new Ct({...this._opts,constraints:s}),a=this.routes.map(l=>{let u={...l.opts.constraints,[Bq.name]:l.method};return{...l,method:"MERGED",opts:{constraints:u}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[e];return r==null?"(empty tree)":uGe(r,t)};for(let t in Bf){if(!Bf.hasOwnProperty(t))continue;let e=Bf[t],r=e.toLowerCase();Ct.prototype[r]=function(n,i,s){return this.on(e,n,i,s)}}Ct.prototype.all=function(t,e,r){this.on(Bf,t,e,r)};Mne.exports=Ct;function qne(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Hq(t){return t.replace(/\/\/+/g,"/")}function zq(t){return t.length>1&&t.charCodeAt(t.length-1)===47?t.slice(0,-1):t}function xne(t){return t.charCodeAt(1)===94&&(t=t.slice(0,1)+t.slice(2)),t.charCodeAt(t.length-2)===36&&(t=t.slice(0,t.length-2)+t.slice(t.length-1)),t}function jne(t,e){let r=1;for(;e<t.length;){if(e++,t[e]==="\\"){e++;continue}if(t[e]===")"?r--:t[e]==="("&&r++,!r)return e}throw new TypeError('Invalid regexp expression in "'+t+'"')}function dGe(t){return t?t.store?Object.assign({},t.store):{}:{}}});var Dne=g((bat,Lne)=>{"use strict";function Gq(t,e,r,n){if(r===void 0)return e.header("content-length","0"),n(null,null);if(typeof r.resume=="function")return r.on("error",s=>{e.log.error({err:s},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);let i=""+Buffer.byteLength(r);e.header("content-length",i),n(null,null)}function hGe(t){return t==null?Gq:Array.isArray(t)?[...t,Gq]:[t,Gq]}Lne.exports={parseHeadOnSendHandlers:hGe}});var tie=g((vat,eie)=>{"use strict";var pGe=Wq(),mGe=H0(),Fne=jP(),{onRequestAbortHookRunner:gGe,lifecycleHooks:Une,preParsingHookRunner:yGe,onTimeoutHookRunner:_Ge,onRequestHookRunner:bGe}=ea(),{normalizeSchema:vGe}=Ah(),{parseHeadOnSendHandlers:wGe}=Dne(),{compileSchemasForValidation:EGe,compileSchemasForSerialization:SGe}=NP(),{FST_ERR_SCH_VALIDATION_BUILD:RGe,FST_ERR_SCH_SERIALIZATION_BUILD:TGe,FST_ERR_DUPLICATED_ROUTE:PGe,FST_ERR_INVALID_URL:$Ge,FST_ERR_HOOK_INVALID_HANDLER:Bne,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:OGe,FST_ERR_ROUTE_DUPLICATED_HANDLER:IGe,FST_ERR_ROUTE_HANDLER_NOT_FN:Vne,FST_ERR_ROUTE_MISSING_HANDLER:AGe,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:NGe,FST_ERR_ROUTE_METHOD_INVALID:CGe,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:kGe,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:qGe,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:Kq}=ur(),{kRoutePrefix:xGe,kSupportedHTTPMethods:Qq,kLogLevel:jGe,kLogSerializers:Hne,kHooks:zne,kSchemaController:MGe,kOptions:Wne,kReplySerializerDefault:Yq,kReplyIsError:LGe,kRequestPayloadStream:DGe,kDisableRequestLogging:FGe,kSchemaErrorFormatter:UGe,kErrorHandler:Gne,kHasBeenDecorated:Kne,kRequestAcceptVersion:Jq,kRouteByFastify:BGe,kRouteContext:Yne}=Zt(),{buildErrorHandler:VGe}=Nh(),{createChildLogger:HGe}=Ih(),{getGenReqId:zGe}=lw();function WGe(t){let e=pGe(t.config),r,n,i,s,o,a,l,u,c,f,h,d,p=!1;return{setup(S,P){r=P.avvio,n=P.fourOhFour,i=P.logger,s=P.hasLogger,o=P.setupResponseListeners,a=P.throwIfAlreadyStarted,h=S.exposeHeadRoutes,l=S.disableRequestLogging,u=S.ignoreTrailingSlash,c=S.ignoreDuplicateSlashes,f=Object.hasOwn(S,"return503OnClosing")?S.return503OnClosing:!0,d=P.keepAliveConnections},routing:e.lookup.bind(e),route:E,hasRoute:v,prepareRoute:w,routeHandler:R,closeRoutes:()=>{p=!0},printRoutes:e.prettyPrint.bind(e),addConstraintStrategy:m,hasConstraintStrategy:y,isAsyncConstraint:_,findRoute:b};function m(S){return a("Cannot add constraint strategy!"),e.addConstraintStrategy(S)}function y(S){return e.hasConstraintStrategy(S)}function _(){return e.constrainer.asyncStrategiesInUse.size>0}function w({method:S,url:P,options:T,handler:O,isFastify:j}){if(typeof P!="string")throw new $Ge(typeof P);if(!O&&typeof T=="function")O=T,T={};else if(O&&typeof O=="function"){if(Object.prototype.toString.call(T)!=="[object Object]")throw new OGe(S,P);if(T.handler)throw typeof T.handler=="function"?new IGe(S,P):new Vne(S,P)}return T=Object.assign({},T,{method:S,url:P,path:P,handler:O||T&&T.handler}),E.call(this,{options:T,isFastify:j})}function v({options:S}){let P=S.method?.toUpperCase()??"";return e.hasRoute(P,S.url||"",S.constraints)}function b(S){let P=e.find(S.method,S.url||"",S.constraints);return P?{handler:P.handler,params:P.params,searchParams:P.searchParams}:null}function E({options:S,isFastify:P}){a("Cannot add route!");let T={...S},O=T.url||T.path||"";if(!T.handler)throw new AGe(T.method,O);if(T.errorHandler!==void 0&&typeof T.errorHandler!="function")throw new Vne(T.method,O);Zne(T.bodyLimit);let j=T.exposeHeadRoute??h,N=!1,C=!1;if(Array.isArray(T.method))for(let k=0;k<T.method.length;++k)T.method[k]=Jne.call(this,T.method[k]),Qne.call(this,T.method[k],O,T.schema),N=T.method.includes("GET"),C=T.method.includes("HEAD");else T.method=Jne.call(this,T.method),Qne.call(this,T.method,O,T.schema),N=T.method==="GET",C=T.method==="HEAD";let z=j&&N?{...S}:null,ge=this[xGe];if(O==="/"&&ge.length>0&&T.method!=="HEAD")switch(T.prefixTrailingSlash){case"slash":$.call(this,{path:O,isFastify:P});break;case"no-slash":$.call(this,{path:"",isFastify:P});break;case"both":default:$.call(this,{path:"",isFastify:P}),u!==!0&&(c!==!0||!ge.endsWith("/"))&&$.call(this,{path:O,prefixing:!0,isFastify:P})}else O[0]==="/"&&ge.endsWith("/")?$.call(this,{path:O.slice(1),isFastify:P}):$.call(this,{path:O,isFastify:P});return this;function $({path:k,prefixing:ae=!1,isFastify:U=!1}){let W=ge+k;if(T.url=W,T.path=W,T.routePath=k,T.prefix=ge,T.logLevel=T.logLevel||this[jGe],(this[Hne]||T.logSerializers)&&(T.logSerializers=Object.assign(Object.create(this[Hne]),T.logSerializers)),T.attachValidation==null&&(T.attachValidation=!1),ae===!1)for(let xe of this[zne].onRoute)xe.call(this,T);for(let xe of Une)if(T&&xe in T){if(Array.isArray(T[xe]))for(let wt of T[xe]){if(typeof wt!="function")throw new Bne(xe,Object.prototype.toString.call(wt));if(xe==="onSend"||xe==="preSerialization"||xe==="onError"||xe==="preParsing"){if(wt.constructor.name==="AsyncFunction"&&wt.length===4)throw new Kq}else if(xe==="onRequestAbort"){if(wt.constructor.name==="AsyncFunction"&&wt.length!==1)throw new Kq}else if(wt.constructor.name==="AsyncFunction"&&wt.length===3)throw new Kq}else if(T[xe]!==void 0&&typeof T[xe]!="function")throw new Bne(xe,Object.prototype.toString.call(T[xe]))}let Vt=T.constraints||{},Ae={...T.config,url:W,method:T.method},Ne=new mGe({schema:T.schema,handler:T.handler.bind(this),config:Ae,errorHandler:T.errorHandler,childLoggerFactory:T.childLoggerFactory,bodyLimit:T.bodyLimit,logLevel:T.logLevel,logSerializers:T.logSerializers,attachValidation:T.attachValidation,schemaErrorFormatter:T.schemaErrorFormatter,replySerializer:this[Yq],validatorCompiler:T.validatorCompiler,serializerCompiler:T.serializerCompiler,exposeHeadRoute:j,prefixTrailingSlash:T.prefixTrailingSlash||"both",server:this,isFastify:U}),Rt=e.findRoute("HEAD",T.url,Vt)!==null;try{e.on(T.method,T.url,{constraints:Vt},R,Ne)}catch(xe){if(!Ne[BGe])throw xe.message.includes(`Method '${T.method}' already declared for route`)?new PGe(T.method,T.url):xe}if(this.after((xe,wt)=>{Ne.errorHandler=T.errorHandler?VGe(this[Gne],T.errorHandler):this[Gne],Ne._parserOptions.limit=T.bodyLimit||null,Ne.logLevel=T.logLevel,Ne.logSerializers=T.logSerializers,Ne.attachValidation=T.attachValidation,Ne[Yq]=this[Yq],Ne.schemaErrorFormatter=T.schemaErrorFormatter||this[UGe]||Ne.schemaErrorFormatter,r.once("preReady",()=>{for(let Z of Une){let tr=this[zne][Z].concat(T[Z]||[]).map(xa=>xa.bind(this));Ne[Z]=tr.length?tr:null}for(;!Ne.Request[Kne]&&Ne.Request.parent;)Ne.Request=Ne.Request.parent;for(;!Ne.Reply[Kne]&&Ne.Reply.parent;)Ne.Reply=Ne.Reply.parent;if(n.setContext(this,Ne),T.schema){Ne.schema=vGe(Ne.schema,this.initialConfig);let Z=this[MGe];!T.validatorCompiler&&(T.schema.body||T.schema.headers||T.schema.querystring||T.schema.params)&&Z.setupValidator(this[Wne]);try{let tr=typeof T?.validatorCompiler=="function"||Z.isCustomValidatorCompiler;EGe(Ne,T.validatorCompiler||Z.validatorCompiler,tr)}catch(tr){throw new RGe(T.method,W,tr.message)}T.schema.response&&!T.serializerCompiler&&Z.setupSerializer(this[Wne]);try{SGe(Ne,T.serializerCompiler||Z.serializerCompiler)}catch(tr){throw new TGe(T.method,W,tr.message)}}}),wt(xe)}),j&&N&&!C&&!Rt){let xe=wGe(z.onSend);w.call(this,{method:"HEAD",url:k,options:{...z,onSend:xe},isFastify:!0})}}}function R(S,P,T,O,j){let N=zGe(O.server,S),C={level:O.logLevel};O.logSerializers&&(C.serializers=O.logSerializers);let z=HGe(O,i,S,N,C);if(z[FGe]=l,p===!0&&(S.httpVersionMajor!==2&&P.setHeader("Connection","close"),f)){let ae={"Content-Type":"application/json","Content-Length":"80"};P.writeHead(503,ae),P.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),z.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(S.headers.connection||"")==="keep-alive"&&d.has(S.socket)===!1&&(d.add(S.socket),S.socket.on("close",YGe.bind({keepAliveConnections:d,socket:S.socket}))),S.headers[Jq]!==void 0&&(S.headers["accept-version"]=S.headers[Jq],S.headers[Jq]=void 0);let $=new O.Request(N,T,S,j,z,O),k=new O.Reply(P,$,z);l===!1&&z.info({req:$},"incoming request"),(s===!0||O.onResponse!==null)&&o(k),O.onRequest!==null?bGe(O.onRequest,$,k,Xne):Xne(null,$,k),O.onRequestAbort!==null&&S.on("close",()=>{S.aborted&&gGe(O.onRequestAbort,$,GGe.bind(null,k))}),O.onTimeout!==null&&($.raw.socket._meta||$.raw.socket.on("timeout",KGe),$.raw.socket._meta={context:O,request:$,reply:k})}}function GGe(t,e){e&&t.log.error({err:e},"onRequestAborted hook failed")}function KGe(){let{context:t,request:e,reply:r}=this._meta;_Ge(t.onTimeout,e,r,JGe)}function Jne(t){if(typeof t!="string")throw new CGe;if(t=t.toUpperCase(),!this[Qq].bodyless.has(t)&&!this[Qq].bodywith.has(t))throw new NGe(t);return t}function Qne(t,e,r){if(this[Qq].bodyless.has(t)&&r?.body)throw new kGe(t,e)}function Zne(t){if(t!==void 0&&(!Number.isInteger(t)||t<=0))throw new qGe(t)}function Xne(t,e,r){if(r.sent!==!0){if(t!=null){r[LGe]=!0,r.send(t);return}e[DGe]=e.raw,e[Yne].preParsing!==null?yGe(e[Yne].preParsing,e,r,Fne.bind(e.server)):Fne.call(e.server,null,e,r)}}function YGe(){this.keepAliveConnections.delete(this.socket)}function JGe(){}eie.exports={buildRouting:WGe,validateBodyLimitOption:Zne}});var lie=g((wat,aie)=>{"use strict";var QGe=Wq(),rie=M0(),nie=V0(),XGe=H0(),{kRoutePrefix:ZGe,kCanSetNotFoundHandler:qm,kFourOhFourLevelInstance:xm,kFourOhFourContext:Is,kHooks:eKe,kErrorHandler:iie}=Zt(),{lifecycleHooks:tKe}=ea(),{buildErrorHandler:rKe}=Nh(),{FST_ERR_NOT_FOUND:nKe}=ur(),{createChildLogger:sie}=Ih(),{getGenReqId:oie}=lw();function iKe(t){let{logger:e,disableRequestLogging:r}=t,n=QGe({onBadUrl:a(),defaultRoute:f}),i=null;return{router:n,setNotFoundHandler:u,setContext:l,arrange404:s};function s(h){h[xm]=h,h[qm]=!0,n.onBadUrl=n.onBadUrl.bind(h),n.defaultRoute=n.defaultRoute.bind(h)}function o(h,d){let{url:p,method:m}=h.raw,y=`Route ${m}:${p} not found`;r||h.log.info(y),d.code(404).send({message:y,error:"Not Found",statusCode:404})}function a(){return function(d,p,m){let y=this[xm][Is],_=oie(y.server,p),w=sie(y,e,p,_),v=new nie(_,null,p,null,w,y),b=new rie(m,v,w);i(v,b)}}function l(h,d){let p=Object.assign({},h[Is]);p.onSend=d.onSend,d[Is]=p}function u(h,d,p,m){this[qm]===void 0&&(this[qm]=!0),this[Is]===void 0&&(this[Is]=null);let y=this,_=this[ZGe]||"/";if(this[qm]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${_}'`);typeof h=="object"&&(h.preHandler&&(Array.isArray(h.preHandler)?h.preHandler=h.preHandler.map(w=>w.bind(y)):h.preHandler=h.preHandler.bind(y)),h.preValidation&&(Array.isArray(h.preValidation)?h.preValidation=h.preValidation.map(w=>w.bind(y)):h.preValidation=h.preValidation.bind(y))),typeof h=="function"&&(d=h,h=void 0),h=h||{},d?(this[xm][qm]=!1,d=d.bind(this),i=d):(d=o,i=o),this.after((w,v)=>{c.call(this,_,h,d,p,m),v(w)})}function c(h,d,p,m,y){let _=new XGe({schema:d.schema,handler:p,config:d.config||{},server:this});if(m.once("preReady",()=>{let w=this[Is];for(let v of tKe){let b=this[eKe][v].concat(d[v]||[]).map(E=>E.bind(this));w[v]=b.length?b:null}w.errorHandler=d.errorHandler?rKe(this[iie],d.errorHandler):this[iie]}),this[Is]!==null&&h==="/"){Object.assign(this[Is],_);return}this[xm][Is]=_,n.all(h+(h.endsWith("/")?"*":"/*"),y,_),n.all(h,y,_)}function f(h,d){let p=this[xm][Is],m=oie(p.server,h),y=sie(p,e,h,m);y.info({req:h},"incoming request");let _=new nie(m,null,h,null,y,p),w=new rie(d,_,y);_.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),_.log.warn(n.prettyPrint()),w.code(404).send(new nKe)}}aie.exports=iKe});var uie=g((Eat,$w)=>{"use strict";$w.exports=Qe;$w.exports.default=Qe;var sKe={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{type:"boolean"},{type:"string"}],default:!1},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},useSemicolonDelimiter:{type:"boolean",default:!1},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},oKe=Object.prototype.hasOwnProperty,aKe=new RegExp("idle","u");function Qe(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t}={}){let s=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){t.connectionTimeout===void 0&&(t.connectionTimeout=0),t.keepAliveTimeout===void 0&&(t.keepAliveTimeout=72e3),t.maxRequestsPerSocket===void 0&&(t.maxRequestsPerSocket=0),t.requestTimeout===void 0&&(t.requestTimeout=0),t.bodyLimit===void 0&&(t.bodyLimit=1048576),t.caseSensitive===void 0&&(t.caseSensitive=!0),t.allowUnsafeRegex===void 0&&(t.allowUnsafeRegex=!1),t.ignoreTrailingSlash===void 0&&(t.ignoreTrailingSlash=!1),t.ignoreDuplicateSlashes===void 0&&(t.ignoreDuplicateSlashes=!1),t.disableRequestLogging===void 0&&(t.disableRequestLogging=!1),t.maxParamLength===void 0&&(t.maxParamLength=100),t.onProtoPoisoning===void 0&&(t.onProtoPoisoning="error"),t.onConstructorPoisoning===void 0&&(t.onConstructorPoisoning="error"),t.pluginTimeout===void 0&&(t.pluginTimeout=1e4),t.requestIdHeader===void 0&&(t.requestIdHeader=!1),t.requestIdLogLabel===void 0&&(t.requestIdLogLabel="reqId"),t.http2SessionTimeout===void 0&&(t.http2SessionTimeout=72e3),t.exposeHeadRoutes===void 0&&(t.exposeHeadRoutes=!0),t.useSemicolonDelimiter===void 0&&(t.useSemicolonDelimiter=!1);let p=o;for(let m in t)oKe.call(sKe.properties,m)||delete t[m];if(p===o){let m=t.connectionTimeout,y=o;if(!(typeof m=="number"&&!(m%1)&&!isNaN(m)&&isFinite(m))){let _=typeof m,w;if(w===void 0)if(_==="boolean"||m===null||_==="string"&&m&&m==+m&&!(m%1))w=+m;else return Qe.errors=[{instancePath:e+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;w!==void 0&&(m=w,t!==void 0&&(t.connectionTimeout=w))}var a=y===o;if(a){let _=t.keepAliveTimeout,w=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_))){let b=typeof _,E;if(E===void 0)if(b==="boolean"||_===null||b==="string"&&_&&_==+_&&!(_%1))E=+_;else return Qe.errors=[{instancePath:e+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;E!==void 0&&(_=E,t!==void 0&&(t.keepAliveTimeout=E))}var a=w===o;if(a){if(t.forceCloseConnections!==void 0){let b=t.forceCloseConnections,E=o,R=o,S=!1,P=null,T=o;if(typeof b!="string"){let N=typeof b,C;if(C===void 0)if(N=="number"||N=="boolean")C=""+b;else if(b===null)C="";else{let z={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),o++}C!==void 0&&(b=C,t!==void 0&&(t.forceCloseConnections=C))}if(o===T&&typeof b=="string"&&!aKe.test(b)){let N={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};s===null?s=[N]:s.push(N),o++}var l=T===o;l&&(S=!0,P=0);let O=o;if(typeof b!="boolean"){let N;if(N===void 0)if(b==="false"||b===0||b===null)N=!1;else if(b==="true"||b===1)N=!0;else{let C={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[C]:s.push(C),o++}N!==void 0&&(b=N,t!==void 0&&(t.forceCloseConnections=N))}var l=O===o;if(l&&S?(S=!1,P=[P,1]):l&&(S=!0,P=1),S)o=R,s!==null&&(R?s.length=R:s=null);else{let N={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:P},message:"must match exactly one schema in oneOf"};return s===null?s=[N]:s.push(N),o++,Qe.errors=s,!1}var a=E===o}else var a=!0;if(a){let b=t.maxRequestsPerSocket,E=o;if(!(typeof b=="number"&&!(b%1)&&!isNaN(b)&&isFinite(b))&&b!==null){let S=typeof b,P;if(P===void 0)if(S==="boolean"||b===null||S==="string"&&b&&b==+b&&!(b%1))P=+b;else if(b===""||b===0||b===!1)P=null;else return Qe.errors=[{instancePath:e+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;P!==void 0&&(b=P,t!==void 0&&(t.maxRequestsPerSocket=P))}var a=E===o;if(a){let S=t.requestTimeout,P=o;if(!(typeof S=="number"&&!(S%1)&&!isNaN(S)&&isFinite(S))){let O=typeof S,j;if(j===void 0)if(O==="boolean"||S===null||O==="string"&&S&&S==+S&&!(S%1))j=+S;else return Qe.errors=[{instancePath:e+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;j!==void 0&&(S=j,t!==void 0&&(t.requestTimeout=j))}var a=P===o;if(a){let O=t.bodyLimit,j=o;if(!(typeof O=="number"&&!(O%1)&&!isNaN(O)&&isFinite(O))){let C=typeof O,z;if(z===void 0)if(C==="boolean"||O===null||C==="string"&&O&&O==+O&&!(O%1))z=+O;else return Qe.errors=[{instancePath:e+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;z!==void 0&&(O=z,t!==void 0&&(t.bodyLimit=z))}var a=j===o;if(a){let C=t.caseSensitive,z=o;if(typeof C!="boolean"){let $;if($===void 0)if(C==="false"||C===0||C===null)$=!1;else if(C==="true"||C===1)$=!0;else return Qe.errors=[{instancePath:e+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;$!==void 0&&(C=$,t!==void 0&&(t.caseSensitive=$))}var a=z===o;if(a){let $=t.allowUnsafeRegex,k=o;if(typeof $!="boolean"){let U;if(U===void 0)if($==="false"||$===0||$===null)U=!1;else if($==="true"||$===1)U=!0;else return Qe.errors=[{instancePath:e+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;U!==void 0&&($=U,t!==void 0&&(t.allowUnsafeRegex=U))}var a=k===o;if(a){if(t.http2!==void 0){let U=t.http2,W=o;if(typeof U!="boolean"){let Ae;if(Ae===void 0)if(U==="false"||U===0||U===null)Ae=!1;else if(U==="true"||U===1)Ae=!0;else return Qe.errors=[{instancePath:e+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Ae!==void 0&&(U=Ae,t!==void 0&&(t.http2=Ae))}var a=W===o}else var a=!0;if(a){if(t.https!==void 0){let U=t.https,W=o,Vt=o,Ae=!0,Ne=o,si=o,Rt=o,xe=o,wt=!1,Z=null,tr=o;if(typeof U!="boolean"){let I;if(I===void 0)if(U==="false"||U===0||U===null)I=!1;else if(U==="true"||U===1)I=!0;else{let x={};s===null?s=[x]:s.push(x),o++}I!==void 0&&(U=I,t!==void 0&&(t.https=I))}var u=tr===o;u&&(wt=!0,Z=0);let xa=o;if(U!==null){let I;if(I===void 0)if(U===""||U===0||U===!1)I=null;else{let x={};s===null?s=[x]:s.push(x),o++}I!==void 0&&(U=I,t!==void 0&&(t.https=I))}var u=xa===o;if(u&&wt)wt=!1,Z=[Z,1];else{u&&(wt=!0,Z=1);let I=o;if(o===I)if(U&&typeof U=="object"&&!Array.isArray(U)){let D;if(U.allowHTTP1===void 0&&(D="allowHTTP1")){let G={};s===null?s=[G]:s.push(G),o++}else{let G=o;for(let le in U)le!=="allowHTTP1"&&delete U[le];if(G===o&&U.allowHTTP1!==void 0){let le=U.allowHTTP1;if(typeof le!="boolean"){let B;if(B===void 0)if(le==="false"||le===0||le===null)B=!1;else if(le==="true"||le===1)B=!0;else{let Xe={};s===null?s=[Xe]:s.push(Xe),o++}B!==void 0&&(le=B,U!==void 0&&(U.allowHTTP1=B))}}}}else{let D={};s===null?s=[D]:s.push(D),o++}var u=I===o;u&&wt?(wt=!1,Z=[Z,2]):u&&(wt=!0,Z=2)}if(wt)o=xe,s!==null&&(xe?s.length=xe:s=null);else{let I={};s===null?s=[I]:s.push(I),o++}var c=Rt===o;if(c){let I={};s===null?s=[I]:s.push(I),o++}else o=si,s!==null&&(si?s.length=si:s=null);var f=Ne===o;if(o=Vt,s!==null&&(Vt?s.length=Vt:s=null),f){let I=o;t.https=!0;var f=I===o;Ae=f}if(!Ae){let I={instancePath:e+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return s===null?s=[I]:s.push(I),o++,Qe.errors=s,!1}var a=W===o}else var a=!0;if(a){let U=t.ignoreTrailingSlash,W=o;if(typeof U!="boolean"){let Ae;if(Ae===void 0)if(U==="false"||U===0||U===null)Ae=!1;else if(U==="true"||U===1)Ae=!0;else return Qe.errors=[{instancePath:e+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Ae!==void 0&&(U=Ae,t!==void 0&&(t.ignoreTrailingSlash=Ae))}var a=W===o;if(a){let Ae=t.ignoreDuplicateSlashes,Ne=o;if(typeof Ae!="boolean"){let Rt;if(Rt===void 0)if(Ae==="false"||Ae===0||Ae===null)Rt=!1;else if(Ae==="true"||Ae===1)Rt=!0;else return Qe.errors=[{instancePath:e+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Rt!==void 0&&(Ae=Rt,t!==void 0&&(t.ignoreDuplicateSlashes=Rt))}var a=Ne===o;if(a){let Rt=t.disableRequestLogging,xe=o;if(typeof Rt!="boolean"){let Z;if(Z===void 0)if(Rt==="false"||Rt===0||Rt===null)Z=!1;else if(Rt==="true"||Rt===1)Z=!0;else return Qe.errors=[{instancePath:e+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Z!==void 0&&(Rt=Z,t!==void 0&&(t.disableRequestLogging=Z))}var a=xe===o;if(a){let Z=t.maxParamLength,tr=o;if(!(typeof Z=="number"&&!(Z%1)&&!isNaN(Z)&&isFinite(Z))){let mn=typeof Z,I;if(I===void 0)if(mn==="boolean"||Z===null||mn==="string"&&Z&&Z==+Z&&!(Z%1))I=+Z;else return Qe.errors=[{instancePath:e+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;I!==void 0&&(Z=I,t!==void 0&&(t.maxParamLength=I))}var a=tr===o;if(a){let mn=t.onProtoPoisoning,I=o;if(typeof mn!="string"){let D=typeof mn,G;if(G===void 0)if(D=="number"||D=="boolean")G=""+mn;else if(mn===null)G="";else return Qe.errors=[{instancePath:e+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;G!==void 0&&(mn=G,t!==void 0&&(t.onProtoPoisoning=G))}var a=I===o;if(a){let D=t.onConstructorPoisoning,G=o;if(typeof D!="string"){let B=typeof D,Xe;if(Xe===void 0)if(B=="number"||B=="boolean")Xe=""+D;else if(D===null)Xe="";else return Qe.errors=[{instancePath:e+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Xe!==void 0&&(D=Xe,t!==void 0&&(t.onConstructorPoisoning=Xe))}var a=G===o;if(a){let B=t.pluginTimeout,Xe=o;if(!(typeof B=="number"&&!(B%1)&&!isNaN(B)&&isFinite(B))){let Et=typeof B,As;if(As===void 0)if(Et==="boolean"||B===null||Et==="string"&&B&&B==+B&&!(B%1))As=+B;else return Qe.errors=[{instancePath:e+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;As!==void 0&&(B=As,t!==void 0&&(t.pluginTimeout=As))}var a=Xe===o;if(a){let Et=t.requestIdHeader,As=o,Uw=o,bu=!1,cse=o;if(typeof Et!="boolean"){let rr;if(rr===void 0)if(Et==="false"||Et===0||Et===null)rr=!1;else if(Et==="true"||Et===1)rr=!0;else{let Gm={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[Gm]:s.push(Gm),o++}rr!==void 0&&(Et=rr,t!==void 0&&(t.requestIdHeader=rr))}var h=cse===o;if(bu=bu||h,!bu){let rr=o;if(typeof Et!="string"){let Sx=typeof Et,Ot;if(Ot===void 0)if(Sx=="number"||Sx=="boolean")Ot=""+Et;else if(Et===null)Ot="";else{let ai={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ai]:s.push(ai),o++}Ot!==void 0&&(Et=Ot,t!==void 0&&(t.requestIdHeader=Ot))}var h=rr===o;bu=bu||h}if(bu)o=Uw,s!==null&&(Uw?s.length=Uw:s=null);else{let rr={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[rr]:s.push(rr),o++,Qe.errors=s,!1}var a=As===o;if(a){let rr=t.requestIdLogLabel,Gm=o;if(typeof rr!="string"){let Ot=typeof rr,ai;if(ai===void 0)if(Ot=="number"||Ot=="boolean")ai=""+rr;else if(rr===null)ai="";else return Qe.errors=[{instancePath:e+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ai!==void 0&&(rr=ai,t!==void 0&&(t.requestIdLogLabel=ai))}var a=Gm===o;if(a){let Ot=t.http2SessionTimeout,ai=o;if(!(typeof Ot=="number"&&!(Ot%1)&&!isNaN(Ot)&&isFinite(Ot))){let Li=typeof Ot,ja;if(ja===void 0)if(Li==="boolean"||Ot===null||Li==="string"&&Ot&&Ot==+Ot&&!(Ot%1))ja=+Ot;else return Qe.errors=[{instancePath:e+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ja!==void 0&&(Ot=ja,t!==void 0&&(t.http2SessionTimeout=ja))}var a=ai===o;if(a){let Li=t.exposeHeadRoutes,ja=o;if(typeof Li!="boolean"){let Yr;if(Yr===void 0)if(Li==="false"||Li===0||Li===null)Yr=!1;else if(Li==="true"||Li===1)Yr=!0;else return Qe.errors=[{instancePath:e+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Yr!==void 0&&(Li=Yr,t!==void 0&&(t.exposeHeadRoutes=Yr))}var a=ja===o;if(a){let Yr=t.useSemicolonDelimiter,fse=o;if(typeof Yr!="boolean"){let Tn;if(Tn===void 0)if(Yr==="false"||Yr===0||Yr===null)Tn=!1;else if(Yr==="true"||Yr===1)Tn=!0;else return Qe.errors=[{instancePath:e+"/useSemicolonDelimiter",schemaPath:"#/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Tn!==void 0&&(Yr=Tn,t!==void 0&&(t.useSemicolonDelimiter=Tn))}var a=fse===o;if(a)if(t.constraints!==void 0){let Tn=t.constraints,Rx=o;if(o===Rx)if(Tn&&typeof Tn=="object"&&!Array.isArray(Tn))for(let Km in Tn){let li=Tn[Km],Tx=o;if(o===Tx)if(li&&typeof li=="object"&&!Array.isArray(li)){let vu;if(li.name===void 0&&(vu="name")||li.storage===void 0&&(vu="storage")||li.validate===void 0&&(vu="validate")||li.deriveConstraint===void 0&&(vu="deriveConstraint"))return Qe.errors=[{instancePath:e+"/constraints/"+Km.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:vu},message:"must have required property '"+vu+"'"}],!1;if(li.name!==void 0){let Jf=li.name;if(typeof Jf!="string"){let Px=typeof Jf,wu;if(wu===void 0)if(Px=="number"||Px=="boolean")wu=""+Jf;else if(Jf===null)wu="";else return Qe.errors=[{instancePath:e+"/constraints/"+Km.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;wu!==void 0&&(Jf=wu,li!==void 0&&(li.name=wu))}}}else return Qe.errors=[{instancePath:e+"/constraints/"+Km.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=Tx===o;if(!d)break}else return Qe.errors=[{instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=Rx===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}else return Qe.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Qe.errors=s,o===0}$w.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:!1,requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0,useSemicolonDelimiter:!1}});var cie=g((Sat,Iw)=>{"use strict";var Ow=uie(),lKe=Zd()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:uKe}=ur();function cKe(t){let e=lKe(t);if(!Ow(e)){let r=new uKe(JSON.stringify(Ow.errors.map(n=>n.message)));throw r.errors=Ow.errors,r}return Xq(e)}function Xq(t){let e=Object.getOwnPropertyNames(t);for(let r of e){let n=t[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(t[r]=n&&typeof n=="object"?Xq(n):n)}return Object.freeze(t)}Iw.exports=cKe;Iw.exports.defaultInitOptions=Ow.defaultInitOptions;Iw.exports.utils={deepFreezeObject:Xq}});var bie=g((Rat,_ie)=>{"use strict";var{kAvvioBoot:fKe,kChildren:fie,kRoutePrefix:die,kLogLevel:hie,kLogSerializers:Zq,kHooks:ex,kSchemaController:Vf,kContentTypeParser:pie,kReply:mie,kRequest:gie,kFourOhFour:dKe,kPluginNameChain:yie}=Zt(),hKe=M0(),pKe=V0(),mKe=oq(),gKe=sO(),{buildHooks:yKe}=ea(),jm=Aq();_ie.exports=function(e,r,n){let i=jm.registerPlugin.call(e,r),s=jm.getPluginName(r)||jm.getFuncPreview(r);if(i)return e[yie].push(s),e;let o=Object.create(e);e[fie].push(o),o.ready=e[fKe].bind(o),o[fie]=[],o[mie]=hKe.buildReply(o[mie]),o[gie]=pKe.buildRequest(o[gie]),o[pie]=gKe.helpers.buildContentTypeParser(o[pie]),o[ex]=yKe(o[ex]),o[die]=_Ke(o[die],n.prefix),o[hie]=n.logLevel||o[hie],o[Vf]=mKe.buildSchemaController(e[Vf]),o.getSchema=o[Vf].getSchema.bind(o[Vf]),o.getSchemas=o[Vf].getSchemas.bind(o[Vf]),o[jm.kRegisteredPlugins]=Object.create(o[jm.kRegisteredPlugins]),o[yie]=[s],(o[Zq]||n.logSerializers)&&(o[Zq]=Object.assign(Object.create(o[Zq]),n.logSerializers)),n.prefix&&o[dKe].arrange404(o);for(let a of o[ex].onRegister)a.call(e,o,n);return o};function _Ke(t,e){return e?(t.endsWith("/")&&e[0]==="/"?e=e.slice(1):e[0]!=="/"&&(e="/"+e),t+e):t}});var wie=g((Tat,vie)=>{"use strict";vie.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var Rie=g(Aw=>{"use strict";Object.defineProperty(Aw,"__esModule",{value:!0});Aw.parse=TKe;Aw.serialize=PKe;var bKe=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,vKe=/^[\u0021-\u003A\u003C-\u007E]*$/,wKe=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,EKe=/^[\u0020-\u003A\u003D-\u007E]*$/,SKe=Object.prototype.toString,RKe=(()=>{let t=function(){};return t.prototype=Object.create(null),t})();function TKe(t,e){let r=new RKe,n=t.length;if(n<2)return r;let i=e?.decode||$Ke,s=0;do{let o=t.indexOf("=",s);if(o===-1)break;let a=t.indexOf(";",s),l=a===-1?n:a;if(o>l){s=t.lastIndexOf(";",o-1)+1;continue}let u=Eie(t,s,o),c=Sie(t,o,u),f=t.slice(u,c);if(r[f]===void 0){let h=Eie(t,o+1,l),d=Sie(t,l,h),p=i(t.slice(h,d));r[f]=p}s=l+1}while(s<n);return r}function Eie(t,e,r){do{let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<r);return r}function Sie(t,e,r){for(;e>r;){let n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return r}function PKe(t,e,r){let n=r?.encode||encodeURIComponent;if(!bKe.test(t))throw new TypeError(`argument name is invalid: ${t}`);let i=n(e);if(!vKe.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!r)return s;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);s+="; Max-Age="+r.maxAge}if(r.domain){if(!wKe.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);s+="; Domain="+r.domain}if(r.path){if(!EKe.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);s+="; Path="+r.path}if(r.expires){if(!OKe(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);s+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.partitioned&&(s+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return s}function $Ke(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function OKe(t){return SKe.call(t)==="[object Date]"}});var $ie=g(($at,Pie)=>{"use strict";var{URL:Tie}=A("node:url"),tx="http://localhost";Pie.exports=function(e,r){(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]")&&e.startsWith("//")&&(e=tx+e);let n=typeof e=="object"?Object.assign(new Tie(tx),e):new Tie(e,tx);if(typeof r=="string"){r=new URLSearchParams(r);for(let i of r.keys()){n.searchParams.delete(i);for(let s of r.getAll(i))n.searchParams.append(i,s)}}else{let i=Object.assign({},e.query,r);for(let s in i){let o=i[s];if(Array.isArray(o)){n.searchParams.delete(s);for(let a of o)n.searchParams.append(s,a)}else n.searchParams.set(s,o)}}return n}});var Oie=g((Oat,rx)=>{"use strict";var{randomUUID:IKe}=A("node:crypto"),{Readable:AKe}=A("node:stream"),Hf;function NKe(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}function CKe(t){Hf=Hf??new TextEncoder;let e=`----formdata-${IKe()}`,r=`--${e}\r
Content-Disposition: form-data`;let n=l=>l.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),i=l=>l.replace(/\r?\n|\r/g,`\r
`),s=new Uint8Array([13,10]);async function*o(){for(let[l,u]of t)if(typeof u=="string")yield Hf.encode(`${r}; name="${n(i(l))}"\r
\r
`),yield Hf.encode(`${i(u)}\r
`);else{let c=`${r}; name="${n(i(l))}"`;u.name&&(c+=`; filename="${n(u.name)}"`),c+=`\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,yield Hf.encode(c),u.stream?yield*u.stream():yield u,yield s}yield Hf.encode(`--${e}--`)}return{stream:AKe.from(o()),contentType:`multipart/form-data; boundary=${e}`}}rx.exports.isFormDataLike=NKe;rx.exports.formDataToStream=CKe});var Nie=g((Iat,Nw)=>{"use strict";var{Readable:Iie,addAbortSignal:kKe}=A("node:stream"),ix=A("node:util"),qKe=Rie(),xKe=A("node:assert"),{createDeprecation:jKe}=$P(),MKe=$ie(),{isFormDataLike:LKe,formDataToStream:DKe}=Oie(),{EventEmitter:FKe}=A("node:events"),UKe=jKe({name:"FastifyDeprecationLightMyRequest",code:"FST_LIGHTMYREQUEST_DEP01",message:'You are accessing "request.connection", use "request.socket" instead.'});function BKe(t){return t.port?t.host:t.hostname+(t.protocol==="https:"?":443":":80")}var nx=class extends FKe{constructor(e){super(),this.remoteAddress=e}};function Aie(t){return new e(this);function e(r){Ca.call(r,{...t,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(Ca.prototype))this.constructor.prototype[n]=Ca.prototype[n];return ix.inherits(this.constructor,t.Request),this}}function Ca(t){Iie.call(this,{autoDestroy:!1});let e=MKe(t.url||t.path,t.query);this.url=e.pathname+e.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=t.method?t.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=t.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let l=r[o];xKe(l!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+l}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||t.authority||BKe(e),t.cookies){let{cookies:o}=t,a=Object.keys(o).map(l=>qKe.serialize(l,o[l]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new nx(t.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return UKe(),this.socket},configurable:!0});let n=t.payload||t.body||null,i=n&&typeof n.resume=="function";if(LKe(n)){let o=DKe(n);n=o.stream,i=!0,this.headers["content-type"]=o.contentType}n&&typeof n!="string"&&!i&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!i&&!Object.hasOwn(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:t.simulate||{},payloadAsStream:t.payloadAsStream,signal:t.signal};let s=t.signal;s&&kKe(s,this);{let o=this._lightMyRequest.payload;o?._readableState?(this._read=VKe,o.on("error",a=>{this.destroy(a)}),o.on("end",()=>{this.push(null)})):this._read=HKe}return this}function VKe(t){let e=this._lightMyRequest.payload,r=!0,n=!1,i;for(;r&&(i=e.read());)n=!0,r=this.push(i);r&&!n&&this._lightMyRequest.payload.once("readable",this._read.bind(this))}function HKe(t){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})}ix.inherits(Ca,Iie);ix.inherits(Aie,Ca);Ca.prototype.destroy=function(t){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,t&&(this._error=!0,process.nextTick(()=>this.emit("error",t))),process.nextTick(()=>this.emit("close")))};Nw.exports=Ca;Nw.exports.Request=Ca;Nw.exports.CustomRequest=Aie});var kie=g((Aat,Mm)=>{"use strict";var Cw={decodeValues:!0,map:!1,silent:!1};function sx(t){return typeof t=="string"&&!!t.trim()}function ox(t,e){var r=t.split(";").filter(sx),n=r.shift(),i=zKe(n),s=i.name,o=i.value;e=e?Object.assign({},Cw,e):Cw;try{o=e.decodeValues?decodeURIComponent(o):o}catch(l){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",l)}var a={name:s,value:o};return r.forEach(function(l){var u=l.split("="),c=u.shift().trimLeft().toLowerCase(),f=u.join("=");c==="expires"?a.expires=new Date(f):c==="max-age"?a.maxAge=parseInt(f,10):c==="secure"?a.secure=!0:c==="httponly"?a.httpOnly=!0:c==="samesite"?a.sameSite=f:c==="partitioned"?a.partitioned=!0:a[c]=f}),a}function zKe(t){var e="",r="",n=t.split("=");return n.length>1?(e=n.shift(),r=n.join("=")):r=t,{name:e,value:r}}function Cie(t,e){if(e=e?Object.assign({},Cw,e):Cw,!t)return e.map?{}:[];if(t.headers)if(typeof t.headers.getSetCookie=="function")t=t.headers.getSetCookie();else if(t.headers["set-cookie"])t=t.headers["set-cookie"];else{var r=t.headers[Object.keys(t.headers).find(function(i){return i.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e.map){var n={};return t.filter(sx).reduce(function(i,s){var o=ox(s,e);return i[o.name]=o,i},n)}else return t.filter(sx).map(function(i){return ox(i,e)})}function WKe(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,n,i,s,o,a;function l(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function u(){return i=t.charAt(r),i!=="="&&i!==";"&&i!==","}for(;r<t.length;){for(n=r,a=!1;l();)if(i=t.charAt(r),i===","){for(s=r,r+=1,l(),o=r;r<t.length&&u();)r+=1;r<t.length&&t.charAt(r)==="="?(a=!0,r=o,e.push(t.substring(n,s)),n=r):r=s+1}else r+=1;(!a||r>=t.length)&&e.push(t.substring(n,t.length))}return e}Mm.exports=Cie;Mm.exports.parse=Cie;Mm.exports.parseString=ox;Mm.exports.splitCookiesString=WKe});var Lie=g((Nat,Mie)=>{"use strict";var Lm=A("node:http"),{Writable:GKe,Readable:qie,addAbortSignal:KKe}=A("node:stream"),YKe=A("node:util"),JKe=kie();function ka(t,e,r){if(Lm.ServerResponse.call(this,t),t._lightMyRequest?.payloadAsStream){let a=this.emit.bind(this,"drain");this._lightMyRequest={headers:null,trailers:{},stream:new qie({read:a})};let l=t._lightMyRequest.signal;l&&KKe(l,this._lightMyRequest.stream)}else this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]};this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(QKe()),this._promiseCallback=typeof r=="function";let n=!1,i=a=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>e(a));process.nextTick(()=>e(null,a))}};this._lightMyRequest.onEndSuccess=i;let s=!1,o=a=>{if(n){this._lightMyRequest.stream&&!s&&(a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._lightMyRequest.stream.destroy(a),this._lightMyRequest.stream.on("error",()=>{}));return}if(n=!0,a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._promiseCallback)return process.nextTick(()=>r(a));process.nextTick(()=>e(a,null))};this._lightMyRequest.stream?this.once("finish",()=>{s=!0,this._lightMyRequest.stream.push(null)}):this.once("finish",()=>{let a=xie(this);a.raw.req=t,i(a)}),this.connection.once("error",o),this.once("error",o),this.once("close",o)}YKe.inherits(ka,Lm.ServerResponse);ka.prototype.setTimeout=function(t,e){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},t),this.on("timeout",e),this};ka.prototype.writeHead=function(){let t=Lm.ServerResponse.prototype.writeHead.apply(this,arguments);return jie(this),this._lightMyRequest.stream&&this._lightMyRequest.onEndSuccess(xie(this)),t};ka.prototype.write=function(t,e,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),Lm.ServerResponse.prototype.write.call(this,t,e,r),this._lightMyRequest.stream?this._lightMyRequest.stream.push(Buffer.from(t,e)):(this._lightMyRequest.payloadChunks.push(Buffer.from(t,e)),!0)};ka.prototype.end=function(t,e,r){t&&this.write(t,e),Lm.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};ka.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,t&&process.nextTick(()=>this.emit("error",t)),process.nextTick(()=>this.emit("close")))};ka.prototype.addTrailers=function(t){for(let e in t)this._lightMyRequest.trailers[e.toLowerCase().trim()]=t[e].toString().trim()};function xie(t){t._lightMyRequest.headers===null&&jie(t),XKe(t);let e={raw:{res:t},headers:t._lightMyRequest.headers,statusCode:t.statusCode,statusMessage:t.statusMessage,trailers:{},get cookies(){return JKe.parse(this)}};if(e.trailers=t._lightMyRequest.trailers,t._lightMyRequest.payloadChunks){let r=Buffer.concat(t._lightMyRequest.payloadChunks);e.rawPayload=r,e.payload=r.toString(),e.body=e.payload,e.json=function(){return JSON.parse(e.payload)}}else e.json=function(){throw new Error("Response payload is not available with payloadAsStream: true")};return e.stream=function(){return t._lightMyRequest.stream?t._lightMyRequest.stream:qie.from(t._lightMyRequest.payloadChunks)},e}function QKe(){return new GKe({write(t,e,r){setImmediate(r)}})}function XKe(t){let e=t._lightMyRequest.headers;for(let r of Object.keys(e)){let n=e[r];Array.isArray(n)?e[r]=n.map(i=>""+i):e[r]=""+n}}function jie(t){t._lightMyRequest.headers=Object.assign({},t.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(e=>{let r=new RegExp("\\r\\n"+e+": ([^\\r]*)\\r\\n"),n=t._header?.match(r);n&&(t._lightMyRequest.headers[e.toLowerCase()]=n[1])})}Mie.exports=ka});var Die=g((Cat,ax)=>{"use strict";ax.exports=Bt;ax.exports.default=Bt;var ZKe={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","query","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function Bt(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t}={}){let s=null,o=0,a=o,l=!1,u=null,c=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let b;if(t.url===void 0&&(b="url")){let E={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"};s===null?s=[E]:s.push(E),o++}}var h=c===o;h&&(l=!0,u=0);let f=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let b;if(t.path===void 0&&(b="path")){let E={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"};s===null?s=[E]:s.push(E),o++}}var h=f===o;if(h&&l?(l=!1,u=[u,1]):h&&(l=!0,u=1),l)o=a,s!==null&&(a?s.length=a:s=null);else{let b={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return s===null?s=[b]:s.push(b),o++,Bt.errors=s,!1}if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url!==void 0){let b=t.url,E=o,R=o,S=!1,P=null,T=o;if(typeof b!="string"){let j=typeof b,N;if(N===void 0)if(j=="number"||j=="boolean")N=""+b;else if(b===null)N="";else{let C={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[C]:s.push(C),o++}N!==void 0&&(b=N,t!==void 0&&(t.url=N))}var p=T===o;p&&(S=!0,P=0);let O=o;if(o===O)if(b&&typeof b=="object"&&!Array.isArray(b)){let j;if(b.pathname===void 0&&(j="pathname")){let N={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:j},message:"must have required property '"+j+"'"};s===null?s=[N]:s.push(N),o++}else{if(b.protocol!==void 0){let N=b.protocol,C=o;if(typeof N!="string"){let z=typeof N,ge;if(ge===void 0)if(z=="number"||z=="boolean")ge=""+N;else if(N===null)ge="";else{let $={instancePath:e+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[$]:s.push($),o++}ge!==void 0&&(N=ge,b!==void 0&&(b.protocol=ge))}var d=C===o}else var d=!0;if(d){if(b.hostname!==void 0){let N=b.hostname,C=o;if(typeof N!="string"){let ge=typeof N,$;if($===void 0)if(ge=="number"||ge=="boolean")$=""+N;else if(N===null)$="";else{let k={instancePath:e+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[k]:s.push(k),o++}$!==void 0&&(N=$,b!==void 0&&(b.hostname=$))}var d=C===o}else var d=!0;if(d)if(b.pathname!==void 0){let N=b.pathname,C=o;if(typeof N!="string"){let ge=typeof N,$;if($===void 0)if(ge=="number"||ge=="boolean")$=""+N;else if(N===null)$="";else{let k={instancePath:e+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[k]:s.push(k),o++}$!==void 0&&(N=$,b!==void 0&&(b.pathname=$))}var d=C===o}else var d=!0}}}else{let j={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[j]:s.push(j),o++}var p=O===o;if(p&&S?(S=!1,P=[P,1]):p&&(S=!0,P=1),S)o=R,s!==null&&(R?s.length=R:s=null);else{let j={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:P},message:"must match exactly one schema in oneOf"};return s===null?s=[j]:s.push(j),o++,Bt.errors=s,!1}var m=E===o}else var m=!0;if(m){if(t.path!==void 0){let b=t.path,E=o,R=o,S=!1,P=null,T=o;if(typeof b!="string"){let N=typeof b,C;if(C===void 0)if(N=="number"||N=="boolean")C=""+b;else if(b===null)C="";else{let z={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),o++}C!==void 0&&(b=C,t!==void 0&&(t.path=C))}var _=T===o;_&&(S=!0,P=0);let O=o;if(o===O)if(b&&typeof b=="object"&&!Array.isArray(b)){let N;if(b.pathname===void 0&&(N="pathname")){let C={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};s===null?s=[C]:s.push(C),o++}else{if(b.protocol!==void 0){let C=b.protocol,z=o;if(typeof C!="string"){let ge=typeof C,$;if($===void 0)if(ge=="number"||ge=="boolean")$=""+C;else if(C===null)$="";else{let k={instancePath:e+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[k]:s.push(k),o++}$!==void 0&&(C=$,b!==void 0&&(b.protocol=$))}var y=z===o}else var y=!0;if(y){if(b.hostname!==void 0){let C=b.hostname,z=o;if(typeof C!="string"){let $=typeof C,k;if(k===void 0)if($=="number"||$=="boolean")k=""+C;else if(C===null)k="";else{let ae={instancePath:e+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ae]:s.push(ae),o++}k!==void 0&&(C=k,b!==void 0&&(b.hostname=k))}var y=z===o}else var y=!0;if(y)if(b.pathname!==void 0){let C=b.pathname,z=o;if(typeof C!="string"){let $=typeof C,k;if(k===void 0)if($=="number"||$=="boolean")k=""+C;else if(C===null)k="";else{let ae={instancePath:e+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ae]:s.push(ae),o++}k!==void 0&&(C=k,b!==void 0&&(b.pathname=k))}var y=z===o}else var y=!0}}}else{let N={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[N]:s.push(N),o++}var _=O===o;if(_&&S?(S=!1,P=[P,1]):_&&(S=!0,P=1),S)o=R,s!==null&&(R?s.length=R:s=null);else{let N={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:P},message:"must match exactly one schema in oneOf"};return s===null?s=[N]:s.push(N),o++,Bt.errors=s,!1}var m=E===o}else var m=!0;if(m){if(t.cookies!==void 0){let b=t.cookies,E=o;if(o===E&&!(b&&typeof b=="object"&&!Array.isArray(b)))return Bt.errors=[{instancePath:e+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=E===o}else var m=!0;if(m){if(t.headers!==void 0){let b=t.headers,E=o;if(o===E&&!(b&&typeof b=="object"&&!Array.isArray(b)))return Bt.errors=[{instancePath:e+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=E===o}else var m=!0;if(m){if(t.query!==void 0){let b=t.query,E=o,R=o,S=!1,P=o;if(o===P&&!(b&&typeof b=="object"&&!Array.isArray(b))){let O={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[O]:s.push(O),o++}var w=P===o;if(S=S||w,!S){let O=o;if(typeof b!="string"){let N=typeof b,C;if(C===void 0)if(N=="number"||N=="boolean")C=""+b;else if(b===null)C="";else{let z={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),o++}C!==void 0&&(b=C,t!==void 0&&(t.query=C))}var w=O===o;S=S||w}if(S)o=R,s!==null&&(R?s.length=R:s=null);else{let O={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[O]:s.push(O),o++,Bt.errors=s,!1}var m=E===o}else var m=!0;if(m){if(t.simulate!==void 0){let b=t.simulate,E=o;if(o===E)if(b&&typeof b=="object"&&!Array.isArray(b)){if(b.end!==void 0){let S=b.end,P=o;if(typeof S!="boolean"){let T;if(T===void 0)if(S==="false"||S===0||S===null)T=!1;else if(S==="true"||S===1)T=!0;else return Bt.errors=[{instancePath:e+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;T!==void 0&&(S=T,b!==void 0&&(b.end=T))}var v=P===o}else var v=!0;if(v){if(b.split!==void 0){let S=b.split,P=o;if(typeof S!="boolean"){let O;if(O===void 0)if(S==="false"||S===0||S===null)O=!1;else if(S==="true"||S===1)O=!0;else return Bt.errors=[{instancePath:e+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;O!==void 0&&(S=O,b!==void 0&&(b.split=O))}var v=P===o}else var v=!0;if(v){if(b.error!==void 0){let S=b.error,P=o;if(typeof S!="boolean"){let O;if(O===void 0)if(S==="false"||S===0||S===null)O=!1;else if(S==="true"||S===1)O=!0;else return Bt.errors=[{instancePath:e+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;O!==void 0&&(S=O,b!==void 0&&(b.error=O))}var v=P===o}else var v=!0;if(v)if(b.close!==void 0){let S=b.close,P=o;if(typeof S!="boolean"){let O;if(O===void 0)if(S==="false"||S===0||S===null)O=!1;else if(S==="true"||S===1)O=!0;else return Bt.errors=[{instancePath:e+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;O!==void 0&&(S=O,b!==void 0&&(b.close=O))}var v=P===o}else var v=!0}}}else return Bt.errors=[{instancePath:e+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=E===o}else var m=!0;if(m){if(t.authority!==void 0){let b=t.authority,E=o;if(typeof b!="string"){let S=typeof b,P;if(P===void 0)if(S=="number"||S=="boolean")P=""+b;else if(b===null)P="";else return Bt.errors=[{instancePath:e+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;P!==void 0&&(b=P,t!==void 0&&(t.authority=P))}var m=E===o}else var m=!0;if(m){if(t.remoteAddress!==void 0){let b=t.remoteAddress,E=o;if(typeof b!="string"){let S=typeof b,P;if(P===void 0)if(S=="number"||S=="boolean")P=""+b;else if(b===null)P="";else return Bt.errors=[{instancePath:e+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;P!==void 0&&(b=P,t!==void 0&&(t.remoteAddress=P))}var m=E===o}else var m=!0;if(m){if(t.method!==void 0){let b=t.method,E=o;if(typeof b!="string"){let S=typeof b,P;if(P===void 0)if(S=="number"||S=="boolean")P=""+b;else if(b===null)P="";else return Bt.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;P!==void 0&&(b=P,t!==void 0&&(t.method=P))}if(!(b==="ACL"||b==="BIND"||b==="CHECKOUT"||b==="CONNECT"||b==="COPY"||b==="DELETE"||b==="GET"||b==="HEAD"||b==="LINK"||b==="LOCK"||b==="M-SEARCH"||b==="MERGE"||b==="MKACTIVITY"||b==="MKCALENDAR"||b==="MKCOL"||b==="MOVE"||b==="NOTIFY"||b==="OPTIONS"||b==="PATCH"||b==="POST"||b==="PROPFIND"||b==="PROPPATCH"||b==="PURGE"||b==="PUT"||b==="QUERY"||b==="REBIND"||b==="REPORT"||b==="SEARCH"||b==="SOURCE"||b==="SUBSCRIBE"||b==="TRACE"||b==="UNBIND"||b==="UNLINK"||b==="UNLOCK"||b==="UNSUBSCRIBE"||b==="acl"||b==="bind"||b==="checkout"||b==="connect"||b==="copy"||b==="delete"||b==="get"||b==="head"||b==="link"||b==="lock"||b==="m-search"||b==="merge"||b==="mkactivity"||b==="mkcalendar"||b==="mkcol"||b==="move"||b==="notify"||b==="options"||b==="patch"||b==="post"||b==="propfind"||b==="proppatch"||b==="purge"||b==="put"||b==="query"||b==="rebind"||b==="report"||b==="search"||b==="source"||b==="subscribe"||b==="trace"||b==="unbind"||b==="unlink"||b==="unlock"||b==="unsubscribe"))return Bt.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:ZKe.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=E===o}else var m=!0;if(m)if(t.validate!==void 0){let b=t.validate,E=o;if(typeof b!="boolean"){let S;if(S===void 0)if(b==="false"||b===0||b===null)S=!1;else if(b==="true"||b===1)S=!0;else return Bt.errors=[{instancePath:e+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;S!==void 0&&(b=S,t!==void 0&&(t.validate=S))}var m=E===o}else var m=!0}}}}}}}}}else return Bt.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Bt.errors=s,o===0}});var Bie=g((kat,Fm)=>{"use strict";var e7e=A("node:assert"),lx=Nie(),kw=Lie(),xw="The dispatch function has already been invoked",Fie=Die();function ux(t,e,r){return r===void 0?new Dm(t,e):qw(t,e,r)}function t7e(t,e){let r=t._lightMyRequest.payload;if(!r||r._readableState||typeof r.resume!="function")return e();let n=[];r.on("data",i=>n.push(Buffer.from(i))),r.on("end",()=>{let i=Buffer.concat(n);return t.headers["content-length"]=t.headers["content-length"]||""+i.length,delete t.headers["transfer-encoding"],t._lightMyRequest.payload=i,e()}),r.resume()}function Uie(t,e,r,n){return r.once("error",function(i){this.destroyed&&n.destroy(i)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),t7e(r,()=>t.call(e,r,n))}function qw(t,e,r){if(e=typeof e=="string"?{url:e}:e,e.validate!==!1&&(e7e(typeof t=="function","dispatchFunc should be a function"),!Fie(e)))throw new Error(Fie.errors.map(o=>o.message));let n=e.server||{},i=e.Request?lx.CustomRequest:lx;if(t.request&&t.request.app===t&&(Object.setPrototypeOf(Object.getPrototypeOf(t.request),i.prototype),Object.setPrototypeOf(Object.getPrototypeOf(t.response),kw.prototype)),typeof r=="function"){let s=new i(e),o=new kw(s,r);return Uie(t,n,s,o)}else return new Promise((s,o)=>{let a=new i(e),l=new kw(a,s,o);Uie(t,n,a,l)})}function Dm(t,e){typeof e=="string"?this.option={url:e}:this.option=Object.assign({},e),this.dispatch=t,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var r7e=["delete","get","head","options","patch","post","put","trace"];r7e.forEach(t=>{Dm.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(xw);return this.option.url=e,this.option.method=t.toUpperCase(),this}});var n7e=["body","cookies","headers","payload","query"];n7e.forEach(t=>{Dm.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(xw);return this.option[t]=e,this}});Dm.prototype.end=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(xw);if(this._hasInvoked=!0,typeof t=="function")qw(this.dispatch,this.option,t);else return this._promise=qw(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(t=>{t!=="constructor"&&(Dm.prototype[t]=function(...e){if(!this._promise){if(this._hasInvoked===!0)throw new Error(xw);this._hasInvoked=!0,this._promise=qw(this.dispatch,this.option)}return this._promise[t](...e)})});function i7e(t){return t instanceof lx||t instanceof kw||t?.constructor?.name==="_CustomLMRRequest"}Fm.exports=ux;Fm.exports.default=ux;Fm.exports.inject=ux;Fm.exports.isInjection=i7e});var ise=g((qat,zm)=>{"use strict";var s7e="5.2.1",o7e=mz(),jw=A("node:http"),a7e=A("node:diagnostics_channel"),Um,{kAvvioBoot:Bm,kChildren:cx,kServerBindings:Vie,kBodyLimit:l7e,kSupportedHTTPMethods:gu,kRoutePrefix:Hie,kLogLevel:u7e,kLogSerializers:c7e,kHooks:fx,kSchemaController:qa,kRequestAcceptVersion:f7e,kReplySerializerDefault:zie,kContentTypeParser:d7e,kReply:h7e,kRequest:p7e,kFourOhFour:m7e,kState:Lt,kOptions:dx,kPluginNameChain:Vm,kSchemaErrorFormatter:hx,kErrorHandler:Mw,kKeepAliveConnections:px,kChildLoggerFactory:mx,kGenReqId:gx}=Zt(),{createServer:g7e}=xz(),Hm=M0(),Lw=V0(),y7e=H0(),zf=Y$(),yu=sO(),Wie=oq(),{Hooks:_7e,hookRunnerApplication:Gie,supportedHooks:yx}=ea(),{createChildLogger:Kie,defaultChildLoggerFactory:b7e,createLogger:v7e}=Ih(),Yie=Aq(),{getGenReqId:Jie,reqIdGenFactory:Qie}=lw(),{buildRouting:w7e,validateBodyLimitOption:E7e}=tie(),S7e=lie(),nse=cie(),R7e=bie(),T7e=wie(),{appendStackTrace:P7e,AVVIO_ERRORS_MAP:Xie,..._u}=ur(),{defaultInitOptions:Sn}=nse,{FST_ERR_ASYNC_CONSTRAINT:$7e,FST_ERR_BAD_URL:O7e,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:I7e,FST_ERR_OPTIONS_NOT_OBJ:A7e,FST_ERR_QSP_NOT_FN:N7e,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:C7e,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:k7e,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:q7e,FST_ERR_INSTANCE_ALREADY_LISTENING:x7e,FST_ERR_REOPENED_CLOSE_SERVER:j7e,FST_ERR_ROUTE_REWRITE_NOT_STR:M7e,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:Zie,FST_ERR_ERROR_HANDLER_NOT_FN:L7e,FST_ERR_ROUTE_METHOD_INVALID:D7e}=_u,{buildErrorHandler:ese}=Nh(),tse=a7e.channel("fastify.initialization");function F7e(t){let e={};return["errorHandler","logLevel","logSerializers"].concat(yx).forEach(n=>{e[n]=t.store[n]}),Object.assign({},e)}function _x(t){if(t&&typeof t!="object")throw new A7e;if(t=Object.assign({},t),t.querystringParser&&typeof t.querystringParser!="function")throw new N7e(typeof t.querystringParser);if(t.schemaController&&t.schemaController.bucket&&typeof t.schemaController.bucket!="function")throw new C7e(typeof t.schemaController.bucket);E7e(t.bodyLimit);let e=typeof t.requestIdHeader=="string"&&t.requestIdHeader.length!==0?t.requestIdHeader.toLowerCase():t.requestIdHeader===!0&&"request-id",r=Qie(e,t.genReqId),n=t.requestIdLogLabel||"reqId",i=t.bodyLimit||Sn.bodyLimit,s=t.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},t.ajv),a=t.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new k7e(typeof o.customOptions);if(!o.plugins||!Array.isArray(o.plugins))throw new q7e(typeof o.plugins);let{logger:l,hasLogger:u}=v7e(t);t.connectionTimeout=t.connectionTimeout||Sn.connectionTimeout,t.keepAliveTimeout=t.keepAliveTimeout||Sn.keepAliveTimeout,t.maxRequestsPerSocket=t.maxRequestsPerSocket||Sn.maxRequestsPerSocket,t.requestTimeout=t.requestTimeout||Sn.requestTimeout,t.logger=l,t.requestIdHeader=e,t.requestIdLogLabel=n,t.disableRequestLogging=s,t.ajv=o,t.clientErrorHandler=t.clientErrorHandler||$;let c=nse(t);t.exposeHeadRoutes=c.exposeHeadRoutes;let f=w7e({config:{defaultRoute:k,onBadUrl:ae,constraints:t.constraints,ignoreTrailingSlash:t.ignoreTrailingSlash||Sn.ignoreTrailingSlash,ignoreDuplicateSlashes:t.ignoreDuplicateSlashes||Sn.ignoreDuplicateSlashes,maxParamLength:t.maxParamLength||Sn.maxParamLength,caseSensitive:t.caseSensitive,allowUnsafeRegex:t.allowUnsafeRegex||Sn.allowUnsafeRegex,buildPrettyMeta:F7e,querystringParser:t.querystringParser,useSemicolonDelimiter:t.useSemicolonDelimiter??Sn.useSemicolonDelimiter}}),h=S7e(t),d=tr(f,t);t.http2SessionTimeout=c.http2SessionTimeout;let{server:p,listen:m}=g7e(t,d),y=typeof p.closeAllConnections=="function",_=typeof p.closeIdleConnections=="function",w=t.forceCloseConnections;if(w==="idle"&&!_)throw new I7e;typeof w!="boolean"&&(w=_?"idle":!1);let v=!y&&w===!0?new Set:T7e(),b=Hm.setupResponseListeners,E=Wie.buildSchemaController(null,t.schemaController),R={[Lt]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,readyPromise:null},[px]:v,[gu]:{bodyless:new Set(["GET","HEAD","TRACE"]),bodywith:new Set(["DELETE","OPTIONS","PATCH","PUT","POST"])},[dx]:t,[cx]:[],[Vie]:[],[l7e]:i,[Hie]:"",[u7e]:"",[c7e]:null,[fx]:new _7e,[qa]:E,[hx]:null,[Mw]:ese(),[mx]:b7e,[zie]:null,[d7e]:new yu(i,t.onProtoPoisoning||Sn.onProtoPoisoning,t.onConstructorPoisoning||Sn.onConstructorPoisoning),[h7e]:Hm.buildReply(Hm),[p7e]:Lw.buildRequest(Lw,t.trustProxy),[m7e]:h,[Yie.kRegisteredPlugins]:[],[Vm]:["fastify"],[Bm]:null,[gx]:r,routing:d,delete:function(x,D,G){return f.prepareRoute.call(this,{method:"DELETE",url:x,options:D,handler:G})},get:function(x,D,G){return f.prepareRoute.call(this,{method:"GET",url:x,options:D,handler:G})},head:function(x,D,G){return f.prepareRoute.call(this,{method:"HEAD",url:x,options:D,handler:G})},trace:function(x,D,G){return f.prepareRoute.call(this,{method:"TRACE",url:x,options:D,handler:G})},patch:function(x,D,G){return f.prepareRoute.call(this,{method:"PATCH",url:x,options:D,handler:G})},post:function(x,D,G){return f.prepareRoute.call(this,{method:"POST",url:x,options:D,handler:G})},put:function(x,D,G){return f.prepareRoute.call(this,{method:"PUT",url:x,options:D,handler:G})},options:function(x,D,G){return f.prepareRoute.call(this,{method:"OPTIONS",url:x,options:D,handler:G})},all:function(x,D,G){return f.prepareRoute.call(this,{method:this.supportedMethods,url:x,options:D,handler:G})},route:function(x){return f.route.call(this,{options:x})},hasRoute:function(x){return f.hasRoute.call(this,{options:x})},findRoute:function(x){return f.findRoute(x)},log:l,withTypeProvider:C,addHook:z,addSchema:ge,getSchema:E.getSchema.bind(E),getSchemas:E.getSchemas.bind(E),setValidatorCompiler:Vt,setSerializerCompiler:Ne,setSchemaController:si,setReplySerializer:Rt,setSchemaErrorFormatter:Ae,setGenReqId:xa,addContentTypeParser:yu.helpers.addContentTypeParser,hasContentTypeParser:yu.helpers.hasContentTypeParser,getDefaultJsonParser:yu.defaultParsers.getDefaultJsonParser,defaultTextParser:yu.defaultParsers.defaultTextParser,removeContentTypeParser:yu.helpers.removeContentTypeParser,removeAllContentTypeParsers:yu.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(I){return this[Yie.kRegisteredPlugins].includes(I)||this[Vm].includes(I)},listen:m,server:p,addresses:function(){let I=this[Vie].map(x=>x.address());return I.push(this.server.address()),I.filter(x=>x)},decorate:zf.add,hasDecorator:zf.exist,decorateReply:zf.decorateReply,decorateRequest:zf.decorateRequest,hasRequestDecorator:zf.existRequest,hasReplyDecorator:zf.existReply,addHttpMethod:mn,inject:j,printRoutes:Z,setNotFoundHandler:W,setErrorHandler:xe,setChildLoggerFactory:wt,initialConfig:c,addConstraintStrategy:f.addConstraintStrategy.bind(f),hasConstraintStrategy:f.hasConstraintStrategy.bind(f)};Object.defineProperties(R,{listeningOrigin:{get(){let I=this.addresses().slice(-1).pop();if(typeof I=="string")return I;let x=I.family==="IPv6"?`[${I.address}]`:I.address;return`${this[dx].https?"https":"http"}://${x}:${I.port}`}},pluginName:{configurable:!0,get(){return this[Vm].length>1?this[Vm].join(" -> "):this[Vm][0]}},prefix:{configurable:!0,get(){return this[Hie]}},validatorCompiler:{configurable:!0,get(){return this[qa].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[qa].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[mx]}},version:{configurable:!0,get(){return s7e}},errorHandler:{configurable:!0,get(){return this[Mw].func}},genReqId:{configurable:!0,get(){return this[gx]}},supportedMethods:{configurable:!1,get(){return[...this[gu].bodyless,...this[gu].bodywith]}}}),t.schemaErrorFormatter&&(rse(t.schemaErrorFormatter),R[hx]=t.schemaErrorFormatter.bind(R));let S=Number(t.pluginTimeout),P=o7e(R,{autostart:!1,timeout:isNaN(S)===!1?S:Sn.pluginTimeout,expose:{use:"register"}});P.override=R7e,P.on("start",()=>R[Lt].started=!0),R[Bm]=R.ready,R.ready=N,R.printPlugins=P.prettyPrint.bind(P),P.once("preReady",()=>{R.onClose((I,x)=>{R[Lt].closing=!0,f.closeRoutes(),Gie("preClose",R[Bm],R,function(){if(R[Lt].listening){if(w==="idle")I.server.closeIdleConnections();else if(y&&w)I.server.closeAllConnections();else if(w===!0)for(let D of R[px])D.destroy(),R[px].delete(D)}!t.serverFactory||R[Lt].listening?I.server.close(function(D){D&&D.code!=="ERR_SERVER_NOT_RUNNING"?x(null):x()}):process.nextTick(x,null)})})});let T=new y7e({server:R,config:{}});return R.setNotFoundHandler(),h.arrange404(R),f.setup(t,{avvio:P,fourOhFour:h,logger:l,hasLogger:u,setupResponseListeners:b,throwIfAlreadyStarted:O,keepAliveConnections:v}),p.on("clientError",t.clientErrorHandler.bind(R)),tse.hasSubscribers&&tse.publish({fastify:R}),"asyncDispose"in Symbol&&(R[Symbol.asyncDispose]=function(){return R.close()}),R;function O(I){if(R[Lt].started)throw new x7e(I)}function j(I,x){if(Um===void 0&&(Um=Bie()),R[Lt].started){if(R[Lt].closing){let D=new j7e;if(x){x(D);return}else return Promise.reject(D)}return Um(d,I,x)}if(x)this.ready(D=>{D?x(D,null):Um(d,I,x)});else return Um((D,G)=>{this.ready(function(le){if(le){G.emit("error",le);return}d(D,G)})},I)}function N(I){if(this[Lt].readyPromise!==null){if(I!=null){this[Lt].readyPromise.then(()=>I(null,R),I);return}return this[Lt].readyPromise}let x,D;if(process.nextTick(G),this[Lt].readyPromise=new Promise(function(B,Xe){x=B,D=Xe}),I)this[Lt].readyPromise.then(()=>I(null,R),I);else return this[Lt].readyPromise;function G(){R[Bm]((B,Xe)=>{B||R[Lt].started||R[Lt].ready||R[Lt].booting?le(B):(R[Lt].booting=!0,Gie("onReady",R[Bm],R,le)),Xe()})}function le(B){if(B=B!=null&&Xie[B.code]!=null?P7e(B,new Xie[B.code](B.message)):B,B)return D(B);x(R),R[Lt].booting=!1,R[Lt].ready=!0,R[Lt].promise=null}}function C(){return this}function z(I,x){if(O('Cannot call "addHook"!'),x==null)throw new _u.FST_ERR_HOOK_INVALID_HANDLER(I,x);if(I==="onSend"||I==="preSerialization"||I==="onError"||I==="preParsing"){if(x.constructor.name==="AsyncFunction"&&x.length===4)throw new _u.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(I==="onReady"||I==="onListen"){if(x.constructor.name==="AsyncFunction"&&x.length!==0)throw new _u.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(I==="onRequestAbort"){if(x.constructor.name==="AsyncFunction"&&x.length!==1)throw new _u.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x.constructor.name==="AsyncFunction"&&x.length===3)throw new _u.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return I==="onClose"?this.onClose(x.bind(this)):I==="onReady"||I==="onListen"||I==="onRoute"?this[fx].add(I,x):this.after((G,le)=>{D.call(this,I,x),le(G)}),this;function D(G,le){this[fx].add(G,le),this[cx].forEach(B=>D.call(B,G,le))}}function ge(I){return O('Cannot call "addSchema"!'),this[qa].add(I),this[cx].forEach(x=>x.addSchema(I)),this}function $(I,x){if(I.code==="ECONNRESET"||x.destroyed)return;let D,G,le,B;I.code==="ERR_HTTP_REQUEST_TIMEOUT"?(G="408",le=jw.STATUS_CODES[G],D=`{"error":"${le}","message":"Client Timeout","statusCode":408}`,B="timeout"):I.code==="HPE_HEADER_OVERFLOW"?(G="431",le=jw.STATUS_CODES[G],D=`{"error":"${le}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,B="header_overflow"):(G="400",le=jw.STATUS_CODES[G],D=`{"error":"${le}","message":"Client Error","statusCode":400}`,B="error"),this.log.trace({err:I},`client ${B}`),x.writable&&x.write(`HTTP/1.1 ${G} ${le}\r
Content-Length: ${D.length}\r
Content-Type: application/json\r
\r
${D}`),x.destroy(I)}function k(I,x){I.headers["accept-version"]!==void 0&&(I.headers[f7e]=I.headers["accept-version"],I.headers["accept-version"]=void 0),h.router.lookup(I,x)}function ae(I,x,D){if(a){let le=Jie(T.server,x),B=Kie(T,l,x,le),Xe=new Lw(le,null,x,null,B,T),oi=new Hm(D,Xe,B);return s===!1&&B.info({req:Xe},"incoming request"),a(new O7e(I),Xe,oi)}let G=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${I}' is not a valid url component","statusCode":400}`;D.writeHead(400,{"Content-Type":"application/json","Content-Length":G.length}),D.end(G)}function U(I,x,D){if(I!==!1)return function(le){if(le){if(a){let Xe=Jie(T.server,x),oi=Kie(T,l,x,Xe),Et=new Lw(Xe,null,x,null,oi,T),As=new Hm(D,Et,oi);return s===!1&&oi.info({req:Et},"incoming request"),a(new $7e,Et,As)}let B='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';D.writeHead(500,{"Content-Type":"application/json","Content-Length":B.length}),D.end(B)}}}function W(I,x){return O('Cannot call "setNotFoundHandler"!'),h.setNotFoundHandler.call(this,I,x,P,f.routeHandler),this}function Vt(I){return O('Cannot call "setValidatorCompiler"!'),this[qa].setValidatorCompiler(I),this}function Ae(I){return O('Cannot call "setSchemaErrorFormatter"!'),rse(I),this[hx]=I.bind(this),this}function Ne(I){return O('Cannot call "setSerializerCompiler"!'),this[qa].setSerializerCompiler(I),this}function si(I){O('Cannot call "setSchemaController"!');let x=this[qa],D=Wie.buildSchemaController(x,Object.assign({},x.opts,I));return this[qa]=D,this.getSchema=D.getSchema.bind(D),this.getSchemas=D.getSchemas.bind(D),this}function Rt(I){return O('Cannot call "setReplySerializer"!'),this[zie]=I,this}function xe(I){if(O('Cannot call "setErrorHandler"!'),typeof I!="function")throw new L7e;return this[Mw]=ese(this[Mw],I.bind(this)),this}function wt(I){return O('Cannot call "setChildLoggerFactory"!'),this[mx]=I,this}function Z(I={}){return I.includeMeta=I.includeHooks?I.includeMeta?yx.concat(I.includeMeta):yx:I.includeMeta,f.printRoutes(I)}function tr(I,{rewriteUrl:x,logger:D}){let G;return function(B,Xe){if(G===void 0&&(G=I.isAsyncConstraint()),x){B.originalUrl=B.url;let oi=x.call(R,B);if(typeof oi=="string")B.url=oi;else{let Et=new M7e(B.url,typeof oi);B.destroy(Et)}}I.routing(B,Xe,U(G,B,Xe))}}function xa(I){return O('Cannot call "setGenReqId"!'),this[gx]=Qie(this[dx].requestIdHeader,I),this}function mn(I,{hasBody:x=!1}={}){if(typeof I!="string"||jw.METHODS.indexOf(I)===-1)throw new D7e;x===!0?(this[gu].bodywith.add(I),this[gu].bodyless.delete(I)):(this[gu].bodywith.delete(I),this[gu].bodyless.add(I));let D=I.toLowerCase();return this.hasDecorator(D)||this.decorate(D,function(G,le,B){return f.prepareRoute.call(this,{method:I,url:G,options:le,handler:B})}),this}}function rse(t){if(typeof t!="function")throw new Zie(typeof t);if(t.constructor.name==="AsyncFunction")throw new Zie("AsyncFunction")}zm.exports=_x;zm.exports.errorCodes=_u;zm.exports.fastify=_x;zm.exports.default=_x});var lse=g(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.OperationError=Rn.InvalidAccessError=Rn.GPIOPort=Rn.GPIOPortMap=Rn.GPIOAccess=void 0;Rn.requestGPIOAccess=z7e;var ase=A("node:events"),Wf=A("node:fs"),U7e=A("node:os"),Gf=A("node:path"),B7e=100,Kf="/sys/class/gpio",V7e=1024,ose=65535;function vx(t){let e=Number.parseInt(t,10);if(0<=e&&e<=ose)return e;throw new RangeError(`Must be between 0 and ${ose}.`)}var H7e=process.platform==="linux"&&6.6<=Number(U7e.release().match(/\d+\.\d+/))?512:0,Dw=class extends ase.EventEmitter{_ports;onchange;constructor(e){super(),this._ports=e??new Wm,this._ports.forEach(r=>r.on("change",n=>{this.emit("change",n)})),this.on("change",r=>{this.onchange!==void 0&&this.onchange(r)})}get ports(){return this._ports}async unexportAll(){await Promise.all([...this.ports.values()].map(e=>e.exported?e.unexport():void 0))}};Rn.GPIOAccess=Dw;var Wm=class extends Map{};Rn.GPIOPortMap=Wm;var Fw=class extends ase.EventEmitter{_portNumber;_pollingInterval;_direction;_exported;_exportRetry;_value;_timeout;onchange;constructor(e){super(),this._portNumber=vx(e.toString())+H7e,this._pollingInterval=B7e,this._direction=new Mi("Unknown direction."),this._exported=new Mi("Unknown export."),this._exportRetry=0,this.on("change",r=>{this.onchange!==void 0&&this.onchange(r)})}get portNumber(){return this._portNumber}get portName(){return`gpio${this.portNumber}`}get pinName(){return""}get direction(){if(this._direction instanceof Mi)throw this._direction;return this._direction}get exported(){if(this._exported instanceof Mi)throw this._exported;return this._exported}async export(e){if(!/^(in|out)$/.test(e))throw new Yf('Must be "in" or "out".');try{await Wf.promises.access(Gf.join(Kf,this.portName)),this._exported=!0}catch{this._exported=!1}try{clearInterval(this._timeout),this.exported||await Wf.promises.writeFile(Gf.join(Kf,"export"),String(this.portNumber)),await Wf.promises.writeFile(Gf.join(Kf,this.portName,"direction"),e),e==="in"&&(this._timeout=setInterval(this.read.bind(this),this._pollingInterval))}catch(r){if(this._exportRetry<10)await W7e(100),console.warn("May be the first time port access. Retry.."),++this._exportRetry,await this.export(e);else throw new Mi(r)}this._direction=e,this._exported=!0}async unexport(){clearInterval(this._timeout);try{await Wf.promises.writeFile(Gf.join(Kf,"unexport"),String(this.portNumber))}catch(e){throw new Mi(e)}this._exported=!1}async read(){if(!(this.exported&&this.direction==="in"))throw new Yf('The exported must be true and value of direction must be "in".');try{let e=await Wf.promises.readFile(Gf.join(Kf,this.portName,"value")),r=vx(e.toString());return this._value!==r&&(this._value=r,this.emit("change",{value:r,port:this})),r}catch(e){throw new Mi(e)}}async write(e){if(!(this.exported&&this.direction==="out"))throw new Yf('The exported must be true and value of direction must be "out".');try{await Wf.promises.writeFile(Gf.join(Kf,this.portName,"value"),vx(e.toString()).toString())}catch(r){throw new Mi(r)}}};Rn.GPIOPort=Fw;var Yf=class extends Error{constructor(e){super(e),this.name=this.constructor.name}};Rn.InvalidAccessError=Yf;var Mi=class extends Error{constructor(e){super(e),this.name=this.constructor.name}};Rn.OperationError=Mi;async function z7e(){let t=new Wm([...Array(V7e).keys()].map(e=>[e,new Fw(e)]));return new Dw(t)}function W7e(t){return new Promise(e=>setTimeout(e,t))}});var Jr=Qf(uj(),1),Jse=(0,Jr.cleanEnv)(process.env,{MQTT_BROKER:(0,Jr.str)({desc:"MQTT\u30D6\u30ED\u30FC\u30AB\u30FC",example:"mqtt://localhost"}),MQTT_USERNAME:(0,Jr.str)({desc:"MQTT\u30E6\u30FC\u30B6\u540D",default:void 0}),MQTT_PASSWORD:(0,Jr.str)({desc:"MQTT\u30D1\u30B9\u30EF\u30FC\u30C9",default:void 0}),MQTT_TASK_INTERVAL:(0,Jr.num)({desc:"MQTT\u30BF\u30B9\u30AF\u5B9F\u884C\u9593\u9694",default:100}),ENTITY_QOS:(0,Jr.num)({desc:"\u30A8\u30F3\u30C6\u30A3\u30C6\u30A3\u306EQOS\u8A2D\u5B9A",choices:[0,1,2],default:1}),LOG_LEVEL:(0,Jr.str)({desc:"\u30ED\u30B0\u30EC\u30D9\u30EB",default:"info"}),HA_DISCOVERY_PREFIX:(0,Jr.str)({desc:"https://www.home-assistant.io/integrations/mqtt/#discovery-options",default:"homeassistant"}),PORT:(0,Jr.port)({desc:"HTTP\u30B5\u30FC\u30D0\u30FC\u306E\u30DD\u30FC\u30C8",default:3e3}),AVAILABILITY_INTERVAL:(0,Jr.num)({desc:"\u30AA\u30F3\u30E9\u30A4\u30F3\u72B6\u614B\u3092\u9001\u4FE1\u3059\u308B\u9593\u9694",default:1e4})}),nr=Jse;var Gi=Qf(WF(),1),Whe=(0,Gi.createLogger)({level:nr.LOG_LEVEL,format:Gi.format.combine(Gi.format.errors({stack:!0}),Gi.format.colorize(),Gi.format.timestamp({format:"YYYY-MM-DD HH:mm:ss.SSS"}),Gi.format.printf(({timestamp:t,level:e,message:r,stack:n})=>{let i=`[${t}] [${e}]: ${r}`;return typeof n=="string"&&(i=`${i}
${n}`),i})),transports:[new Gi.transports.Console({stderrLevels:["warn","error"]})]}),ct=Whe;var Ki={COMMAND:"set",STATE:"state",AVAILABILITY:"availability"};function Yi(t,e,r){return`jema2mqtt/${t}/${e.id}/${r}`}function GF(t,e,r){let n=a=>{e.forEach(l=>r.publish(Yi(t,l,Ki.AVAILABILITY),a))},i=()=>n("online"),s=setInterval(i,nr.AVAILABILITY_INTERVAL);return{pushOnline:i,close:()=>{clearInterval(s),n("offline")}}}var t1="jema2mqtt",r1="1.6.1";var n1="https://github.com/nana4rider/jema2mqtt";var or={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"};function KF(t,e){let r={unique_id:`jema2mqtt_${t}_${e.id}`,name:e.name,command_topic:Yi(t,e,Ki.COMMAND),state_topic:Yi(t,e,Ki.STATE),availability_topic:Yi(t,e,Ki.AVAILABILITY),optimistic:!1,qos:nr.ENTITY_QOS,retain:!1},{domain:n}=e;if(n==="lock")return{...r,payload_lock:or.ACTIVE,payload_unlock:or.INACTIVE,state_locked:or.ACTIVE,state_unlocked:or.INACTIVE};if(n==="switch")return{...r,payload_on:or.ACTIVE,payload_off:or.INACTIVE,state_on:or.ACTIVE,state_off:or.INACTIVE};if(n==="cover")return{...r,payload_close:or.ACTIVE,payload_open:or.INACTIVE,state_closed:or.ACTIVE,state_open:or.INACTIVE};throw new Error(`unknown domain: ${e.domain}`)}function YF(t){return{device:{identifiers:[`jema2mqtt_${t}`],name:`jema2mqtt.${t}`,model:"jema2mqtt",manufacturer:"nana4rider"}}}function JF(){let t={};return typeof t1=="string"&&(t.name=t1),typeof r1=="string"&&(t.sw_version=r1),typeof n1=="string"&&(t.support_url=n1),{origin:t}}var AH=Qf(OH(),1);import{setTimeout as IH}from"timers/promises";async function pP(t,e){let r=await AH.default.connectAsync(nr.MQTT_BROKER,{username:nr.MQTT_USERNAME,password:nr.MQTT_PASSWORD}),n=[];r.on("message",(u,c)=>{ct.debug(`[MQTT] receive topic: ${u}`);try{let f=e(u,c.toString());f instanceof Promise&&f.catch(h=>{ct.error("[MQTT] message error:",h)})}catch(f){ct.error("[MQTT] message error:",f)}}),ct.info("[MQTT] connected"),await r.subscribeAsync(t);for(let u of t)ct.debug(`[MQTT] subscribe topic: ${u}`);let i=!0,s=(async()=>{for(;i;){ct.silly(`[MQTT] taskQueue: ${n.length}`);let u=n.shift();u&&await u(),await IH(nr.MQTT_TASK_INTERVAL)}})();return{get taskQueueSize(){return n.length},publish:(u,c,f)=>{n.push(async()=>{await r.publishAsync(u,c,f)})},addSubscribe:u=>{n.push(async()=>{await r.subscribeAsync(u)})},close:async(u=!1)=>{if(u){for(ct.info("[MQTT] waiting for taskQueue to empty...");n.length>0;)await IH(nr.MQTT_TASK_INTERVAL);ct.info("[MQTT] taskQueue is empty")}i=!1,await s,ct.info("[MQTT] task stopped"),await r.endAsync(),ct.info("[MQTT] closed")}}}async function mP(t,e,r){let n=JF(),i=YF(t),s=async(l,u)=>{let c=e.find(d=>Yi(t,d,Ki.COMMAND)===l);if(!c)return;let f=r.get(c.id),h=await f.getMonitor();(u===or.ACTIVE&&!h||u===or.INACTIVE&&h)&&await f.sendControl()},o=e.map(l=>Yi(t,l,Ki.COMMAND)),a=await pP(o,s);return await Promise.all(e.map(async l=>{let u=h=>a.publish(Yi(t,l,Ki.STATE),h?or.ACTIVE:or.INACTIVE,{retain:!0}),c=r.get(l.id);c.setMonitorListener(h=>void u(h)),u(await c.getMonitor());let f={...KF(t,l),...i,...n};a.publish(`${nr.HA_DISCOVERY_PREFIX}/${l.domain}/${f.unique_id}/config`,JSON.stringify(f),{qos:1,retain:!0})})),a}var sse=Qf(ise(),1);async function bx(){let t=(0,sse.default)();return t.get("/health",()=>({status:"ok",uptime:process.uptime(),timestamp:Date.now()})),await t.listen({host:"0.0.0.0",port:nr.PORT}),ct.info(`[HTTP] listen port: ${nr.PORT}`),t}var use=Qf(lse(),1);import{setTimeout as G7e}from"timers/promises";var K7e=250;async function Ex(t,e){let r=await(0,use.requestGPIOAccess)(),n=r.ports.get(t);if(!n)throw new Error(`GPIO(${t}) initialization failed.`);await n.export("out");let i=r.ports.get(e);if(!i)throw new Error(`GPIO(${e}) initialization failed.`);return await i.export("in"),ct.info(`[JEMA] initialized control=${t}, monitor=${e}`),{sendControl:async()=>{ct.debug("[JEMA] sendControl"),await n.write(1),await G7e(K7e),await n.write(0)},getMonitor:async()=>{let s=await i.read();return ct.debug(`[JEMA] getMonitor: ${s}`),s===1},setMonitorListener:s=>{i.onchange=({value:o})=>(ct.debug(`[JEMA] onchange: ${o}`),s(o===1))},close:async()=>{for(let s of[n,i]){let{portNumber:o}=s;try{await s.unexport(),ct.info(`[JEMA] GPIO(${o}) successfully unexported.`)}catch(a){ct.error(`[JEMA] Failed to unexport GPIO(${o}):`,a)}}}}}import Y7e from"fs/promises";async function J7e(){ct.info("start");let{deviceId:t,entities:e}=JSON.parse(await Y7e.readFile("./config.json","utf-8")),r=new Map(await Promise.all(e.map(async({id:a,controlGpio:l,monitorGpio:u})=>{let c=await Ex(l,u);return[a,c]}))),n=await mP(t,e,r),i=await bx(),s=GF(t,e,n),o=async()=>{ct.info("shutdown"),s.close(),await n.close(!0),await i.close(),await Promise.all(Array.from(r.values()).map(a=>a.close())),process.exit(0)};process.on("SIGINT",()=>void o()),process.on("SIGTERM",()=>void o()),s.pushOnline(),ct.info("ready")}try{await J7e()}catch(t){ct.error("main() error:",t),process.exit(1)}
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@fastify/forwarded/index.js:
  (*!
   * forwarded
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2021 Fastify collaborators
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toad-cache/dist/toad-cache.cjs:
  (**
   * toad-cache
   *
   * @copyright 2024 Igor Savin <kibertoad@gmail.com>
   * @license MIT
   * @version 3.7.0
   *)

light-my-request/lib/form-data.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
